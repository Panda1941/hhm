political_actions = {

	targeted_race_for_the_bomb = {

		icon = generic_research

		allowed = {
			always = yes
		}

		available = {
			#Target is FROM
			has_tech = atomic_research
			NOT = { has_global_flag = first_nuke_dropped }
			NOT = { has_idea = race_for_the_bomb }
		}

		target_root_trigger = {
            has_tech = atomic_research
            NOT = { has_global_flag = first_nuke_dropped }
            NOT = { has_idea = race_for_the_bomb }
		}

		#If this trigger matches a country.
		target_trigger = {
			#Target is FROM
			FROM = {
        		NOT = { is_in_faction_with = ROOT }
				has_tech = nuclear_reactor
				any_owned_state = {
					nuclear_reactor > 0
				}
			}
		}

		visible = {
            #Target is FROM
            has_tech = atomic_research
            NOT = { has_global_flag = first_nuke_dropped }
            NOT = { has_idea = race_for_the_bomb }
            FROM = {
        		NOT = { is_in_faction_with = ROOT }
				has_tech = nuclear_reactor
				any_owned_state = {
					nuclear_reactor > 0
				}
			}
		}

		complete_effect = {
			set_country_flag = racing_for_the_bomb
			add_ideas = race_for_the_bomb
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				any_other_country = { has_tech = nukes }
			}
		}
	}

	improved_worker_conditions = {

		icon = generic_industry

		available = {
			has_stability < 1.0
			if = {
				limit = {
					tag = SPR
				}
				NOT = {
					has_idea = SPR_political_violence
				}
			}
		}

		visible = {
			always = yes
		}

		fire_only_once = no

		modifier = {
			stability_weekly = 0.005
			consumer_goods_factor = 0.05
			industrial_capacity_factory = -0.1
		}

		days_remove = 180
		days_re_enable = 540

		cost = 100

		complete_effect = {

		}

		ai_will_do = {
			base = 0
			modifier = {
				add = 1
				has_stability < 0.6
				has_political_power > 155 #Spend on other things first
			}
			modifier = {
				factor = 0
				original_tag = SPR
				NOT = { has_global_flag = spanish_civil_war }
			}
		}
	}

	promises_of_peace = {

		icon = generic_political_discourse

		available = {
			has_war = no
			has_war_support > 0.2
			has_stability < 1.0
			if = {
				limit = {
					tag = SPR
				}
				NOT = {
					has_idea = SPR_political_violence
				}
			}
		}

		visible = {
			always = yes
		}

		remove_trigger = {
			has_war = yes
			has_war_support < 0.05
		}

		fire_only_once = no

		modifier = {
			stability_weekly = 0.005
			war_support_weekly = -0.01
			political_power_gain = -0.5
		}

		days_remove = 90
		days_re_enable = 360

		cost = 50

		complete_effect = {

		}

		ai_will_do = {
			base = 0
			modifier = {
				add = 1
				has_stability < 0.4
			}
			modifier = {
				factor = 0
				original_tag = SPR
				NOT = { has_global_flag = spanish_civil_war }
			}
		}
	}
}

economy_decisions = {

	dismantle_maginot = {

		icon = generic_construction

		allowed = {
			NOT = { OR = { original_tag = GER original_tag = FRA } }
		}

		cost = 50
		fire_only_once = yes

		days_remove = 200

		available = {
			controls_state = 28
			if = {
				limit = {
					FRA = { has_completed_focus = FRA_extend_the_maginot_line }
				}
				controls_state = 18
				controls_state = 29
			}
		}

		visible = {
			FRA = {
				any_owned_state = {
					is_controlled_by = ROOT
				}
			}
			NOT = { is_in_faction_with = FRA }
		}

		modifier = {
			civilian_factory_use = 5
		}

		complete_effect = {
			28 = {
				set_building_level = {
					type = bunker
					level = 2
					province = {
						all_provinces = yes
						level > 2
					}
				}
			}
			if = {
				limit = {
					FRA = { has_completed_focus = FRA_extend_the_maginot_line }
				}
				18 = {
					set_building_level = {
						type = bunker
						level = 2
						province = {
							all_provinces = yes
							level > 2
						}
					}
				}
				29 = {
					set_building_level = {
						type = bunker
						level = 2
						province = {
							all_provinces = yes
							level > 2
						}
					}
				}
			}
			if = {
				limit = {
					has_idea = FRA_protected_by_the_maginot_line
				}
				remove_ideas = FRA_protected_by_the_maginot_line
			}
		}
	}

	restructure_supply_system = { #one time boost to get a few cheap supply hubs


		visible = { 
			OR = {
				is_major = no
				AND = {
					is_faction_leader = yes
					num_of_factories < 51 #would be a minor if it wasn't for faction leader status
				}
			}
		}
		fire_only_once = yes

		days_remove = 120

		ai_will_do = {
			factor = 1
			modifier = {
				num_of_factories < 30
				factor = 0
			}
		}

		modifier = {
			production_speed_supply_node_factor = 3
		}

		complete_effect = {
			set_variable = { node_goal = num_of_supply_nodes }
			add_to_variable = { node_goal = 3 } #maximum 3 additional nodes
		}

		cancel_trigger = {
			
			 check_variable = { node_goal < num_of_supply_nodes } #if the number of supply nodes exceeds the old number by +3, immediately cancel
		}
	}
	seize_some_trains_woo = { #repeating train seize

		visible = { 
			num_of_factories < 60
		}
		
		available = {
			has_equipment = { train_equipment < 101 }
			has_tech = basic_train
		}
		
		days_remove = 180

		ai_will_do = {
			factor = 1
			modifier = {
				has_stability < 0.56
				factor = 0
			}
		}

		complete_effect = {
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 15
			}
			add_stability = -0.05
		}
	}			
}

propaganda_efforts = {
	war_propaganda = {

		icon = generic_prepare_civil_war

		available = {
			NOT = { has_idea = HMM_war_prop }
			threat > 0.5
			has_war_support < 0.5
			has_offensive_war = no
			if = {
				limit = {
					tag = SPR
					has_dlc = "La Resistance"
				}
				NOT = {
					has_idea = SPR_political_violence
				}
			}
			if = {
				limit = {
					original_tag = SPR
					has_dlc = "La Resistance"
				}
				has_global_flag = scw_over
			}
		}

		fire_only_once = no

		days_remove = 90
		days_re_enable = 180

		cost = 150

		complete_effect = {
			add_timed_idea = {
				idea = HMM_war_prop
				days = 90
			}
		}

		ai_will_do = {
			base = 0
		}
	}

	#Propaganda campaign against a country in offensive that has caused a lot of tension and started a war
	war_propaganda_against_warmonger = {

		icon = generic_prepare_civil_war

		available = {
			NOT = { has_idea = HMM_war_prop }
			FROM = {
				OR = {
					is_justifying_wargoal_against = ROOT
					AND = {
						has_war_with = ROOT
						is_neighbor_of = ROOT
					}
					has_offensive_war = yes
				}
			}
			if = {
				limit = {
					tag = SPR
					has_dlc = "La Resistance"
				}
				NOT = {
					has_idea = SPR_political_violence
				}
			}
			if = {
				limit = {
					original_tag = SPR
					has_dlc = "La Resistance"
				}
				has_global_flag = scw_over
			}
			
			# lower the cost for neighbors
			if = {
				limit = {
					FROM = {
						is_neighbor_of = ROOT
					}
					set_temp_variable = { war_propaganda_cost = 50 }
				}
			}
		}

		visible = {
			FROM = {
				NOT = { is_in_faction_with = ROOT }
				OR = {
					is_justifying_wargoal_against = ROOT
					AND = {
						is_neighbor_of = ROOT
						OR = {
							has_war_with = ROOT
							AND = {
								NOT = { has_government = ROOT }
								has_offensive_war = yes
								has_added_tension_amount > 5
							}
						}
					}
					AND = {
						NOT = { is_neighbor_of = ROOT }
						OR = {
							has_offensive_war_with = ROOT
							AND = {
								NOT = { has_government = ROOT }
								has_offensive_war = yes
								has_added_tension_amount > 30
							}
						}
					}
				}
			}
		}

		target_trigger = {
			FROM = {
				NOT = { is_in_faction_with = ROOT }
				OR = {
					is_justifying_wargoal_against = ROOT
					AND = {
						is_neighbor_of = ROOT
						OR = {
							has_war_with = ROOT
							AND = {
								NOT = { has_government = ROOT }
								has_offensive_war = yes
								has_added_tension_amount > 5
							}
						}
					}
					AND = {
						NOT = { is_neighbor_of = ROOT }
						OR = {
							has_offensive_war_with = ROOT
							AND = {
								NOT = { has_government = ROOT }
								has_offensive_war = yes
								has_added_tension_amount > 30
							}
						}
					}
				}
			}
		}

		days_remove = 90
		days_re_enable = 180

		fire_only_once = yes

		cost = var:war_propaganda_cost?75

		complete_effect = {
			add_timed_idea = {
				idea = HMM_war_prop
				days = 90
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
}

operations = {

	blow_suez_canal = {

		icon = GFX_decision_generic_ignite_civil_war
		allowed = {
			has_dlc = "Waking the Tiger"
		}
		available = {
			controls_state = 446
			controls_state = 453
			OR = {
				NOT = {
					owns_state = 446
					owns_state = 453
				}
				any_enemy_country = {
					OR = {
						controls_state = 452
						controls_state = 447
						controls_state = 456
						controls_state = 457
						controls_state = 454
						controls_state = 455
					}
				}
			}
		}
	
		visible = {
			has_war = yes
			NOT = { has_global_flag = SUEZ_CANAL_BLOCKED }
			any_controlled_state = {
				OR = {
					region = 28
					region = 128
				}
			}
		}
	
		fire_only_once = no
	
		days_remove = 30
	
		cost = 75
	
		modifier = {
			civilian_factory_use = 5
		}

		complete_effect = {
			hidden_effect = {
				if = {
					limit = {
						NOT = {
							owns_state = 446
							owns_state = 453
						}
					}
					random_country = {
						limit = {
							owns_state = 446
							owns_state = 453
						}
						country_event = { id = generic.12 days = 1 }
					}
				}
			}
		}
	
		remove_effect = {
			if = {
				limit = {
					OR = {
						has_full_control_of_state = 446
						has_full_control_of_state = 453
					}
				}
				set_country_flag = blew_up_suez
				set_global_flag = SUEZ_CANAL_BLOCKED
				country_event = { id = wtt_news.40 hours = 6}
			}
			effect_tooltip = {
				if = {
					limit = {
						ENG = {
							owns_state = 446
							owns_state = 453
						}
					}
					add_war_support = -0.05
					add_stability = -0.05
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = {
					any_enemy_country = {
						OR = {
							controls_state = 452
							controls_state = 447
							controls_state = 456
							controls_state = 457
							controls_state = 454
							controls_state = 455
							OR = {
								divisions_in_state = { state = 454 size > 2 }
								divisions_in_state = { state = 447 size > 2 }
								divisions_in_state = { state = 457 size > 2 }
								divisions_in_state = { state = 456 size > 2 }
							}
						}
					}
				}
			}
			modifier = {
				factor = 0 # Don't blow the canal when you've got troops needing supplies in the Horn of Africa, and no land route has been established there
				any_allied_country = {
					NOT = {
						OR = {
							has_full_control_of_state = 457
							has_full_control_of_state = 456
						}
					}
					NOT = { has_full_control_of_state = 551 }
					OR = {
						divisions_in_state = { state = 550 size > 0 }
						divisions_in_state = { state = 268 size > 0 }
						divisions_in_state = { state = 269 size > 0 }
						divisions_in_state = { state = 559 size > 0 }
					}
				}
			}
			modifier = {
				factor = 200 # Try to cut the enemy off from the mediterranean if you also occupy Gibraltar
				OR = {
					has_full_control_of_state = 118
					any_allied_country = {
						has_full_control_of_state = 118
					}
				}
				has_war = yes
				NOT = { tag = ENG }
			}
		}
	}

	blow_panama_canal = {

		icon = GFX_decision_generic_ignite_civil_war
		allowed = {
			has_dlc = "Waking the Tiger"
			
		}
		available = {
			has_full_control_of_state = 685
		}
	
		visible = {
			has_war = yes
			NOT = { has_global_flag = PANAMA_CANAL_BLOCKED }
			any_controlled_state = {
				OR = {
					region = 34
					region = 124
				}
			}
		}
	
		fire_only_once = no
	
		days_remove = 30
	
		cost = 75
	
		modifier = {
			civilian_factory_use = 5
		}

		complete_effect = {
			hidden_effect = {
				if = {
					limit = {
						NOT = {
							owns_state = 685
						}
					}
					random_country = {
						limit = {
							owns_state = 685
						}
						country_event = { id = generic.13 days = 1 }
					}
				}
			}
		}
	
		remove_effect = {
			if = {
				limit = {
					has_full_control_of_state = 685
				}
				set_country_flag = blew_up_panama
				set_global_flag = PANAMA_CANAL_BLOCKED
				country_event = { id = wtt_news.41 hours = 6}
			}
			effect_tooltip = {
				if = {
					limit = {
						USA = { owns_state = 685 }
					}
					add_war_support = -0.05
					add_stability = -0.05
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0 # Don't blow up the canal as USA. Ever.
				tag = USA
			}
			modifier = {
				factor = 0 # Don't blow up the canal if enemies have weak navies but you are a strong naval power
				has_navy_size = {
					size > 50
				}
				NOT = {
					any_enemy_country = {
						has_navy_size = {
							size > 50
						}
					}
				}
			}
			modifier = {
				factor = 200 # Always blow up the canal as JAP or GER when at war with USA (priority)
				OR = {
					is_in_faction_with = JAP
					is_in_faction_with = GER
				}
				has_war_with = USA
			}
		}
	}
}

special_projects = {

	rebuild_suez_canal = {

		icon = GFX_decision_generic_special_project

		available = {
			has_full_control_of_state = 446
			has_full_control_of_state = 453
			num_of_civilian_factories > 15
		}
	
		visible = {
			has_global_flag = SUEZ_CANAL_BLOCKED
		}
	
		fire_only_once = no
	
		days_remove = 365
	
		cost = 120
	
		modifier = {
			civilian_factory_use = 15
		}
	
		remove_effect = {
			if = {
				limit = {
					has_full_control_of_state = 446
					has_full_control_of_state = 453
				}
				set_country_flag = rebuilt_suez
				clr_global_flag = SUEZ_CANAL_BLOCKED
				country_event = { id = wtt_news.42 hours = 6}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0 # Don't bother if your navy is weak AND not ENG
				has_navy_size = { size < 100 }
				NOT = { tag = ENG }
			}
			modifier = {
				factor = 200 # Prioritize if Italy is being invaded and you can't get to the battlefront (no control of Gibraltar strait)
				NOT = {
					OR = {
						has_full_control_of_state = 118
						any_allied_country = {
							has_full_control_of_state = 118
						}
					}
				}
				has_war_with = ITA
				ITA = { surrender_progress > 0.1 }
				has_full_control_of_state = 447
				has_full_control_of_state = 454
				has_full_control_of_state = 452
				has_full_control_of_state = 456
				has_full_control_of_state = 457
				NOT = { has_country_flag = blew_up_suez }
			}
			modifier = {
				factor = 200 # Prioritize if UK
				tag = ENG
			}
			modifier = {
				factor = 10 # Prioritize if not at war
				has_war = no
			}
		}
	}

	rebuild_panama_canal = {

		icon = GFX_decision_generic_special_project

		available = {
			has_full_control_of_state = 685
			num_of_civilian_factories > 25
		}
	
		visible = {
			has_global_flag = PANAMA_CANAL_BLOCKED
		}
	
		fire_only_once = no
	
		days_remove = 180
	
		cost = 400
	
		modifier = {
			civilian_factory_use = 25
		}
	
		remove_effect = {
			if = {
				limit = {
					has_full_control_of_state = 685
				}
				set_country_flag = rebuilt_panama
				clr_global_flag = PANAMA_CANAL_BLOCKED
				country_event = { id = wtt_news.43 hours = 6 }
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0 # Don't bother if your navy is weak AND not USA
				has_navy_size = { size < 50 }
				NOT = { tag = USA }
				has_war = yes
			}
			modifier = {
				factor = 200 # Prioritize if you decisively beat USA's navy
				has_war_with = USA
				USA = { has_navy_size = { size < 50 } }
				has_navy_size = { size > 100 }
			}
			modifier = {
				factor = 200 # Prioritize if USA
				tag = USA
			}
			modifier = {
				factor = 10 # Prioritize if not at war
				has_war = no
			}
		}
	}
}

war_measures = {
	
	emergency_factory_conversion_defensive = {

		icon = generic_industry

		available = {
			num_of_civilian_factories > 5 #Change this if amount of factories change
		}

		visible = {
			has_defensive_war = yes
			has_offensive_war = no			
		}

		fire_only_once = no

		days_re_enable = 90

		cost = 100

		complete_effect = {
			replace_civ_with_arms_factories = yes
			add_war_support = -0.05
		}
		ai_will_do = {
			factor = 0
		}
	}

	emergency_factory_conversion_offensive = {

		icon = generic_industry

		available = {
			num_of_civilian_factories > 5 #Change this if amount of factories change
		}

		visible = {
			has_offensive_war = yes
		}

		fire_only_once = no

		days_re_enable = 90

		cost = 100

		complete_effect = {
			replace_civ_with_arms_factories = yes
			add_war_support = -0.05
			add_stability = -0.03
		}
		ai_will_do = {
			factor = 0
		}
	}

	desperate_defense = {

		icon = generic_prepare_civil_war

		available = {
			surrender_progress > 0.5
		}

		visible = {
			surrender_progress > 0
		}

		fire_only_once = no

		days_remove = 45
		days_re_enable = 360

		cost = 50
		ai_will_do = {
			factor = 1
			modifier = {
				surrender_progress > 0.6
				factor = 10
			}
		}

		modifier = {
			defence = 0.2
			dig_in_speed_factor = 0.5
		}

		complete_effect = {

		}
	}

	women_in_the_workforce = {

		icon = generic_industry

        allowed = {
            always = yes
        }

        available = {
            has_war = yes
            has_idea = tot_economic_mobilisation
            OR = {
                AND = {
                    has_government = democratic
                    has_war_support > 0.79
                }
                AND = {
                    has_government = communism
                    has_war_support > 0.79
                }
                AND = {
                    has_government = fascism
                    OR = {
                        has_war_support > 0.89
                        surrender_progress > 0
                    }
                }
                AND = {
                    has_government = neutrality
                    has_war_support > 0.84
                    has_stability > 0.7
                }
            }
        }
        visible = {
            has_war = yes
        }
        cost = 100
        days_remove = -1
        remove_trigger = {
        	OR = {
            	has_war = no
            	not = { has_idea = tot_economic_mobilisation }
            }
        }
        modifier = {
            conscription = 0.03
            stability_factor = -0.05
        }
        ai_will_do = {
			factor = 1

			modifier = {
				factor = 3
				has_manpower < 100000
			}
		}
		complete_effect = {
			if = {
				limit = {
					tag = CAN
				}
				country_event = { id = canada_vanilla.1 hours = 6 } # Ronnie the Bren Gun Girl
			}
        }
   }

    war_bonds = {

    	icon = generic_industry

    	allowed = {
            always = yes
        }

        available = {
            has_war = yes
            OR = {
                AND = {
                    has_government = democratic
                    has_war_support > 0.79
                }
                AND = {
                    has_government = communism
                    has_war_support > 0.79
                }
                AND = {
                    has_government = fascism
                    OR = {
                        has_war_support > 0.89
                        surrender_progress > 0
                    }
                }
                AND = {
                    has_government = neutrality
                    has_war_support > 0.84
                    has_stability > 0.7
                }
            }
        }
        visible = {
            has_war = yes
            NOT = { tag = SPC }
        }

        fire_only_once = no

		days_remove = 180

		cost = GER_war_bonds_var?50

		modifier = {
			consumer_goods_factor = -0.05
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 100
				factor = 0 #use as pp dump
			}

			modifier = {
				factor = 0
				original_tag = SOV
				SOV_save_pp_for_manpower_trouble = yes
			}
		}

		remove_effect = {

		}

		complete_effect = {
			if = {
				limit = {
					check_variable = {
						var = GER_war_bonds_var
						value = 50
						compare = less_than
					}
				}
				set_variable = {
					var = GER_war_bonds_var
					value = 50
				}
			}
			add_to_variable = {
				var = GER_war_bonds_var
				value = 25
			}
			if = {
				limit = {
					check_variable = {
						var = GER_war_bonds_var
						value = 100
						compare = greater_than_or_equals
					}
					check_variable = {
						var = GER_war_bonds_war_support_var
						value = -0.025
						compare = greater_than
					}
				}
				set_variable = {
					var = GER_war_bonds_war_support_var
					value = -0.025
				}
			}
			if = {
				limit = {
					check_variable = {
						var = GER_war_bonds_war_support_var
						value = -0.025
						compare = less_than_or_equals
					}
				}
				add_to_variable = {
					var = GER_war_bonds_war_support_var
					value = -0.025
				}
				add_war_support = GER_war_bonds_war_support_var
			}
		}
    }
}

foreign_politics = {
	object_to_attaches = {

		allowed = {
            has_dlc = "Waking the Tiger"
        }

        cost = 50
        fire_only_once = no

        days_re_enable = 30

        available = {
        }

        visible = {
        	always = no # NONHIST NON HIST ANNOYING ASF
        	FROM = {
        		NOT = { has_country_flag = rejected_withdrawing_attache }
        		NOT = { has_country_flag = rejected_withdrawing_attache@ROOT }
        		NOT = { has_country_flag = object_attache_going_on }
        	}
        	has_war = yes
        	has_capitulated = no
        	NOT = { has_war_with = FROM }
        	any_enemy_country = {
				has_attache_from = FROM
			}
			NOT = {
				AND = {
					original_tag = SPR
					has_completed_focus = SPR_regional_defense_council_of_aragon
				}
			}
		}

		target_root_trigger = {
			has_war = yes
			has_capitulated = no
		}

		target_trigger = {
			NOT = { has_war_with = FROM }
			#FROM = { has_sent_attache = yes } # Make such trigger to optimize if it becomes a performance problem again.
			any_enemy_country = {
				has_attache_from = FROM
			}			
		}

        complete_effect = {
			FROM = { country_event = { id = generic.14 hours = 6 } }
			hidden_effect = {
				FROM = { set_country_flag = object_attache_going_on }
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
}

economy_decisions = {
	infrastructure_building_slot = {

		icon = generic_construction

        allowed = {
            always = yes
        }

        cost = 100
        fire_only_once = no

        days_re_enable = 30

	available = {
		any_owned_state = {
			NOT = { has_state_flag = infrastructure_building_slot_flag }
			is_fully_controlled_by = ROOT
			free_building_slots = {
				building = infrastructure
				size < 1
			}
		}
	}

	visible = {
		any_owned_state = {
			NOT = { has_state_flag = infrastructure_building_slot_flag }
			is_fully_controlled_by = ROOT
			free_building_slots = {
				building = infrastructure
				size < 1
			}
		}
	}

        complete_effect = {
			random_owned_state = {
				limit = {
					is_fully_controlled_by = ROOT
            		free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
					free_building_slots = {
						building = infrastructure
						size < 1
					}
					NOT = { has_state_flag = infrastructure_building_slot_flag }
				}
				add_extra_state_shared_building_slots = 1
				set_state_flag = infrastructure_building_slot_flag
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 10
				any_owned_state = { free_building_slots = { building = industrial_complex size < 1 include_locked = no } }
			}
		}
    }

    war_building_slot = {

    	icon = generic_construction

        allowed = {
            always = yes
        }

        cost = 50
        fire_only_once = no

        available = {
            has_war = yes
            any_owned_state = {
            	NOT = { has_state_flag = war_building_slot_flag }
            	is_fully_controlled_by = ROOT
            }
        }

        visible = {
			has_war = yes
			any_owned_state = {
				NOT = { has_state_flag = war_building_slot_flag }
				is_fully_controlled_by = ROOT
			}
		}

        complete_effect = {
        	add_war_support = -0.025
			add_stability = -0.025
			if = {
				limit = {
					any_owned_state = {
						is_fully_controlled_by = ROOT
            			free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
						NOT = { has_state_flag = war_building_slot_flag }
						infrastructure > 4
					}
				}
				random_owned_state = {
					limit = {
						is_fully_controlled_by = ROOT
            			free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
						NOT = { has_state_flag = war_building_slot_flag }
						infrastructure > 4
					}
					add_extra_state_shared_building_slots = 1
					set_state_flag = war_building_slot_flag
				}
			}
			else_if = {
				limit = {
					any_owned_state = {
						is_fully_controlled_by = ROOT
            			free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
						NOT = { has_state_flag = war_building_slot_flag }
						infrastructure > 2
					}
				}
				random_owned_state = {
					limit = {
						is_fully_controlled_by = ROOT
            			free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
						NOT = { has_state_flag = war_building_slot_flag }
						infrastructure > 2
					}
					add_extra_state_shared_building_slots = 1
					set_state_flag = war_building_slot_flag
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_fully_controlled_by = ROOT
            			free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
						NOT = { has_state_flag = war_building_slot_flag }
						infrastructure > 4
					}
					add_extra_state_shared_building_slots = 1
					set_state_flag = war_building_slot_flag
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 10
				all_owned_state = { free_building_slots = { building = industrial_complex size < 1 include_locked = no } }
			}
			modifier = {
				any_owned_state = {
					infrastructure > 3
					free_building_slots = { building = industrial_complex size > 0 include_locked = no }
				}
				factor = 0
			}
		}
    }
}

# foreign_influence.txt

foreign_influence = {

	# Decisions for masters to push their ideology onto puppets
	# Note that subject status is not checked due to those only appearing in DLC
	# (Subjects are puppets with high autonomy)

	nation_building = {

		icon = eng_propaganda_campaigns

		days_remove = 120
		
		available = {
			FROM = {
				is_puppet_of = ROOT
			}
			FROM = {
				democratic < 0.9
			}
			OR = {
				political_power_daily > 0.5
				has_political_power > 60
			}
		}

		visible = {
			has_government = democratic
			FROM = {
				is_puppet_of = ROOT
				democratic < 0.99
			}
		}

		target_array = subjects

		target_trigger = {
			FROM = {
				is_puppet_of = ROOT
			}
		}

		complete_effect = {
			FROM = { add_timed_idea = { idea = nation_building days = 120 } }
		}

		modifier = {
			political_power_cost = 0.5
		}

		ai_will_do = {
			factor = 0
		}
	}
	
	socialist_education = {

		icon = eng_propaganda_campaigns

		days_remove = 120
		
		available = {
			FROM = {
				is_puppet_of = ROOT
			}
			FROM = {
				communism < 0.9
			}
			OR = {
				political_power_daily > 0.5
				has_political_power > 60
			}
		}

		visible = {
			has_government = communism
			FROM = {
				is_puppet_of = ROOT
				communism < 0.99
			}
		}

		target_array = subjects

		target_trigger = {
			FROM = {
				is_puppet_of = ROOT
			}
		}

		complete_effect = {
			FROM = {
				add_timed_idea = { idea = socialist_education days = 120 }
			}
		}
		modifier = {
			political_power_cost = 0.5
		}

		ai_will_do = {
			factor = 0
		}
	}
	
	paramilitary_training = {

		icon = eng_propaganda_campaigns

		days_remove = 120
		
		available = {
			FROM = {
				is_puppet_of = ROOT
			}
			FROM = {
				fascism < 0.9
			}
			OR = {
				political_power_daily > 0.5
				has_political_power > 60
			}
		}

		visible = {
			has_government = fascism
			FROM = {
				is_puppet_of = ROOT
				fascism < 0.99
			}
		}

		target_array = subjects

		target_trigger = {
			FROM = {
				is_puppet_of = ROOT
			}
		}

		complete_effect = {
			FROM = {
				add_timed_idea = { idea = paramilitary_training days = 120 }
			}
		}

		modifier = {
			political_power_cost = 0.5
		}

		ai_will_do = {
			factor = 0
		}
	}
	
	military_parade = {

		icon = eng_propaganda_campaigns

		days_remove = 120
		
		available = {
			FROM = {
				is_puppet_of = ROOT
				neutrality < 0.9
			}
			OR = {
				political_power_daily > 0.5
				has_political_power > 60
			}
		}

		visible = {
			has_government = neutrality
			FROM = {
				is_puppet_of = ROOT
				neutrality < 0.99
			}
		}

		target_array = subjects

		target_trigger = {
			FROM = {
				is_puppet_of = ROOT
			}
		}

		complete_effect = {
			FROM = {
				add_timed_idea = { idea = military_parade days = 120 }
			}
		}

		modifier = {
			political_power_cost = 0.5
		}

		ai_will_do = {
			factor = 0
		}
	}
	
	police_action = {

		icon = generic_prepare_civil_war
		
		cost = 50
		
		available = {
			FROM = {
				is_puppet_of = ROOT
			}
			FROM = {
				democratic > 0.6
			}
			FROM = {
				NOT = { has_government = democratic }
			}
		}

		visible = {
			has_government = democratic
			FROM = {
				is_puppet_of = ROOT
				NOT = { has_government = democratic }
			}
		}

		target_array = subjects

		target_trigger = {
			FROM = {
				is_puppet_of = ROOT
			}
		}

		complete_effect = {
			FROM = { country_event = { id = mtg_generic.1 } }
			FROM = {
				add_timed_idea = {
					idea = political_turmoil
					days = 365
				}
			}
			FROM = {
				set_politics = {
					ruling_party = democratic
					elections_allowed = yes
				}
			}
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	fraternal_republic = {

		icon = generic_prepare_civil_war
		
		cost = 50
		
		available = {
			FROM = {
				is_puppet_of = ROOT
			}
			FROM = {
				communism > 0.6
			}
			FROM = {
				NOT = { has_government = communism }
			}
		}

		visible = {
			has_government = communism
			FROM = {
				is_puppet_of = ROOT
				NOT = { has_government = communism }
			}
		}

		target_array = subjects

		target_trigger = {
			FROM = {
				is_puppet_of = ROOT
			}
		}

		complete_effect = {
			FROM = { country_event = { id = mtg_generic.1 } }
			FROM = {
				add_timed_idea = {
					idea = political_turmoil
					days = 365
				}
			}
			FROM = {
				set_politics = {
					ruling_party = communism
					elections_allowed = no
				}
			}
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	ultranationalist_coup = {

		icon = generic_prepare_civil_war
		
		cost = 50
		
		available = {
			FROM = {
				is_puppet_of = ROOT
			}
			FROM = {
				fascism > 0.6
			}
			FROM = {
				NOT = { has_government = fascism }
			}
		}

		visible = {
			has_government = fascism
			FROM = {
				is_puppet_of = ROOT
				NOT = { has_government = fascism }
			}
		}

		target_array = subjects

		target_trigger = {
			FROM = {
				is_puppet_of = ROOT
			}
		}

		complete_effect = {
			FROM = { country_event = { id = mtg_generic.1 } }
			FROM = {
				add_timed_idea = {
					idea = political_turmoil
					days = 365
				}
			}
			FROM = {
				set_politics = {
					ruling_party = fascism
					elections_allowed = no
				}
			}
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	military_dictatorship = {

		icon = generic_prepare_civil_war
		
		cost = 50
		
		available = {
			FROM = {
				is_puppet_of = ROOT
			}
			FROM = {
				neutrality > 0.6
			}
			FROM = {
				NOT = { has_government = neutrality }
			}
		}

		visible = {
			has_government = neutrality
			FROM = {
				is_puppet_of = ROOT
				NOT = { has_government = neutrality }
			}
		}

		target_array = subjects

		target_trigger = {
			FROM = {
				is_puppet_of = ROOT
			}
		}

		complete_effect = {
			FROM = { country_event = { id = mtg_generic.1 } }
			FROM = {
				add_timed_idea = {
					idea = political_turmoil
					days = 365
				}
			}
			FROM = {
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
				}
			}
		}
		
		ai_will_do = {
			factor = 0
		}
	}
}

# formable_nations.txt



form_rattanakosin_kingdom_category = {

	form_rattanakosin_kingdom = {

		icon = generic_form_nation

		allowed = {
			original_tag = SIA
			has_dlc = "Waking the Tiger"
		}

		available = {
			is_subject = no
			# Siam
			controls_state = 289
			controls_state = 724
			# Cambodia
			controls_state = 490
			# Laos
			controls_state = 670
		}

		visible = {
			original_tag = SIA
			NOT = { has_global_flag = form_rattanakosin_kingdom_flag }
		}

		complete_effect = {
			set_cosmetic_tag = RAT_UNIFIED
			490 = { add_core_of = ROOT }
			670 = { add_core_of = ROOT }
			hidden_effect = {
				news_event = { id = wtt_news.69 hours = 6 }
				set_global_flag = form_rattanakosin_kingdom_flag
			}
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

form_greater_german_reich_category = {

	form_greater_german_reich = {

		icon = generic_form_nation

		allowed = {
			original_tag = GER
			has_dlc = "Waking the Tiger"
		}

		available = {
			is_subject = no
			has_completed_focus = GER_demand_sudetenland
			all_owned_state = {
				is_fully_controlled_by = ROOT
			}
		}

		visible = {
			AND = {
				original_tag = GER
				has_government = fascism
				has_country_leader = { ruling_only = yes character = GER_adolf_hitler }
			}
			NOT = { has_global_flag = form_greater_german_reich_flag }
		}

		complete_effect = {
			set_cosmetic_tag = GER_greater_german_reich
			set_province_name = { id = 6521 name = "Germania" }
			hidden_effect = {
				set_global_flag = form_greater_german_reich_flag
			}
		}

		ai_will_do = {
			factor = 200
		}
	}
}

# stab_ws.txt

crisis = {

	draft_dodging = {

		icon = generic_civil_support

		allowed = {
			always = yes
		}

		available = {
			OR = {
				has_civil_war = yes
				has_country_flag = crisis_in_progress
			}
			NOT = {
				has_country_flag = crisis_solution_in_progress
			}
			OR = {
				has_idea = draft_dodging
				has_idea = draft_dodging_2
				has_idea = draft_dodging_3
			}
		}

		cost = 0
		ai_will_do = {
			factor = 1
		}

		visible = {
			OR = {
				has_civil_war = yes
				has_country_flag = crisis_in_progress
			}
			NOT = {
				has_country_flag = crisis_solution_in_progress
			}
			OR = {
				has_idea = draft_dodging
				has_idea = draft_dodging_2
				has_idea = draft_dodging_3
			}
									
		}

		complete_effect = {
			country_event = stability.21
		}
	}

	strikes_1 = {

		icon = generic_civil_support

		allowed = {
			always = yes
		}

		available = {
			OR = {
				has_civil_war = yes
				has_country_flag = crisis_in_progress
			}
			NOT = {
				has_country_flag = crisis_solution_in_progress
			}
			OR = {
				has_idea = strikes_1
				has_idea = strikes_2
				has_idea = strikes_3
			}
		}

		cost = 0
		ai_will_do = {
			factor = 1
			modifier = {
				has_idea = strikes_3
				factor = 500
			}
		}
		
		visible = {
			OR = {
				has_idea = strikes_1
				has_idea = strikes_2
				has_idea = strikes_3
			}
			OR = {
				has_country_flag = crisis_in_progress
				has_civil_war = yes
			}
			NOT = {
				has_country_flag = crisis_solution_in_progress
			}
		}


		complete_effect = {
			country_event = stability.22
		}
	}
	
	draft_dodging_mission = {

		icon = generic_civil_support
		
		available = {
			NOT = {
				OR = {
					has_idea = draft_dodging
					has_idea = draft_dodging_2
					has_idea = draft_dodging_3
				}
			}
		}

		days_mission_timeout = 90

		activation = {
			OR = {
				has_idea = draft_dodging
				has_idea = draft_dodging_2
				has_idea = draft_dodging_3
			}
		}
		visible = {
			OR = {
				has_idea = draft_dodging
				has_idea = draft_dodging_2
				has_idea = draft_dodging_3
			}
		}
		complete_effect = {
			
		}
		timeout_effect = {
			if = {
				limit = {
					has_idea = draft_dodging_3
					has_stability < 0.21
					NOT = {
						has_government = communism
					}
				}
				start_civil_war = {
					ideology = communism
				}
			}
			if = {
				limit = {
					has_idea = draft_dodging_3
					has_stability < 0.21
					has_government = communism
					
				}
				start_civil_war = {
					ideology = democratic
				}
			}
			if = {
				limit = {
					has_idea = draft_dodging_3
					has_stability < 0.41
					NOT = {
						has_government = communism
					}
				}
				add_popularity = { ideology = communism popularity = 0.1}
			}
			if = {
				limit = {
					has_idea = draft_dodging_3
					has_stability < 0.41
					has_government = communism
					
				}
				add_popularity = { ideology = democratic popularity = 0.1}
			}
			if = {
				limit = {
					has_idea = draft_dodging_3
					has_stability > 0.4
				}
				add_stability = -0.1
			}
			if = {
				limit = { 
					has_idea = draft_dodging_2
				}
				swap_ideas = {
					remove_idea = draft_dodging_2
					add_idea = draft_dodging_3
				}
			}
			if = {
				limit = { 
					has_idea = draft_dodging
				}
				swap_ideas = {
					remove_idea = draft_dodging
					add_idea = draft_dodging_2
				}
			}	
		}
	}
	strikes_mission = {

		icon = generic_civil_support
		
		available = {
			NOT = {
				OR = {
					has_idea = strikes_1
					has_idea = strikes_2
					has_idea = strikes_3
				}
				has_country_flag = crisis_in_progress
			}
		}

		days_mission_timeout = 90

		activation = {
			OR = {
				has_idea = strikes_1
				has_idea = strikes_2
				has_idea = strikes_3
			}
			OR = {
				has_country_flag = crisis_in_progress #needed to avoid doubling up with demob strikes
				has_civil_war = yes
			}
		}
		visible = {
			OR = {
				has_idea = strikes_1 
				has_idea = strikes_2
				has_idea = strikes_3	
			}
			OR = {
				has_country_flag = crisis_in_progress
				has_civil_war = yes
			}
		}
		complete_effect = {
			
		}
		timeout_effect = {
			if = {
				limit = {
					has_idea = strikes_3
					has_stability < 0.21
					NOT = {
						has_government = communism
					}
				}
				start_civil_war = {
					ideology = communism
				}
			}
			if = {
				limit = {
					has_idea = strikes_3
					has_stability < 0.21
					has_government = communism
					
				}
				start_civil_war = {
					ideology = democratic
				}
			}
			if = {
				limit = {
					has_idea = strikes_3
					has_stability < 0.41
					NOT = {
						has_government = communism
					}
				}
				add_popularity = { ideology = communism popularity = 0.1}
			}
			if = {
				limit = {
					has_idea = strikes_3
					has_stability < 0.41
					has_government = communism
					
				}
				add_popularity = { ideology = democratic popularity = 0.1}
			}
			if = {
				limit = {
					has_idea = strikes_3
					has_stability > 0.4
				}
				add_stability = -0.1
			}
			if = {
				limit = { 
					has_idea = strikes_2
				}
				swap_ideas = {
					remove_idea = strikes_2
					add_idea = strikes_3
				}
			}
			if = {
				limit = { 
					has_idea = strikes_1
				}
				swap_ideas = {
					remove_idea = strikes_1
					add_idea = strikes_2
				}
			}	
		}
	}
	mutiny_1 = {

		icon = generic_civil_support

		allowed = {
			always = yes
		}

		available = {
			OR = {
				has_country_flag = crisis_in_progress #needed to avoid doubling up with demob strikes
				has_civil_war = yes
			}
			OR = {
				has_idea = mutiny_1
				has_idea = mutiny_2
				has_idea = mutiny_3
			}
		}

		cost = 5
		ai_will_do = {
			factor = 1
		}

		visible = {
			OR = {
				has_country_flag = crisis_in_progress #needed to avoid doubling up with demob strikes
				has_civil_war = yes
			}
			NOT = {
				has_country_flag = crisis_solution_in_progress
			}
			OR = {
				has_idea = mutiny_1
				has_idea = mutiny_2
				has_idea = mutiny_3
			}
		}

		complete_effect = {
			country_event = stability.23
		}
	}
	mutiny_mission = {

		icon = generic_civil_support
		
		available = {
			NOT = {
				OR = {
					has_idea = mutiny_1
					has_idea = mutiny_2
					has_idea = mutiny_3
				}
				has_country_flag = crisis_in_progress
			}
		}

		days_mission_timeout = 90

		activation = {
			OR = {
				has_idea = mutiny_1
				has_idea = mutiny_2
				has_idea = mutiny_3
			}
			OR = {
				has_country_flag = crisis_in_progress #needed to avoid doubling up with demob strikes
				has_civil_war = yes
			} 
		}
		visible = {
			OR = {
				has_idea = mutiny_1 
				has_idea = mutiny_2
				has_idea = mutiny_3	
			}
			OR = {
				has_country_flag = crisis_in_progress #needed to avoid doubling up with demob strikes
				has_civil_war = yes
			}
		}
		complete_effect = {
			
		}
		timeout_effect = {
			if = {
				limit = {
					has_idea = mutiny_3
					has_stability < 0.21
					NOT = {
						has_government = communism
					}
				}
				start_civil_war = {
					ideology = communism
				}
			}
			if = {
				limit = {
					has_idea = mutiny_3
					has_stability < 0.21
					has_government = communism
					
				}
				start_civil_war = {
					ideology = democratic
				}
			}
			if = {
				limit = {
					has_idea = mutiny_3
					has_stability < 0.41
					NOT = {
						has_government = communism
					}
				}
				add_popularity = { ideology = communism popularity = 0.1}
			}
			if = {
				limit = {
					has_idea = mutiny_3
					has_stability < 0.41
					has_government = communism
					
				}
				add_popularity = { ideology = democratic popularity = 0.1}
			}
			if = {
				limit = {
					has_idea = mutiny_3
					has_stability > 0.4
				}
				add_stability = -0.1
			}
			if = {
				limit = { 
					has_idea = mutiny_2
				}
				swap_ideas = {
					remove_idea = mutiny_2
					add_idea = mutiny_3
				}
			}
			if = {
				limit = { 
					has_idea = mutiny_1
				}
				swap_ideas = {
					remove_idea = mutiny_1
					add_idea = mutiny_2
				}
			}	
		}
	}
}
demobilization = {
	demobilization_economic = {

		icon = generic_industry
		
		is_good = no

		available = {
			has_unsupported_economic_law = yes
			has_war = no
		}

		activation = {
			has_unsupported_economic_law = yes
			has_war = no
		}
		cost = 50

		visible = {
			has_war = no
			has_unsupported_economic_law = yes
		}
		complete_effect = {
			if = {
				limit = {
					has_war_support < 0.15
				}
				add_ideas = civilian_economy
			}
			else_if = {
				limit = {
					has_war_support < 0.25
				}
				add_ideas = low_economic_mobilisation
			}
			else_if = {
				limit = {
					has_war_support < 0.5
				}
				add_ideas = partial_economic_mobilisation
			}
			else_if = {
				limit = {
					has_war_support < 0.8
				}
				add_ideas = war_economy
			}
			if = {
				limit = {
					has_idea = strikes_1
				}
				remove_ideas = strikes_1
			}
			if = {
				limit = {
					has_idea = strikes_2
				}
				remove_ideas = strikes_2
			}
			if = {
				limit = {
					has_idea = strikes_3
				}
				remove_ideas = strikes_3
			}
		}
		ai_will_do = {
			factor = 500 #should really get on this
		}
		
	}
	demob_economic_mission = {
		available = {
			OR = {
				has_unsupported_economic_law = no
				has_war = yes
			}
		}

		activation = {
			has_unsupported_economic_law = yes
			has_war = no
		}
		icon = revolt
		is_good = no
		days_mission_timeout = 120
		complete_effect = {
			if = {
				limit = {
					has_idea = strikes_1
				}
				remove_ideas = strikes_1
			}
			if = {
				limit = {
					has_idea = strikes_2
				}
				remove_ideas = strikes_2
			}
			if = {
				limit = {
					has_idea = strikes_3
				}
				remove_ideas = strikes_3
			}
		}
		timeout_effect = {
			activate_mission = demob_economic_mission
			if = {
				limit = {
					has_idea = strikes_3
					has_stability < 0.21
					NOT = {
						has_government = communism
					}
				}
				start_civil_war = {
					ideology = communism
				}
			}
			if = {
				limit = {
					has_idea = strikes_3
					has_stability < 0.21
					has_government = communism
					
				}
				start_civil_war = {
					ideology = democratic
				}
			}
			if = {
				limit = {
					has_idea = strikes_3
					has_stability < 0.41
					NOT = {
						has_government = communism
					}
				}
				add_popularity = { ideology = communism popularity = 0.1}
			}
			if = {
				limit = {
					has_idea = strikes_3
					has_stability < 0.41
					has_government = communism
					
				}
				add_popularity = { ideology = democratic popularity = 0.1}
			}
			if = {
				limit = {
					has_idea = strikes_3
					has_stability > 0.4
				}
				add_stability = -0.1
			}
			if = {
				limit = { 
					has_idea = strikes_2
				}
				swap_ideas = {
					remove_idea = strikes_2
					add_idea = strikes_3
				}
			}
			if = {
				limit = { 
					has_idea = strikes_1
				}
				swap_ideas = {
					remove_idea = strikes_1
					add_idea = strikes_2
				}
			}
			if = {
				limit = { 
					NOT = { 
						OR = {
							has_idea = strikes_1
							has_idea = strikes_2
							has_idea = strikes_3
						}
					}
				}
				add_ideas = strikes_1
			}	
		}
	}
	demobilization_manpower = {

		icon = generic_prepare_civil_war

		icon = revolt
		is_good = no

		available = {
			has_unsupported_manpower_law = yes
			has_war = no
		}

		allowed = {
			always = yes
		}

		cost = 50
		ai_will_do = {
			factor = 500
		}
		

		visible = {
			has_unsupported_manpower_law = yes
			has_war = no

		}
		complete_effect = {
			if = {
				limit = {
					has_war_support < 0.1
				}
				add_ideas = volunteer_only
			}
			else_if = {
				limit = {
					has_war_support < 0.2
				}
				add_ideas = limited_conscription
			}
			else_if = {
				limit = {
					has_war_support < 0.6
				}
				add_ideas = extensive_conscription
			}
			else = {
				add_ideas = service_by_requirement
			}
		}

		

	}
	demob_manpower_mission = {

		icon = revolt
		is_good = no
		days_mission_timeout = 120
		available = {
			OR = {
				has_unsupported_manpower_law = no
				has_war = yes
			}
		}
		activation = {
			has_unsupported_manpower_law = yes
			has_war = no
		}
		cancel_if_not_visible = yes
		timeout_effect = {
			if = {
				limit = {
					has_government = communism
					has_stability < 0.2
				}
				start_civil_war = {
					ideology = democratic
				}
			}
			if = {
				limit = {
					NOT = { has_government = communism }
					has_stability < 0.3
				}
				start_civil_war = {
					ideology = communism
				}
			}
			if = {
				limit = {
					has_stability > 0.2
				}
				add_stability = -0.1
			}
			if = {
				limit = {
					has_government = communism
				}
				add_popularity = { ideology = democratic popularity = 0.1 }
			}
			if = {
				limit = {
					NOT = { has_government = communism }
				}
				add_popularity = { ideology = communism popularity = 0.1 }
			}
		}
	}
}

#MTG_naval_treaty.txt

MTG_naval_treaties = {
	MTG_abandon_treaty_democratic = {

		icon = generic
			
	
		available = {
			OR = {
				threat > 0.2
				has_global_flag = MTG_second_london_conference
			}
		}
	
		cost = 150
		fire_only_once = yes
		ai_will_do = {
			factor = 0
		}
	
		visible = {
			has_naval_treaty_trigger = yes
			OR = {
				has_government = democratic
				has_government = neutrality
			}
		}
	
		complete_effect = {
			remove_naval_treaty_effect = yes
			every_other_country = {
				limit = {
					has_naval_treaty_trigger = yes
				}
				country_event = MTG_naval_treaty.7
			}
			if = {
				limit = {
					has_global_flag = {
						flag = MTG_naval_treaty_signatories
						value < 3
					}
				}
				random_other_country = {
					limit = {
						has_naval_treaty_trigger = yes
					}
					remove_naval_treaty_effect = yes
				}
				clr_global_flag = MTG_naval_treaty_signatories
				hidden_effect = { news_event = mtg_news.60 }
			}
			if = {
				limit = {
					has_global_flag = MTG_naval_treaty_signatories
				}
				modify_global_flag = {
					flag = MTG_naval_treaty_signatories
					value = -1
				}
			}
			if = {
				limit = {
					not = {
						any_other_country = {
							OR = {
								has_idea = MTG_naval_treaty_cheating_reduced
								has_idea = MTG_naval_treaty_adherent_reduced
							}
						}
					}
				}
				every_other_country = {
					limit = {
						OR = {
							has_idea = MTG_naval_treaty_cheating
							has_idea = MTG_naval_treaty_adherent
						}
					}
					activate_mission = MTG_escalator_clause_invocation_mission
					custom_effect_tooltip = MTG_escalator_clause_tt
				}
			}
		}
	}

	MTG_abandon_treaty_fascist = {

		icon = generic
			
	
		available = {
			OR = {
				threat > 0.2
				has_global_flag = MTG_second_london_conference
			}
		}
	
		cost = 25
		fire_only_once = yes
		ai_will_do = {
			factor = 1
			modifier = {
				OR = {
					tag = ITA
					tag = JAP
				}
				add = 1
			}
			modifier = {
				tag = USA
				has_civil_war = no
				add = 5
			}
			modifier = {
				tag = JAP
				is_historical_focus_on = yes
				add = 50
			}
		}
	
		visible = {
			has_naval_treaty_trigger = yes
			OR = {
				has_government = fascism
				has_government = communism
			}
		}
	
		complete_effect = {
			remove_naval_treaty_effect = yes
			every_other_country = {
				limit = {
					has_naval_treaty_trigger = yes
				}
				country_event = { id = MTG_naval_treaty.7 days = 2 }
			}
			if = {
				limit = {
					has_global_flag = {
						flag = MTG_naval_treaty_signatories
						value < 3
					}
				}
				random_other_country = {
					limit = {
						has_naval_treaty_trigger = yes
					}
					remove_naval_treaty_effect = yes
				}
				clr_global_flag = MTG_naval_treaty_signatories
				hidden_effect = { news_event = mtg_news.60 }
			}
			if = {
				limit = {
					has_global_flag = MTG_naval_treaty_signatories
				}
				modify_global_flag = {
					flag = MTG_naval_treaty_signatories
					value = -1
				}
			}
			if = {
				limit = {
					not = {
						any_other_country = {
							OR = {
								has_idea = MTG_naval_treaty_cheating_reduced
								has_idea = MTG_naval_treaty_adherent_reduced
							}
						}
					}
				}
				every_other_country = {
					limit = {
						OR = {
							has_idea = MTG_naval_treaty_cheating
							has_idea = MTG_naval_treaty_adherent
						}
					}
					activate_mission = MTG_escalator_clause_invocation_mission
					custom_effect_tooltip = MTG_escalator_clause_tt
				}
			}
		}
	}

	MTG_cheat_on_treaty = {

		icon = generic
			
	
		available = {
			
		}
	
		cost = 50
		fire_only_once = yes
		ai_will_do = {
			factor = 3
			modifier = {
				tag = JAP
				factor = 5 #The Yamato is a 35,000 ton ship what are you talking about
			}
		}
	
		visible = {
			OR = {
				has_idea = MTG_naval_treaty_adherent
				has_idea = MTG_naval_treaty_adherent_reduced
			}
			OR = {
				has_government = fascism
				has_government = communism
			}
		}
	
		complete_effect = {
			if = {
				limit = {
					has_idea = MTG_naval_treaty_adherent
				}
				swap_ideas = {
					remove_idea = MTG_naval_treaty_adherent
					add_idea = MTG_naval_treaty_cheating
				}
			}
			if = {
				limit = {
					has_idea = MTG_naval_treaty_adherent_reduced
				}
				swap_ideas = {
					remove_idea = MTG_naval_treaty_adherent_reduced
					add_idea = MTG_naval_treaty_cheating_reduced
				}
			}
		}
	}
	MTG_invite_FROM_to_treaty = {

		icon = generic_naval
			
	
		available = {
			
		}

		target_root_trigger = {
			has_naval_treaty_trigger = yes
		}

		target_trigger = {
			FROM = { 
				has_war = no
				has_naval_treaty_trigger = no
				NOT = { has_country_flag = MTG_naval_treaty_abandoned }
				NOT = { has_country_flag = MTG_refused_naval_treaty }
				if = {
					limit = { ENG = { has_naval_treaty_trigger = yes } }
					naval_strength_comparison = {
						other = ENG
						ratio > 0.35
						sub_unit_def_weights = {
							carrier = 0.25
							battleship = 1
							battle_cruiser = 0.8
							heavy_cruiser = 0.5
						}
					}
				}
				else_if = {
					limit = { USA = { has_naval_treaty_trigger = yes } }
					naval_strength_comparison = {
						other = USA
						ratio > 0.35
						sub_unit_def_weights = {
							carrier = 0.25
							battleship = 1
							battle_cruiser = 0.8
							heavy_cruiser = 0.5
						}
					}
				}
				else = {
					has_navy_size = {
						type = capital_ship
						size > 15
					}
				}
			}
		}
		cost = 50
		fire_only_once = yes
		ai_will_do = {
			factor = 0
			modifier = {
				OR = {
					tag = ENG
					tag = USA
				}
				has_government = democratic
				add = 10
			}
		}
	
		visible = {
			has_naval_treaty_trigger = yes
		}
	
		complete_effect = {
			FROM = {
				country_event = MTG_naval_treaty.1
			}
		}
	}
	MTG_treaty_reduction_mission = {

		icon = generic_naval	
		allowed = {
			always = no
		}
		available = {
			if = {
				limit = { ENG = { has_naval_treaty_trigger = yes } }
				naval_strength_comparison = {
					other = ENG
					ratio < 0.8
					sub_unit_def_weights = {
						carrier = 0.25
						battleship = 1
						battle_cruiser = 0.8
						heavy_cruiser = 0.5
					}
				}
			}
			else_if = {
				limit = { USA = { has_naval_treaty_trigger = yes } }
				naval_strength_comparison = {
					other = USA
					ratio < 0.8
					sub_unit_def_weights = {
						carrier = 0.25
						battleship = 1
						battle_cruiser = 0.8
						heavy_cruiser = 0.5
					}
				}
			}
			else = {
				has_navy_size = {
					type = capital_ship
					size < 20
				}
			}
		}
		days_mission_timeout = 30
	
		visible = {
			
		}
		timeout_effect = {
			every_other_country = {
				limit = {
					has_naval_treaty_trigger = yes
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ROOT
				}
			}
		}
		complete_effect = {
			
		}
	}
	MTG_treaty_reduction_signatory_mission = {

		icon = generic_naval	
		allowed = {
			always = no
		}
		available = {
			if = {
				limit = { ENG = { has_naval_treaty_trigger = yes } }
				naval_strength_comparison = {
					other = ENG
					ratio < 1
					sub_unit_def_weights = {
						carrier = 0.5
						battleship = 1
						battle_cruiser = 0.8
						heavy_cruiser = 0.5
					}
				}
			}
			else_if = {
				limit = { USA = { has_naval_treaty_trigger = yes } }
				naval_strength_comparison = {
					other = USA
					ratio < 1
					sub_unit_def_weights = {
						carrier = 0.5
						battleship = 1
						battle_cruiser = 0.8
						heavy_cruiser = 0.5
					}
				}
			}
			else = {
				has_navy_size = {
					type = capital_ship
					size < 50
				}
			}
		}
		is_good = no
		#activation = {
		#	if = {
		#		limit = { ENG = { has_naval_treaty_trigger = yes } }
		#		naval_strength_comparison = {
		#			other = ENG
		#			ratio > 1.1
		#			sub_unit_def_weights = {
		#				carrier = 0.5
		#				battleship = 1
		#				battle_cruiser = 0.8
		#				heavy_cruiser = 0.5
		#			}
		#		}
		#	}
		#	else_if = {
		#		limit = { USA = { has_naval_treaty_trigger = yes } }
		#		naval_strength_comparison = {
		#			other = USA
		#			ratio > 1.1
		#			sub_unit_def_weights = {
		#				carrier = 0.5
		#				battleship = 1
		#				battle_cruiser = 0.8
		#				heavy_cruiser = 0.5
		#			}
		#		}
		#	}
		#	else = {
		#		has_navy_size = {
		#			type = capital_ship
		#			size > 50
		#		}
		#	}
		#	has_naval_treaty_trigger = yes
		#}
		days_mission_timeout = 30
	
		visible = {
			
		}
		timeout_effect = {
			add_stability = -0.1
			add_political_power = -35
		}
		complete_effect = {
			
		}
	}
	MTG_treaty_renew_mission = {

		icon = generic_naval	
		
		available = {
			hidden_trigger = {
				always = no
			}
		}
		days_mission_timeout = 120
		
		activation = {
			has_naval_treaty_trigger = yes
			has_global_flag = MTG_second_london_conference
		}

		visible = {
			has_naval_treaty_trigger = yes
		}
		timeout_effect = {
			clr_global_flag = MTG_second_london_conference 
		}
		complete_effect = {
			
		}
	}
	MTG_escalator_clause_invocation_mission = {

		icon = generic_naval	
		allowed = {
			always = no
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		days_mission_timeout = 365
	
		visible = {
			has_naval_treaty_trigger = yes
		}
		timeout_effect = {
			if = {
				limit = {
					has_idea = MTG_naval_treaty_adherent
				}
				swap_ideas = {
					remove_idea = MTG_naval_treaty_adherent
					add_idea = MTG_naval_treaty_adherent_reduced
				}
			}
			else_if = {
				limit = {
					has_idea = MTG_naval_treaty_cheating
				}
				swap_ideas = {
					remove_idea = MTG_naval_treaty_cheating
					add_idea = MTG_naval_treaty_cheating_reduced
				}
			}
		}
		complete_effect = {
			
		}
	}
}

# political_descs.txt
fascism_on_the_rise = {
	
	open_up_political_discourse_fascism = {

		icon = generic_political_discourse

		available = {
			fascism < 0.9
			democratic < 0.9
			communism < 0.9
			neutrality < 0.9
		}

		visible = {
			OR = {
				has_idea_with_trait = fascist_demagogue
				has_idea_with_trait = syncretic_revanchist
			}
			NOT = { has_country_flag = open_up_political_discourse_fascism }
			NOT = { has_government = fascism }
			check_has_focus_tree_to_switch_to_fascism = yes
		}
		
		remove_trigger = {
			has_government = fascism
		}
		
		fire_only_once = yes
		
		cost = 75
		
		complete_effect = {
			set_country_flag = open_up_political_discourse_fascism
		}
		
		ai_will_do = {
			factor = 1
		}
	}

	expand_civil_fascism_support = {

		icon = generic_civil_support

		visible = {
			OR = {
				has_country_flag = preparation_for_fascist_civil_war
				has_country_flag = open_up_political_discourse_fascism
			}
			OR = {
				has_idea_with_trait = fascist_demagogue
				has_idea_with_trait = syncretic_revanchist
			}
			NOT = { has_government = fascism }
			check_has_focus_tree_to_switch_to_fascism = yes
		}

		cancel_trigger = {
			hidden_trigger = {
				has_civil_war = yes
			}
		}
		
		fire_only_once = no
		
		cost = 25

		days_remove = 30

		modifier = {
			fascism_drift = 0.02
			stability_weekly = -0.03
 			political_power_gain = -0.2
		}
		
		ai_will_do = {
			factor = 1
		}
	}
	
	discredit_government_fascism = {

		icon = generic_political_discourse

		available = {
			fascism < 0.8
			democratic < 0.8
			communism < 0.8
			neutrality < 0.8
			OR = {
				has_idea_with_trait = fascist_demagogue
				has_idea_with_trait = syncretic_revanchist
			}
		}

		visible = {
			has_country_flag = open_up_political_discourse_fascism
			NOT = { has_government = fascism }
			check_has_focus_tree_to_switch_to_fascism = yes
		}
		
		remove_trigger = {
			has_government = fascism
		}
		
		fire_only_once = yes
		
		cost = 50
		
		complete_effect = {
			add_stability = -0.010
			if = {
				limit = {
					has_government = democratic
				}
				add_popularity = {
					ideology = democratic
					popularity = -0.1
				}
			}
			if = {
				limit = {
					has_government = communism
				}
				add_popularity = {
					ideology = communism
					popularity = -0.1
				}
			}
			if = {
				limit = {
					has_government = neutrality
				}
				add_popularity = {
					ideology = neutrality
					popularity = -0.1
				}
			}
		}
		
		ai_will_do = {
			factor = 1
		}
	}
	
	hold_the_fascist_national_referendum = {

		icon = generic_political_discourse

		available = {
			fascism > 0.5
		}

		visible = {
			NOT = { has_government = fascism }
			OR = {
				fascism > 0.6
				has_country_flag = open_up_political_discourse_fascism
			}
			check_has_focus_tree_to_switch_to_fascism = yes
		}
		
		remove_trigger = {
			has_government = fascism
		}
		
		fire_only_once = yes
		
		cost = 100
		
		complete_effect = {
			country_event = { id = political.18 }
		}
		
		ai_will_do = {
			factor = 210
			modifier = {
				fascism > 0.6
				factor = 10
			}
		}
	}
}

democratic_on_the_rise = {
	
	expand_civil_democratic_support = {

		icon = generic_civil_support

		visible = {
			OR = {
				has_country_flag = preparation_for_democratic_civil_war
				has_country_flag = open_up_political_discourse_democratic
			}
			OR = {
				has_idea_with_trait = democratic_reformer
				has_idea_with_trait = social_reformer
			}
			NOT = { has_government = democratic }
			check_has_focus_tree_to_switch_to_democratic = yes
		}

		cancel_trigger = {
			hidden_trigger = {
				has_civil_war = yes
			}
		}
		
		fire_only_once = no
		
		cost = 25

		days_remove = 30

		modifier = {
			democratic_drift = 0.05
			stability_weekly = -0.003
 			political_power_gain = -0.2
		}
		
		ai_will_do = {
			factor = 1
		}
	}

	open_up_political_discourse_democratic = {

		icon = generic_political_discourse

		available = {
			fascism < 0.9
			democratic < 0.9
			communism < 0.9
			neutrality < 0.9
		}

		visible = {
			OR = {
				has_idea_with_trait = democratic_reformer
				has_idea_with_trait = social_reformer
			}
			NOT = { has_government = democratic }
			check_has_focus_tree_to_switch_to_democratic = yes
		}
		
		remove_trigger = {
			has_government = democratic
		}
		
		fire_only_once = yes
		
		cost = 75
		
		complete_effect = {
			set_country_flag = open_up_political_discourse_democratic
		}
		
		ai_will_do = {
			factor = 1
		}
	}
	
	discredit_government_democratic = {

		icon = generic_political_discourse

		available = {
			fascism < 0.8
			democratic < 0.8
			communism < 0.8
			neutrality < 0.8
			OR = {
				has_idea_with_trait = democratic_reformer
				has_idea_with_trait = social_reformer
			}
		}

		visible = {
			has_country_flag = open_up_political_discourse_democratic
			NOT = { has_government = democratic }
			check_has_focus_tree_to_switch_to_democratic = yes
		}
		
		remove_trigger = {
			has_government = democratic
		}
		
		fire_only_once = yes
		
		cost = 50
		
		complete_effect = {
			add_stability = -0.010
			if = {
				limit = {
					has_government = fascism
				}
				add_popularity = {
					ideology = fascism
					popularity = -0.1
				}
			}
			if = {
				limit = {
					has_government = communism
				}
				add_popularity = {
					ideology = communism
					popularity = -0.1
				}
			}
			if = {
				limit = {
					has_government = neutrality
				}
				add_popularity = {
					ideology = neutrality
					popularity = -0.1
				}
			}
		}
		
		ai_will_do = {
			factor = 1
		}
	}
	
	hold_the_democratic_national_referendum = {

		icon = generic_political_discourse

		available = {
			democratic > 0.5
		}

		visible = {
			NOT = { has_government = democratic }
			OR = {
				democratic > 0.6
				has_country_flag = open_up_political_discourse_democratic
			}
			check_has_focus_tree_to_switch_to_democratic = yes
		}
		
		remove_trigger = {
			has_government = democratic
		}
		
		fire_only_once = yes
		
		cost = 100
		
		complete_effect = {
			country_event = { id = political.20 }
		}
		
		ai_will_do = {
			factor = 210
			modifier = {
				democratic > 0.6
				factor = 10
			}
		}
	}
}

communism_on_the_rise = {
	expand_civil_communist_support = {

		icon = generic_civil_support

		visible = {
			OR = {
				has_country_flag = preparation_for_communist_civil_war
				has_country_flag = open_up_political_discourse_communism
			}
			OR = {
				has_idea_with_trait = communist_revolutionary
				has_idea_with_trait = ambitious_union_boss
			}
			NOT = { has_government = communism }
			check_has_focus_tree_to_switch_to_communism = yes
		}

		cancel_trigger = {
			hidden_trigger = {
				has_civil_war = yes
			}
		}
		
		fire_only_once = no
		
		cost = 25

		days_remove = 30

		modifier = {
			communism_drift = 0.02
			stability_weekly = -0.03
 			political_power_gain = -0.2
		}
		
		ai_will_do = {
			factor = 1
		}
	}

	open_up_political_discourse_communist = {

		icon = generic_political_discourse

		available = {
			fascism < 0.9
			democratic < 0.9
			communism < 0.9
			neutrality < 0.9
		}

		visible = {
			OR = {
				has_idea_with_trait = communist_revolutionary
				has_idea_with_trait = ambitious_union_boss
			}
			NOT = { has_government = communism }
			check_has_focus_tree_to_switch_to_communism = yes
		}
		
		remove_trigger = {
			has_government = communism
		}
		
		fire_only_once = yes
		
		cost = 75
		
		complete_effect = {
			set_country_flag = open_up_political_discourse_communist
		}
		
		ai_will_do = {
			factor = 1
		}
	}
	
	discredit_government_communism = {

		icon = generic_political_discourse

		available = {
			fascism < 0.8
			democratic < 0.8
			communism < 0.8
			neutrality < 0.8
			OR = {
				has_idea_with_trait = communist_revolutionary
				has_idea_with_trait = ambitious_union_boss
			}
		}

		visible = {
			has_country_flag = open_up_political_discourse_communist
			NOT = { has_government = communism }
			check_has_focus_tree_to_switch_to_communism = yes
		}
		
		remove_trigger = {
			has_government = communism
		}
		
		fire_only_once = yes
		
		cost = 50
		
		complete_effect = {
			add_stability = -0.010
			if = {
				limit = {
					has_government = fascism
				}
				add_popularity = {
					ideology = fascism
					popularity = -0.1
				}
			}
			if = {
				limit = {
					has_government = democratic
				}
				add_popularity = {
					ideology = democratic
					popularity = -0.1
				}
			}
			if = {
				limit = {
					has_government = neutrality
				}
				add_popularity = {
					ideology = neutrality
					popularity = -0.1
				}
			}
		}
		
		ai_will_do = {
			factor = 1
		}
	}
	
	hold_the_communist_national_referendum = {

		icon = generic_political_discourse

		available = {
			communism > 0.5
		}

		visible = {
			NOT = { has_government = communism }
			OR = {
				communism > 0.6
				has_country_flag = open_up_political_discourse_communist
			}
			check_has_focus_tree_to_switch_to_communism = yes
		}
		
		remove_trigger = {
			has_government = communism
		}
		
		fire_only_once = yes
		
		cost = 100
		
		complete_effect = {
			country_event = { id = political.19 }
		}
		
		ai_will_do = {
			factor = 210
			modifier = {
				communism > 0.6
				factor = 10
			}
		}
	}
}

political_actions = {
	give_refuge_ger = {

		icon = generic_research

        allowed = {
            OR = {
                original_tag = ENG
                original_tag = USA
                original_tag = FRA
                original_tag = CAN
            }
        }

		visible = {
				NOT = { has_government = fascism }
				NOT = { has_government = communism }
		}

        cost = 100
        fire_only_once = yes
        
        days_remove = -1

        available = {
            GER = { NOT = { has_government = ROOT } }
        }

        modifier = {
            research_speed_factor = 0.05
            stability_factor = -0.05
        }

        remove_trigger = {
            GER = { has_government = ROOT }
        }

        ai_will_do = {
			factor = 1
			modifier = {
				tag = ENG
				has_War = no
				date < 1937.3.1
				factor = 0
			}
		}
    }
    give_refuge_ita = {

    	icon = generic_research

        allowed = {
            OR = {
                original_tag = ENG
                original_tag = USA
                original_tag = FRA
                original_tag = CAN
            }
		}

		visible = {
            NOT = { has_government = fascism }
            NOT = { has_government = communism }
        }
        cost = 100
        fire_only_once = yes
        days_remove = -1

        available = {
            ITA = { NOT = { has_government = ROOT } }
        }

        modifier = {
            research_speed_factor = 0.05
            stability_factor = -0.05
        }

        remove_trigger = {
            ITA = { has_government = ROOT }
        }
        ai_will_do = {
			factor = 1
			modifier = {
				tag = ENG
				has_War = no
				date < 1937.3.1
				factor = 0
			}
		}
    }

    anti_fascist_raids = {

    	icon = generic_civil_support

    	visible = {
			NOT = { has_government = fascism }
		}

		available = {
            fascism > 0.1
            if = {
				limit = {
					tag = SPR
				}
				NOT = {
					has_idea = SPR_political_violence
				}
			}
        }
	
		modifier = {
			fascism_drift = -0.05
			stability_weekly = 0.007
		}
	
		days_remove = 120
		cost = 50

		complete_effect = {
			add_stability = -0.1
		}
		
		remove_effect = {
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = 1
				tag = AUS
				fascism > 0.45
				is_historical_focus_on = no
			}
			modifier = {
				add = 10
				tag = AUS
				fascism > 0.45
				has_completed_focus = liberty_ethos
			}
			modifier = {
				factor = 0
				original_tag = SPR
				NOT = { has_global_flag = spanish_civil_war }
			}
		}
    }

    anti_democratic_raids = {

    	icon = generic_civil_support

    	visible = {
			NOT = { has_government = democratic }
		}

		available = {
            democratic > 0.1
            if = {
				limit = {
					tag = SPR
				}
				NOT = {
					has_idea = SPR_political_violence
				}
			}
        }
	
		modifier = {
			democratic_drift = -0.05
			stability_weekly = 0.007
		}
	
		days_remove = 120
		cost = 50

		complete_effect = {
			add_stability = -0.1
		}
		
		remove_effect = {
		}
		
		ai_will_do = {
			factor = 0
		}
    }

    anti_communist_raids = {

    	icon = generic_civil_support

    	visible = {
			NOT = { has_government = communism }
		}

		available = {
            communism > 0.1
            if = {
				limit = {
					tag = SPR
				}
				NOT = {
					has_idea = SPR_political_violence
				}
			}
        }
	
		modifier = {
			communism_drift = -0.05
			stability_weekly = 0.007
		}
	
		days_remove = 120
		cost = 50

		complete_effect = {
			add_stability = -0.1
		}
		
		remove_effect = {
		}
		
		ai_will_do = {
			factor = 0
		}
    }
    
	ban_fascist_party = {

		icon = generic_civil_support

		available = {
			fascism < 0.2
			if = {
				limit = {
					tag = SPR
				}
				NOT = {
					has_idea = SPR_political_violence
				}
			}
		}

		visible = {
			NOT = { has_government = fascism }
			fascism > 0
			if = { 
				limit = { 
					has_dlc = "Battle for the Bosporus"	
				}
				NOT = { original_tag = GRE }
			}
		}

		remove_trigger = {
			hidden_trigger = {
				has_government = fascism
			}
		}
	
		modifier = {
			fascism_drift = -0.05
		}
	
		days_remove = -1
		cost = 100
		
		complete_effect = {
			hidden_effect = {
				set_temp_variable = {
					var = ban_ideology_var
					value = party_popularity@fascism
				}
				multiply_temp_variable = {
					var = ban_ideology_var
					value = -1
				}
				add_popularity = {
					ideology = fascism
					popularity = ban_ideology_var
				}
				multiply_temp_variable = {
					var = ban_ideology_var
					value = 0.66
				}
				set_country_flag = banned_fascism_flag
			}
			remove_fascist_spirits_effect = yes
			custom_effect_tooltip = ban_fascist_party_tt
			add_stability = ban_ideology_var
		}

		ai_will_do = {
			factor = 0
		}
	}

	ban_democratic_party = {

		icon = generic_civil_support

		available = {
			democratic < 0.2
			if = {
				limit = {
					tag = SPR
				}
				NOT = {
					has_idea = SPR_political_violence
				}
			}
		}

		visible = {
			NOT = { has_government = democratic }
			democratic > 0
			if = { 
				limit = { 
					has_dlc = "Battle for the Bosporus"	
				}
				NOT = { original_tag = GRE }
			}
		}

		remove_trigger = {
			hidden_trigger = {
				has_government = democratic
			}
		}
	
		modifier = {
			democratic_drift = -0.05
		}
	
		days_remove = -1
		cost = 100
		
		complete_effect = {
			hidden_effect = {
				set_temp_variable = {
					var = ban_ideology_var
					value = party_popularity@democratic
				}
				multiply_temp_variable = {
					var = ban_ideology_var
					value = -1
				}
				add_popularity = {
					ideology = democratic
					popularity = ban_ideology_var
				}
				multiply_temp_variable = {
					var = ban_ideology_var
					value = 0.66
				}
				set_country_flag = banned_democratic_flag				
			}
			remove_democratic_spirits_effect = yes 
			custom_effect_tooltip = ban_democratic_party_tt
			add_stability = ban_ideology_var
		}

		ai_will_do = {
			factor = 0
		}
	}
	
	ban_communist_party = {

		icon = generic_civil_support

		available = {
			communism < 0.2
			if = {
				limit = {
					tag = SPR
				}
				NOT = {
					has_idea = SPR_political_violence
				}
			}
		}

		visible = {
			NOT = { has_government = communism }
			communism > 0
			if = { 
				limit = { 
					has_dlc = "Battle for the Bosporus"	
				}
				NOT = { original_tag = GRE }
			}
		}

		remove_trigger = {
			hidden_trigger = {
				has_government = communism
			}
		}
	
		modifier = {
			communism_drift = -0.05
		}
	
		days_remove = -1
		cost = 100
		
		complete_effect = {
			hidden_effect = {
				set_temp_variable = {
					var = ban_ideology_var
					value = party_popularity@communism
				}
				multiply_temp_variable = {
					var = ban_ideology_var
					value = -1
				}
				add_popularity = {
					ideology = communism
					popularity = ban_ideology_var
				}
				multiply_temp_variable = {
					var = ban_ideology_var
					value = 0.66
				}
				set_country_flag = banned_communism_flag
				if = {#NSB -> If country has Trotskyist Revolutionary Uprisings NS, swap it with the weakened version
					limit = {
						has_idea = SOV_trotskyist_revolutionary_agitation
					}
					swap_ideas = {
						remove_idea = SOV_trotskyist_revolutionary_agitation
						add_idea = SOV_trotskyist_revolutionary_agitation_weakened
					}
				}
			}
			remove_communist_spirits_effect = yes
			custom_effect_tooltip = ban_communist_party_tt
			add_stability = ban_ideology_var
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	institute_press_censorship_fascist_state = {

		icon = generic_political_discourse

		available = {
			if = {
				limit = {
					tag = SPR
				}
				NOT = {
					has_idea = SPR_political_violence
				}
			}
			if = {
				limit = {
					has_dlc = "Battle for the Bosporus"
					original_tag = BUL
				}
				NOT = {
					has_country_flag = {
						flag = BUL_freedom_of_press_flag
						days < 365
					}
					focus_progress = {
						focus = BUL_freedom_of_press
						progress > 0
					}
				}
			}
		}

		visible = {
			has_government = fascism
			if = { 
				limit = { 
					has_dlc = "Battle for the Bosporus"
				}
				NOT = { original_tag = GRE }
			}
		}
	
		modifier = {
			communism_drift = -0.01
			fascism_drift = 0.03
			democratic_drift = -0.01
			neutrality_drift = -0.01
		}
	
		days_remove = 360
		cost = 150
	
		ai_will_do = {
			factor = 0
		}
	}
	
	institute_press_censorship_democratic_state = {

		icon = generic_political_discourse

		available = {
			if = {
				limit = {
					tag = SPR
				}
				NOT = {
					has_idea = SPR_political_violence
				}
			}
			if = {
				limit = {
					original_tag = BUL
					has_dlc = "Battle for the Bosporus"				
				}
				NOT = {
					has_country_flag = {
						flag = BUL_freedom_of_press_flag
						days < 365
					}
					focus_progress = {
						focus = BUL_freedom_of_press
						progress > 0
					}
				}
			}
		}

		visible = {
			has_government = democratic
			if = { 
				limit = { 
					has_dlc = "Battle for the Bosporus"
				}
				NOT = { original_tag = GRE }
			}
		}
		
		modifier = {
			communism_drift = -0.01
			fascism_drift = -0.01
			democratic_drift = 0.03
			neutrality_drift = -0.01
		}
	
		days_remove = 360
		cost = 150
	
		ai_will_do = {
			factor = 0
		}
	}
	
	institute_press_censorship_communist_state = {

		icon = generic_political_discourse

		available = {
			if = {
				limit = {
					tag = SPR
				}
				NOT = {
					has_idea = SPR_political_violence
				}
			}
			if = {
				limit = {
					original_tag = BUL
					has_dlc = "Battle for the Bosporus"
				}
				NOT = {
					has_country_flag = {
						flag = BUL_freedom_of_press_flag
						days < 365
					}
					focus_progress = {
						focus = BUL_freedom_of_press
						progress > 0
					}
				}
			}
		}

		visible = {
			has_government = communism
			if = { 
				limit = { 
					has_dlc = "Battle for the Bosporus"
				}
				NOT = { original_tag = GRE }
			}
		}
	
		modifier = {
			communism_drift = 0.03
			fascism_drift = -0.01
			democratic_drift = -0.01
			neutrality_drift = -0.01
		}
	
		days_remove = 360
		cost = 150
		
		ai_will_do = {
			factor = 0
		}
	}
	
	institute_press_censorship_neutrality_state = {

		icon = generic_political_discourse

		available = {
			if = {
				limit = {
					tag = SPR
				}
				NOT = {
					has_idea = SPR_political_violence
				}
			}
			if = {
				limit = {
					original_tag = BUL
					has_dlc = "Battle for the Bosporus"
				}
				NOT = {
					has_country_flag = {
						flag = BUL_freedom_of_press_flag
						days < 365
					}
					focus_progress = {
						focus = BUL_freedom_of_press
						progress > 0
					}
				}
			}
		}

		visible = {
			has_government = neutrality
			if = { 
				limit = { 
					has_dlc = "Battle for the Bosporus"
				}
				NOT = { original_tag = GRE }
			}
		}
	
		modifier = {
			communism_drift = -0.01
			fascism_drift = -0.01
			democratic_drift = -0.01
			neutrality_drift = 0.03
		}
	
		days_remove = 360
		cost = 150
		
		ai_will_do = {
			factor = 0
		}
	}
}

#lar_agent_recruitment.txt

lar_local_recruitment = {
	#unlocks decisions to recruit in Europe
	recruit_in_europe = {

		#icon = generic_research

		available = {
			
		}

		visible = {
			capital_scope = {
				NOT = {
					is_on_continent = europe
				}
			}
			OR = {
				any_owned_state = {
					is_on_continent = europe
				}
				any_allied_country = {
					any_owned_state = {
						is_on_continent = europe
					}
				}
				any_of_scopes = {
					array = subjects
					any_owned_state = {
						is_on_continent = europe
					}
				}
			}
		}

		fire_only_once = yes
		cost = 50

		modifier = {
			civilian_factory_use = 3
		}

		days_remove = 90

		remove_effect = {
			set_country_flag = europe_recruitment_unlocked
		}

		ai_will_do = {
			base = 0
		}
	}

	recruit_in_europe_state = {

		icon = onmap_recruit_operative

		available = {
			
		}

		state_target = yes
		target_trigger = {
			FROM = {
				is_on_continent = europe
				OR = {
					AND = {
						has_variable = historical_capital_for_country
						var:historical_capital_for_country = {
							exists = yes
							has_capitulated = yes
							NOT = { tag = ROOT }
						}
					}
					AND = {
						is_capital = yes
						CONTROLLER = {
							NOT = {
								tag = ROOT
							}
						}
					}
				}
			}
		}
		visible = {
			OR = {
				has_country_flag = europe_recruitment_unlocked
				capital_scope = { is_on_continent = europe }
			}
			NOT = { has_country_flag = europe_recruitment_in_process }
		}

		fire_only_once = no
		cost = 0

		days_re_enable = 180
		on_map_mode = map_only
		complete_effect = {
			set_country_flag = { flag = europe_recruitment_in_process days = 180 value = 1 }
			if = {
				limit = {
					num_of_operatives < num_operative_slots
				}
				custom_effect_tooltip = recruit_in_state_tt
			}
			else = {
				custom_effect_tooltip = recruit_in_state_to_pool_tt
			}
			hidden_effect = {
				create_operative_leader = {
					bypass_recruitment = yes
					nationalities = { FROM.OWNER }
					portrait_tag_override = FROM.OWNER
				}
			}
		}

		ai_will_do = {
			base = 0
		}
	}
#unlocks decisions to recruit in Europe
	recruit_in_north_america = {

		#icon = generic_research

		available = {
			
		}

		visible = {
			capital_scope = {
				NOT = {
					is_on_continent = north_america
				}
			}
			OR = {
				any_owned_state = {
					is_on_continent = north_america
				}
				any_allied_country = {
					any_owned_state = {
						is_on_continent = north_america
					}
				}
				any_of_scopes = {
					array = subjects
					any_owned_state = {
						is_on_continent = north_america
					}
				}
			}
		}

		fire_only_once = yes
		cost = 50

		modifier = {
			civilian_factory_use = 3
		}

		days_remove = 90

		remove_effect = {
			set_country_flag = north_america_recruitment_unlocked
		}

		ai_will_do = {
			base = 0
		}
	}

	recruit_in_north_america_state = {

		icon = onmap_recruit_operative
		name = recruit_in_europe_state
		available = {
			
		}

		state_target = yes
		target_trigger = {
			FROM = {
				is_on_continent = north_america
				OR = {
					AND = {
						has_variable = historical_capital_for_country
						var:historical_capital_for_country = {
							OR = {
								has_capitulated = yes
								exists = no
							}
							NOT = { tag = ROOT }
						}
					}
					AND = {
						is_capital = yes
						CONTROLLER = {
							NOT = {
								tag = ROOT
							}
						}
					}
				}
			}
		}
		visible = {
			OR = {
				has_country_flag = north_america_recruitment_unlocked
				capital_scope = { is_on_continent = north_america }
			}
			NOT = { has_country_flag = north_america_recruitment_in_process }
		}

		fire_only_once = no
		cost = 0

		days_re_enable = 180
		on_map_mode = map_only
		complete_effect = {
			set_country_flag = { flag = north_america_recruitment_in_process days = 180 value = 1 }
			if = {
				limit = {
					num_of_operatives < num_operative_slots
				}
				custom_effect_tooltip = recruit_in_state_tt
			}
			else = {
				custom_effect_tooltip = recruit_in_state_to_pool_tt
			}
			hidden_effect = {
				create_operative_leader = {
					bypass_recruitment = yes
					nationalities = { FROM.OWNER }
					portrait_tag_override = FROM.OWNER
				}
			}
		}

		ai_will_do = {
			base = 0
		}
	}

	#unlocks decisions to recruit in south_america
	recruit_in_south_america = {

		#icon = generic_research

		available = {
			
		}

		visible = {
			capital_scope = {
				NOT = {
					is_on_continent = south_america
				}
			}
			OR = {
				any_owned_state = {
					is_on_continent = south_america
				}
				any_allied_country = {
					any_owned_state = {
						is_on_continent = south_america
					}
				}
				any_of_scopes = {
					array = subjects
					any_owned_state = {
						is_on_continent = south_america
					}
				}
			}
		}

		fire_only_once = yes
		cost = 50

		modifier = {
			civilian_factory_use = 3
		}

		days_remove = 90

		remove_effect = {
			set_country_flag = south_america_recruitment_unlocked
		}

		ai_will_do = {
			base = 0
		}
	}

	recruit_in_south_america_state = {

		icon = onmap_recruit_operative
		name = recruit_in_europe_state
		available = {
			
		}

		state_target = yes
		target_trigger = {
			FROM = {
				is_on_continent = south_america
				OR = {
					AND = {
						has_variable = historical_capital_for_country
						var:historical_capital_for_country = {
							OR = {
								has_capitulated = yes
								exists = no
							}
							NOT = { tag = ROOT }
						}
					}
					AND = {
						is_capital = yes
						CONTROLLER = {
							NOT = {
								tag = ROOT
							}
						}
					}
				}
			}
		}
		visible = {
			OR = {
				has_country_flag = south_america_recruitment_unlocked
				capital_scope = { is_on_continent = south_america }
			}
			NOT = { has_country_flag = south_america_recruitment_in_process }
		}

		fire_only_once = no
		cost = 0

		days_re_enable = 180
		on_map_mode = map_only
		complete_effect = {
			set_country_flag = { flag = south_america_recruitment_in_process days = 180 value = 1 }
			if = {
				limit = {
					num_of_operatives < num_operative_slots
				}
				custom_effect_tooltip = recruit_in_state_tt
			}
			else = {
				custom_effect_tooltip = recruit_in_state_to_pool_tt
			}
			hidden_effect = {
				create_operative_leader = {
					bypass_recruitment = yes
					nationalities = { FROM.OWNER }
					portrait_tag_override = FROM.OWNER
				}
			}
		}

		ai_will_do = {
			base = 0
		}
	}

	#unlocks decisions to recruit in africa
	recruit_in_africa = {

		#icon = generic_research

		available = {
			
		}

		visible = {
			capital_scope = {
				NOT = {
					is_on_continent = africa
				}
			}
			OR = {
				any_owned_state = {
					is_on_continent = africa
				}
				any_allied_country = {
					any_owned_state = {
						is_on_continent = africa
					}
				}
				any_of_scopes = {
					array = subjects
					any_owned_state = {
						is_on_continent = africa
					}
				}
			}
		}

		fire_only_once = yes
		cost = 50

		modifier = {
			civilian_factory_use = 3
		}

		days_remove = 90

		remove_effect = {
			set_country_flag = africa_recruitment_unlocked
		}

		ai_will_do = {
			base = 0
		}
	}

	recruit_in_africa_state = {

		icon = onmap_recruit_operative
		name = recruit_in_europe_state
		available = {
			
		}

		state_target = yes
		target_trigger = {
			FROM = {
				is_on_continent = africa
				OR = {
					AND = {
						has_variable = historical_capital_for_country
						var:historical_capital_for_country = {
							OR = {
								has_capitulated = yes
								exists = no
							}
							NOT = { tag = ROOT }
						}
					}
					AND = {
						is_capital = yes
						CONTROLLER = {
							NOT = {
								tag = ROOT
							}
						}
					}
				}
			}
		}
		visible = {
			OR = {
				has_country_flag = africa_recruitment_unlocked
				capital_scope = { is_on_continent = africa }
			}
			NOT = { has_country_flag = africa_recruitment_in_process }
		}

		fire_only_once = no
		cost = 0

		days_re_enable = 180
		on_map_mode = map_only
		complete_effect = {
			set_country_flag = { flag = africa_recruitment_in_process days = 180 value = 1 }
			if = {
				limit = {
					num_of_operatives < num_operative_slots
				}
				custom_effect_tooltip = recruit_in_state_tt
			}
			else = {
				custom_effect_tooltip = recruit_in_state_to_pool_tt
			}
			hidden_effect = {
				create_operative_leader = {
					bypass_recruitment = yes
					nationalities = { FROM.OWNER }
					portrait_tag_override = FROM.OWNER
				}
			}
		}

		ai_will_do = {
			base = 0
		}
	}

	#unlocks decisions to recruit in middle_east
	recruit_in_middle_east = {

		#icon = generic_research

		available = {
			
		}

		visible = {
			capital_scope = {
				NOT = {
					is_on_continent = middle_east
				}
			}
			OR = {
				any_owned_state = {
					is_on_continent = middle_east
				}
				any_allied_country = {
					any_owned_state = {
						is_on_continent = middle_east
					}
				}
				any_of_scopes = {
					array = subjects
					any_owned_state = {
						is_on_continent = middle_east
					}
				}
			}
		}

		fire_only_once = yes
		cost = 50

		modifier = {
			civilian_factory_use = 3
		}

		days_remove = 90

		remove_effect = {
			set_country_flag = middle_east_recruitment_unlocked
		}

		ai_will_do = {
			base = 0
		}
	}

	recruit_in_middle_east_state = {

		icon = onmap_recruit_operative
		name = recruit_in_europe_state
		available = {
			
		}

		state_target = yes
		target_trigger = {
			FROM = {
				is_on_continent = middle_east
				OR = {
					AND = {
						has_variable = historical_capital_for_country
						var:historical_capital_for_country = {
							OR = {
								has_capitulated = yes
								exists = no
							}
							NOT = { tag = ROOT }
						}
					}
					AND = {
						is_capital = yes
						CONTROLLER = {
							NOT = {
								tag = ROOT
							}
						}
					}
				}
			}
		}
		visible = {
			OR = {
				has_country_flag = middle_east_recruitment_unlocked
				capital_scope = { is_on_continent = middle_east }
			}
			NOT = { has_country_flag = middle_east_recruitment_in_process }
		}

		fire_only_once = no
		cost = 0

		days_re_enable = 180
		on_map_mode = map_only
		complete_effect = {
			set_country_flag = { flag = middle_east_recruitment_in_process days = 180 value = 1 }
			if = {
				limit = {
					num_of_operatives < num_operative_slots
				}
				custom_effect_tooltip = recruit_in_state_tt
			}
			else = {
				custom_effect_tooltip = recruit_in_state_to_pool_tt
			}
			hidden_effect = {
				create_operative_leader = {
					bypass_recruitment = yes
					nationalities = { FROM.OWNER }
					portrait_tag_override = FROM.OWNER
				}
			}
		}

		ai_will_do = {
			base = 0
		}
	}

	#unlocks decisions to recruit in asia
	recruit_in_asia = {

		#icon = generic_research

		available = {
			
		}

		visible = {
			capital_scope = {
				NOT = {
					is_on_continent = asia
				}
			}
			OR = {
				any_owned_state = {
					is_on_continent = asia
				}
				any_allied_country = {
					any_owned_state = {
						is_on_continent = asia
					}
				}
				any_of_scopes = {
					array = subjects
					any_owned_state = {
						is_on_continent = asia
					}
				}
			}
		}

		fire_only_once = yes
		cost = 50

		modifier = {
			civilian_factory_use = 3
		}

		days_remove = 90

		remove_effect = {
			set_country_flag = asia_recruitment_unlocked
		}

		ai_will_do = {
			base = 0
		}
	}

	recruit_in_asia_state = {

		icon = onmap_recruit_operative
		name = recruit_in_europe_state
		available = {
			
		}

		state_target = yes
		target_trigger = {
			FROM = {
				is_on_continent = asia
				NOT = {
					is_core_of = RAJ
				}
				OR = {
					AND = {
						has_variable = historical_capital_for_country
						var:historical_capital_for_country = {
							OR = {
								has_capitulated = yes
								exists = no
							}
							NOT = { tag = ROOT }
						}
					}
					AND = {
						is_capital = yes
						CONTROLLER = {
							NOT = {
								tag = ROOT
							}
						}
					}
				}
			}
		}
		visible = {
			OR = {
				has_country_flag = asia_recruitment_unlocked
				capital_scope = { 
					is_on_continent = asia 
				}
			}
			NOT = {
				tag = RAJ
			}
			NOT = { has_country_flag = asia_recruitment_in_process }
		}

		fire_only_once = no
		cost = 0

		days_re_enable = 180
		on_map_mode = map_only
		complete_effect = {
			set_country_flag = { flag = asia_recruitment_in_process days = 180 value = 1 }
			if = {
				limit = {
					num_of_operatives < num_operative_slots
				}
				custom_effect_tooltip = recruit_in_state_tt
			}
			else = {
				custom_effect_tooltip = recruit_in_state_to_pool_tt
			}
			hidden_effect = {
				create_operative_leader = {
					bypass_recruitment = yes
					nationalities = { FROM.OWNER }
					portrait_tag_override = FROM.OWNER
				}
			}
		}

		ai_will_do = {
			base = 0
		}
	}

	#unlocks decisions to recruit in australia
	recruit_in_australia = {

		#icon = generic_research

		available = {
			
		}

		visible = {
			capital_scope = {
				NOT = {
					is_on_continent = australia
				}
			}
			OR = {
				any_owned_state = {
					is_on_continent = australia
				}
				any_allied_country = {
					any_owned_state = {
						is_on_continent = australia
					}
				}
				any_of_scopes = {
					array = subjects
					any_owned_state = {
						is_on_continent = australia
					}
				}
			}
		}

		fire_only_once = yes
		cost = 50

		modifier = {
			civilian_factory_use = 3
		}

		days_remove = 90

		remove_effect = {
			set_country_flag = australia_recruitment_unlocked
		}

		ai_will_do = {
			base = 0
		}
	}

	recruit_in_australia_state = {

		icon = onmap_recruit_operative
		name = recruit_in_europe_state
		available = {
			
		}

		state_target = yes
		target_trigger = {
			FROM = {
				is_on_continent = australia
				OR = {
					AND = {
						has_variable = historical_capital_for_country
						var:historical_capital_for_country = {
							OR = {
								has_capitulated = yes
								exists = no
							}
							NOT = { tag = ROOT }
						}
					}
					AND = {
						is_capital = yes
						CONTROLLER = {
							NOT = {
								tag = ROOT
							}
						}
					}
				}
			}
		}
		visible = {
			OR = {
				has_country_flag = australia_recruitment_unlocked
				capital_scope = { is_on_continent = australia }
			}
			NOT = { has_country_flag = australia_recruitment_in_process }
		}

		fire_only_once = no
		cost = 0

		days_re_enable = 180
		on_map_mode = map_only
		complete_effect = {
			set_country_flag = { flag = australia_recruitment_in_process days = 180 value = 1 }
			if = {
				limit = {
					num_of_operatives < num_operative_slots
				}
				custom_effect_tooltip = recruit_in_state_tt
			}
			else = {
				custom_effect_tooltip = recruit_in_state_to_pool_tt
			}
			hidden_effect = {
				create_operative_leader = {
					bypass_recruitment = yes
					nationalities = { FROM.OWNER }
					portrait_tag_override = FROM.OWNER
				}
			}
		}

		ai_will_do = {
			base = 0
		}
	}

	#unlocks decisions to recruit in india
	recruit_in_india = {

		#icon = generic_research

		available = {
			
		}

		visible = {
			NOT = {
				tag = RAJ
			}
			OR = {
				any_owned_state = {
					OR = {
						is_core_of = RAJ

					}
				}
				is_in_faction_with = RAJ
				any_of_scopes = {
					array = subjects
					any_owned_state = {
						OR = {
							is_core_of = RAJ
						}
					}
				}
			}
		}

		fire_only_once = yes
		cost = 50

		modifier = {
			civilian_factory_use = 3
		}

		days_remove = 90

		remove_effect = {
			set_country_flag = india_recruitment_unlocked
		}

		ai_will_do = {
			base = 0
		}
	}

	recruit_in_india_state = {

		icon = onmap_recruit_operative
		name = recruit_in_europe_state
		available = {
			
		}

		state_target = yes
		target_trigger = {
			FROM = {
				OR = {
					is_core_of = RAJ

				}
				OR = {
					AND = {
						has_variable = historical_capital_for_country
						var:historical_capital_for_country = {
							OR = {
								has_capitulated = yes
								exists = no
							}
							NOT = { tag = ROOT }
						}
					}
					AND = {
						is_capital = yes
						CONTROLLER = {
							NOT = {
								tag = ROOT
							}
						}
					}
				}
			}
		}
		visible = {
			OR = {
				has_country_flag = india_recruitment_unlocked
				tag = RAJ
			}
			NOT = { has_country_flag = india_recruitment_in_process }
		}

		fire_only_once = no
		cost = 0

		days_re_enable = 180
		on_map_mode = map_only
		complete_effect = {
			set_country_flag = { flag = india_recruitment_in_process days = 180 value = 1 }
			if = {
				limit = {
					num_of_operatives < num_operative_slots
				}
				custom_effect_tooltip = recruit_in_state_tt
			}
			else = {
				custom_effect_tooltip = recruit_in_state_to_pool_tt
			}
			hidden_effect = {
				create_operative_leader = {
					bypass_recruitment = yes
					nationalities = { FROM.OWNER }
					portrait_tag_override = FROM.OWNER
				}
			}
		}

		ai_will_do = {
			base = 0
		}
	}
}

# exiled_govs.txt

governments_in_exile = {

	request_reinstatement = {

		icon = generic_independence

		days_re_enable = 120 # Prevent event spam

		cost = 10

		available = {
			all_owned_state = {
				is_controlled_by = ROOT
			}
		}

		visible = {
			FROM = { is_hosting_exile = ROOT }
			any_owned_state = {
				is_controlled_by = ROOT
			}
		}

		
		targets = { host }

		target_trigger = { FROM = { is_hosting_exile = ROOT } }
		
		complete_effect = {
			FROM = {
				country_event = { id = mtg_exile_government.2 }
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	grant_parliamentary_audience = {

		icon = eng_install_government

		available = {
		    FROM = {
		    	has_legitimacy < 95
		    }
			OR = {
				political_power_daily > 0.25
				has_political_power > 30
			}
		}

		visible = {
			FROM = { is_exiled_in = ROOT }
		    FROM = {
		    	has_legitimacy < 100
		    }
		}

		
		target_array = exiles

		target_trigger = { FROM = { is_exiled_in = ROOT } }
		
		modifier = {
			political_power_cost = 0.15
		}
		
		targeted_modifier = {
			tag = FROM
			targeted_legitimacy_daily = 0.05
		}

		days_remove = 120

		ai_will_do = {
			factor = 0.03
			modifier = {
				has_political_power < 150
				political_power_daily < 0.85
				factor = 0
			}
			modifier = {
				factor = 0
				FROM = {
					has_legitimacy > 60
				}
			}
		}
	}

	lobby_for_parliamentary_support = {

		icon = eng_install_government

		available = {
			OR = {
				political_power_daily > 0.25
				has_political_power > 30
			}
		}

		visible = {
			FROM = { is_hosting_exile = ROOT }
		    FROM = {
		    	has_legitimacy < 100
		    }
		}

		
		targets = { host }

		target_trigger = { FROM = { is_hosting_exile = ROOT } }
		
		modifier = {
			political_power_cost = 0.25
			legitimacy_daily = 0.05
		}		

		days_remove = 120

		ai_will_do = {
			factor = 0.1
		}
	}

	public_support_for_from = {

		icon = eng_install_government

		available = {
			OR = {
				political_power_daily > 0.25
				has_political_power > 30
			}
		}

		visible = {
			is_major = yes
			FROM = { is_in_faction_with = ROOT }
		    FROM = {
		    	has_legitimacy < 100
		    }
		}

		
		target_root_trigger = {
			is_major = yes
			has_capitulated = no
		}
		target_array = allies
		target_trigger = {
			FROM = { 
				is_in_faction_with = ROOT
				is_government_in_exile = yes
				var:host = {
					is_faction_leader = yes
				}
			}
		}
		
		modifier = {
			political_power_cost = 0.25
		}

		targeted_modifier = {
			tag = FROM
			targeted_legitimacy_daily = 0.05
		}

		days_remove = 120

		ai_will_do = {
			factor = 0
		}
	}

	exile_recruitment_campaign = {

		icon = eng_propaganda_campaigns

		days_remove = 120

		available = {
			OR = {
				political_power_daily > 1.0
				has_political_power > 120
			}
		    FROM = {
		    	has_legitimacy > 20
		    }
		}

		visible = {
			FROM = { is_hosting_exile = ROOT }
		    FROM = {
		    	has_legitimacy > 10
		    }
		}

		
		targets = { host }

		target_trigger = {
			FROM = { is_hosting_exile = ROOT }
			FROM = { NOT = { original_tag = POL } }
		}
		
		modifier = {
			political_power_cost = 1.0
			exile_manpower_factor = 0.5
		}

		ai_will_do = {
			factor = 0.01
			modifier = {
				has_political_power < 150
				political_power_daily < 0.75
				factor = 0
			}
		}
	}

	exile_extraction_campaign = {
		
		icon = oppression

		cost = 0

		days_remove = 60

		custom_cost_trigger = {
			command_power > 25
		}

		custom_cost_text = custom_cost_joint_training_exercise

		available = {
		    FROM = {
		    	has_legitimacy > 40
		    }
		    FROM = {
		    	any_war_score > 4
		    }
		}

		visible = {
			FROM = { is_exiled_in = ROOT }
		    FROM = {
		    	has_legitimacy > 30
		    	any_war_score > 2
		    }
		}

		
		target_array = exiles

		target_trigger = {
			FROM = { is_exiled_in = ROOT }
			FROM = { NOT = { original_tag = POL } }
		}
		
		targeted_modifier = {
			tag = FROM
			exile_manpower_factor = 0.5
		}

		complete_effect = {
			hidden_effect = {
				add_command_power = -25
			}
		}

		ai_will_do = {
			factor = 0.05

			modifier = {
				factor = 0 # Save for more immediately useful stuff
				command_power < 50
			}
			modifier = {
				factor = 100
				command_power > 98 # Not doing you any good so spend it
			}
		}
	}

	purge_infiltrators = {

		icon = generic_political_discourse

		available = {
		    FROM = {
		    	has_legitimacy > 50
		    	OR = {
		    		fascism > 0.1
		    		communism > 0.1
		    	}
		    }
		}

		visible = {
			FROM = { 
				is_exiled_in = ROOT
		    	has_legitimacy > 40
		    	OR = {
		    		fascism > 0.05
		    		communism > 0.05
		    	}
		    }
		}
		
		target_array = exiles

		target_trigger = {
			FROM = { 
				is_exiled_in = ROOT 
		    	has_legitimacy > 40
		    	OR = {
		    		fascism > 0.05
		    		communism > 0.05
		    	}
		    }
		}
				
		targeted_modifier = {
			tag = FROM
			targeted_legitimacy_daily = -1
			democratic_drift = 0.05
		}

		remove_effect = {
			add_political_power = 50
		}

		days_remove = 30

		ai_will_do = {
			factor = 0
		}
	}

	expatriate_donations = {
		
		icon = ger_military_buildup

		cost = 25

		days_remove = 360

		available = {
		    FROM = {
		    	has_legitimacy > 60
		    	any_war_score > 9
		    }
		}

		visible = {
			FROM = { 
				is_exiled_in = ROOT
		    	has_legitimacy > 50
		    	any_war_score > 5
		    }
		}

		
		target_array = exiles

		target_trigger = { FROM = { is_exiled_in = ROOT } }
		
		modifier = {
			industrial_factory_donations = 1
			military_factory_donations = 1
		}

		ai_will_do = {
			factor = 0.05
		}
	}

	request_control_of_navy = {
		
		icon = generic_naval

		cost = 25
		fire_only_once = yes

		available = {
		    #FROM = {
		    #	has_legitimacy < 80
		    #}
		}

		visible = {
			FROM = { is_exiled_in = ROOT }
		}

		
		target_array = exiles

		target_trigger = {
			FROM = {
				is_exiled_in = ROOT
				has_navy_size = {
				    size > 0
				}
			}
		}

		complete_effect = {
			effect_tooltip = {
				FROM = {
					transfer_navy = {
						target = ROOT
						is_government_in_exile = yes
					}
					add_legitimacy = 10
				}
			}
			custom_effect_tooltip = HOL_request_equipment_tt_2
			FROM = {
				country_event = { id = mtg_exile_government.3 hours = 6 }
			}
		}

		ai_will_do = {
			factor = 10
		}
	}
}

category_exile_forces = {

	weapons_for_the_resistance = {

		icon = generic_ignite_civil_war

		cost = 50
		
		available = {
			hidden_trigger = {
				FROM = {
					set_temp_variable = { resistance_equipment_needed = num_owned_states }
					subtract_from_temp_variable = { resistance_equipment_needed = num_owned_controlled_states }
				}
				multiply_temp_variable = { resistance_equipment_needed = 75 }
			}
		    has_equipment = { infantry_equipment > resistance_equipment_needed }
		    FROM = {
		    	has_legitimacy > 25
		    }
		}

		visible = {
		    FROM = {
		    	has_legitimacy > 15
				is_exiled_in = ROOT
			}
			any_enemy_country = {
				FROM = {
					any_owned_state = {
						is_controlled_by = PREV.PREV
					}
				}
			}
		}

		
		target_array = exiles

		target_trigger = {
			FROM = { is_exiled_in = ROOT }
		}
		
		days_remove = 120

		complete_effect = {
			hidden_effect = {
				FROM = {
					set_temp_variable = { resistance_equipment_needed = num_owned_states }
					subtract_from_temp_variable = { resistance_equipment_needed = num_owned_controlled_states }
				}
				multiply_temp_variable = { resistance_equipment_needed = -75 }
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = resistance_equipment_needed
			}
			FROM = {
				add_timed_idea = {
					idea = idea_weapons_for_the_resistance
					days = 120
				}
			}
		}

		ai_will_do = {
			factor = 0.01
		}
	}

	unity_parade = {

		icon = generic_nationalism

		cost = 50

		available = {
		    FROM = {
		    	has_legitimacy > 50
		    	any_war_score > 2
		    }
		    has_war_support < 0.8
		}

		visible = {
			FROM = { 
				is_exiled_in = ROOT
		    	has_legitimacy > 40
		    }
		}

		
		target_array = exiles

		target_trigger = { FROM = { is_exiled_in = ROOT } }
				
		targeted_modifier = {
			tag = FROM
			targeted_legitimacy_daily = -0.5
		}

		modifier = {
			war_support_weekly = 0.01
			political_power_cost = 0.15
		}

		days_remove = 45

		ai_will_do = {
			factor = 0.03
			modifier = {
				factor = 0
		    	has_war_support > 0.7
			}
			modifier = {
				has_political_power < 150
				political_power_daily < 0.85
				factor = 0
			}
			modifier = {
				has_war_support < 0.5
				factor = 2
			}
			modifier = {
				has_war_support < 0.3
				factor = 10
			}
		}
	}

	joint_training_exercise = {

		icon = eng_blackshirt_march

		cost = 0

		days_re_enable = 270

		custom_cost_trigger = {
			command_power > 25
		}

		custom_cost_text = custom_cost_joint_training_exercise

		available = {
		    FROM = {
		    	has_legitimacy > 35
		    	any_war_score > 9
		    }
		}

		visible = {
			FROM = { 
				is_exiled_in = ROOT
		    	has_legitimacy > 25
		    }
		}

		
		target_array = exiles

		target_trigger = { FROM = { is_exiled_in = ROOT } }
		
		complete_effect = {

			army_experience = 25
			air_experience = 50
			navy_experience = 50

			FROM = {
				army_experience = 25
				air_experience = 50
				navy_experience = 50
			}

			hidden_effect = {
				add_command_power = -25
			}
		}

		ai_will_do = {
			factor = 0.05
			modifier = {
				OR = {
					has_army_experience < 25
					has_air_experience < 25
					has_navy_experience < 25
				}
				factor = 2
			}

			modifier = {
				factor = 0 # Save for more immediately useful stuff
				command_power < 50
			}
			modifier = {
				factor = 100
				command_power > 98 # Not doing you any good so spend it
			}
			modifier = {
				factor = 0.1 # Reached limit of an experience type
				OR = {
					has_army_experience > 475
					has_air_experience > 450
					has_navy_experience > 450
				}
			}
			modifier = {
				factor = 0 # Spend some of your damn experience!!
				has_army_experience > 475
				has_air_experience > 450
				has_navy_experience > 450
			}
		}
	}
}


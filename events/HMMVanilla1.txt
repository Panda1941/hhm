###########################
# Bulgarian Events
###########################

add_namespace = bftb_bulgaria_factions
add_namespace = bftb_bulgaria_imro
add_namespace = bftb_bulgaria_tsar_boris
add_namespace = bftb_bulgarian_claims
add_namespace = bftb_bulgaria_fatherland_front
add_namespace = bftb_bulgaria_rearmament
add_namespace = bftb_bulgaria_german_influence
add_namespace = bftb_bulgaria_italian_influence
add_namespace = bftb_bulgaria_uranium_mining_concessions
add_namespace = bftb_bulgaria_nationalization
add_namespace = bftb_bulgaria_equipment_purchases
add_namespace = bftb_bulgaria_scw_volunteers
add_namespace = bftb_bulgaria_yugoslavian_influence
add_namespace = bftb_bulgaria_balkan_federation
add_namespace = bftb_bulgaria_fate_of_the_balkans
add_namespace = bftb_bulgaria_political_leaders
add_namespace = bftb_bulgaria_greek_influence
add_namespace = bftb_bulgaria_british_influence
add_namespace = bftb_bulgaria_democratic_international_policies


#### ##    ## ######## ######## ########  ##    ##    ###    ##          ########    ###     ######  ######## ####  #######  ##    ##  ######  
 ##  ###   ##    ##    ##       ##     ## ###   ##   ## ##   ##          ##         ## ##   ##    ##    ##     ##  ##     ## ###   ## ##    ## 
 ##  ####  ##    ##    ##       ##     ## ####  ##  ##   ##  ##          ##        ##   ##  ##          ##     ##  ##     ## ####  ## ##       
 ##  ## ## ##    ##    ######   ########  ## ## ## ##     ## ##          ######   ##     ## ##          ##     ##  ##     ## ## ## ##  ######  
 ##  ##  ####    ##    ##       ##   ##   ##  #### ######### ##          ##       ######### ##          ##     ##  ##     ## ##  ####       ## 
 ##  ##   ###    ##    ##       ##    ##  ##   ### ##     ## ##          ##       ##     ## ##    ##    ##     ##  ##     ## ##   ### ##    ## 
#### ##    ##    ##    ######## ##     ## ##    ## ##     ## ########    ##       ##     ##  ######     ##    ####  #######  ##    ##  ######  

#ZVENO DISPATCHER EVENT
country_event = {
	id = bftb_bulgaria_factions.01

	hidden = yes

	is_triggered_only = yes

	immediate = {
		random_list = {
			10 = {
				modifier = {
					add = 30
					NOT = { has_country_flag = BUL_zveno_dissident_event_flag }
				}
				modifier = {
					add = 10
					check_variable = { BUL_zveno_popularity = 25 compare = greater_than_or_equals }
				}
				modifier = {
					add = 20
					check_variable = { BUL_zveno_popularity = 50 compare = greater_than_or_equals }
				}
				modifier = {
					add = 30
					check_variable = { BUL_zveno_popularity = 75 compare = greater_than_or_equals }
				}
				modifier = {
					add = 10
					has_stability < 0.5
				}
				modifier = {
					add = 10
					has_stability < 0.25
				}
				modifier = {
					add = 10
					has_stability < 0.15
				}
				modifier = {
					add = -30
					check_variable = { BUL_zveno_loyalty = 75 compare = greater_than_or_equals }	
				}
				modifier = {
					add = -20
					check_variable = { BUL_zveno_loyalty = 50 compare = greater_than_or_equals }	
				}
				modifier = {
					add = -10
					check_variable = { BUL_zveno_loyalty = 25 compare = greater_than_or_equals }	
				}
				modifier = {
					add = -30
					has_country_flag = { flag = BUL_zveno_dissident_event_flag value > 2 }
				}
				modifier = {
					add = -10
					has_completed_focus = BUL_dissolve_the_military_union
				}
				modifier = {
					add = -10
					has_country_flag = BUL_zveno_repressed_flag
				}
				modifier = {
					add = -20
					has_country_flag = BUL_zveno_leaders_imprisoned_flag
				}
				modifier = {
					add = -20
					has_country_flag = BUL_raided_zveno_supporters_flag
				}
				
				country_event = { id = bftb_bulgaria_factions.10 days = 15 random_days = 10 } 
			} 
			90 = { 		
				#Do nothing
			}
		}
	}	
}

#BROAD SOCIALISTS DISPATCHER EVENT
country_event = {
	id = bftb_bulgaria_factions.02

	hidden = yes

	is_triggered_only = yes

	immediate = {
		random_list = {
			10 = {
				modifier = {
					add = 30
					NOT = { has_country_flag = BUL_bs_dissident_event_flag }
				}
				modifier = {
					add = 10
					check_variable = { BUL_bs_popularity = 25 compare = greater_than_or_equals }
				}
				modifier = {
					add = 20
					check_variable = { BUL_bs_popularity = 50 compare = greater_than_or_equals }
				}
				modifier = {
					add = 30
					check_variable = { BUL_bs_popularity = 75 compare = greater_than_or_equals }
				}
				modifier = {
					add = 10
					has_stability < 0.5
				}
				modifier = {
					add = 10
					has_stability < 0.25
				}
				modifier = {
					add = 10
					has_stability < 0.15
				}
				modifier = {
					add = 10
					has_completed_focus = BUL_crush_the_communists
				}
				modifier = {
					add = -30
					check_variable = { BUL_bs_loyalty = 75 compare = greater_than_or_equals }	
				}
				modifier = {
					add = -20
					check_variable = { BUL_bs_loyalty = 50 compare = greater_than_or_equals }	
				}
				modifier = {
					add = -10
					check_variable = { BUL_bs_loyalty = 25 compare = greater_than_or_equals }	
				}
				modifier = {
					add = -30
					has_country_flag = { flag = BUL_bs_dissident_event_flag value > 2 }
				}
				modifier = {
					add = -10
					has_completed_focus = BUL_freedom_of_press
				}
				modifier = {
					add = -10
					has_country_flag = BUL_bs_repressed_flag
				}
				modifier = {
					add = -20
					has_country_flag = BUL_bs_leaders_imprisoned_flag
				}
				modifier = {
					add = -20
					has_country_flag = BUL_raided_bs_supporters_flag
				}
				
				country_event = { id = bftb_bulgaria_factions.20 days = 15 random_days = 10 } 
			} 
			90 = { 		
				#Do nothing
			}
		}
	}	
}

#AGRARIAN NATIONAL UNION DISPATCHER EVENT
country_event = {
	id = bftb_bulgaria_factions.03

	hidden = yes

	is_triggered_only = yes

	immediate = {
		random_list = {
			10 = {
				modifier = {
					add = 30
					NOT = { has_country_flag = BUL_bzns_dissident_event_flag }
				}
				modifier = {
					add = 10
					check_variable = { BUL_bzns_popularity = 25 compare = greater_than_or_equals }
				}
				modifier = {
					add = 20
					check_variable = { BUL_bzns_popularity = 50 compare = greater_than_or_equals }
				}
				modifier = {
					add = 30
					check_variable = { BUL_bzns_popularity = 75 compare = greater_than_or_equals }
				}
				modifier = {
					add = 10
					has_stability < 0.5
				}
				modifier = {
					add = 10
					has_stability < 0.25
				}
				modifier = {
					add = 10
					has_stability < 0.15
				}
				modifier = {
					add = -30
					check_variable = { BUL_bzns_loyalty = 75 compare = greater_than_or_equals }	
				}
				modifier = {
					add = -20
					check_variable = { BUL_bzns_loyalty = 50 compare = greater_than_or_equals }	
				}
				modifier = {
					add = -10
					check_variable = { BUL_bzns_loyalty = 25 compare = greater_than_or_equals }	
				}
				modifier = {
					add = -30
					has_country_flag = { flag = BUL_bzns_dissident_event_flag value > 2 }
				}
				modifier = {
					add = -10
					has_completed_focus = BUL_freedom_of_press
				}
				modifier = {
					add = -10
					has_country_flag = BUL_bzns_repressed_flag
				}
				modifier = {
					add = -20
					has_country_flag = BUL_bzns_leaders_imprisoned_flag
				}
				modifier = {
					add = -20
					has_country_flag = BUL_raided_bzns_supporters_flag
				}
				
				country_event = { id = bftb_bulgaria_factions.30 days = 15 random_days = 10 } 
			} 
			90 = { 		
				#Do nothing
			}
		}
	}	
}

#NATIONAL SOCIAL MOVEMENT DISPATCHER EVENT
country_event = {
	id = bftb_bulgaria_factions.04

	hidden = yes

	is_triggered_only = yes

	immediate = {
		random_list = {
			10 = {
				modifier = {
					add = 30
					NOT = { has_country_flag = BUL_nsm_dissident_event_flag }
				}
				modifier = {
					add = 10
					check_variable = { BUL_nsm_popularity = 25 compare = greater_than_or_equals }
				}
				modifier = {
					add = 20
					check_variable = { BUL_nsm_popularity = 50 compare = greater_than_or_equals }
				}
				modifier = {
					add = 30
					check_variable = { BUL_nsm_popularity = 75 compare = greater_than_or_equals }
				}
				modifier = {
					add = 10
					has_stability < 0.5
				}
				modifier = {
					add = 10
					has_stability < 0.25
				}
				modifier = {
					add = 10
					has_stability < 0.15
				}
				modifier = {
					add = -30
					check_variable = { BUL_nsm_loyalty = 75 compare = greater_than_or_equals }	
				}
				modifier = {
					add = -20
					check_variable = { BUL_nsm_loyalty = 50 compare = greater_than_or_equals }	
				}
				modifier = {
					add = -10
					check_variable = { BUL_nsm_loyalty = 25 compare = greater_than_or_equals }	
				}
				modifier = {
					add = -30
					has_country_flag = { flag = BUL_nsm_dissident_event_flag value > 2 }
				}
				modifier = {
					add = -10
					has_completed_focus = BUL_appoint_right_wing_ministers
				}
				modifier = {
					add = -10
					has_country_flag = BUL_nsm_repressed_flag
				}
				modifier = {
					add = -20
					has_country_flag = BUL_nsm_leaders_imprisoned_flag
				}
				modifier = {
					add = -20
					has_country_flag = BUL_raided_nsm_supporters_flag
				}
				
				country_event = { id = bftb_bulgaria_factions.40 days = 15 random_days = 10 } 
			} 
			90 = { 		
				#Do nothing
			}
		}
	}	
}

#ZVENO COUP DISPATCHER EVENT
country_event = {
	id = bftb_bulgaria_factions.05

	hidden = yes

	is_triggered_only = yes

	immediate = {
		random_list = {
			10 = {
				modifier = {
					add = 30
					has_country_flag = BUL_zveno_dissident_event_flag
				}
				modifier = {
					add = 30
					has_country_flag = { flag = BUL_zveno_dissident_event_flag value > 1 }
				}
				modifier = {
					add = 40
					has_country_flag = { flag = BUL_zveno_dissident_event_flag value > 2 }
				}
				modifier = {
					add = 80
					has_country_flag = { flag = BUL_zveno_dissident_event_flag value > 3 }
				}
				modifier = {
					add = 20
					check_variable = { BUL_zveno_popularity = 25 compare = greater_than_or_equals }
				}
				modifier = {
					add = 30
					check_variable = { BUL_zveno_popularity = 50 compare = greater_than_or_equals }
				}
				modifier = {
					add = 40
					check_variable = { BUL_zveno_popularity = 75 compare = greater_than_or_equals }
				}
				modifier = {
					add = 20
					has_completed_focus = BUL_dissolve_the_military_union
				}
				modifier = {
					add = 20
					has_stability < 0.5
				}
				modifier = {
					add = 25
					has_stability < 0.25
				}
				modifier = {
					add = 30
					has_stability < 0.15
				}
				modifier = {
					add = -30
					check_variable = { BUL_zveno_loyalty = 75 compare = greater_than_or_equals }	
				}
				modifier = {
					add = -15
					check_variable = { BUL_zveno_loyalty = 50 compare = greater_than_or_equals }	
				}
				modifier = {
					add = -5
					check_variable = { BUL_zveno_loyalty = 25 compare = greater_than_or_equals }	
				}			
				modifier = {
					add = -10
					has_completed_focus = BUL_cooperate_with_the_zveno
				}
				modifier = {
					add = -10
					has_country_flag = BUL_zveno_repressed_flag
				}
				modifier = {
					add = -10
					has_country_flag = BUL_disposed_of_zveno_generals_flag
				}
				modifier = {
					add = -20
					has_country_flag = BUL_zveno_leaders_imprisoned_flag
				}
				modifier = {
					add = -20
					has_country_flag = BUL_raided_zveno_supporters_flag
				}
				country_event = { id = bftb_bulgaria_factions.12 days = 15 random_days = 10 } 
			} 
			90 = { 		
				#Do nothing
			}
		}
	}	
}

#Dissident Event ZVENO - Military members conspiring
country_event = {
	id = bftb_bulgaria_factions.10
	title = bftb_bulgaria_factions.10.t
	desc = bftb_bulgaria_factions.10.desc
	picture = GFX_report_event_bul_military_parade_vidin 

	is_triggered_only = yes

	trigger = {
		original_tag = BUL
		NOT = {	has_country_flag = BUL_zveno_destroyed_flag } 								#Zveno is not destroyed
		NOT = {	has_country_flag = BUL_zveno_legalized_flag } 								#Zveno is not legalized
		OR = {						
			NOT = { has_country_flag = BUL_zveno_dissident_event_flag }						#Zveno has not trigger dissident event recently
			has_country_flag = { flag = BUL_zveno_dissident_event_flag days > 365 }
		}
		OR = {						
			NOT = { has_country_flag = BUL_zveno_repressed_flag }							#Zveno members have not been repressed recently
			has_country_flag = { flag = BUL_zveno_repressed_flag days > 720 }
		}
		NOT = { has_active_mission = BUL_impending_zveno_coup }								#Zveno coup mission is not ongoing
		NOT = { has_country_flag = BUL_zveno_coup_flag }									#Zveno CW has not started
		check_variable = { BUL_zveno_popularity = 5 compare = greater_than_or_equals }		#Zveno has some popularity
		check_variable = { BUL_zveno_loyalty = 50 compare = less_than_or_equals }			#Zveno has low loyalty
		OR = {
			NOT = { has_country_flag = BUL_fatherland_front_formed_flag }					#Fatherland Front has not formed or has being defeated
			has_country_flag = BUL_ff_destroyed_flag
		}
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = BUL_zveno_dissident_event_flag
				}
				modify_country_flag = { flag = BUL_zveno_dissident_event_flag value = 1 }
			}
			else = {
				set_country_flag = BUL_zveno_dissident_event_flag
			}
			set_country_flag = BUL_zveno_dissident_event_not_addressed_flag
			random_unit_leader = {
				limit = {
					NOT = { has_trait = trait_BUL_tsar_loyalist }
					NOT = { has_trait = trait_BUL_ff_sympathizer }
				}
				add_unit_leader_trait = trait_BUL_zveno_member
			}
		}
	}
	
	option = { #Investigate further
		name = bftb_bulgaria_factions.10.a

		ai_chance = {
			base = 5
			modifier = {
				factor = 5
				is_historical_focus_on = yes
			}
		}

		add_war_support = -0.05
		add_political_power = -50
		country_event = { id = bftb_bulgaria_factions.11 days = 30 random_days = 15 } #Event leading to discovering the conspirators and removing a Zveno general/adv

		if = {
			limit = {
				NOT = { has_decision = BUL_opression_repress_zveno }
			}
			unlock_decision_tooltip = BUL_opression_repress_zveno
		}
		custom_effect_tooltip = BUL_zveno_dissidents_tt
	}

	option = { #Do nothing
		name = bftb_bulgaria_factions.10.b

		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				is_historical_focus_on = yes #Don't want a CW on historical
			}
		}

		if = {
			limit = {
				NOT = { has_decision = BUL_opression_repress_zveno }
			}
			unlock_decision_tooltip = BUL_opression_repress_zveno
		}
		custom_effect_tooltip = BUL_zveno_dissidents_tt
	}		
}

#Dissident Event ZVENO - Conspirators exposed
country_event = {
	id = bftb_bulgaria_factions.11
	title = bftb_bulgaria_factions.11.t
	desc = bftb_bulgaria_factions.11.desc
	picture = GFX_report_event_bul_officers_burgas

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = BUL_zveno_conspirators_exposed_flag
				}
				modify_country_flag = { flag = BUL_zveno_conspirators_exposed_flag value = 1 }
			}
			else = {
				set_country_flag = BUL_zveno_conspirators_exposed_flag
			}
			random_unit_leader = {
				limit = {
					has_trait = trait_BUL_zveno_member
				}
				set_unit_leader_flag = BUL_zveno_conspirator_flag
				BUL = { set_variable = { BUL_zveno_conspirator = PREV } }
			}
		}
	}
	
	option = { #Imprison Conspirator
		name = bftb_bulgaria_factions.11.a

		#A general is removed
		random_unit_leader = {
			limit = {
				has_unit_leader_flag = BUL_zveno_conspirator_flag
			}
			retire = yes
		}
		custom_effect_tooltip = BUL_exposed_zveno_conspirator_tt
	}

	option = { #Do nothing
		name = bftb_bulgaria_factions.11.b

		hidden_effect = {
			#A general is removed
			random_unit_leader = {
				limit = {
					has_unit_leader_flag = BUL_zveno_conspirator_flag
				}
				clr_unit_leader_flag = BUL_zveno_conspirator_flag
			}
		}
	}
}

#Dissident Event ZVENO - Impending coup
country_event = {
	id = bftb_bulgaria_factions.12
	title = bftb_bulgaria_factions.12.t
	desc = bftb_bulgaria_factions.12.desc
	picture = GFX_report_event_military_planning

	is_triggered_only = yes

	trigger = {
		original_tag = BUL
		NOT = {	has_country_flag = BUL_zveno_destroyed_flag }
		NOT = {	has_country_flag = BUL_zveno_legalized_flag } 
		OR = {						
			NOT = { has_country_flag = BUL_zveno_repressed_flag }							#Zveno members have not been repressed recently
			has_country_flag = { flag = BUL_zveno_repressed_flag days > 365 }
		}
		NOT = { has_active_mission = BUL_impending_zveno_coup }								#Zveno coup mission is not ongoing
		NOT = { has_country_flag = BUL_zveno_coup_flag }									#Zveno CW has not started
		check_variable = { BUL_zveno_popularity = 5 compare = greater_than_or_equals }		#Zveno has some popularity
		check_variable = { BUL_zveno_loyalty = 50 compare = less_than_or_equals }			#Zveno has low loyalty
		OR = {
			NOT = { has_country_flag = BUL_fatherland_front_formed_flag }					#Fatherland Front has not formed or has being defeated
			has_country_flag = BUL_ff_destroyed_flag
		}
	}

	immediate = {
		hidden_effect = {
			set_country_flag = BUL_impending_zveno_coup_flag
		}
	}
	
	option = {
		name = bftb_bulgaria_factions.12.a

		effect_tooltip = {
			activate_mission = BUL_impending_zveno_coup
		}
	}		
}

#Dissident Event BS - Workers Strike
country_event = {
	id = bftb_bulgaria_factions.20
	title = bftb_bulgaria_factions.20.t
	desc = bftb_bulgaria_factions.20.desc
	picture = GFX_report_event_generic_strike 

	is_triggered_only = yes

	trigger = {
		original_tag = BUL
		NOT = {	has_country_flag = BUL_bs_destroyed_flag }
		NOT = { has_country_flag = BUL_bs_legalized_flag }
		check_variable = { BUL_bs_popularity = 5 compare = greater_than_or_equals }
		check_variable = { BUL_bs_loyalty = 50 compare = less_than_or_equals }
		OR = {
			NOT = { has_country_flag = BUL_bs_dissident_event_flag }
			has_country_flag = { flag = BUL_bs_dissident_event_flag days > 365 }
		}
		OR = {						
			NOT = { has_country_flag = BUL_bs_repressed_flag }							#BS members have not been repressed recently
			has_country_flag = { flag = BUL_bs_repressed_flag days > 720 }
		}
	}

	immediate = {
		set_country_flag = BUL_bs_dissident_event_flag
		set_country_flag = BUL_bs_dissident_event_not_addressed_flag
	}
	
	option = { #Do not employ violence
		name = bftb_bulgaria_factions.20.a

		ai_chance = {
			base = 5
			modifier = {
				factor = 5
				is_historical_focus_on = yes
			}
		}

		BUL_bs_medium_popularity_increase_effect = yes
		add_popularity = {
			ideology = communism
			popularity = 0.05
		}
		add_timed_idea = { idea = BUL_worker_strikes days = 120 }

		if = {
			limit = {
				NOT = { has_decision = BUL_opression_repress_bs }
			}
			unlock_decision_tooltip = BUL_opression_repress_bs
		}
	}
	option = { #Employ violence
		name = bftb_bulgaria_factions.20.b

		BUL_bs_low_popularity_increase_effect = yes
		add_stability = -0.05
		add_popularity = {
			ideology = communism
			popularity = 0.05
		}
		add_timed_idea = { idea = BUL_worker_strikes days = 15 }

		custom_effect_tooltip = BUL_bs_strikes_no_violence_tt

		country_event = { id = bftb_bulgaria_factions.21 hours = 8 random_hours = 4 }

		hidden_effect = {
			random_list = {
				20 = {
					random_owned_state = {
						limit = {
							industrial_complex > 0
						}
						set_state_flag = { flag = BUL_damaged_civ_factory_flag value = 1 }
						ROOT = { set_variable = { BUL_damaged_civs_state = PREV } }
					}
				}
				20 = {
					random_owned_state = {
						limit = {
							industrial_complex > 1
						}
						set_state_flag = { flag = BUL_damaged_civ_factory_flag value = 2 }
						ROOT = { set_variable = { BUL_damaged_civs_state = PREV } }
					}
				}
				20 = {
					random_owned_state = {
						limit = {
							industrial_complex > 2
						}
						set_state_flag = { flag = BUL_damaged_civ_factory_flag value = 3 }
						ROOT = { set_variable = { BUL_damaged_civs_state = PREV } }
					}
				}
			}
			if = {
				limit = {
					communism > 0.3
				}
				if = {
					limit = {
						any_owned_state = {
							arms_factory > 1
						}
					}
					random_owned_state = {
						limit = {
							arms_factory > 1
						}
						set_state_flag = { flag = BUL_damaged_military_factory_flag value = 2 }
						ROOT = { set_variable = { BUL_damaged_mils_state = PREV } }
					}
				}
				else = {
					random_owned_state = {
						limit = {
							arms_factory > 0
						}
						set_state_flag = { flag = BUL_damaged_military_factory_flag value = 1 }
						ROOT = { set_variable = { BUL_damaged_mils_state = PREV } }
					}
				}
			}
			if = {
				limit = {
					check_variable = { BUL_bs_popularity = 50 compare = greater_than_or_equals }
				}
				random_owned_state = {
					limit = {
						OR = {
							has_state_flag = BUL_damaged_civ_factory_flag
							has_state_flag = BUL_damaged_military_factory_flag
						}
					}
					set_state_flag = BUL_damaged_infrastructre_flag
					ROOT = { set_variable = { BUL_damaged_infrastructure_state = PREV } }
				}
			}
		}
		
		if = {
			limit = {
				NOT = { has_decision = BUL_opression_repress_bs }
			}
			unlock_decision_tooltip = BUL_opression_repress_bs
		}
	}
}

#Dissident Event BS - Workers Strikes Outcome
country_event = {
	id = bftb_bulgaria_factions.21
	title = bftb_bulgaria_factions.21.t
	desc = bftb_bulgaria_factions.21.desc
	picture = GFX_report_event_generic_riot

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_owned_state = {
				limit = {
					has_state_flag = BUL_damaged_civ_factory_flag
				}
				if = {
					limit = {
						has_state_flag = { flag = BUL_damaged_civ_factory_flag value = 1 }
					}
					damage_building = {
						type = industrial_complex
						damage = 1
					}
				}
				else_if = {
					limit = {
						has_state_flag = { flag = BUL_damaged_civ_factory_flag value = 2 }
					}
					damage_building = {
						type = industrial_complex
						damage = 1
					}
					damage_building = {
						type = industrial_complex
						damage = 1
					}
				}
				else = {
					damage_building = {
						type = industrial_complex
						damage = 1
					}
					damage_building = {
						type = industrial_complex
						damage = 1
					}
					damage_building = {
						type = industrial_complex
						damage = 1
					}
				}
			}
			
			if = {
				limit = {
					any_owned_state = {
						has_state_flag = { flag = BUL_damaged_military_factory_flag value = 1 }
					}
				}
				random_owned_state = {
					limit = {
						has_state_flag = BUL_damaged_military_factory_flag
					}
					damage_building = {
						type = arms_factory
						damage = 1
					}
				}
			}
			else_if = {
				limit = {
					any_owned_state = {
						has_state_flag = { flag = BUL_damaged_military_factory_flag value = 2 }
					}
				}
				random_owned_state = {
					limit = {
						has_state_flag = BUL_damaged_military_factory_flag
					}
					damage_building = {
						type = arms_factory
						damage = 0.75
					}
					damage_building = {
						type = arms_factory
						damage = 0.5
					}
				}
			}
			if = {
				limit = {
					any_owned_state = {
						has_state_flag = BUL_damaged_infrastructre_flag
					}
				}
				random_owned_state = {
					limit = {
						has_state_flag = BUL_damaged_infrastructre_flag
					}
					damage_building = {
						type = infrastructure
						damage = 2
					}
				}
			}
		}
	}

	option = {
		name = bftb_bulgaria_factions.21.a

		effect_tooltip = {
			random_owned_state = {
				limit = {
					has_state_flag = BUL_damaged_civ_factory_flag
				}
				if = {
					limit = {
						has_state_flag = { flag = BUL_damaged_civ_factory_flag value = 1 }
					}
					damage_building = {
						type = industrial_complex
						damage = 1
					}
				}
				else_if = {
					limit = {
						has_state_flag = { flag = BUL_damaged_civ_factory_flag value = 2 }
					}
					damage_building = {
						type = industrial_complex
						damage = 1
					}
					damage_building = {
						type = industrial_complex
						damage = 1
					}
				}
				else = {
					damage_building = {
						type = industrial_complex
						damage = 1
					}
					damage_building = {
						type = industrial_complex
						damage = 1
					}
					damage_building = {
						type = industrial_complex
						damage = 1
					}
				}
			}
			
			if = {
				limit = {
					any_owned_state = {
						has_state_flag = { flag = BUL_military_factory_damaged_flag value = 1 }
					}
				}
				random_owned_state = {
					limit = {
						has_state_flag = BUL_military_factory_damaged_flag
					}
					damage_building = {
						type = arms_factory
						damage = 1
					}
				}
			}
			else_if = {
				limit = {
					any_owned_state = {
						has_state_flag = { flag = BUL_military_factory_damaged_flag value = 2 }
					}
				}
				random_owned_state = {
					limit = {
						has_state_flag = BUL_military_factory_damaged_flag
					}
					damage_building = {
						type = arms_factory
						damage = 0.75
					}
					damage_building = {
						type = arms_factory
						damage = 0.5
					}
				}
			}
			if = {
				limit = {
					any_owned_state = {
						has_state_flag = BUL_damaged_infrastructre_flag
					}
				}
				random_owned_state = {
					limit = {
						has_state_flag = BUL_damaged_infrastructre_flag
					}
					damage_building = {
						type = infrastructure
						damage = 2
					}
				}
			}
		}
	}
}

#Dissident Event BZNS - Agrarian Support Rising in the Countryside
country_event = {
	id = bftb_bulgaria_factions.30
	title = bftb_bulgaria_factions.30.t
	desc = bftb_bulgaria_factions.30.desc
	picture = GFX_report_event_bul_making_bricks_for_school

	is_triggered_only = yes

	trigger = {
		original_tag = BUL
		NOT = {	has_country_flag = BUL_bzns_destroyed_flag }
		NOT = { has_country_flag = BUL_bzns_legalized_flag }
		check_variable = { BUL_bzns_popularity = 5 compare = greater_than_or_equals }
		check_variable = { BUL_bzns_loyalty = 50 compare = less_than_or_equals }
		OR = {
			NOT = { has_country_flag = BUL_bzns_dissident_event_flag }
			has_country_flag = { flag = BUL_bzns_dissident_event_flag days > 365 }
		}
		OR = {						
			NOT = { has_country_flag = BUL_bzns_repressed_flag }							#BZNS members have not been repressed recently
			has_country_flag = { flag = BUL_bzns_repressed_flag days > 720 }
		}
	}
	
	immediate = {
		hidden_effect = {
			if = {
				limit = { has_country_flag = BUL_bzns_dissident_event_flag }
				clr_country_flag = BUL_bzns_dissident_event_flag
			}
			set_country_flag = BUL_bzns_dissident_event_flag
			set_country_flag = BUL_bzns_dissident_event_not_addressed_flag
		}
	}

	option = {
		name = bftb_bulgaria_factions.30.a

		add_stability = -0.05
		add_war_support = -0.1
		add_popularity = {
			ideology = democratic
			popularity = 0.05
		}

		if = {
			limit = {
				NOT = { has_decision = BUL_opression_repress_bzns }
			}
			unlock_decision_tooltip = BUL_opression_repress_bzns
		}
	}
}

#Flavor Event BZNS - Agrarian Support splits!
country_event = {
	id = bftb_bulgaria_factions.31
	title = bftb_bulgaria_factions.31.t
	desc = bftb_bulgaria_factions.31.desc
	picture = GFX_report_event_generic_rally2 

	trigger = {
		has_dlc = "Battle for the Bosporus"
		original_tag = BUL
		date > 1938.1.1
		NOT = {	has_country_flag = BUL_bzns_destroyed_flag }
		NOT = { has_country_flag = BUL_bzns_integrated_flag }
		OR = {
			check_variable = { BUL_bzns_popularity = 30 compare = less_than_or_equals }
			check_variable = { BUL_bzns_popularity = 70 compare = greater_than_or_equals }
		}
	}

	mean_time_to_happen = {
		days = 365
		modifier = {
			factor = 0.75
			check_variable = { BUL_bzns_loyalty = 15 compare = less_than_or_equals }
		}
	}

	fire_only_once = yes
	
	option = {
		name = bftb_bulgaria_factions.31.a

		BUL_bzns_high_popularity_decrease_effect = yes
		BUL_bzns_low_loyalty_increase_effect = yes
		add_political_power = 50
		add_popularity = {
			ideology = communism
			popularity = 0.05
		}
	}
}

#Dissident Event NSM - March on Turnovo (March on "X" afterwards)
country_event = {
	id = bftb_bulgaria_factions.40
	title = bftb_bulgaria_factions.40.t
	desc = bftb_bulgaria_factions.40.desc
	picture = GFX_report_event_fascists_posing 

	is_triggered_only = yes

	trigger = {
		original_tag = BUL
		NOT = {	has_country_flag = BUL_nsm_destroyed_flag }
		NOT = { has_country_flag = BUL_nsm_legalized_flag }
		check_variable = { BUL_nsm_popularity = 5 compare = greater_than_or_equals }
		check_variable = { BUL_nsm_loyalty = 50 compare = less_than_or_equals }
		OR = {
			NOT = { has_country_flag = BUL_nsm_dissident_event_flag }
			has_country_flag = { flag = BUL_nsm_dissident_event_flag days > 365 }
		}
		OR = {						
			NOT = { has_country_flag = BUL_nsm_repressed_flag }							#NSM members have not been repressed recently
			has_country_flag = { flag = BUL_nsm_repressed_flag days > 720 }
		}
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = { has_country_flag = BUL_nsm_dissident_event_flag }
				clr_country_flag = BUL_nsm_dissident_event_flag
			}
			set_country_flag = BUL_nsm_dissident_event_flag
			set_country_flag = BUL_nsm_dissident_event_not_addressed_flag
		}
	}
	
	option = { #Allow them
		name = bftb_bulgaria_factions.40.a

		ai_chance = {
			base = 5
			modifier = {
				factor = 5
				is_historical_focus_on = yes
			}
		}

		BUL_nsm_high_popularity_increase_effect = yes
		add_war_support = 0.05
		add_popularity = {
			ideology = fascism
			popularity = 0.1
		}

		if = {
			limit = {
				NOT = { has_decision = BUL_opression_repress_nsm }
			}
			unlock_decision_tooltip = BUL_opression_repress_nsm
		}
		hidden_effect = {#Randomize next location
			BUL_get_random_bulgarian_destination_march = yes
		}
	}

	option = { #Repress demonstrators
		name = bftb_bulgaria_factions.40.b

		BUL_nsm_low_loyalty_decrease_effect = yes
		BUL_nsm_low_popularity_decrease_effect = yes
		add_stability = -0.05
		add_popularity = {
			ideology = fascism
			popularity = 0.05
		}

		if = {
			limit = {
				NOT = { has_decision = BUL_opression_repress_nsm }
			}
			unlock_decision_tooltip = BUL_opression_repress_nsm
		}
		hidden_effect = {#Randomize next location
			BUL_get_random_bulgarian_destination_march = yes
		}
	}
}

# Zveno Repression - Success
country_event = {
	id = bftb_bulgaria_factions.50
	title = bftb_bulgaria_factions.50.t
	desc = bftb_bulgaria_factions.50.desc
	picture = GFX_report_event_gathering_protest 

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.50.a

		BUL_zveno_low_loyalty_decrease_effect = yes
		BUL_zveno_low_popularity_decrease_effect = yes

		add_stability = -0.05

		#Add days to Zveno Coup timer if active
		if = {
			limit = {
				has_active_mission = BUL_impending_zveno_coup
			}
			add_days_mission_timeout = {
				mission = BUL_impending_zveno_coup
				days = BUL_zveno_coup_timer_delay_high
			}
		}
	}
}

# Zveno Repression - Extra Success
country_event = {
	id = bftb_bulgaria_factions.51
	title = bftb_bulgaria_factions.51.t
	desc = bftb_bulgaria_factions.51.desc
	picture = GFX_report_event_gathering_protest  

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.51.a

		BUL_zveno_low_loyalty_decrease_effect = yes
		BUL_zveno_medium_popularity_decrease_effect = yes

		add_stability = -0.05
		add_political_power = 50

		#Add days to Zveno Coup timer if active
		if = {
			limit = {
				has_active_mission = BUL_impending_zveno_coup
			}
			add_days_mission_timeout = {
				mission = BUL_impending_zveno_coup
				days = BUL_zveno_coup_timer_delay_high
			}
		}
	}
}

# Zveno Repression - Failure
country_event = {
	id = bftb_bulgaria_factions.52
	title = bftb_bulgaria_factions.52.t
	desc = bftb_bulgaria_factions.52.desc
	picture = GFX_report_event_generic_riot

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.52.a

		BUL_zveno_medium_loyalty_decrease_effect = yes

		add_stability = -0.1
	}
}

# Zveno Imprison Leaders - Success
country_event = {
	id = bftb_bulgaria_factions.53
	title = bftb_bulgaria_factions.53.t
	desc = bftb_bulgaria_factions.53.desc
	picture = GFX_report_event_bul_boris_military 

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.53.a

		BUL_zveno_low_loyalty_decrease_effect = yes
		BUL_zveno_high_popularity_decrease_effect = yes

		add_political_power = 50

		#Add days to Zveno Coup timer if active
		if = {
			limit = {
				has_active_mission = BUL_impending_zveno_coup
			}
			add_days_mission_timeout = {
				mission = BUL_impending_zveno_coup
				days = BUL_zveno_coup_timer_delay_high
			}
		}
	}
}

# Zveno Imprison Leaders - Failure
country_event = {
	id = bftb_bulgaria_factions.54
	title = bftb_bulgaria_factions.54.t
	desc = bftb_bulgaria_factions.54.desc
	picture = GFX_report_event_bul_military_parade_vidin 

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.54.a

		BUL_zveno_medium_loyalty_decrease_effect = yes
		BUL_zveno_medium_popularity_decrease_effect = yes

		#Add days to Zveno Coup timer if active
		if = {
			limit = {
				has_active_mission = BUL_impending_zveno_coup
			}
			add_days_mission_timeout = {
				mission = BUL_impending_zveno_coup
				days = BUL_zveno_coup_timer_delay_medium
			}
		}
	}
}

# Zveno Imprison Leaders - Backfired
country_event = {
	id = bftb_bulgaria_factions.55
	title = bftb_bulgaria_factions.55.t
	desc = bftb_bulgaria_factions.55.desc
	picture = GFX_report_event_generic_riot

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.55.a

		BUL_zveno_low_loyalty_decrease_effect = yes
		
		add_stability = -0.1

		#Add days to Zveno Coup timer if active
		if = {
			limit = {
				has_active_mission = BUL_impending_zveno_coup
			}
			add_days_mission_timeout = {
				mission = BUL_impending_zveno_coup
				days = BUL_zveno_coup_timer_delay_low
			}
		}
	}
}

# Broad Socialists Repression - Success
country_event = {
	id = bftb_bulgaria_factions.60
	title = bftb_bulgaria_factions.60.t
	desc = bftb_bulgaria_factions.60.desc
	picture = GFX_report_event_gathering_protest 

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.60.a

		BUL_bs_low_loyalty_decrease_effect = yes
		BUL_bs_low_popularity_decrease_effect = yes

		add_stability = -0.05
	}
}

# Broad Socialists Repression - Extra Success
country_event = {
	id = bftb_bulgaria_factions.61
	title = bftb_bulgaria_factions.61.t
	desc = bftb_bulgaria_factions.61.desc
	picture = GFX_report_event_gathering_protest  

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.61.a

		BUL_bs_low_loyalty_decrease_effect = yes
		BUL_bs_medium_popularity_decrease_effect = yes

		add_stability = -0.05
		add_political_power = 50
	}
}

# Broad Socialists Repression - Failure
country_event = {
	id = bftb_bulgaria_factions.62
	title = bftb_bulgaria_factions.62.t
	desc = bftb_bulgaria_factions.62.desc
	picture = GFX_report_event_generic_riot

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.62.a

		BUL_bs_medium_loyalty_decrease_effect = yes

		add_stability = -0.1
	}
}

# Broad Socialists Imprison Leaders - Success
country_event = {
	id = bftb_bulgaria_factions.63
	title = bftb_bulgaria_factions.63.t
	desc = bftb_bulgaria_factions.63.desc
	picture = GFX_report_event_bul_boris_military

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.63.a

		BUL_bs_low_loyalty_decrease_effect = yes
		BUL_bs_high_popularity_decrease_effect = yes

		add_political_power = 50
	}
}

# Broad Socialists Imprison Leaders - Failure
country_event = {
	id = bftb_bulgaria_factions.64
	title = bftb_bulgaria_factions.64.t
	desc = bftb_bulgaria_factions.64.desc
	picture = GFX_report_event_bul_military_parade_vidin

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.64.a

		BUL_bs_low_loyalty_decrease_effect = yes
		BUL_bs_medium_popularity_decrease_effect = yes
	}
}

# Broad Socialists Imprison Leaders - Backfired
country_event = {
	id = bftb_bulgaria_factions.65
	title = bftb_bulgaria_factions.65.t
	desc = bftb_bulgaria_factions.65.desc
	picture = GFX_report_event_generic_riot

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.65.a

		BUL_bs_low_loyalty_decrease_effect = yes

		add_stability = -0.1
	}
}

# Agrarian Union Repression - Success
country_event = {
	id = bftb_bulgaria_factions.70
	title = bftb_bulgaria_factions.70.t
	desc = bftb_bulgaria_factions.70.desc
	picture = GFX_report_event_gathering_protest 

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.70.a

		BUL_bzns_low_loyalty_decrease_effect = yes
		BUL_bzns_low_popularity_decrease_effect = yes
		
		add_stability = -0.05
	}
}

# Agrarian Union Repression - Extra Success
country_event = {
	id = bftb_bulgaria_factions.71
	title = bftb_bulgaria_factions.71.t
	desc = bftb_bulgaria_factions.71.desc
	picture = GFX_report_event_gathering_protest  

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.71.a

		BUL_bzns_low_loyalty_decrease_effect = yes
		BUL_bzns_medium_popularity_decrease_effect = yes

		add_stability = -0.05
		add_political_power = 50
	}
}

# Agrarian Union Repression - Failure
country_event = {
	id = bftb_bulgaria_factions.72
	title = bftb_bulgaria_factions.72.t
	desc = bftb_bulgaria_factions.72.desc
	picture = GFX_report_event_generic_riot

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.72.a

		BUL_bzns_medium_loyalty_decrease_effect = yes

		add_stability = -0.1
	}
}

# Agrarian Union Imprison Leaders - Success
country_event = {
	id = bftb_bulgaria_factions.73
	title = bftb_bulgaria_factions.73.t
	desc = bftb_bulgaria_factions.73.desc
	picture = GFX_report_event_bul_boris_military

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.73.a

		BUL_bzns_low_loyalty_decrease_effect = yes
		BUL_bzns_high_popularity_decrease_effect = yes

		add_political_power = 50
	}
}

# Agrarian Union Imprison Leaders - Failure
country_event = {
	id = bftb_bulgaria_factions.74
	title = bftb_bulgaria_factions.74.t
	desc = bftb_bulgaria_factions.74.desc
	picture = GFX_report_event_bul_military_parade_vidin

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.74.a

		BUL_bzns_low_loyalty_decrease_effect = yes
		BUL_bzns_medium_popularity_decrease_effect = yes
	}
}

# Agrarian Union Imprison Leaders - Backfired
country_event = {
	id = bftb_bulgaria_factions.75
	title = bftb_bulgaria_factions.75.t
	desc = bftb_bulgaria_factions.75.desc
	picture = GFX_report_event_generic_riot

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.75.a

		BUL_bzns_low_loyalty_decrease_effect = yes

		add_stability = -0.1
	}
}

# National Social Movement Repression - Success
country_event = {
	id = bftb_bulgaria_factions.80
	title = bftb_bulgaria_factions.80.t
	desc = bftb_bulgaria_factions.80.desc
	picture = GFX_report_event_gathering_protest 

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.80.a

		BUL_nsm_low_loyalty_decrease_effect = yes
		BUL_nsm_low_popularity_decrease_effect = yes

		add_stability = -0.05
	}
}

# National Social Movement Repression - Extra Success
country_event = {
	id = bftb_bulgaria_factions.81
	title = bftb_bulgaria_factions.81.t
	desc = bftb_bulgaria_factions.81.desc
	picture = GFX_report_event_gathering_protest  

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.81.a

		BUL_nsm_low_loyalty_decrease_effect = yes
		BUL_nsm_medium_popularity_decrease_effect = yes

		add_stability = -0.05
		add_political_power = 50
	}
}

# National Social Movement Repression - Failure
country_event = {
	id = bftb_bulgaria_factions.82
	title = bftb_bulgaria_factions.82.t
	desc = bftb_bulgaria_factions.82.desc
	picture = GFX_report_event_generic_riot

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.82.a

		BUL_nsm_medium_loyalty_decrease_effect = yes

		add_stability = -0.1
	}
}

# National Social Movement Imprison Leaders - Success
country_event = {
	id = bftb_bulgaria_factions.83
	title = bftb_bulgaria_factions.83.t
	desc = bftb_bulgaria_factions.83.desc
	picture = GFX_report_event_bul_boris_military

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.83.a

		BUL_nsm_low_loyalty_decrease_effect = yes
		BUL_nsm_high_popularity_decrease_effect = yes

		add_political_power = 50
	}
}

# National Social Movement Imprison Leaders - Failure
country_event = {
	id = bftb_bulgaria_factions.84
	title = bftb_bulgaria_factions.84.t
	desc = bftb_bulgaria_factions.84.desc
	picture = GFX_report_event_bul_military_parade_vidin

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.84.a

		BUL_nsm_low_loyalty_decrease_effect = yes
		BUL_nsm_medium_popularity_decrease_effect = yes
	}
}

# National Social Movement Imprison Leaders - Backfired
country_event = {
	id = bftb_bulgaria_factions.85
	title = bftb_bulgaria_factions.85.t
	desc = bftb_bulgaria_factions.85.desc
	picture = GFX_report_event_generic_riot

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.85.a

		BUL_nsm_low_loyalty_decrease_effect = yes

		add_stability = -0.1
	}
}

# Integrated Faction - ZVENO
country_event = {
	id = bftb_bulgaria_factions.17
	title = bftb_bulgaria_factions.17.t
	desc = bftb_bulgaria_factions.17.desc
	picture = GFX_report_event_bul_boris_with_muraviev

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.17.a

		add_political_power = 120
		add_stability = 0.1
		if = {
			limit = {
				NOT = { has_country_flag = BUL_bs_destroyed_flag }
				NOT = { has_country_flag = BUL_bs_integrated_flag }
			}
			BUL_bs_medium_loyalty_decrease_effect = yes
		}
		if = {
			limit = {
				NOT = { has_country_flag = BUL_bzns_destroyed_flag }
				NOT = { has_country_flag = BUL_bzns_integrated_flag }
			}
			BUL_bzns_medium_loyalty_decrease_effect = yes
		}
		if = {
			limit = {
				NOT = { has_country_flag = BUL_nsm_destroyed_flag }
				NOT = { has_country_flag = BUL_nsm_integrated_flag }
			}
			BUL_nsm_medium_loyalty_decrease_effect = yes
		}
	}		
}

# Integrated Faction - BS
country_event = {
	id = bftb_bulgaria_factions.27
	title = bftb_bulgaria_factions.27.t
	desc = bftb_bulgaria_factions.27.desc
	picture = GFX_report_event_bul_boris_with_muraviev

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.27.a

		add_political_power = 120
		add_stability = 0.1
		if = {
			limit = {
				NOT = { has_country_flag = BUL_zveno_destroyed_flag }
				NOT = { has_country_flag = BUL_zveno_integrated_flag }
			}
			BUL_zveno_medium_loyalty_decrease_effect = yes
		}
		if = {
			limit = {
				NOT = { has_country_flag = BUL_bzns_destroyed_flag }
				NOT = { has_country_flag = BUL_bzns_integrated_flag }
			}
			BUL_bzns_medium_loyalty_decrease_effect = yes
		}
		if = {
			limit = {
				NOT = { has_country_flag = BUL_nsm_destroyed_flag }
				NOT = { has_country_flag = BUL_nsm_integrated_flag }
			}
			BUL_nsm_medium_loyalty_decrease_effect = yes
		}
	}		
}

# Integrated Faction - BZNS
country_event = {
	id = bftb_bulgaria_factions.37
	title = bftb_bulgaria_factions.37.t
	desc = bftb_bulgaria_factions.37.desc
	picture = GFX_report_event_bul_boris_with_muraviev

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.37.a

		add_political_power = 120
		add_stability = 0.1
		if = {
			limit = {
				NOT = { has_country_flag = BUL_zveno_destroyed_flag }
				NOT = { has_country_flag = BUL_zveno_integrated_flag }
			}
			BUL_zveno_medium_loyalty_decrease_effect = yes
		}
		if = {
			limit = {
				NOT = { has_country_flag = BUL_bs_destroyed_flag }
				NOT = { has_country_flag = BUL_bs_integrated_flag }
			}
			BUL_bs_medium_loyalty_decrease_effect = yes
		}
		if = {
			limit = {
				NOT = { has_country_flag = BUL_nsm_destroyed_flag }
				NOT = { has_country_flag = BUL_nsm_integrated_flag }
			}
			BUL_nsm_medium_loyalty_decrease_effect = yes
		}
	}		
}

# Integrated Faction - NSM
country_event = {
	id = bftb_bulgaria_factions.47
	title = bftb_bulgaria_factions.47.t
	desc = bftb_bulgaria_factions.47.desc
	picture = GFX_report_event_bul_boris_with_muraviev

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.47.a

		add_political_power = 120
		add_stability = 0.1
		if = {
			limit = {
				NOT = { has_country_flag = BUL_zveno_destroyed_flag }
				NOT = { has_country_flag = BUL_zveno_integrated_flag }
			}
			BUL_zveno_medium_loyalty_decrease_effect = yes
		}
		if = {
			limit = {
				NOT = { has_country_flag = BUL_bs_destroyed_flag }
				NOT = { has_country_flag = BUL_bs_integrated_flag }
			}
			BUL_bs_medium_loyalty_decrease_effect = yes
		}
		if = {
			limit = {
				NOT = { has_country_flag = BUL_bzns_destroyed_flag }
				NOT = { has_country_flag = BUL_bzns_integrated_flag }
			}
			BUL_bzns_medium_loyalty_decrease_effect = yes
		}
	}		
}

# Destroyed Faction - ZVENO
country_event = {
	id = bftb_bulgaria_factions.19
	title = bftb_bulgaria_factions.19.t
	desc = bftb_bulgaria_factions.19.desc
	picture = GFX_report_event_bul_military_parade_vidin 

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.19.a

		add_political_power = 120
		add_stability = 0.1
		if = {
			limit = {
				has_idea = BUL_zveno_ns
			}
			remove_ideas = BUL_zveno_ns
		}
		if = {
			limit = {
				NOT = { has_country_flag = BUL_bs_destroyed_flag }
				NOT = { has_country_flag = BUL_bs_integrated_flag }
			}
			BUL_bs_low_loyalty_increase_effect = yes
		}
		if = {
			limit = {
				NOT = { has_country_flag = BUL_bzns_destroyed_flag }
				NOT = { has_country_flag = BUL_bzns_integrated_flag }
			}
			BUL_bzns_low_loyalty_increase_effect = yes
		}
		if = {
			limit = {
				NOT = { has_country_flag = BUL_nsm_destroyed_flag }
				NOT = { has_country_flag = BUL_nsm_integrated_flag }
			}
			BUL_nsm_low_loyalty_increase_effect = yes
		}
	}		
}

# Destroyed Faction - BS
country_event = {
	id = bftb_bulgaria_factions.29
	title = bftb_bulgaria_factions.29.t
	desc = bftb_bulgaria_factions.29.desc
	picture = GFX_report_event_bul_military_parade_vidin 

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.29.a

		add_political_power = 120
		add_stability = 0.1
		if = {
			limit = {
				NOT = { has_country_flag = BUL_zveno_destroyed_flag }
				NOT = { has_country_flag = BUL_zveno_integrated_flag }
			}
			BUL_zveno_low_loyalty_increase_effect = yes
		}
		if = {
			limit = {
				NOT = { has_country_flag = BUL_bzns_destroyed_flag }
				NOT = { has_country_flag = BUL_bzns_integrated_flag }
			}
			BUL_bzns_low_loyalty_increase_effect = yes
		}
		if = {
			limit = {
				NOT = { has_country_flag = BUL_nsm_destroyed_flag }
				NOT = { has_country_flag = BUL_nsm_integrated_flag }
			}
			BUL_nsm_low_loyalty_increase_effect = yes
		}
	}		
}

# Destroyed Faction - BZNS
country_event = {
	id = bftb_bulgaria_factions.39
	title = bftb_bulgaria_factions.39.t
	desc = bftb_bulgaria_factions.39.desc
	picture = GFX_report_event_bul_military_parade_vidin 

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.39.a

		add_political_power = 120
		add_stability = 0.1
		if = {
			limit = {
				NOT = { has_country_flag = BUL_zveno_destroyed_flag }
				NOT = { has_country_flag = BUL_zveno_integrated_flag }
			}
			BUL_zveno_low_loyalty_increase_effect = yes
		}
		if = {
			limit = {
				NOT = { has_country_flag = BUL_bs_destroyed_flag }
				NOT = { has_country_flag = BUL_bs_integrated_flag }
			}
			BUL_bs_low_loyalty_increase_effect = yes
		}
		if = {
			limit = {
				NOT = { has_country_flag = BUL_nsm_destroyed_flag }
				NOT = { has_country_flag = BUL_nsm_integrated_flag }
			}
			BUL_nsm_low_loyalty_increase_effect = yes
		}
	}		
}

# Destroyed Faction - NSM
country_event = {
	id = bftb_bulgaria_factions.49
	title = bftb_bulgaria_factions.49.t
	desc = bftb_bulgaria_factions.49.desc
	picture = GFX_report_event_bul_military_parade_vidin 

	is_triggered_only = yes
	
	option = {
		name = bftb_bulgaria_factions.49.a

		add_political_power = 120
		add_stability = 0.1
		if = {
			limit = {
				NOT = { has_country_flag = BUL_zveno_destroyed_flag }
				NOT = { has_country_flag = BUL_zveno_integrated_flag }
			}
			BUL_zveno_low_loyalty_increase_effect = yes
		}
		if = {
			limit = {
				NOT = { has_country_flag = BUL_bs_destroyed_flag }
				NOT = { has_country_flag = BUL_bs_integrated_flag }
			}
			BUL_bs_low_loyalty_increase_effect = yes
		}
		if = {
			limit = {
				NOT = { has_country_flag = BUL_bzns_destroyed_flag }
				NOT = { has_country_flag = BUL_bzns_integrated_flag }
			}
			BUL_bzns_low_loyalty_increase_effect = yes
		}
	}		
}


#### ##     ## ########   #######  
 ##  ###   ### ##     ## ##     ## 
 ##  #### #### ##     ## ##     ## 
 ##  ## ### ## ########  ##     ## 
 ##  ##     ## ##   ##   ##     ## 
 ##  ##     ## ##    ##  ##     ## 
#### ##     ## ##     ##  #######  


#The IMRO is back! - Event for YUG and GRE (or whoever occupy Macedonian states)
country_event = {
	id = bftb_bulgaria_imro.1
	title = bftb_bulgaria_imro.1.t
	desc = bftb_bulgaria_imro.1.desc
	picture = GFX_report_event_bul_troops_macedonia

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_imro.1.a

		effect_tooltip = {
			every_controlled_state = {
				limit = {
					BUL_is_macedonian_state = yes
					is_controlled_by = ROOT
				}
				remove_core_of = controller
				start_resistance = BUL
			}
		}
		unlock_decision_tooltip = BUL_repress_imro_foreign
		unlock_decision_tooltip = BUL_destroy_imro_foreign
	}
}

#IMRO spreads Bulgarian sentiment - Event for YUG and GRE (or whoever occupy Macedonian states)
country_event = {
	id = bftb_bulgaria_imro.2
	title = bftb_bulgaria_imro.2.t
	desc = bftb_bulgaria_imro.2.desc
	picture = GFX_report_event_albanian_partisans

	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = bftb_bulgaria_imro.2.a

		effect_tooltip = {
			every_controlled_state = {
				limit = {
					BUL_is_macedonian_state = yes
					is_controlled_by = ROOT
				}
				add_dynamic_modifier = { modifier = widespread_bulgarian_sentiment_01 }
			}
		}
	}
}


########  ######     ###    ########     ########   #######  ########  ####  ######     #### #### #### 
   ##    ##    ##   ## ##   ##     ##    ##     ## ##     ## ##     ##  ##  ##    ##     ##   ##   ##  
   ##    ##        ##   ##  ##     ##    ##     ## ##     ## ##     ##  ##  ##           ##   ##   ##  
   ##     ######  ##     ## ########     ########  ##     ## ########   ##   ######      ##   ##   ##  
   ##          ## ######### ##   ##      ##     ## ##     ## ##   ##    ##        ##     ##   ##   ##  
   ##    ##    ## ##     ## ##    ##     ##     ## ##     ## ##    ##   ##  ##    ##     ##   ##   ##  
   ##     ######  ##     ## ##     ##    ########   #######  ##     ## ####  ######     #### #### #### 


#Tsar Boris visits a town
country_event = {
	id = bftb_bulgaria_tsar_boris.1
	title = bftb_bulgaria_tsar_boris.1.t
	desc = {
		text = bftb_bulgaria_tsar_boris.1.desc_success
		trigger = {
			NOT = { has_country_flag = BUL_a_royal_visit_extra_success_flag }
			NOT = { has_country_flag = BUL_a_royal_visit_failure_flag }
		}
	}
	desc = {
		text = bftb_bulgaria_tsar_boris.1.desc_extra_success
		trigger = {
			has_country_flag = BUL_a_royal_visit_extra_success_flag
		}
	}
	desc = {
		text = bftb_bulgaria_tsar_boris.1.desc_failure
		trigger = {
			has_country_flag = BUL_a_royal_visit_failure_flag
		}
	}

	picture = GFX_report_event_bul_boris_tour

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_tsar_boris.1.a

		trigger = { 
			NOT = { has_country_flag = BUL_a_royal_visit_extra_success_flag }
			NOT = { has_country_flag = BUL_a_royal_visit_failure_flag }
		}

		add_stability = 0.05
		add_popularity = {
			ideology = neutrality
			popularity = 0.05
		}
		hidden_effect = { #Randomize next location
			BUL_get_random_bulgarian_destination_royal_visit = yes
		}
	}

	option = { #Extra success
		name = bftb_bulgaria_tsar_boris.1.b

		trigger = {
			has_country_flag = BUL_a_royal_visit_extra_success_flag
		}

		add_stability = 0.1
		add_popularity = {
			ideology = neutrality
			popularity = 0.1
		}
		clr_country_flag = BUL_a_royal_visit_extra_success_flag
		hidden_effect = { #Randomize next location
			BUL_get_random_bulgarian_destination_royal_visit = yes
		}
	}
	option = { #Failure
		name = bftb_bulgaria_tsar_boris.1.c
		
		trigger = {
			has_country_flag = BUL_a_royal_visit_failure_flag
		}

		add_stability = -0.05
		add_popularity = {
			ideology = neutrality
			popularity = -0.05
		}
		clr_country_flag = BUL_a_royal_visit_failure_flag
		hidden_effect = { #Randomize next location
			BUL_get_random_bulgarian_destination_royal_visit = yes
		}
	}
}

#Tsar Boris has died. Form a temporary government
country_event = {
	id = bftb_bulgaria_tsar_boris.2
	title = bftb_bulgaria_tsar_boris.2.t
	desc = bftb_bulgaria_tsar_boris.2.desc
	picture = GFX_report_event_bul_boris_death

	is_triggered_only = yes

	fire_only_once = yes

	trigger = {
		NOT = { has_country_flag = BUL_tsar_boris_is_dead_flag }
	}

	immediate = {
		hidden_effect = {
			set_variable = { BUL_date_of_tsars_death = global.date }
			set_country_flag = BUL_tsar_boris_is_dead_flag
			unlock_national_focus = BUL_plot_against_boris
		}
	}

	option = {
		name = bftb_bulgaria_tsar_boris.2.a

		trigger = { 
		}

		if = {
			limit = {
				has_country_flag = BUL_foreign_support_for_regicide_flag
			}
			add_stability = -0.05
		}
		else = {
			add_stability = -0.15
		}

		if = {
			limit = {
				has_idea = BUL_tsar_boris_positive_01
			}
			remove_ideas = BUL_tsar_boris_positive_01
		}
		else_if = {
			limit = {
				has_idea = BUL_tsar_boris_positive_02
			}
			remove_ideas = BUL_tsar_boris_positive_02
		}
		else_if = {
			limit = {
				has_idea = BUL_tsar_boris_positive_03
			}
			remove_ideas = BUL_tsar_boris_positive_03
		}
		else_if = {
			limit = {
				has_idea = BUL_tsar_boris_negative_01
			}
			remove_ideas = BUL_tsar_boris_negative_01
		}
		else_if = {
			limit = {
				has_idea = BUL_tsar_boris_negative_02
			}
			remove_ideas = BUL_tsar_boris_negative_02
		}
		
		effect_tooltip = {
			unlock_national_focus = BUL_plot_against_boris
		}

		if = {
			limit = {
				has_government = neutrality
			}
			kill_country_leader = yes
		}
		if = {
			limit = { has_idea = BUL_georgi_ivanov_kyoseivanov }
			BUL_georgi_ivanov_kyoseivanov = {
				promote_character = { ideology = moderatism }
				add_country_leader_trait = no_designated_regency
			}		
		}
		else = {
			BUL_bogdan_filov = {
				promote_character = { ideology = centrism }
				add_country_leader_trait = no_designated_regency
			}		
		}

		hidden_effect = {
			every_other_country = {
				news_event = { id = bftb_news.3 hours = 4 }
			}
		}
	}
}

#Form a Regency Council
country_event = {
	id = bftb_bulgaria_tsar_boris.3
	title = bftb_bulgaria_tsar_boris.3.t
	desc = bftb_bulgaria_tsar_boris.3.desc
	picture = GFX_report_event_bul_prince_simeon 

	is_triggered_only = yes

	fire_only_once = yes

	option = { #Pro-Fascist Regency Council
		name = bftb_bulgaria_tsar_boris.3.a

		ai_chance = {
			base = 10
			modifier = {
				factor = 5
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 5
				is_in_faction_with = GER
				GER = { has_government = fascism }
			}
		}

		trigger = {
			OR = {
				has_government = fascism
				AND = {
					has_government = neutrality
					OR = {
						is_in_faction = no
						AND = {
							any_allied_country = {
								is_major = yes
								has_government = fascism
							}
						}
						AND = {
							is_faction_leader = yes
							NOT = {
								any_allied_country = {
									is_major = yes
									OR = {
										has_government = democratic
										has_government = communism
									}
								}
							}
						}
					}
				}	
			}
		}

		add_popularity = {
			ideology = fascism
			popularity = 0.1
		}

		if = {
			limit = {
				has_government = fascism
			}
			if = {
				limit = {
					has_country_leader = {
						character = BUL_hristo_lukov
						ruling_only = yes
					}
				}
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = fascism_ideology
						traits = {
							elected_regency_council_pro_axis hardened_officer_regency_council
						}
					}
					promote_leader = yes
				}
				if = {
					limit = {
						HMM_no_BUL_ddaywall = yes
					}
					add_trait = {
						character = BUL_regency_council
						slot = country_leader
						ideology = fascism_ideology
						trait = HMM_BUL_no_entrenchment
					}
				}
			}
			else_if = {
				limit = {
					has_country_leader = {
						character = BUL_aleksandar_tsankov
						ruling_only = yes
					}
				}
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = gen_nazism
						traits = {
							elected_regency_council_pro_axis the_bloody_professor_regency_council
						}
					}
					promote_leader = yes
				}
			}
			else = {
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = fascism_ideology
						traits = {
							elected_regency_council_pro_axis
						}
					}
					promote_leader = yes
				}
			}
		}
		else = {
			if = {
				limit = {
					has_country_leader = {
						character = BUL_bogdan_filov
						ruling_only = yes
					}
				}
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = fascism_ideology
						traits = {
							elected_regency_council_pro_axis political_manipulator_regency_council
						}
					}
					promote_leader = yes
				}
				promote_character = { 
					character = BUL_georgi_ivanov_kyoseivanov
					ideology = moderatism
				}	
			}
			else_if = {
				limit = {
					has_country_leader = {
						character = BUL_georgi_ivanov_kyoseivanov
						ruling_only = yes
					}
				}
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = fascism_ideology
						traits = {
							elected_regency_council_pro_axis
						}
					}
					promote_leader = yes
				}
				promote_character = { 
					character =  BUL_bogdan_filov
					ideology = centrism
				}	
			}
			else = {
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = fascism_ideology
						traits = {
							elected_regency_council_pro_axis
						}
					}
					promote_leader = yes
				}
			}
		}
		if = {
			limit = {
				NOT = { has_government = fascism }
			}
			set_politics = {
				ruling_party = fascism
				election_frequency = 48
				elections_allowed = no
			}
		}
	}

	option = { #Pro-Democratic Regency Council
		name = bftb_bulgaria_tsar_boris.3.b

		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 0
				is_in_faction_with = GER
				GER = { has_government = fascism }
			}
		}

		trigger = { 
			OR = {
				has_government = democratic
				AND = {
					has_government = neutrality
					OR = {
						is_in_faction = no
						AND = {
							any_allied_country = {
								is_major = yes
								has_government = democratic
							}
						}
						AND = {
							is_faction_leader = yes
							NOT = {
								any_allied_country = {
									is_major = yes
									has_government = fascism
								}
							}
						}
					}
				}	
			}
		}

		add_popularity = {
			ideology = democratic
			popularity = 0.1
		}

		if = {
			limit = {
				has_government = democratic
			}
			if = {
				limit = {
					has_country_leader = {
						character = BUL_nikola_mushanov
						ruling_only = yes
					}
				}
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = conservatism
						traits = {
							elected_regency_council_pro_allies appeaser_regency_council
						}
					}
					promote_leader = yes
				}
			}
			else = {
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = conservatism
						traits = {
							elected_regency_council_pro_allies
						}
					}
					promote_leader = yes
				}
			}	
		}
		else = {
			if = {
				limit = {
					has_country_leader = {
						character = BUL_bogdan_filov
						ruling_only = yes
					}
				}
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = conservatism
						traits = {
							elected_regency_council_pro_allies political_manipulator_regency_council
						}
					}
					promote_leader = yes
				}
				promote_character = { 
					character = BUL_georgi_ivanov_kyoseivanov
					ideology = moderatism
				}	
			}
			else_if = {
				limit = {
					has_country_leader = {
						character = BUL_georgi_ivanov_kyoseivanov
						ruling_only = yes
					}
				}
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = conservatism
						traits = {
							elected_regency_council_pro_allies
						}
					}
					promote_leader = yes
				}
				promote_character = { 
					character = BUL_bogdan_filov
					ideology = centrism
				}	
			}
			else = {
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = conservatism
						traits = {
							elected_regency_council_pro_allies
						}
					}
					promote_leader = yes
				}
			}
		}
		if = {
			limit = {
				NOT = { has_government = democratic }
			}
			set_politics = {
				ruling_party = democratic
				election_frequency = 48
				elections_allowed = no
			}
		}
	}

	option = { #Independent Regency Council
		name = bftb_bulgaria_tsar_boris.3.c

		ai_chance = {
			base = 1
			modifier = {
				factor = 0.9
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 0
				is_in_faction_with = GER
				GER = { has_government = fascism }
			}
		}

		add_popularity = {
			ideology = neutrality
			popularity = 0.1
		}

		if = {
			limit = {
				has_government = fascism
			}
			if = {
				limit = {
					has_country_leader = {
						character = BUL_hristo_lukov
						ruling_only = yes
					}
				}
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = despotism
						traits = {
							elected_regency_council hardened_officer_regency_council
						}
					}
					promote_leader = yes
				}
				hidden_effect = {
					retire_ideology_leader = fascism
				}
				if = {
					limit = {
						HMM_no_BUL_ddaywall = yes
					}
					add_trait = {
						character = BUL_regency_council
						slot = country_leader
						ideology = despotism
						trait = HMM_BUL_no_entrenchment
					}
				}
			}
			else_if = {
				limit = {
					has_country_leader = {
						character = BUL_aleksandar_tsankov
						ruling_only = yes
					}
				}
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = despotism
						traits = {
							elected_regency_council the_bloody_professor_regency_council
						}
					}
					promote_leader = yes
				}
				hidden_effect = {
					retire_ideology_leader = fascism
				}
			}
			else = {
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = despotism
						traits = {
							elected_regency_council
						}
					}
					promote_leader = yes
				}
			}
		}
		else_if = {
			limit = {
				has_government = democratic
			}
			if = {
				limit = {
					has_country_leader = {
						character = BUL_nikola_mushanov
						ruling_only = yes
					}
				}
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = centrism
						traits = {
							elected_regency_council appeaser_regency_council
						}
					}
					promote_leader = yes
				}
				hidden_effect = {
					retire_ideology_leader = democratic
				}
			}
			else = {
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = centrism
						traits = {
							elected_regency_council
						}
					}
					promote_leader = yes
				}
			}	
		}
		else = {
			if = {
				limit = {
					has_country_leader = {
						character = BUL_bogdan_filov
						ruling_only = yes
					}
				}
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = centrism
						traits = {
							elected_regency_council political_manipulator_regency_council
						}
					}
					promote_leader = yes
				}
			}
			else_if = {
				limit = {
					has_country_leader = {
						character = BUL_georgi_ivanov_kyoseivanov
						ruling_only = yes
					}
				}
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = moderatism
						traits = {
							elected_regency_council
						}
					}
					promote_leader = yes
				}
			}
			else = {
				add_country_leader_role = {
					character = BUL_regency_council
					country_leader = {
						expire = "1965.1.1"
						ideology = moderatism
						traits = {
							elected_regency_council
						}
					}
					promote_leader = yes
				}
			}
		}
		if = {
			limit = {
				NOT = { has_government = neutrality }
			}
			set_politics = {
				ruling_party = neutrality
				election_frequency = 48
				elections_allowed = no
			}
		}
	}
}


########    ###    ######## ##     ## ######## ########  ##          ###    ##    ## ########     ######## ########   #######  ##    ## ######## 
##         ## ##      ##    ##     ## ##       ##     ## ##         ## ##   ###   ## ##     ##    ##       ##     ## ##     ## ###   ##    ##    
##        ##   ##     ##    ##     ## ##       ##     ## ##        ##   ##  ####  ## ##     ##    ##       ##     ## ##     ## ####  ##    ##    
######   ##     ##    ##    ######### ######   ########  ##       ##     ## ## ## ## ##     ##    ######   ########  ##     ## ## ## ##    ##    
##       #########    ##    ##     ## ##       ##   ##   ##       ######### ##  #### ##     ##    ##       ##   ##   ##     ## ##  ####    ##    
##       ##     ##    ##    ##     ## ##       ##    ##  ##       ##     ## ##   ### ##     ##    ##       ##    ##  ##     ## ##   ###    ##    
##       ##     ##    ##    ##     ## ######## ##     ## ######## ##     ## ##    ## ########     ##       ##     ##  #######  ##    ##    ##    


#The Fatherland Front has formed
country_event = {
	id = bftb_bulgaria_fatherland_front.1
	title = bftb_bulgaria_fatherland_front.1.t

	# Desc when NOT formed by the player
	desc = {
		text = bftb_bulgaria_fatherland_front.1.desc_negative
		trigger = {
			always = yes
		}
	}

	picture = GFX_report_event_bul_partisans_plovdiv

	is_triggered_only = yes #on_weekly_BUL handles this

	fire_only_once = yes

	immediate = {
		hidden_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.2
			}
			set_country_flag = BUL_fatherland_front_formed_flag
		}
	}

	option = { #When NOT formed by the player
		name = bftb_bulgaria_fatherland_front.1.b

		trigger = {
			always = yes
		}
		effect_tooltip = {
			add_popularity = {
				ideology = communism
				popularity = 0.2
			}
		}
		set_party_name = {
			ideology = communism
			long_name = BUL_fatherland_front_party_long
			name = BUL_fatherland_front_party
		}
		add_ideas = BUL_fatherland_front_negative
		activate_mission_tooltip = BUL_ff_impending_coup_mission
		random_unit_leader = {
			limit = {
				has_id = 1203 #Hadzhipetkov
			}
			add_unit_leader_trait = trait_BUL_ff_sympathizer
		}

		random_list = {
			50 = {
				random_unit_leader = {
					limit = {
						has_id = 1202 #Popov
					}
					add_unit_leader_trait = trait_BUL_ff_sympathizer
				}
			}
			50 = {
				random_unit_leader = {
					limit = {
						has_id = 1211 #Dotsev
					}
					add_unit_leader_trait = trait_BUL_ff_sympathizer
				}
			}
		}
	}
}

#The Fatherland Front coup
country_event = {
	id = bftb_bulgaria_fatherland_front.2
	title = bftb_bulgaria_fatherland_front.2.t
	desc = bftb_bulgaria_fatherland_front.2.desc
	picture = GFX_report_event_bul_troops_partisans_boat

	is_triggered_only = yes #on_weekly_BUL handles this

	fire_only_once = yes

	immediate = {
		hidden_effect = {
			set_global_flag = BUL_fatherland_front_coup_flag
			set_country_flag = BUL_ff_civil_war_flag
			BUL_start_ff_civil_war = yes
		}
	}

	option = {
		name = bftb_bulgaria_fatherland_front.2.a

		effect_tooltip = {
			start_civil_war = {
				ideology = communism
			}
		}
	}
}


########  ########    ###    ########  ##     ##    ###    ##     ## ######## ##    ## ######## 
##     ## ##         ## ##   ##     ## ###   ###   ## ##   ###   ### ##       ###   ##    ##    
##     ## ##        ##   ##  ##     ## #### ####  ##   ##  #### #### ##       ####  ##    ##    
########  ######   ##     ## ########  ## ### ## ##     ## ## ### ## ######   ## ## ##    ##    
##   ##   ##       ######### ##   ##   ##     ## ######### ##     ## ##       ##  ####    ##    
##    ##  ##       ##     ## ##    ##  ##     ## ##     ## ##     ## ##       ##   ###    ##    
##     ## ######## ##     ## ##     ## ##     ## ##     ## ##     ## ######## ##    ##    ##    


#Negotiate Bulgarian Rearmament - Event for ENG
country_event = {
	id = bftb_bulgaria_rearmament.1
	title = bftb_bulgaria_rearmament.1.t
	desc = bftb_bulgaria_rearmament.1.desc
	picture = GFX_report_event_generic_sign_treaty1 

	is_triggered_only = yes

	immediate = {

	}
	
	option = { #Accept
		name = bftb_bulgaria_rearmament.1.c

		ai_chance = {
			base = 1
			modifier = {
				factor = 5
				has_opinion = {
					target = BUL
					value > 75
				}
			}
			modifier = {
				factor = 100
				BUL = {
					OR = {
						AND = {
							has_war_with = GER
							NOT = { GER = { is_in_faction_with = ROOT } }
						}
						is_in_faction_with = ROOT
					}
				}
			}
			modifier = { #We like that you condemn IMRO
				factor = 10
				BUL = { has_completed_focus = BUL_condemn_macedonian_organizations }
			}
			modifier = { #You have tried
				factor = 10
				BUL = {
					NOT = {
						has_idea = BUL_imro_01
						has_idea = BUL_imro_04
						has_idea = BUL_imro_05
					}
				}
			}
			modifier = { #You think like us, we like that
				factor = 5
				BUL = {	has_government = ROOT }
			}
		}

		BUL = { country_event = { id = bftb_bulgaria_rearmament.6 hours = 16 random_hours = 8 } }
		effect_tooltip = { 
			BUL = { remove_ideas = BUL_army_restrictions }
		}
	}
}

#Negotiate Bulgarian Rearmament - ENG refuses (Event for BUL)
country_event = {
	id = bftb_bulgaria_rearmament.2
	title = bftb_bulgaria_rearmament.2.t
	desc = bftb_bulgaria_rearmament.2.desc
	picture = GFX_report_event_generic_sign_treaty1 

	is_triggered_only = yes

	immediate = {

	}
	
	option = { #Refuse
		name = bftb_bulgaria_rearmament.2.a

	}
}

#Negotiate Bulgarian Rearmament - ENG demands NAP with a Balkan nation (Event for BUL)
country_event = {
	id = bftb_bulgaria_rearmament.3
	title = bftb_bulgaria_rearmament.3.t
	desc = bftb_bulgaria_rearmament.3.desc
	picture = GFX_report_event_generic_sign_treaty2 

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_country_flag = BUL_uk_demands_nap_with_balkan_nation_flag
		}
	}
	
	option = { #Ok
		name = bftb_bulgaria_rearmament.3.a

		custom_effect_tooltip = BUL_uk_demands_nap_with_balkan_nation_tt
	}
}

#Negotiate Bulgarian Rearmament - BUL has NAP (event for BUL)
country_event = {
	id = bftb_bulgaria_rearmament.4
	title = bftb_bulgaria_rearmament.4.t
	desc = bftb_bulgaria_rearmament.4.desc
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes
	
	option = { #Ok
		name = bftb_bulgaria_rearmament.4.a

		effect_tooltip = {
			remove_ideas = BUL_army_restrictions
		}
	}
}

#Negotiate Bulgarian Rearmament - BUL has NAP (event for ENG)
country_event = {
	id = bftb_bulgaria_rearmament.5
	title = bftb_bulgaria_rearmament.5.t
	desc = bftb_bulgaria_rearmament.5.desc
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes
	
	option = { #Ok
		name = bftb_bulgaria_rearmament.5.a

		effect_tooltip = {
			BUL = { remove_ideas = BUL_army_restrictions }
		}
	}
}

#Negotiate Bulgarian Rearmament - ENG accepts (Event for BUL)
country_event = {
	id = bftb_bulgaria_rearmament.6
	title = bftb_bulgaria_rearmament.6.t
	desc = bftb_bulgaria_rearmament.6.desc
	picture = GFX_report_event_generic_sign_treaty1 

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgaria_rearmament.6.a
		
		remove_ideas = BUL_army_restrictions
		clr_country_flag = BUL_rearmament_flag

		add_opinion_modifier = {
			target = FROM
			modifier = BUL_lifted_arms_restrictions
		}
	}
}

#Pressure for Bulgarian Rearmament - Event for ENG
country_event = {
	id = bftb_bulgaria_rearmament.7
	title = bftb_bulgaria_rearmament.7.t
	desc = bftb_bulgaria_rearmament.7.desc
	picture = GFX_report_event_generic_sign_treaty2 

	is_triggered_only = yes

	option = { #Accept
		name = bftb_bulgaria_rearmament.7.b

		ai_chance = {
			base = 5
			modifier = {
				factor = 2
				has_opinion = {
					target = BUL
					value > 0
				}
			}
			modifier = {
				factor = 5
				has_opinion = {
					target = BUL
					value > 25
				}
			}
			modifier = {
				factor = 100
				BUL = { 
					OR = {
						AND = {
							has_war_with = GER
							NOT = { GER = { is_in_faction_with = ROOT } }
						}
						is_in_faction_with = ROOT
					}
				}
			}
			modifier = {
				factor = 50
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 0
				any_country = {
					has_war_with = BUL
					is_in_faction_with = ROOT
				}
			}
			modifier = { #We like that you condemn IMRO
				factor = 10
				BUL = { has_completed_focus = BUL_condemn_macedonian_organizations }
			}
			modifier = { #You have tried
				factor = 10
				BUL = {
					NOT = {	has_idea = BUL_imro_01 }
					NOT = {	has_idea = BUL_imro_04 }
					NOT = {	has_idea = BUL_imro_05 }
				}
			}
			modifier = { #You think like us, we like that
				factor = 7
				BUL = {	has_government = ROOT }
			}
		}

		hidden_effect = {
			BUL = { set_country_flag = BUL_uk_gives_in_to_pressure_flag }
		}
		BUL = { country_event = { id = bftb_bulgaria_rearmament.6 hours = 8 random_hours = 4 } }
		effect_tooltip = { 
			BUL = { remove_ideas = BUL_army_restrictions }
			BUL = {
				add_opinion_modifier = {
					target = ROOT
					modifier = BUL_lifted_arms_restrictions
				}
			}
		}
	}
}

#Pressure for Bulgarian Rearmament - ENG refuses (Event for BUL)
country_event = {
	id = bftb_bulgaria_rearmament.8
	title = bftb_bulgaria_rearmament.8.t
	desc = bftb_bulgaria_rearmament.8.desc
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = { #Refuse
		name = bftb_bulgaria_rearmament.8.a

		add_opinion_modifier = {
			target = ROOT
			modifier = BUL_refused_to_lift_arms_restrictions
		}
		clr_country_flag = BUL_rearmament_negotiations_ongoing_flag
	}
}

#Bulgaria Refuses Army Restrictions - Event for ENG
country_event = {
	id = bftb_bulgaria_rearmament.9
	title = bftb_bulgaria_rearmament.9.t
	desc = bftb_bulgaria_rearmament.9.desc
	picture = GFX_report_event_generic_sign_treaty1 

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgaria_rearmament.9.a

		ai_chance = {
			base = 5
			modifier = {
				factor = 5
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 100
				BUL = {
					OR = {
						has_war_with = GER
						is_in_faction_with = ROOT	
					}
				}
			}
			modifier = { #You think like us, we like that
				factor = 1.5
				BUL = {	has_government = ROOT }
			}
		}

		effect_tooltip = { 
			BUL = { remove_ideas = BUL_army_restrictions }
		}
	}

	option = { #Take action
		name = bftb_bulgaria_rearmament.9.b

		ai_chance = {
			base = 0
			modifier = {
				add = 100
				any_allied_country = {
					has_war_with = BUL
				}
			}
		}

		trigger = {
			BUL = {
				is_in_faction = yes
			}
		}

		effect_tooltip = { 
			BUL = { remove_ideas = BUL_army_restrictions }
		}
		add_political_power = -75
		create_wargoal = {
			type = topple_government
			target = BUL
		}
	}
}


##    ##    ###    ######## ####  #######  ##    ##    ###    ##       #### ########    ###    ######## ####  #######  ##    ## 
###   ##   ## ##      ##     ##  ##     ## ###   ##   ## ##   ##        ##       ##    ## ##      ##     ##  ##     ## ###   ## 
####  ##  ##   ##     ##     ##  ##     ## ####  ##  ##   ##  ##        ##      ##    ##   ##     ##     ##  ##     ## ####  ## 
## ## ## ##     ##    ##     ##  ##     ## ## ## ## ##     ## ##        ##     ##    ##     ##    ##     ##  ##     ## ## ## ## 
##  #### #########    ##     ##  ##     ## ##  #### ######### ##        ##    ##     #########    ##     ##  ##     ## ##  #### 
##   ### ##     ##    ##     ##  ##     ## ##   ### ##     ## ##        ##   ##      ##     ##    ##     ##  ##     ## ##   ### 
##    ## ##     ##    ##    ####  #######  ##    ## ##     ## ######## #### ######## ##     ##    ##    ####  #######  ##    ## 


#Bulgaria has nationalized foreign factories and subsidiaries - Event for GER/SOV/ENG
country_event = {
	id = bftb_bulgaria_nationalization.1
	title = bftb_bulgaria_nationalization.1.t
	desc = bftb_bulgaria_nationalization.1.desc
	picture = GFX_report_event_generic_factory 

	is_triggered_only = yes

	option = { #Do Nothing
		name = bftb_bulgaria_nationalization.1.a

		ai_chance = {
			factor = 10
			modifier = {
				factor = 0.5
				OR = {
					has_government = fascism
					has_government = democratic
				}
			}
			modifier = {
				factor = 10
				FROM = {
					has_government = ROOT
				}
			}
			modifier = {
				factor = 2
				surrender_progress > 0.5
			}
			modifier = {
				factor = 0.1
				FROM = {
					is_enemy_ideology = yes
				}
			}
		}

		add_opinion_modifier = {
			target = FROM
			modifier = BUL_seized_our_bulgarian_subsidiaries
		}

		log = "[ROOT.GetNameDef] does NOTHING"
	}

	option = { #Embargo
		name = bftb_bulgaria_nationalization.1.b

		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.5
				has_war = yes
			}
			modifier = {
				factor = 0
				has_government = communism
				FROM = {
					has_government = communism
				}
			}
			modifier = {
				add = 10
				strength_ratio = {
					tag = FROM
					ratio > 2
				}
			}
			modifier = {
				add = 30
				OR = {
					AND = {
						tag = GER
						check_variable = { FROM.BUL_german_industrial_investments > 2 }
					}
					AND = {
						tag = ENG
						check_variable = { FROM.BUL_british_industrial_investments > 2 }
					}
					AND = {
						tag = SOV
						check_variable = { FROM.BUL_soviet_industrial_investments > 2 }
					}
				}
			}
			modifier = {
				add = 20
				OR = {
					AND = {
						tag = GER
						check_variable = { FROM.BUL_german_industrial_investments > 5 }
					}
					AND = {
						tag = ENG
						check_variable = { FROM.BUL_british_industrial_investments > 5 }
					}
					AND = {
						tag = SOV
						check_variable = { FROM.BUL_soviet_industrial_investments > 5 }
					}
				}
			}
			modifier = {
				factor = 2
				AND = {
					tag = ENG
					BUL_has_some_sort_of_bogdan_filov = yes
				}
			}
			modifier = {
				factor = 0.5
				AND = {
					tag = GER
					BUL_has_some_sort_of_bogdan_filov = yes
				}
			}
		}

		set_country_flag = BUL_country_has_embargoed_bulgaria_flag

		add_opinion_modifier = {
			target = FROM
			modifier = BUL_seized_our_bulgarian_subsidiaries
		}
		
		if = {
			limit = {
				is_faction_leader = yes
			}
			every_country = {
				limit = {
					OR = {
						is_in_faction_with = ROOT
						is_subject_of = ROOT
					}
					NOT = { tag = FROM }
					NOT = { has_country_flag = BUL_industrial_investments_in_bulgaria_flag }
				}
				add_opinion_modifier = {
					target = FROM
					modifier = embargo
				}
				FROM = {
					add_opinion_modifier = {
						target = PREV
						modifier = embargo
					}
				}
			}
		}
		else = {
			add_opinion_modifier = {
				target = FROM
				modifier = embargo
			}
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = embargo
				}
			}
		}
		FROM = {
			country_event = { id = bftb_bulgaria_nationalization.2 hours = 12 random_hours = 12 }
		}

		log = "[ROOT.GetNameDef] does EMBARGO"
	}

	option = { #Wargoal (and embargo)
		name = bftb_bulgaria_nationalization.1.c

		trigger = { 
			NOT = { is_in_faction_with = FROM }
		}

		ai_chance = {
			factor = 10
			modifier = {
				factor = 5
				strength_ratio = {
					tag = FROM
					ratio > 2
				}
			}
			modifier = {
				factor = 10
				strength_ratio = {
					tag = FROM
					ratio > 3
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_war = yes
					has_stability < 0.4
					has_war_support < 0.4
				}
			}
			modifier = {
				factor = 0
				OR = {
					AND = {
						tag = GER
						check_variable = { FROM.BUL_german_industrial_investments < 3 }
					}
					AND = {
						tag = ENG
						check_variable = { FROM.BUL_british_industrial_investments < 3 }
					}
					AND = {
						tag = SOV
						check_variable = { FROM.BUL_soviet_industrial_investments < 3 }
					}
				}
			}
			modifier = {
				factor = 5
				OR = {
					AND = {
						tag = GER
						check_variable = { FROM.BUL_german_industrial_investments > 5 }
					}
					AND = {
						tag = ENG
						check_variable = { FROM.BUL_british_industrial_investments > 5 }
					}
					AND = {
						tag = SOV
						check_variable = { FROM.BUL_soviet_industrial_investments > 5 }
					}
				}
			}
			modifier = {
				factor = 2.5
				AND = {
					tag = ENG
					BUL_has_some_sort_of_bogdan_filov = yes
				}
			}
			modifier = {
				factor = 0.25
				AND = {
					tag = GER
					BUL_has_some_sort_of_bogdan_filov = yes
				}
			}
		}

		set_country_flag = BUL_country_has_embargoed_bulgaria_flag

		add_stability = -0.1
		add_war_support = -0.1
		
		create_wargoal = {
			type = puppet_wargoal_focus
			target = FROM
		}

		add_opinion_modifier = {
			target = FROM
			modifier = BUL_seized_our_bulgarian_subsidiaries
		}
		
		if = {
			limit = {
				is_faction_leader = yes
			}
			every_country = {
				limit = {
					OR = {
						is_in_faction_with = ROOT
						is_subject_of = ROOT
					}
					NOT = { tag = FROM }
					NOT = { has_country_flag = BUL_industrial_investments_in_bulgaria_flag }
				}
				add_opinion_modifier = {
					target = FROM
					modifier = embargo
				}
				FROM = {
					add_opinion_modifier = {
						target = PREV
						modifier = embargo
					}
				}
			}
		}
		else = {
			add_opinion_modifier = {
				target = FROM
				modifier = embargo
			}
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = embargo
				}
			}
		}
		FROM = {
			country_event = { id = bftb_bulgaria_nationalization.2 hours = 12 random_hours = 12 }
		}
	}

	option = { #Kick from Faction (and embargo)
		name = bftb_bulgaria_nationalization.1.d

		trigger = {
			is_in_faction_with = FROM
			is_faction_leader = yes
		}

		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.5
				has_war_together_with = FROM
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value < 0
				}
			}
			modifier = {
				factor = 0
				surrender_progress > 0.7
			}
			modifier = {
				add = 30
				OR = {
					AND = {
						tag = GER
						check_variable = { FROM.BUL_german_industrial_investments > 2 }
					}
					AND = {
						tag = ENG
						check_variable = { FROM.BUL_british_industrial_investments > 2 }
					}
					AND = {
						tag = SOV
						check_variable = { FROM.BUL_soviet_industrial_investments > 2 }
					}
				}
			}
			modifier = {
				add = 20
				OR = {
					AND = {
						tag = GER
						check_variable = { FROM.BUL_german_industrial_investments > 5 }
					}
					AND = {
						tag = ENG
						check_variable = { FROM.BUL_british_industrial_investments > 5 }
					}
					AND = {
						tag = SOV
						check_variable = { FROM.BUL_soviet_industrial_investments > 5 }
					}
				}
			}
			modifier = {
				factor = 2
				AND = {
					tag = ENG
					BUL_has_some_sort_of_bogdan_filov = yes
				}
			}
			modifier = {
				factor = 0.5
				AND = {
					tag = GER
					BUL_has_some_sort_of_bogdan_filov = yes
				}
			}
		}

		set_country_flag = BUL_country_has_embargoed_bulgaria_flag

		add_opinion_modifier = {
			target = FROM
			modifier = BUL_seized_our_bulgarian_subsidiaries
		}

		every_country = {
			limit = {
				OR = {
					is_in_faction_with = ROOT
					is_subject_of = ROOT
				}
				NOT = { tag = FROM }
				NOT = { has_country_flag = BUL_industrial_investments_in_bulgaria_flag }
			}
			add_opinion_modifier = {
				target = FROM
				modifier = embargo
			}
			FROM = {
				add_opinion_modifier = {
					target = PREV
					modifier = embargo
				}
			}
		}
		remove_from_faction = FROM
		FROM = {
			country_event = { id = bftb_bulgaria_nationalization.3 hours = 12 random_hours = 12 }
		}

		log = "[ROOT.GetNameDef] does KICK"
	}
}

# Bulgaria is under embargo - Event for BUL
country_event = {
	id = bftb_bulgaria_nationalization.2
	title = bftb_bulgaria_nationalization.2.t
	desc = bftb_bulgaria_nationalization.2.desc
	picture = GFX_report_event_merchant_ship_01  

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgaria_nationalization.2.a

		if = {
			limit = {
				NOT = { has_country_flag = BUL_stability_hit_by_embargo_flag }
			}
			add_stability = -0.05
			set_country_flag = BUL_stability_hit_by_embargo_flag
		}
	}
}

# Bulgaria has been kicked from faction - Event for BUL
country_event = {
	id = bftb_bulgaria_nationalization.3
	title = bftb_bulgaria_nationalization.3.t
	desc = bftb_bulgaria_nationalization.3.desc
	picture = GFX_report_event_generic_read_write 

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgaria_nationalization.3.a

		if = {
			limit = {
				NOT = { has_country_flag = BUL_stability_hit_by_embargo_flag }
			}
			add_stability = -0.05
		}
	}
}


 #######  ######## ##     ## ######## ########  
##     ##    ##    ##     ## ##       ##     ## 
##     ##    ##    ##     ## ##       ##     ## 
##     ##    ##    ######### ######   ########  
##     ##    ##    ##     ## ##       ##   ##   
##     ##    ##    ##     ## ##       ##    ##  
 #######     ##    ##     ## ######## ##     ## 


 #Bulgaria grants exploitation rights to an ally
country_event = {
	id = bftb_bulgaria_uranium_mining_concessions.1
	title = bftb_bulgaria_uranium_mining_concessions.1.t
	desc = bftb_bulgaria_uranium_mining_concessions.1.desc
	picture = GFX_report_event_generic_read_write 

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgaria_uranium_mining_concessions.1.a

		effect_tooltip = {
			add_ideas = BUL_buhovo_uranium_mines
			add_opinion_modifier = {
				target = BUL
				modifier = BUL_granted_uranium_mining_rights
			}
			BUL = {
				remove_ideas = BUL_buhovo_uranium_mines
				add_ideas = BUL_uranium_concession_agreement_ns
			}
		}
	}
}




   ###    ##     ## ####  ######     ######## ##     ## ######## ##    ## ########  ######  
  ## ##    ##   ##   ##  ##    ##    ##       ##     ## ##       ###   ##    ##    ##    ## 
 ##   ##    ## ##    ##  ##          ##       ##     ## ##       ####  ##    ##    ##       
##     ##    ###     ##   ######     ######   ##     ## ######   ## ## ##    ##     ######  
#########   ## ##    ##        ##    ##        ##   ##  ##       ##  ####    ##          ## 
##     ##  ##   ##   ##  ##    ##    ##         ## ##   ##       ##   ###    ##    ##    ## 
##     ## ##     ## ####  ######     ########    ###    ######## ##    ##    ##     ######  


#Bulgaria wants to get their claims warranted - Event for GER
country_event = {
	id = bftb_bulgarian_claims.1
	title = bftb_bulgarian_claims.1.t
	desc = bftb_bulgarian_claims.1.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	fire_only_once = yes

	option = { #YES
		name = bftb_bulgarian_claims.1.a

		ai_chance = {
			base = 10
			modifier = {
				factor = 5
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 2
				BUL = { 
					is_in_faction = no
				}
			}
			modifier = {
				factor = 20
				BUL = { 
					is_in_faction_with = ROOT
				}
			}
			modifier = {
				factor = 100
				BUL = { 
					has_country_flag = { flag = BUL_german_influence_flag value > 3 }
				}
			}
			modifier = {
				factor = 0.5
				ENG = { 
					has_opinion = {
						target = BUL
						value > 50
					}
				}
			}
			modifier = {
				factor = 0
				BUL = {
					is_in_faction = yes
					NOT = { is_in_faction_with = ROOT }
				}
			}
			modifier = {
				factor = 5
				BUL_has_some_sort_of_bogdan_filov = yes
			}
		}

		every_state = {
			limit = {
				has_state_flag = BUL_historical_bulgarian_claim_flag
				controller = {
					OR = {
						tag = GER
						AND = {
							NOT = { is_in_faction_with = GER }
							NOT = { tag = BUL }
						}
					}
				}
			}
			set_state_flag = BUL_bulgarian_claim_warranted_flag
			add_dynamic_modifier = { modifier = bulgarian_territorial_expansion_arranged }
		}
		effect_tooltip = {
			BUL = {
				add_opinion_modifier = { 
					target = GER
					modifier = BUL_bulgarian_claims_recognized
				}
			}
		}
		BUL = { country_event = { id = bftb_bulgarian_claims.2 hours = 16 random_hours = 8 } }

		set_global_flag = BUL_germany_recognizes_bulgarian_claims_flag
		custom_effect_tooltip = bftb_bulgarian_claims.1.a_tt
	}

	option = { #NOPE
		name = bftb_bulgarian_claims.1.b

		ai_chance = {
			base = 10
		}

		effect_tooltip = {
			BUL = {
				add_opinion_modifier = { 
					target = GER
					modifier = BUL_bulgarian_claims_not_recognized
				}
			}
		}
		BUL = { country_event = { id = bftb_bulgarian_claims.3 hours = 16 random_hours = 8 } }
	}
}

#Germany recognizes Bulgarian claims in the Balkans - Event for BUL
country_event = {
	id = bftb_bulgarian_claims.2
	title = bftb_bulgarian_claims.2.t
	desc = bftb_bulgarian_claims.2.desc
	picture = GFX_report_event_bul_boris_with_hitler 

	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = bftb_bulgarian_claims.2.a

		add_opinion_modifier = { 
			target = GER
			modifier = BUL_bulgarian_claims_recognized
		}
		effect_tooltip = {
			every_state = {
				limit = {
					has_state_flag = BUL_historical_bulgarian_claim_flag
					controller = {
						OR = {
							tag = GER
							AND = {
								NOT = { is_in_faction_with = GER }
								NOT = { tag = BUL }
							}
						}
					}
				}
				add_dynamic_modifier = { modifier = bulgarian_territorial_expansion_arranged }
				custom_effect_tooltip = BUL_germany_recognizes_our_claim_tt
			}
		}

		if = {
			limit = {
				has_country_flag = BUL_german_influence_flag
			}
			modify_country_flag = { flag = BUL_german_influence_flag value = 1 }
		}
		else = {
			set_country_flag = { flag = BUL_german_influence_flag value = 1 }
		}
	}
}

#Germany does not recognize Bulgarian claims in the Balkans - Event for BUL
country_event = {
	id = bftb_bulgarian_claims.3
	title = bftb_bulgarian_claims.3.t
	desc = bftb_bulgarian_claims.3.desc
	picture = GFX_report_event_generic_sign_treaty1 

	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = bftb_bulgarian_claims.3.a

		add_opinion_modifier = { 
			target = GER
			modifier = BUL_bulgarian_claims_not_recognized
		}
	}
}

#Germany transferred Bulgaria's claimed states - Event for BUL
country_event = {
	id = bftb_bulgarian_claims.4
	title = bftb_bulgarian_claims.4.t
	desc = bftb_bulgarian_claims.4.desc
	picture = GFX_report_event_bul_imro_chieftain

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			GER = { country_event = bftb_bulgarian_claims.5 }
			if = {
				limit = {
					any_state = {
						OR = {
							is_controlled_by = GER
							controller = {
								is_in_faction_with = GER
								NOT = { tag = BUL }
								NOT = { owns_state = PREV } #Not owner (it should be actually occupating the state -> Also prevents the issue in YUG with IMRO removing the core)
								NOT = { PREV = { is_core_of = PREV } }
							}
						}
					}
				}
				every_state = {
					limit = {
						has_state_flag = BUL_bulgarian_claim_warranted_flag
						OR = {
							is_controlled_by = GER
							controller = {
								is_in_faction_with = GER
								NOT = { tag = BUL }
								NOT = { owns_state = PREV } #Not owner (it should be actually occupating the state -> Also prevents the issue in YUG with IMRO removing the core)
								NOT = { PREV = { is_core_of = PREV } }
							}
						}
					}
					controller = { country_event = bftb_bulgarian_claims.6 }
					remove_dynamic_modifier = { modifier = bulgarian_territorial_expansion_arranged }
				}
			}
		}
	}

	option = {
		name = bftb_bulgarian_claims.4.a

		add_opinion_modifier = { 
			target = GER
			modifier = BUL_honored_bulgarian_claims
		}

		every_state = {
			limit = {
				has_state_flag = BUL_bulgarian_claim_warranted_flag
				OR = {
					is_controlled_by = GER
					controller = {
						is_in_faction_with = GER
						NOT = { tag = BUL }
					}
				}		
			}
			BUL = {
				transfer_state = PREV
				hidden_effect = {
					set_state_controller = PREV
				}
			}
		}
	}
}

#Germany transferred Bulgaria's claimed states - Event for GER
country_event = {
	id = bftb_bulgarian_claims.5
	title = bftb_bulgarian_claims.5.t
	desc = bftb_bulgarian_claims.5.desc
	picture = GFX_report_event_bul_troops_dobrudja

	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = bftb_bulgarian_claims.5.a

		effect_tooltip = {
			BUL = {
				add_opinion_modifier = { 
					target = GER
					modifier = BUL_honored_bulgarian_claims
				}
			}
			every_state = {
				limit = {
					has_state_flag = BUL_bulgarian_claim_warranted_flag
					OR = {
						is_controlled_by = GER
						controller = {
							is_in_faction_with = GER
						}
					}		
				}
				BUL = { set_state_controller = PREV }
			}
		}
	}
}

#Germany transferred Bulgaria's claimed states - Event for any allied controller of transferred states
country_event = {
	id = bftb_bulgarian_claims.6
	title = bftb_bulgarian_claims.6.t
	desc = bftb_bulgarian_claims.6.desc
	picture = GFX_report_event_bul_troops_dobrudja 

	is_triggered_only = yes

	option = {
		name = bftb_bulgarian_claims.6.a

		effect_tooltip = {
			every_state = {
				limit = {
					has_state_flag = BUL_bulgarian_claim_warranted_flag
					is_controlled_by = ROOT		
				}
				BUL = { set_state_controller = PREV }
			}
		}
	}
}

#Bulgaria asks for control over Balkan state - Event for controller of the state
country_event = {
	id = bftb_bulgarian_claims.7
	title = bftb_bulgarian_claims.7.t
	desc = bftb_bulgarian_claims.7.desc
	picture = GFX_report_event_generic_sign_treaty2 

	is_triggered_only = yes

	option = { #ACCEPT
		name = bftb_bulgarian_claims.7.a

		ai_chance = {
			base = 10
			modifier = {
				factor = 1.5
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 2
				has_war = yes
			}
			modifier = {
				factor = 2
				is_major = no
			}
			modifier = {
				factor = 2
				has_manpower < 49999
			}
			modifier = {
				factor = 5
				has_manpower < 9999
			}
			modifier = {
				factor = 2
				has_equipment = {
					infantry_equipment < 99
				}
			}
			modifier = {
				factor = 2
				has_opinion	= {
					target = FROM
					value > 49
				}
			}
			modifier = {
				factor = 5
				AND = {
					tag = GER
					is_historical_focus_on = yes
					FROM.FROM = { is_core_of = YUG }
				}
			}
			modifier = {
				factor = 5
				FROM.FROM = { is_claimed_by = BUL }
			}
			modifier = {
				factor = 100
				FROM.FROM = {
					OR = {
						is_core_of = BUL
						has_state_flag = BUL_initial_bulgarian_state_flag
						has_state_flag = BUL_historical_bulgarian_claim_flag
					}
				}
			}
			modifier = {
				factor = 5
				AND = {
					tag = GER
					BUL_has_some_sort_of_bogdan_filov = yes
				}
			}
		}

		add_political_power = 25
		#FROM.FROM is the state targeted by the decision
		FROM = {
			transfer_state = FROM.FROM
			set_state_controller = FROM.FROM
			country_event = bftb_bulgarian_claims.8
		}
	}

	option = { #REFUSE
		name = bftb_bulgarian_claims.7.b

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				is_major = yes
			}
			modifier = {
				factor = 1.5
				BUL = { is_ai = yes }
			}
			modifier = {
				factor = 2
				has_manpower > 99999
			}
			modifier = {
				factor = 5
				has_manpower > 199999
			}
			modifier = {
				factor = 2
				has_opinion	= {
					target = FROM
					value < 0
				}
			}
			modifier = {
				factor = 5
				has_opinion	= {
					target = FROM
					value < -49
				}
			}
		}

		FROM = { country_event = bftb_bulgarian_claims.9 }
	}
}

#Country accepts Bulgarian control over state - Event for BUL
country_event = {
	id = bftb_bulgarian_claims.8
	title = bftb_bulgarian_claims.8.t
	desc = bftb_bulgarian_claims.8.desc
	picture = GFX_report_event_bul_troops_dobrudja

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgarian_claims.8.a

		effect_tooltip = {
			#FROM.FROM is the state targeted by the decision
			transfer_state = FROM.FROM
			set_state_controller = FROM.FROM
		}
	}
}

#Country rejects Bulgarian control over state - Event for BUL
country_event = {
	id = bftb_bulgarian_claims.9
	title = bftb_bulgarian_claims.9.t
	desc = bftb_bulgarian_claims.9.desc
	picture = GFX_report_event_generic_read_write 

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgarian_claims.9.a

	}
}

#Germany offers to donate aircraft - Event for BUL
country_event = {
	id = bftb_bulgaria_german_influence.1
	title = bftb_bulgaria_german_influence.1.t
	desc = bftb_bulgaria_german_influence.1.desc
	picture = GFX_report_event_bul_boris_with_hitler

	is_triggered_only = yes

	fire_only_once = yes

	option = { #Accept
		name = bftb_bulgaria_german_influence.1.a

		ai_chance = {
			base = 10
			modifier = {
				factor = 100
				is_historical_focus_on = yes
			}
		}

		set_country_flag = BUL_german_aircraft_donation_flag

		GER = {
			send_equipment = {
				type = fighter_equipment
				amount = 12
				target = ROOT
			}
		}
		if = {
			limit = {
				has_country_flag = BUL_german_influence_flag
			}
			modify_country_flag = { flag = BUL_german_influence_flag value = 1 }
		}
		else = {
			set_country_flag = { flag = BUL_german_influence_flag value = 1 }
		}
		add_opinion_modifier = { 
			target = GER
			modifier = BUL_donated_aircraft
		}
		GER = { country_event = { id = bftb_bulgaria_german_influence.2 hours = 2 random_hours = 1 } }
	}

	option = { #Reject
		name = bftb_bulgaria_german_influence.1.b

		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}

		GER = { country_event = { id = bftb_bulgaria_german_influence.3 hours = 2 random_hours = 1 } }
	}
}

#Bulgaria accepts our donation - Event for GER
country_event = {
	id = bftb_bulgaria_german_influence.2
	title = bftb_bulgaria_german_influence.2.t
	desc = bftb_bulgaria_german_influence.2.desc
	picture = GFX_report_event_bul_boris_with_hitler

	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = bftb_bulgaria_german_influence.2.a

		effect_tooltip = {
			BUL = {
				add_opinion_modifier = { 
					target = GER
					modifier = BUL_donated_aircraft
				}
			}
			send_equipment = {
				type = fighter_equipment
				amount = 12
				target = ROOT
			}
		}
	}
}

#Bulgaria rejects our donation - Event for GER
country_event = {
	id = bftb_bulgaria_german_influence.3
	title = bftb_bulgaria_german_influence.3.t
	desc = bftb_bulgaria_german_influence.3.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = bftb_bulgaria_german_influence.3.a

		add_opinion_modifier = { 
			target = BUL
			modifier = BUL_rejected_our_donation
		}
	}
}

#Germany demands we replace Kyoseyvanov - Event for BUL
country_event = {
	id = bftb_bulgaria_german_influence.4
	title = bftb_bulgaria_german_influence.4.t
	desc = bftb_bulgaria_german_influence.4.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	fire_only_once = yes

	option = { #Accept
		name = bftb_bulgaria_german_influence.4.a

		ai_chance = {
			base = 5
			modifier = {
				factor = 10
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 10
				is_in_faction_with = GER
			}
			modifier = {
				factor = 100
				has_government = GER
			}
		}

		add_political_power = 50
		remove_ideas = BUL_georgi_ivanov_kyoseivanov
		add_ideas = BUL_bogdan_filov
		GER = {
			add_opinion_modifier = { 
				target = BUL
				modifier = BUL_complied_with_our_demands
			}
		}
		modify_country_flag = { flag = BUL_german_influence_flag value = 1 }

		GER = { country_event = { id = bftb_bulgaria_german_influence.5 hours = 2 random_hours = 1 } }
	}

	option = { #Refuse
		name = bftb_bulgaria_german_influence.4.b

		ai_chance = {
			base = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}

		GER = {
			add_opinion_modifier = { 
				target = BUL
				modifier = BUL_rejected_our_demands
			}
		}
		GER = { country_event = { id = bftb_bulgaria_german_influence.6 hours = 2 random_hours = 1 } }
	}
}

#Bulgaria accepts to replace Kyoseyvanov - Event for GER
country_event = {
	id = bftb_bulgaria_german_influence.5
	title = bftb_bulgaria_german_influence.5.t
	desc = bftb_bulgaria_german_influence.5.desc
	picture = GFX_report_event_generic_sign_treaty2 

	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = bftb_bulgaria_german_influence.5.a

		effect_tooltip = {
			add_opinion_modifier = { 
				target = BUL
				modifier = BUL_complied_with_our_demands
			}
			BUL = {
				add_political_power = 50
				remove_ideas = BUL_georgi_ivanov_kyoseivanov
				add_ideas = BUL_bogdan_filov
			}
		}
	}
}

#Bulgaria refuses to replace Kyoseyvanov - Event for GER
country_event = {
	id = bftb_bulgaria_german_influence.6
	title = bftb_bulgaria_german_influence.6.t
	desc = bftb_bulgaria_german_influence.6.desc
	picture = GFX_report_event_generic_sign_treaty2 

	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = bftb_bulgaria_german_influence.6.a

		effect_tooltip = {
			add_opinion_modifier = { 
				target = BUL
				modifier = BUL_rejected_our_demands
			}
		}
	}
}

#Germany demands military access - Event for BUL
country_event = {
	id = bftb_bulgaria_german_influence.7
	title = bftb_bulgaria_german_influence.7.t
	desc = bftb_bulgaria_german_influence.7.desc
	picture = GFX_report_event_german_troops 

	is_triggered_only = yes

	fire_only_once = yes

	option = { #Accept
		name = bftb_bulgaria_german_influence.7.a

		ai_chance = {
			base = 5
			modifier = {
				factor = 10
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 100
				is_in_faction_with = GER
			}
			modifier = {
				factor = 5
				BUL_has_some_sort_of_bogdan_filov = yes
			}
		}

		effect_tooltip = {
			give_military_access = GER
			GER = {
				add_opinion_modifier = { 
					target = BUL
					modifier = BUL_complied_with_our_demands
				}
			}
		}
		modify_country_flag = { flag = BUL_german_influence_flag value = 1 }

		GER = { country_event = { id = bftb_bulgaria_german_influence.8 hours = 2 random_hours = 1 } }
	}

	option = { #Refuse
		name = bftb_bulgaria_german_influence.7.b

		ai_chance = {
			base = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}

		GER = {
			add_opinion_modifier = { 
				target = BUL
				modifier = BUL_rejected_our_demands
			}
		}
		GER = { country_event = { id = bftb_bulgaria_german_influence.9 hours = 2 random_hours = 1 } }
	}
}

#Bulgaria grants us military access - Event for GER
country_event = {
	id = bftb_bulgaria_german_influence.8
	title = bftb_bulgaria_german_influence.8.t
	desc = bftb_bulgaria_german_influence.8.desc
	picture = GFX_report_event_german_troops 

	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = bftb_bulgaria_german_influence.8.a

		BUL = { give_military_access = GER }
		add_opinion_modifier = { 
			target = BUL
			modifier = BUL_complied_with_our_demands
		}
	}
}

#Bulgaria refuses to grant us military access - Event for GER
country_event = {
	id = bftb_bulgaria_german_influence.9
	title = bftb_bulgaria_german_influence.9.t
	desc = bftb_bulgaria_german_influence.9.desc
	picture = GFX_report_event_generic_sign_treaty2 

	is_triggered_only = yes

	fire_only_once = yes

	option = { #Ok
		name = bftb_bulgaria_german_influence.9.a

		effect_tooltip = {
			add_opinion_modifier = { 
				target = BUL
				modifier = BUL_rejected_our_demands
			}
		}
	}
	#OPTION TO CREATE A WARGOAL ON BUL (AI will never choose this)
#	option = { #Unacceptable
#		name = bftb_bulgaria_german_influence.9.b
#
#		trigger = {
#			any_country = {
#				OR = {
#					tag = GER
#					is_in_faction_with = GER
#				}
#				is_neighbor_of = BUL
#			}
#		}
#		
#		effect_tooltip = {
#			add_opinion_modifier = { 
#				target = BUL
#				modifier = BUL_rejected_our_demands
#			}
#		}
#		
#		add_political_power = -100
#		create_wargoal = {
#			type = annex_everything
#			target = BUL
#		}
#	}
}

#BUL wants a Research Agreement with ITA - Event for ITA
country_event = {
	id = bftb_bulgaria_italian_influence.1
	title = bftb_bulgaria_italian_influence.1.t
	desc = bftb_bulgaria_italian_influence.1.desc
	picture = GFX_report_event_german_troops 

	is_triggered_only = yes

	fire_only_once = yes

	option = { #Accept
		name = bftb_bulgaria_italian_influence.1.a

		ai_chance = {
			base = 5
			modifier = {
				factor = 10
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 10
				is_in_faction_with = ROOT
			}
			modifier = {
				factor = 10
				has_government = FROM
			}
		}
		add_to_tech_sharing_group = BUL_italian_research
		BUL = { add_to_tech_sharing_group = BUL_italian_research }
		add_political_power = 75

		hidden_effect = {
			news_event = { id = bftb_news.12 hours = 8 random_hours = 4 }
		}
	}

	option = { #Refuse
		name = bftb_bulgaria_italian_influence.1.b

		ai_chance = {
			base = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}




########  ##     ## ########   ######  ##     ##    ###     ######  ########    ########  #######  ##     ## #### ########  ##     ## ######## ##    ## ######## 
##     ## ##     ## ##     ## ##    ## ##     ##   ## ##   ##    ## ##          ##       ##     ## ##     ##  ##  ##     ## ###   ### ##       ###   ##    ##    
##     ## ##     ## ##     ## ##       ##     ##  ##   ##  ##       ##          ##       ##     ## ##     ##  ##  ##     ## #### #### ##       ####  ##    ##    
########  ##     ## ########  ##       ######### ##     ##  ######  ######      ######   ##     ## ##     ##  ##  ########  ## ### ## ######   ## ## ##    ##    
##        ##     ## ##   ##   ##       ##     ## #########       ## ##          ##       ##  ## ## ##     ##  ##  ##        ##     ## ##       ##  ####    ##    
##        ##     ## ##    ##  ##    ## ##     ## ##     ## ##    ## ##          ##       ##    ##  ##     ##  ##  ##        ##     ## ##       ##   ###    ##    
##         #######  ##     ##  ######  ##     ## ##     ##  ######  ########    ########  ##### ##  #######  #### ##        ##     ## ######## ##    ##    ##    


#Purchase Artillery
country_event = {
	id = bftb_bulgaria_equipment_purchases.1
	title = bftb_bulgaria_equipment_purchases.1.t
	desc = bftb_bulgaria_equipment_purchases.1.desc
	picture = GFX_report_event_bul_artillery 

	is_triggered_only = yes

	option = { #Artillery
		name = bftb_bulgaria_equipment_purchases.1.a

		ai_chance = {
			base = 15
			modifier = {
				factor = 2
				stockpile_ratio = { 
	  				archetype = artillery_equipment
	  				ratio < 0.76
	  			}
			}
		}

		set_variable = { BUL_artillery_type = token:artillery_equipment }
		custom_effect_tooltip = bftb_bulgaria_equipment_purchases.1.a_tt
	}

	option = { #Anti-Air
		name = bftb_bulgaria_equipment_purchases.1.b

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				stockpile_ratio = { 
	  				archetype = anti_air_equipment
	  				ratio < 0.76
	  			}
			}
		}

		trigger = {
			var:BUL_artillery_seller = {
				has_tech = interwar_antiair
			}
		}

		set_variable = { BUL_artillery_type = token:anti_air_equipment }
		custom_effect_tooltip = bftb_bulgaria_equipment_purchases.1.b_tt
	}

	option = { #Anti-Tank
		name = bftb_bulgaria_equipment_purchases.1.c

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				stockpile_ratio = { 
	  				archetype = anti_tank_equipment
	  				ratio < 0.76
	  			}
			}
		}

		trigger = {
			var:BUL_artillery_seller = {
				has_tech = interwar_antitank
			}
		}

		set_variable = { BUL_artillery_type = token:anti_tank_equipment }
		custom_effect_tooltip = bftb_bulgaria_equipment_purchases.1.c_tt
	}
}

#Purchase Military Vehicles
country_event = {
	id = bftb_bulgaria_equipment_purchases.2
	title = bftb_bulgaria_equipment_purchases.2.t
	desc = bftb_bulgaria_equipment_purchases.2.desc
	picture = GFX_report_event_generic_truck 

	is_triggered_only = yes

	option = { #Motorized
		name = bftb_bulgaria_equipment_purchases.2.a

		ai_chance = {
			base = 15
			modifier = {
				factor = 2
				stockpile_ratio = { 
	  				archetype = motorized_equipment
	  				ratio < 0.76
	  			}
			}
		}

		set_variable = { BUL_vehicle_type = token:motorized_equipment }
		var:BUL_military_vehicles_seller = { set_country_flag = BUL_producing_motorized_for_bulgaria_flag } #Used for different amounts of equipment based on type
		custom_effect_tooltip = bftb_bulgaria_equipment_purchases.2.a_tt
	}

	option = { #Mechanized
		name = bftb_bulgaria_equipment_purchases.2.b

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				stockpile_ratio = { 
	  				archetype = mechanized_equipment
	  				ratio < 0.76
	  			}
			}
		}

		trigger = {
			var:BUL_military_vehicles_seller = {
				has_tech = mechanised_infantry
			}
		}

		set_variable = { BUL_vehicle_type = token:mechanized_equipment }
		var:BUL_military_vehicles_seller = { set_country_flag = BUL_producing_mechanized_for_bulgaria_flag }
		custom_effect_tooltip = bftb_bulgaria_equipment_purchases.2.b_tt
	}

	option = { #Armored Cars
		name = bftb_bulgaria_equipment_purchases.2.c

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				stockpile_ratio = { 
	  				archetype = armored_car_equipment
	  				ratio < 0.76
	  			}
			}
		}

		trigger = {
			var:BUL_military_vehicles_seller = {
				has_tech = armored_car1
			}
		}

		set_variable = { BUL_vehicle_type = token:armored_car_equipment }
		var:BUL_military_vehicles_seller = { set_country_flag = BUL_producing_armored_car_for_bulgaria_flag }
		custom_effect_tooltip = bftb_bulgaria_equipment_purchases.2.c_tt
	}
}

#Purchase Armor
country_event = {
	id = bftb_bulgaria_equipment_purchases.3
	title = bftb_bulgaria_equipment_purchases.3.t
	desc = bftb_bulgaria_equipment_purchases.3.desc
	picture = GFX_report_event_tank_factory 

	is_triggered_only = yes

	option = { #Light Tank
		name = bftb_bulgaria_equipment_purchases.3.a

		ai_chance = {
			base = 15
			modifier = {
				factor = 2
				stockpile_ratio = { 
	  				archetype = light_tank_chassis
	  				ratio < 0.76
	  			}
			}
		}

		set_variable = { BUL_armor_type = token:light_tank_chassis }
		var:BUL_armor_seller = { set_country_flag = BUL_producing_light_armor_for_bulgaria_flag }
		custom_effect_tooltip = bftb_bulgaria_equipment_purchases.3.a_tt
	}

	option = { #Medium Tank
		name = bftb_bulgaria_equipment_purchases.3.b

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				stockpile_ratio = { 
	  				archetype = medium_tank_chassis
	  				ratio < 0.76
	  			}
			}
		}

		trigger = {
			var:BUL_armor_seller = {
				OR = {
					has_tech = basic_medium_tank
					has_tech = basic_medium_tank_chassis
				}
			}
		}

		set_variable = { BUL_armor_type = token:medium_tank_chassis }
		var:BUL_armor_seller = { set_country_flag = BUL_producing_medium_armor_for_bulgaria_flag }
		custom_effect_tooltip = bftb_bulgaria_equipment_purchases.3.b_tt
	}

	option = { #Heavy Tank
		name = bftb_bulgaria_equipment_purchases.3.c

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				stockpile_ratio = { 
	  				archetype = heavy_tank_chassis
	  				ratio < 0.76
	  			}
			}
		}

		trigger = {
			var:BUL_armor_seller = {
				has_tech = basic_heavy_tank
			}
		}

		set_variable = { BUL_armor_type = token:heavy_tank_chassis }
		var:BUL_armor_seller = { set_country_flag = BUL_producing_heavy_armor_for_bulgaria_flag }
		custom_effect_tooltip = bftb_bulgaria_equipment_purchases.3.c_tt
	}
}

#Purchase Aircraft
country_event = {
	id = bftb_bulgaria_equipment_purchases.4
	title = bftb_bulgaria_equipment_purchases.4.t
	desc = bftb_bulgaria_equipment_purchases.4.desc
	picture = GFX_report_event_bul_aircraft_repairs

	is_triggered_only = yes

	option = { #Fighters
		name = bftb_bulgaria_equipment_purchases.4.a

		ai_chance = {
			base = 15
			modifier = {
				factor = 2
				stockpile_ratio = { 
	  				archetype = fighter_equipment
	  				ratio < 0.76
	  			}
			}
		}

		set_variable = { BUL_aircraft_type = token:fighter_equipment }
		var:BUL_aircraft_seller = { set_country_flag = BUL_producing_fighters_for_bulgaria_flag }
		custom_effect_tooltip = bftb_bulgaria_equipment_purchases.4.a_tt
	}

	option = { #Naval Bombers
		name = bftb_bulgaria_equipment_purchases.4.b

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				stockpile_ratio = { 
	  				archetype = nav_bomber_equipment
	  				ratio < 0.76
	  			}
			}
		}

		trigger = {
			var:BUL_aircraft_seller = {
				has_tech = naval_bomber1
			}
		}

		set_variable = { BUL_aircraft_type = token:nav_bomber_equipment }
		var:BUL_aircraft_seller = { set_country_flag = BUL_producing_naval_bombers_for_bulgaria_flag }
		custom_effect_tooltip = bftb_bulgaria_equipment_purchases.4.b_tt
	}

	option = { #Tactical Bombers
		name = bftb_bulgaria_equipment_purchases.4.c

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				stockpile_ratio = { 
	  				archetype = tac_bomber_equipment
	  				ratio < 0.76
	  			}
			}
		}

		trigger = {
			var:BUL_aircraft_seller = {
				has_tech = early_bomber
			}
		}

		set_variable = { BUL_aircraft_type = token:tac_bomber_equipment }
		var:BUL_aircraft_seller = { set_country_flag = BUL_producing_tactical_bombers_for_bulgaria_flag }
		custom_effect_tooltip = bftb_bulgaria_equipment_purchases.4.c_tt
	}
}

#BUL wants to purchase our ships - Event for Majors influencing BUL
country_event = {
	id = bftb_bulgaria_equipment_purchases.5
	title = bftb_bulgaria_equipment_purchases.5.t
	desc = lar_portugal_purchase_ships.1.desc
	picture = GFX_report_event_sailors_in_working_rig

	is_triggered_only = yes

	option = { #Accept
		name = lar_portugal_purchase_ships.1.a

		ai_chance = {
			base = 99
			modifier = {
				factor = 0
				OR = {
					has_opinion = { target = BUL value < 0 }
					has_civil_war = yes
					has_capitulated = yes
					is_subject = yes
					surrender_progress > 0.4
					any_other_country = {
						is_major = yes
						has_war_with = PREV
					}
				}
			}
		}

		custom_effect_tooltip = bftb_bulgaria_equipment_purchases.5.a_tt
		BUL = {
			country_event = { id = bftb_bulgaria_equipment_purchases.6 hours = 1 }
		}
	}
	option = { #Reject
		name = lar_portugal_purchase_ships.1.b

		ai_chance = {
			base = 1
			modifier = {
				factor = 99
				has_war = yes
			}
		}

		BUL = {
			country_event = { id = bftb_bulgaria_equipment_purchases.7 hours = 1 }
			set_country_flag = {
					flag = BUL_ships_purchase_rejected_flag
					value = 1
					days = 180
			}
		}
	}
}

#Purchase Ships - FROM has accepted - Event for BUL (Choose type of ships)
country_event = {
	id = bftb_bulgaria_equipment_purchases.6
	title = lar_portugal_purchase_ships.2.t
	desc = lar_portugal_purchase_ships.2.desc
	picture = GFX_report_event_sailors_in_working_rig

	is_triggered_only = yes

	option = { #3 Submarines
		name = lar_portugal_purchase_ships.2.a

		ai_chance = {
			base = 15
		}

		trigger = {
			OR = {
				AND = {
					has_dlc = "Man the Guns"
					FROM = { has_tech = early_ship_hull_submarine }
				}
				AND = {
					NOT = { has_dlc = "Man the Guns" }
					FROM = { has_tech = early_submarine }
				}
			}
		}

		FROM = { set_country_flag = BUL_building_submarines_flag }
		custom_effect_tooltip = bftb_bulgaria_equipment_purchases.6.a_tt
	}

	option = { #2 Destroyers
		name = lar_portugal_purchase_ships.2.b

		ai_chance = {
			base = 10
		}

		trigger = {
			OR = {
				AND = {
					has_dlc = "Man the Guns"
					FROM = { has_tech = early_ship_hull_light }
				}
				AND = {
					NOT = { has_dlc = "Man the Guns" }
					FROM = { has_tech = early_destroyer }
				}
			}
		}

		FROM = { set_country_flag = BUL_building_destroyers_flag }
		custom_effect_tooltip = bftb_bulgaria_equipment_purchases.6.b_tt
	}

	option = { #1 Light Cruiser
		name = lar_portugal_purchase_ships.2.c

		ai_chance = {
			base = 5
		}

		trigger = {
			OR = {
				AND = {
					has_dlc = "Man the Guns"
					FROM = { has_tech = early_ship_hull_cruiser }
				}
				AND = {
					NOT = { has_dlc = "Man the Guns" }
					FROM = { has_tech = early_light_cruiser }
				}
			}
		}

		FROM = { set_country_flag = BUL_building_light_cruiser_flag }
		custom_effect_tooltip = bftb_bulgaria_equipment_purchases.6.c_tt
	}
}

#Purchase Ships - FROM has declined our offer - Event for BUL
country_event = {
	id = bftb_bulgaria_equipment_purchases.7
	title = lar_portugal_purchase_ships.3.t
	desc = lar_portugal_purchase_ships.3.desc
	picture = GFX_report_event_sailors_in_working_rig

	is_triggered_only = yes

	option = { #Ok
		name = lar_portugal_purchase_ships.3.a

	}
}

#Purchase Ships - Submarines ready - Event for BUL
country_event = {
	id = bftb_bulgaria_equipment_purchases.8
	title = bftb_bulgaria_equipment_purchases.8.t
	desc = bftb_bulgaria_equipment_purchases.8.desc
	picture = GFX_report_event_ast_navy

	is_triggered_only = yes

	option = { #Ok
		name = lar_portugal_purchase_ships.4.a

		custom_effect_tooltip = lar_portugal_purchase_ships.4.a_tt
		hidden_effect = {
			hidden_effect = { add_manpower = 600 } # 3 x 200MP/SS
			if = {
				limit = { has_dlc = "Man the Guns" }
				if = {
					limit = {
						FROM.FROM = { has_tech = advanced_ship_hull_submarine }
					}
					FROM.FROM = { #LVL4
						create_equipment_variant = {
							name = "Slava Class"				
							type = ship_hull_submarine_4
							name_group = BUL_SS_HISTORICAL
							parent_version = 0
							modules = {
								fixed_ship_torpedo_slot = ship_torpedo_sub_1
								fixed_ship_engine_slot = sub_ship_engine_1
								rear_1_custom_slot = ship_torpedo_sub_1
								front_1_custom_slot = ship_torpedo_sub_1
							}
						}
					}
					create_ship = { type = ship_hull_submarine_4 equipment_variant = "Slava Class" creator = FROM.FROM }
					create_ship = { type = ship_hull_submarine_4 equipment_variant = "Slava Class" creator = FROM.FROM }
					create_ship = { type = ship_hull_submarine_4 equipment_variant = "Slava Class" creator = FROM.FROM }
				}
				else_if = { #LVL3
					limit = {
						FROM.FROM = { has_tech = improved_ship_hull_submarine }
					}
					FROM.FROM = {
						create_equipment_variant = {
							name = "Slava Class"				
							type = ship_hull_submarine_3
							name_group = BUL_SS_HISTORICAL
							parent_version = 0
							modules = {
								fixed_ship_torpedo_slot = ship_torpedo_sub_1
								fixed_ship_engine_slot = sub_ship_engine_1
								rear_1_custom_slot = ship_torpedo_sub_1
							}
						}
					}
					create_ship = { type = ship_hull_submarine_3 equipment_variant = "Slava Class" creator = FROM.FROM }
					create_ship = { type = ship_hull_submarine_3 equipment_variant = "Slava Class" creator = FROM.FROM }
					create_ship = { type = ship_hull_submarine_3 equipment_variant = "Slava Class" creator = FROM.FROM }
				}
				else_if = { #LVL2
					limit = {
						FROM.FROM = { has_tech = basic_ship_hull_submarine }
					}
					FROM.FROM = {
						create_equipment_variant = {
							name = "Slava Class"				
							type = ship_hull_submarine_2
							name_group = BUL_SS_HISTORICAL
							parent_version = 0
							modules = {
								fixed_ship_torpedo_slot = ship_torpedo_sub_1
								fixed_ship_engine_slot = sub_ship_engine_1
								rear_1_custom_slot = ship_torpedo_sub_1
							}
						}
					}
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Slava Class" creator = FROM.FROM }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Slava Class" creator = FROM.FROM }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Slava Class" creator = FROM.FROM }
				}
				else_if = { #LVL1
					limit = {
						FROM.FROM = { has_tech = early_ship_hull_submarine }
					}
					FROM.FROM = {
						create_equipment_variant = {
							name = "Slava Class"				
							type = ship_hull_submarine_1
							name_group = BUL_SS_HISTORICAL
							parent_version = 0
							modules = {
								fixed_ship_torpedo_slot = ship_torpedo_sub_1
								fixed_ship_engine_slot = sub_ship_engine_1
							}
						}
					}
					create_ship = { type = ship_hull_submarine_1 equipment_variant = "Slava Class" creator = FROM.FROM }
					create_ship = { type = ship_hull_submarine_1 equipment_variant = "Slava Class" creator = FROM.FROM }
					create_ship = { type = ship_hull_submarine_1 equipment_variant = "Slava Class" creator = FROM.FROM }
				}
				else = { #Fallback
					create_equipment_variant = {
						name = "Slava Class"				
						type = ship_hull_submarine_1
						name_group = BUL_SS_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_torpedo_slot = ship_torpedo_sub_1
							fixed_ship_engine_slot = sub_ship_engine_1
						}
					}
					create_ship = { type = ship_hull_submarine_1 equipment_variant = "Slava Class" creator = ROOT }
					create_ship = { type = ship_hull_submarine_1 equipment_variant = "Slava Class" creator = ROOT }
					create_ship = { type = ship_hull_submarine_1 equipment_variant = "Slava Class" creator = ROOT }
				}
			}
			else = { #NO MTG
				if = { #LVL4
					limit = {
						FROM.FROM = { has_tech = advanced_submarine }
					}
					FROM.FROM = {
						create_equipment_variant = {
							name = "Slava Class"
							type = submarine_4
							upgrades = {
								ship_reliability_upgrade = 3
								sub_torpedo_upgrade = 3
								sub_stealth_upgrade = 3
								sub_engine_upgrade = 2
							}
						}
					}
					create_ship = { type = submarine_4 equipment_variant = "Slava Class" creator = FROM.FROM }
					create_ship = { type = submarine_4 equipment_variant = "Slava Class" creator = FROM.FROM }
					create_ship = { type = submarine_4 equipment_variant = "Slava Class" creator = FROM.FROM }
				}
				else_if = { #LVL3
					limit = {
						FROM.FROM = { has_tech = improved_submarine }
					}
					FROM.FROM = {
						create_equipment_variant = {
							name = "Slava Class"
							type = submarine_3
							upgrades = {
								ship_reliability_upgrade = 2
								sub_torpedo_upgrade = 3
								sub_stealth_upgrade = 2
								sub_engine_upgrade = 2
							}
						}
					}
					create_ship = { type = submarine_3 equipment_variant = "Slava Class" creator = FROM.FROM }
					create_ship = { type = submarine_3 equipment_variant = "Slava Class" creator = FROM.FROM }
					create_ship = { type = submarine_3 equipment_variant = "Slava Class" creator = FROM.FROM }
				}
				else_if = { #LVL2
					limit = {
						FROM.FROM = { has_tech = basic_submarine }
					}
					FROM.FROM = {
						create_equipment_variant = {
							name = "Slava Class"
							type = submarine_2
							upgrades = {
								ship_reliability_upgrade = 2
								sub_torpedo_upgrade = 2
								sub_stealth_upgrade = 2
								sub_engine_upgrade = 1
							}
						}
					}
					create_ship = { type = submarine_2 equipment_variant = "Slava Class" creator = FROM.FROM }
					create_ship = { type = submarine_2 equipment_variant = "Slava Class" creator = FROM.FROM }
					create_ship = { type = submarine_2 equipment_variant = "Slava Class" creator = FROM.FROM }
				}
				else_if = { #LVL1
					limit = {
						FROM.FROM = { has_tech = early_submarine }
					}
					FROM.FROM = {
						create_equipment_variant = {
							name = "Slava Class"
							type = submarine_1
							upgrades = {
								ship_reliability_upgrade = 1
								sub_torpedo_upgrade = 1
								sub_stealth_upgrade = 1
								sub_engine_upgrade = 0
							}
						}
					}
					create_ship = { type = submarine_1 equipment_variant = "Slava Class" creator = FROM.FROM }
					create_ship = { type = submarine_1 equipment_variant = "Slava Class" creator = FROM.FROM }
					create_ship = { type = submarine_1 equipment_variant = "Slava Class" creator = FROM.FROM }
				}
				else = { #Fallback (assuming BUL has at least early tech)
					create_equipment_variant = {
						name = "Slava Class"
						type = submarine_1
						upgrades = {
							ship_reliability_upgrade = 1
							sub_torpedo_upgrade = 1
							sub_stealth_upgrade = 1
							sub_engine_upgrade = 0
						}
					}
					create_ship = { type = submarine_1 equipment_variant = "Slava Class" creator = ROOT }
					create_ship = { type = submarine_1 equipment_variant = "Slava Class" creator = ROOT }
					create_ship = { type = submarine_1 equipment_variant = "Slava Class" creator = ROOT }
				}
			}

		}
	}
}

#Purchase Ships - Destroyers ready - Event for BUL
country_event = {
	id = bftb_bulgaria_equipment_purchases.9
	title = bftb_bulgaria_equipment_purchases.9.t
	desc = bftb_bulgaria_equipment_purchases.9.desc
	picture = GFX_report_event_ast_navy

	is_triggered_only = yes

	option = { #Ok
		name = lar_portugal_purchase_ships.4.a

		custom_effect_tooltip = lar_portugal_purchase_ships.5.a_tt

		if = {
			limit = { has_dlc = "Man the Guns" }
			if = { #LVL 4
				limit = {
					FROM.FROM = { has_tech = advanced_ship_hull_light }
				}
				hidden_effect = { add_manpower = 1000 } # 2 x 500MP/DD
				FROM.FROM = {
					create_equipment_variant = {
						name = "Drazki Class"	
						type = ship_hull_light_4
						name_group = BUL_DD_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_battery_1
							fixed_ship_anti_air_slot = ship_anti_air_1
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = light_ship_engine_2
							fixed_ship_torpedo_slot = ship_torpedo_1
							mid_1_custom_slot = empty
							rear_1_custom_slot = ship_depth_charge_1
						}
					}
				}
				create_ship = { type = ship_hull_light_4 equipment_variant = "Drazki Class" creator = FROM.FROM }
				create_ship = { type = ship_hull_light_4 equipment_variant = "Drazki Class" creator = FROM.FROM }
			}
			else_if = { #LVL 3
				limit = {
					FROM.FROM = { has_tech = improved_ship_hull_light }
				}
				hidden_effect = { add_manpower = 800 } # 2 x 400MP/DD
				FROM.FROM = {
					create_equipment_variant = {
						name = "Drazki Class"	
						type = ship_hull_light_3
						name_group = BUL_DD_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_battery_1
							fixed_ship_anti_air_slot = ship_anti_air_1
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = light_ship_engine_2
							fixed_ship_torpedo_slot = ship_torpedo_1
							mid_1_custom_slot = empty
							rear_1_custom_slot = ship_depth_charge_1
						}
					}
				}
				create_ship = { type = ship_hull_light_3 equipment_variant = "Drazki Class" creator = FROM.FROM }
				create_ship = { type = ship_hull_light_3 equipment_variant = "Drazki Class" creator = FROM.FROM }
			}
			else_if = { #LVL 2
				limit = {
					FROM.FROM = { has_tech = basic_ship_hull_light }
				}
				hidden_effect = { add_manpower = 650 } # 2 x 325MP/DD
				FROM.FROM = {
					create_equipment_variant = {
						name = "Drazki Class"	
						type = ship_hull_light_2
						name_group = BUL_DD_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_battery_1
							fixed_ship_anti_air_slot = ship_anti_air_1
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = light_ship_engine_2
							fixed_ship_torpedo_slot = ship_torpedo_1
							mid_1_custom_slot = empty
							rear_1_custom_slot = ship_depth_charge_1
						}
					}
				}
				create_ship = { type = ship_hull_light_2 equipment_variant = "Drazki Class" creator = FROM.FROM }
				create_ship = { type = ship_hull_light_2 equipment_variant = "Drazki Class" creator = FROM.FROM }
			}
			else_if = { #LVL 1
				limit = {
					FROM.FROM = { has_tech = early_ship_hull_light }
				}
				hidden_effect = { add_manpower = 500 } # 2 x 250MP/DD
				FROM.FROM = {
					create_equipment_variant = {
						name = "Drazki Class"	
						type = ship_hull_light_1
						name_group = BUL_DD_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_battery_1
							fixed_ship_anti_air_slot = ship_anti_air_1
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = light_ship_engine_2
							fixed_ship_torpedo_slot = ship_torpedo_1
							mid_1_custom_slot = empty
							rear_1_custom_slot = ship_depth_charge_1
						}
					}
				}
				create_ship = { type = ship_hull_light_1 equipment_variant = "Drazki Class" creator = FROM.FROM }
				create_ship = { type = ship_hull_light_1 equipment_variant = "Drazki Class" creator = FROM.FROM }
			}
			else = { #Fallback (assuming BUL has at least early tech)
				hidden_effect = { add_manpower = 500 } # 2 x 250MP/DD
				create_equipment_variant = {
					name = "Drazki Class"	
					type = ship_hull_light_1
					name_group = BUL_DD_HISTORICAL
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_1
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = light_ship_engine_2
						fixed_ship_torpedo_slot = ship_torpedo_1
						mid_1_custom_slot = empty
						rear_1_custom_slot = ship_depth_charge_1
					}
				}
				create_ship = { type = ship_hull_light_1 equipment_variant = "Drazki Class" creator = ROOT }
				create_ship = { type = ship_hull_light_1 equipment_variant = "Drazki Class" creator = ROOT }
			}
		}
		else = { #NO MTG
			if = { #LVL 4
				limit = {
					FROM.FROM = { has_tech = advanced_destroyer }
				}
				hidden_effect = { add_manpower = 1000 } # 2 x 500MP/DD
				FROM.FROM = {
					create_equipment_variant = {
						name = "Drazki Class"
						type = destroyer_4
						upgrades = {
							ship_torpedo_upgrade = 4
							destroyer_engine_upgrade = 2
							ship_ASW_upgrade = 3
							ship_anti_air_upgrade = 3
						}
					}
				}
				create_ship = { type = destroyer_4 equipment_variant = "Drazki Class" creator = FROM.FROM }
				create_ship = { type = destroyer_4 equipment_variant = "Drazki Class" creator = FROM.FROM }
			}
			else_if = { #LVL 3
				limit = {
					FROM.FROM = { has_tech = improved_destroyer }
				}
				hidden_effect = { add_manpower = 800 } # 2 x 400MP/DD
				FROM.FROM = {
					create_equipment_variant = {
						name = "Drazki Class"
						type = destroyer_3
						upgrades = {
							ship_torpedo_upgrade = 3
							destroyer_engine_upgrade = 2
							ship_ASW_upgrade = 2
							ship_anti_air_upgrade = 3
						}
					}
				}
				create_ship = { type = destroyer_3 equipment_variant = "Drazki Class" creator = FROM.FROM }
				create_ship = { type = destroyer_3 equipment_variant = "Drazki Class" creator = FROM.FROM }
			}
			else_if = { #LVL 2
				limit = {
					FROM.FROM = { has_tech = basic_destroyer }
				}
				hidden_effect = { add_manpower = 650 } # 2 x 325MP/DD
				FROM.FROM = {
					create_equipment_variant = {
						name = "Drazki Class"
						type = destroyer_2
						upgrades = {
							ship_torpedo_upgrade = 2
							destroyer_engine_upgrade = 1
							ship_ASW_upgrade = 2
							ship_anti_air_upgrade = 3
						}
					}
				}
				create_ship = { type = destroyer_2 equipment_variant = "Drazki Class" creator = FROM.FROM }
				create_ship = { type = destroyer_2 equipment_variant = "Drazki Class" creator = FROM.FROM }
			}
			else_if = { #LVL 1
				limit = {
					FROM.FROM = { has_tech = early_destroyer }
				}
				hidden_effect = { add_manpower = 500 } # 2 x 250MP/DD
				FROM.FROM = {
					create_equipment_variant = {
						name = "Drazki Class"
						type = destroyer_1
						upgrades = {
							ship_torpedo_upgrade = 1
							destroyer_engine_upgrade = 1
							ship_ASW_upgrade = 2
							ship_anti_air_upgrade = 2
						}
					}
				}
				create_ship = { type = destroyer_1 equipment_variant = "Drazki Class" creator = FROM.FROM }
				create_ship = { type = destroyer_1 equipment_variant = "Drazki Class" creator = FROM.FROM }
			}
			else = { #Fallback (assuming BUL has at least early tech)			
				hidden_effect = { add_manpower = 500 } # 2 x 250MP/DD
				FROM.FROM = {
					create_equipment_variant = {
						name = "Drazki Class"
						type = destroyer_1
						upgrades = {
							ship_torpedo_upgrade = 1
							destroyer_engine_upgrade = 1
							ship_ASW_upgrade = 2
							ship_anti_air_upgrade = 2
						}
					}
				}
				create_ship = { type = destroyer_1 equipment_variant = "Drazki Class" creator = ROOT }
				create_ship = { type = destroyer_1 equipment_variant = "Drazki Class" creator = ROOT }
			}
		}
	}
}

#Purchase Ships - Light Cruiser ready - Event for BUL
country_event = {
	id = bftb_bulgaria_equipment_purchases.10
	title = bftb_bulgaria_equipment_purchases.10.t
	desc = bftb_bulgaria_equipment_purchases.10.desc
	picture = GFX_report_event_ast_navy

	is_triggered_only = yes

	option = { #Ok
		name = lar_portugal_purchase_ships.4.a

		custom_effect_tooltip = lar_portugal_purchase_ships.6.a_tt
		
		if = {
			limit = { has_dlc = "Man the Guns" }
			if = { #LVL 4
				limit = {
					FROM.FROM = { has_tech = advanced_ship_hull_cruiser }
				}
				hidden_effect = { add_manpower = 1400 }
				FROM.FROM = {
					create_equipment_variant = {
						name = "Sofia Class"	
						type = ship_hull_cruiser_4
						name_group = BUL_CL_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_medium_battery_2
							fixed_ship_anti_air_slot = ship_anti_air_2
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = cruiser_ship_engine_2
							fixed_ship_armor_slot = empty
							front_1_custom_slot = ship_anti_air_1
							mid_1_custom_slot = ship_torpedo_1
							mid_2_custom_slot = ship_airplane_launcher_1
							rear_1_custom_slot = ship_light_medium_battery_2
						}
					}
				}
				create_ship = { type = ship_hull_cruiser_4 equipment_variant = "Sofia Class" creator = FROM.FROM }
			}
			else_if = { #LVL 3
				limit = {
					FROM.FROM = { has_tech = improved_ship_hull_cruiser }
				}
				hidden_effect = { add_manpower = 1200 }
				FROM.FROM = {
					create_equipment_variant = {
						name = "Sofia Class"	
						type = ship_hull_cruiser_3
						name_group = BUL_CL_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_medium_battery_2
							fixed_ship_anti_air_slot = ship_anti_air_2
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = cruiser_ship_engine_2
							fixed_ship_armor_slot = empty
							front_1_custom_slot = ship_anti_air_1
							mid_1_custom_slot = ship_torpedo_1
							mid_2_custom_slot = ship_airplane_launcher_1
							rear_1_custom_slot = ship_light_medium_battery_2
						}
					}
				}
				create_ship = { type = ship_hull_cruiser_3 equipment_variant = "Sofia Class" creator = FROM.FROM }
			}
			else_if = { #LVL 2
				limit = {
					FROM.FROM = { has_tech = basic_ship_hull_cruiser }
				}
				hidden_effect = { add_manpower = 800 }
				FROM.FROM = {
					create_equipment_variant = {
						name = "Sofia Class"	
						type = ship_hull_cruiser_2
						name_group = BUL_CL_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_medium_battery_2
							fixed_ship_anti_air_slot = ship_anti_air_2
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = cruiser_ship_engine_2
							fixed_ship_armor_slot = empty
							front_1_custom_slot = ship_anti_air_1
							mid_1_custom_slot = ship_torpedo_1
							mid_2_custom_slot = ship_airplane_launcher_1
							rear_1_custom_slot = ship_light_medium_battery_2
						}
					}
				}
				create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Sofia Class" creator = FROM.FROM }
			}
			else_if = { #LVL 1
				limit = {
					FROM.FROM = { has_tech = early_ship_hull_cruiser }
				}
				hidden_effect = { add_manpower = 600 }
				FROM.FROM = {
					create_equipment_variant = {
						name = "Sofia Class"	
						type = ship_hull_cruiser_1
						name_group = BUL_CL_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_medium_battery_2
							fixed_ship_anti_air_slot = ship_anti_air_2
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = cruiser_ship_engine_2
							fixed_ship_armor_slot = empty
							front_1_custom_slot = ship_anti_air_1
							mid_1_custom_slot = ship_torpedo_1
							mid_2_custom_slot = ship_airplane_launcher_1
							rear_1_custom_slot = ship_light_medium_battery_2
						}
					}
				}
				create_ship = { type = ship_hull_cruiser_1 equipment_variant = "Sofia Class" creator = FROM.FROM }
			}
			else = { #Fallback (assuming BUL has at least early tech)
				hidden_effect = { add_manpower = 600 }
				create_equipment_variant = {
					name = "Sofia Class"	
					type = ship_hull_cruiser_1
					name_group = BUL_CL_HISTORICAL
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_medium_battery_2
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = cruiser_ship_engine_2
						fixed_ship_armor_slot = empty
						front_1_custom_slot = ship_anti_air_1
						mid_1_custom_slot = ship_torpedo_1
						mid_2_custom_slot = ship_airplane_launcher_1
						rear_1_custom_slot = ship_light_medium_battery_2
					}
				}
				create_ship = { type = ship_hull_cruiser_1 equipment_variant = "Sofia Class" creator = FROM.FROM }
			}
		}
		else = { #NO MTG
			if = { #LVL 4
				limit = {
					FROM.FROM = { has_tech = advanced_light_cruiser }
				}
				hidden_effect = { add_manpower = 1140 }
				FROM.FROM = {
					create_equipment_variant = {
						name = "Sofia Class"
						type = light_cruiser_4
						upgrades = {
							ship_reliability_upgrade = 4
							ship_engine_upgrade = 3
							ship_gun_upgrade = 4
							ship_anti_air_upgrade = 3
						}
					}
				}
				create_ship = { type = light_cruiser_4 equipment_variant = "Sofia Class" creator = FROM.FROM }
			}
			else_if = { #LVL 3
				limit = {
					FROM.FROM = { has_tech = improved_light_cruiser }
				}
				hidden_effect = { add_manpower = 960 }
				FROM.FROM = {
					create_equipment_variant = {
						name = "Sofia Class"
						type = light_cruiser_3
						upgrades = {
							ship_reliability_upgrade = 3
							ship_engine_upgrade = 2
							ship_gun_upgrade = 3
							ship_anti_air_upgrade = 3
						}
					}
				}
				create_ship = { type = light_cruiser_3 equipment_variant = "Sofia Class" creator = FROM.FROM }
			}
			else_if = { #LVL 2
				limit = {
					FROM.FROM = { has_tech = basic_light_cruiser }
				}
				hidden_effect = { add_manpower = 800 }
				FROM.FROM = {
					create_equipment_variant = {
						name = "Sofia Class"
						type = light_cruiser_2
						upgrades = {
							ship_reliability_upgrade = 2
							ship_engine_upgrade = 2
							ship_gun_upgrade = 2
							ship_anti_air_upgrade = 2
						}
					}
				}
				create_ship = { type = light_cruiser_2 equipment_variant = "Sofia Class" creator = FROM.FROM }
			}
			else_if = { #LVL 1
				limit = {
					FROM.FROM = { has_tech = early_light_cruiser }
				}
				hidden_effect = { add_manpower = 600 }
				FROM.FROM = {
					create_equipment_variant = {
						name = "Sofia Class"
						type = light_cruiser_1
						upgrades = {
							ship_reliability_upgrade = 2
							ship_engine_upgrade = 2
							ship_gun_upgrade = 1
							ship_anti_air_upgrade = 1
						}
					}
				}
				create_ship = { type = light_cruiser_1 equipment_variant = "Sofia Class" creator = FROM.FROM }
			}
			else = { #Fallback (assuming BUL has at least early tech)
				hidden_effect = { add_manpower = 600 }
				create_equipment_variant = {
					name = "Sofia Class"
					type = light_cruiser_1
					upgrades = {
						ship_reliability_upgrade = 2
						ship_engine_upgrade = 2
						ship_gun_upgrade = 1
						ship_anti_air_upgrade = 1
					}
				}
				create_ship = { type = light_cruiser_1 equipment_variant = "Sofia Class" creator = FROM.FROM }
			}
		}
	}
}


 ######   ######  ##      ## 
##    ## ##    ## ##  ##  ## 
##       ##       ##  ##  ## 
 ######  ##       ##  ##  ## 
      ## ##       ##  ##  ## 
##    ## ##    ## ##  ##  ## 
 ######   ######   ###  ###  


#SCW is over - Bulgarian volunteers aiding the Spanish Republic are back - Event for BUL
country_event = {
	id = bftb_bulgaria_scw_volunteers.1
	title = bftb_bulgaria_scw_volunteers.1.t
	desc = bftb_bulgaria_scw_volunteers.1.desc
	picture = GFX_report_event_spr_no_pasaran 

	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = bftb_bulgaria_scw_volunteers.1.a

		trigger = {
			country_exists = SPD
		}

		custom_effect_tooltip = available_chief_of_airforce
		show_ideas_tooltip = BUL_zachari_zachariev

		if = {
			limit = {
				check_variable = { BUL_spanish_tag_aided = FROM }
			}
			army_experience = 50
			air_experience = 25
		}
		else = {
			army_experience = 25
			air_experience = 15
		}
	}

	option = {
		name = bftb_bulgaria_scw_volunteers.1.b

		trigger = {
			NOT = { country_exists = SPD }
		}

		custom_effect_tooltip = available_chief_of_airforce
		show_ideas_tooltip = BUL_zachari_zachariev

		if = {
			limit = {
				check_variable = { BUL_spanish_tag_aided = FROM }
			}
			army_experience = 50
			air_experience = 25
		}
		else = {
			army_experience = 25
			air_experience = 15
		}
	}
}

#SCW is over - Bulgarian volunteers aiding the Spanish Nationalists are back - Event for BUL
country_event = {
	id = bftb_bulgaria_scw_volunteers.2
	title = bftb_bulgaria_scw_volunteers.2.t
	desc = bftb_bulgaria_scw_volunteers.2.desc
	picture = GFX_report_event_spr_army_of_africa

	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		hidden_effect = {
			random_list = {
				13 = {
					set_variable = { BUL_trait_gained_during_scw = 1 } #Commando
				}
				13 = {
					set_variable = { BUL_trait_gained_during_scw = 2 } #Mountaineer
				}
				13 = {
					set_variable = { BUL_trait_gained_during_scw = 3 } #Hill Fighter
				}
				13 = {
					set_variable = { BUL_trait_gained_during_scw = 4 } #Urban Assault Specialist
				}
				13 = {
					set_variable = { BUL_trait_gained_during_scw = 5 } #Trickster
				}
				13 = {
					set_variable = { BUL_trait_gained_during_scw = 6 } #Organizer
				}
			}
		}
	}

	option = {
		name = bftb_bulgaria_scw_volunteers.2.a

		trigger = {
			country_exists = SPA
		}

		if = {
			limit = {
				any_unit_leader = {
					has_unit_leader_flag = BUL_scw_promotion_flag
				}
			}
			random_unit_leader = {
				limit = {
					has_unit_leader_flag = BUL_scw_promotion_flag
				}
				promote_leader = yes
				add_skill_level = 1
				add_attack = 1
				add_defense = 1
				add_planning = 1

				if = {
					limit = {
						BUL = { check_variable = { var = BUL_trait_gained_during_scw value = 1 compare = equals } }
					}
					add_unit_leader_trait = commando
				}
				else_if = {
					limit = {
						BUL = { check_variable = { BUL_trait_gained_during_scw = 2 } }
					}
					add_unit_leader_trait = trait_mountaineer
				}
				else_if = {
					limit = {
						BUL = { check_variable = { BUL_trait_gained_during_scw = 3 } }
					}
					add_unit_leader_trait = hill_fighter
				}
				else_if = {
					limit = {
						BUL = { check_variable = { BUL_trait_gained_during_scw = 4 } }
					}
					add_unit_leader_trait = urban_assault_specialist
				}
				else_if = {
					limit = {
						BUL = { check_variable = { BUL_trait_gained_during_scw = 5 } }
					}
					add_unit_leader_trait = trickster
				}
				else_if = {
					limit = {
						BUL = { check_variable = { BUL_trait_gained_during_scw = 6 } }
					}
					add_unit_leader_trait = organizer
				}
			}
		}
		else = {
			if = {
				limit = {
					BUL = { check_variable = { var = BUL_trait_gained_during_scw value = 1 compare = equals } }
				}
				add_corps_commander_role = {
					character = BUL_nikola_nakov
					traits = { commando }
					skill = 3
					attack_skill = 2
					defense_skill = 2
					planning_skill = 4
					logistics_skill = 2
				}
			}
			else_if = {
				limit = {
					BUL = { check_variable = { BUL_trait_gained_during_scw = 2 } }
				}
				add_corps_commander_role = {
					character = BUL_nikola_nakov
					traits = { trait_mountaineer }
					skill = 3
					attack_skill = 2
					defense_skill = 2
					planning_skill = 4
					logistics_skill = 2
				}
			}
			else_if = {
				limit = {
					BUL = { check_variable = { BUL_trait_gained_during_scw = 3 } }
				}
				add_corps_commander_role = {
					character = BUL_nikola_nakov
					traits = { hill_fighter }
					skill = 3
					attack_skill = 2
					defense_skill = 2
					planning_skill = 4
					logistics_skill = 2
				}
			}
			else_if = {
				limit = {
					BUL = { check_variable = { BUL_trait_gained_during_scw = 4 } }
				}
				add_corps_commander_role = {
					character = BUL_nikola_nakov
					traits = { urban_assault_specialist }
					skill = 3
					attack_skill = 2
					defense_skill = 2
					planning_skill = 4
					logistics_skill = 2
				}
			}
			else_if = {
				limit = {
					BUL = { check_variable = { BUL_trait_gained_during_scw = 5 } }
				}
				add_corps_commander_role = {
					character = BUL_nikola_nakov
					traits = { trickster }
					skill = 3
					attack_skill = 2
					defense_skill = 2
					planning_skill = 4
					logistics_skill = 2
				}
			}
			else_if = {
				limit = {
					BUL = { check_variable = { BUL_trait_gained_during_scw = 6 } }
				}
				add_corps_commander_role = {
					character = BUL_nikola_nakov
					traits = { organizer }
					skill = 3
					attack_skill = 2
					defense_skill = 2
					planning_skill = 4
					logistics_skill = 2
				}
			}
		}
		clear_variable = BUL_trait_gained_during_scw
		if = {
			limit = {
				check_variable = { BUL_spanish_tag_aided = FROM }
			}
			army_experience = 50
		}
		else = {
			army_experience = 25
		}
	}

	option = {
		name = bftb_bulgaria_scw_volunteers.2.b

		trigger = {
			NOT = { country_exists = SPA }
		}

		if = {
			limit = {
				any_unit_leader = {
					is_field_marshal = no
					is_assigned = no
				}
			}
			random_unit_leader = {
				limit = {
					is_field_marshal = no
					is_assigned = no
				}
				promote_leader = yes
				add_skill_level = 1

				if = {
					limit = {
						BUL = { check_variable = { var = BUL_trait_gained_during_scw value = 1 compare = equals } }
					}
					add_unit_leader_trait = commando
				}
				else_if = {
					limit = {
						BUL = { check_variable = { BUL_trait_gained_during_scw = 2 } }
					}
					add_unit_leader_trait = trait_mountaineer
				}
				else_if = {
					limit = {
						BUL = { check_variable = { BUL_trait_gained_during_scw = 3 } }
					}
					add_unit_leader_trait = hill_fighter
				}
				else_if = {
					limit = {
						BUL = { check_variable = { BUL_trait_gained_during_scw = 4 } }
					}
					add_unit_leader_trait = urban_assault_specialist
				}
				else_if = {
					limit = {
						BUL = { check_variable = { BUL_trait_gained_during_scw = 5 } }
					}
					add_unit_leader_trait = trickster
				}
				else_if = {
					limit = {
						BUL = { check_variable = { BUL_trait_gained_during_scw = 6 } }
					}
					add_unit_leader_trait = organizer
				}
			}
		}
		else = {
			if = {
				limit = {
					BUL = { check_variable = { var = BUL_trait_gained_during_scw value = 1 compare = equals } }
				}
				add_corps_commander_role = {
					character = BUL_nikola_nakov
					traits = { commando }
					skill = 3
					attack_skill = 2
					defense_skill = 2
					planning_skill = 4
					logistics_skill = 2
				}
			}
			else_if = {
				limit = {
					BUL = { check_variable = { BUL_trait_gained_during_scw = 2 } }
				}
				add_corps_commander_role = {
					character = BUL_nikola_nakov
					traits = { trait_mountaineer }
					skill = 3
					attack_skill = 2
					defense_skill = 2
					planning_skill = 4
					logistics_skill = 2
				}
			}
			else_if = {
				limit = {
					BUL = { check_variable = { BUL_trait_gained_during_scw = 3 } }
				}
				add_corps_commander_role = {
					character = BUL_nikola_nakov
					traits = { hill_fighter }
					skill = 3
					attack_skill = 2
					defense_skill = 2
					planning_skill = 4
					logistics_skill = 2
				}
			}
			else_if = {
				limit = {
					BUL = { check_variable = { BUL_trait_gained_during_scw = 4 } }
				}
				add_corps_commander_role = {
					character = BUL_nikola_nakov
					traits = { urban_assault_specialist }
					skill = 3
					attack_skill = 2
					defense_skill = 2
					planning_skill = 4
					logistics_skill = 2
				}
			}
			else_if = {
				limit = {
					BUL = { check_variable = { BUL_trait_gained_during_scw = 5 } }
				}
				add_corps_commander_role = {
					character = BUL_nikola_nakov
					traits = { trickster }
					skill = 3
					attack_skill = 2
					defense_skill = 2
					planning_skill = 4
					logistics_skill = 2
				}
			}
			else_if = {
				limit = {
					BUL = { check_variable = { BUL_trait_gained_during_scw = 6 } }
				}
				add_corps_commander_role = {
					character = BUL_nikola_nakov
					traits = { organizer }
					skill = 3
					attack_skill = 2
					defense_skill = 2
					planning_skill = 4
					logistics_skill = 2
				}
			}
		}
		clear_variable = BUL_trait_gained_during_scw
		if = {
			limit = {
				check_variable = { BUL_spanish_tag_aided = FROM }
			}
			army_experience = 50
		}
		else = {
			army_experience = 25
		}
	}
}

##    ## ##     ##  ######    #######   ######  ##          ###    ##     ## ####    ###    ##    ##    #### ##    ## ######## ##       ##     ## ######## ##    ##  ######  ######## 
 ##  ##  ##     ## ##    ##  ##     ## ##    ## ##         ## ##   ##     ##  ##    ## ##   ###   ##     ##  ###   ## ##       ##       ##     ## ##       ###   ## ##    ## ##       
  ####   ##     ## ##        ##     ## ##       ##        ##   ##  ##     ##  ##   ##   ##  ####  ##     ##  ####  ## ##       ##       ##     ## ##       ####  ## ##       ##       
   ##    ##     ## ##   #### ##     ##  ######  ##       ##     ## ##     ##  ##  ##     ## ## ## ##     ##  ## ## ## ######   ##       ##     ## ######   ## ## ## ##       ######   
   ##    ##     ## ##    ##  ##     ##       ## ##       #########  ##   ##   ##  ######### ##  ####     ##  ##  #### ##       ##       ##     ## ##       ##  #### ##       ##       
   ##    ##     ## ##    ##  ##     ## ##    ## ##       ##     ##   ## ##    ##  ##     ## ##   ###     ##  ##   ### ##       ##       ##     ## ##       ##   ### ##    ## ##       
   ##     #######   ######    #######   ######  ######## ##     ##    ###    #### ##     ## ##    ##    #### ##    ## ##       ########  #######  ######## ##    ##  ######  ######## 


# Treaty of Perpetual Friendship - BUL wants a NA with YUG - Event for YUG
country_event = {
	id = bftb_bulgaria_yugoslavian_influence.1
	title = bftb_bulgaria_yugoslavian_influence.1.t
	desc = bftb_bulgaria_yugoslavian_influence.1.desc
	picture = GFX_report_event_bul_ff_troops_yugoslavia

	is_triggered_only = yes

	fire_only_once = yes

	option = { #Accept
		name = bftb_bulgaria_yugoslavian_influence.1.a

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				has_opinion = {
					target = BUL
					value > 50
				}
			}
			modifier = {
				factor = 2
				BUL = { has_completed_focus = BUL_condemn_macedonian_organizations }
			}
			modifier = { #You have tried
				factor = 5
				BUL = { 
					NOT = {
						has_idea = BUL_imro_01
						has_idea = BUL_imro_04
						has_idea = BUL_imro_05
					}
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = BUL
					ratio < 1
				}
			}
			modifier = {
				factor = 5
				strength_ratio = {
					tag = BUL
					ratio < 0.5
				}
			}
			modifier = {
				factor = 0
				has_opinion = {
					target = BUL
					value < -50
				}
			}
		}

		set_country_flag = BUL_ongoing_balkan_project_flag

		every_owned_state = {
			limit = {
				is_claimed_by = FROM
			}
			remove_claim_by = FROM
		}
		diplomatic_relation = {
			country = FROM
			relation = non_aggression_pact
			active = yes
		}
		add_opinion_modifier = { 
			target = FROM
			modifier = BUL_strengthened_relations_with_us
		}
		FROM = {
			add_opinion_modifier = { 
				target = ROOT
				modifier = BUL_strengthened_relations_with_us
			}
		}
		BUL_remove_balkan_opinion_modifiers = yes

		add_ideas = BUL_balkan_federation_project_propaganda
		FROM = { add_ideas = BUL_balkan_federation_project_propaganda }

		every_country = {
			limit = {
				BUL_country_can_influence_bulgaria = yes
				NOT = { is_in_faction_with = ROOT }
				NOT = { is_in_faction_with = FROM }
			}
			add_opinion_modifier = { 
				target = FROM
				modifier = BUL_approached_yugoslavia
			}
		}
		hidden_effect = {
			FROM = { country_event = bftb_bulgaria_yugoslavian_influence.2 }
			news_event = { id = bftb_news.14 hours = 8 random_hours = 4 }
		}

	}

	option = { #Reject
		name = bftb_bulgaria_yugoslavian_influence.1.b

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				has_opinion = {
					target = BUL
					value < 0
				}
			}
			modifier = {
				factor = 5
				BUL = { has_completed_focus = BUL_support_macedonian_organizations }
			}
			modifier = { #Your coop with IMRO is just too much
				factor = 10
				BUL = { has_idea = BUL_imro_05 }
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = BUL
					ratio > 2
				}
			}
		}

		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = BUL_rejected_our_proposal
			}
		}
		hidden_effect = {
			FROM = { country_event = bftb_bulgaria_yugoslavian_influence.3 }
		}
	}
}

# Treaty of Perpetual Friendship - YUG accepts - Event for BUL
country_event = {
	id = bftb_bulgaria_yugoslavian_influence.2
	title = bftb_bulgaria_yugoslavian_influence.2.t
	desc = bftb_bulgaria_yugoslavian_influence.2.desc
	picture = GFX_report_event_communists_cheer 

	is_triggered_only = yes

	fire_only_once = yes

	option = { #Ok
		name = bftb_bulgaria_yugoslavian_influence.2.a

		effect_tooltip = {
			FROM = {
				every_owned_state = {
					limit = {
						is_claimed_by = ROOT
					}
					remove_claim_by = ROOT
				}
				diplomatic_relation = {
					country = ROOT
					relation = non_aggression_pact
					active = yes
				}
				add_opinion_modifier = { 
					target = ROOT
					modifier = BUL_strengthened_relations_with_us
				}
			}
			add_opinion_modifier = { 
				target = FROM
				modifier = BUL_strengthened_relations_with_us
			}

			add_ideas = BUL_balkan_federation_project_propaganda
			FROM = { add_ideas = BUL_balkan_federation_project_propaganda }

			every_country = {
				limit = {
					BUL_country_can_influence_bulgaria = yes
					NOT = { is_in_faction_with = ROOT }
					NOT = { is_in_faction_with = FROM }
				}
				add_opinion_modifier = { 
					target = ROOT
					modifier = BUL_approached_yugoslavia
				}
			}
		}
	}
}

# Treaty of Perpetual Friendship - YUG rejects our proposal - Event for BUL
country_event = {
	id = bftb_bulgaria_yugoslavian_influence.3
	title = bftb_bulgaria_yugoslavian_influence.3.t
	desc = bftb_bulgaria_yugoslavian_influence.3.desc
	picture = GFX_report_event_generic_sign_treaty1 

	is_triggered_only = yes

	fire_only_once = yes

	option = { #Ok
		name = bftb_bulgaria_yugoslavian_influence.3.a

		effect_tooltip = {
			add_opinion_modifier = {
				target = FROM
				modifier = BUL_rejected_our_proposal
			}
		}
	}
}


########     ###    ##       ##    ##    ###    ##    ##    ######## ######## ########  ######## ########     ###    ######## ####  #######  ##    ## 
##     ##   ## ##   ##       ##   ##    ## ##   ###   ##    ##       ##       ##     ## ##       ##     ##   ## ##      ##     ##  ##     ## ###   ## 
##     ##  ##   ##  ##       ##  ##    ##   ##  ####  ##    ##       ##       ##     ## ##       ##     ##  ##   ##     ##     ##  ##     ## ####  ## 
########  ##     ## ##       #####    ##     ## ## ## ##    ######   ######   ##     ## ######   ########  ##     ##    ##     ##  ##     ## ## ## ## 
##     ## ######### ##       ##  ##   ######### ##  ####    ##       ##       ##     ## ##       ##   ##   #########    ##     ##  ##     ## ##  #### 
##     ## ##     ## ##       ##   ##  ##     ## ##   ###    ##       ##       ##     ## ##       ##    ##  ##     ##    ##     ##  ##     ## ##   ### 
########  ##     ## ######## ##    ## ##     ## ##    ##    ##       ######## ########  ######## ##     ## ##     ##    ##    ####  #######  ##    ## 


#Bulgarian Balkan Federation Project Ready - Event for BUL
country_event = {
	id = bftb_bulgaria_balkan_federation.1
	title = bftb_bulgaria_balkan_federation.1.t
	desc = bftb_bulgaria_balkan_federation.1.desc
	picture = GFX_report_event_bul_soviet_army_sofia

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_balkan_federation.1.a

		custom_effect_tooltip = bftb_bulgaria_balkan_federation_project_ready_tt
	}
}

#Bulgarian Balkan Federation Project Ready - Event for YUG
country_event = {
	id = bftb_bulgaria_balkan_federation.2
	title = bftb_bulgaria_balkan_federation.2.t
	desc = bftb_bulgaria_balkan_federation.2.desc
	picture = GFX_report_event_generic_rally

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_balkan_federation.2.a

		add_popularity = {
			ideology = communism
			popularity = 0.1
		}
	}
}

#Bulgarian Propaganda for Balkan Federation - Event for Balkan Countries
country_event = {
	id = bftb_bulgaria_balkan_federation.3
	title = bftb_bulgaria_balkan_federation.3.t
	desc = bftb_bulgaria_balkan_federation.3.desc
	picture = GFX_report_event_generic_rally

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_balkan_federation.3.a

		add_timed_idea = {
			idea = BUL_balkan_federation_project_propaganda
			days = 180
		}
	}
}

#Bulgaria destabilizes country - Event for Balkan Countries
country_event = {
	id = bftb_bulgaria_balkan_federation.4
	title = bftb_bulgaria_balkan_federation.4.t
	desc = bftb_bulgaria_balkan_federation.4.desc
	picture = GFX_report_event_bul_troops_partisans_boat 

	is_triggered_only = yes

	option = {
		name = worrying

		add_stability = -0.05
		add_popularity = {
			ideology = communism
			popularity = 0.1
		}
	}
}

#Unification of the Balkans - Event for Balkan Allies
country_event = {
	id = bftb_bulgaria_balkan_federation.5
	title = bftb_bulgaria_balkan_federation.5.t
	desc = bftb_bulgaria_balkan_federation.5.desc
	picture = GFX_report_event_bul_troops_dobrudja

	is_triggered_only = yes

	option = { #Accept (and get annexed)
		name = bftb_bulgaria_balkan_federation.5.a

		ai_chance = {
			factor = 11
			modifier = {
				factor = 2
				threat > 69
			}
			modifier = {
				factor = 2
				FROM = { is_faction_leader = yes }
			}
			modifier = {
				factor = 2
				FROM = { has_government = ROOT }
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 99
				}
			}
			modifier = {
				factor = 5
				strength_ratio = {
					tag = FROM
					ratio < 0.8
				}
				strength_ratio = {
					tag = FROM
					ratio > 0.4
				}
			}
			modifier = {
				factor = 10
				strength_ratio = {
					tag = FROM
					ratio < 0.1
				}
			}
			modifier = {
				factor = 2
				is_neighbor_of = BUL
			}
			modifier = {
				factor = 10
				has_opinion_modifier = BUL_territorial_arbitration
			}
			modifier = { #We like that you condemn IMRO
				factor = 2
				BUL = { has_completed_focus = BUL_condemn_macedonian_organizations }
			}
			modifier = { #You have tried
				factor = 5
				BUL = { 
					NOT = {
						has_idea = BUL_imro_01
						has_idea = BUL_imro_04
						has_idea = BUL_imro_05
					}
				}
			}
		}

		custom_effect_tooltip = GAME_OVER_TT
		hidden_effect = {
			FROM = { country_event = { id = bftb_bulgaria_balkan_federation.6 hours = 6 random_hours = 6 } }
		}
	}

#	option = { #Handle issues first (then get annexed) - AI only
#		name = bftb_bulgaria_balkan_federation.5.b
#
#		trigger = {
#			is_ai = yes
#			NOT = {
#				has_government = fascism
#			}
#		}
#
#		ai_chance = {
#			factor = 11
#			modifier = {
#				factor = 2
#				threat < 50
#			}
#			modifier = {
#				factor = 6
#				FROM = { is_faction_leader = no }
#			}
#			modifier = {
#				factor = 2
#				FROM = { has_government = ROOT }
#			}
#			modifier = {
#				factor = 2
#				has_opinion = {
#					target = FROM
#					value < 50
#				}
#			}
#			modifier = {
#				factor = 2
#				has_opinion = {
#					target = FROM
#					value < 15
#				}
#			}
#			modifier = {
#				factor = 5
#				strength_ratio = {
#					tag = FROM
#					ratio < 0.4
#				}
#				strength_ratio = {
#					tag = FROM
#					ratio > 0.1
#				}
#			}
#			modifier = {
#				factor = 10
#				has_opinion_modifier = BUL_territorial_arbitration
#			}
#			modifier = { #We like that you condemn IMRO
#				factor = 2
#				BUL = { has_completed_focus = BUL_condemn_macedonian_organizations }
#			}
#			modifier = { #You have tried
#				factor = 2
#				BUL = { 
#					NOT = {
#						has_idea = BUL_imro_01
#						has_idea = BUL_imro_04
#						has_idea = BUL_imro_05
#					}
#				}
#			}
#		}
#
#		random_list = {
#			13 = { #Requests Industrial Aid
#				modifier = {
#					factor = 10
#					ic_ratio = {
#						tag = BUL
#						ratio < 0.5
#					}
#				}
#				FROM = {
#					country_event = { id = bftb_bulgaria_balkan_federation.7 hours = 6 random_hours = 6 }
#				}
#			}
#			11 = { #Requests Economic Aid for Infrastructure
#				modifier = {
#					factor = 10
#					any_owned_state = {
#						is_in_home_area = yes
#						is_on_continent = europe
#						any_neighbor_state = {
#							is_controlled_by = BUL
#						}
#					}
#				}
#				FROM = {
#					country_event = { id = bftb_bulgaria_balkan_federation.8 hours = 6 random_hours = 6 }
#				}
#			}
#			13 = { #Requests Military Aid
#				modifier = {
#					factor = 10
#					strength_ratio = {
#						tag = FROM
#						ratio < 0.5
#					}
#				}
#				FROM = {
#					country_event = { id = bftb_bulgaria_balkan_federation.9 hours = 6 random_hours = 6 }
#				}
#			}
#		}
#		custom_effect_tooltip = GAME_OVER_TT
#	}


	option = { #Puppet - Player only
		name = bftb_bulgaria_balkan_federation.5.c

		trigger = {
			is_ai = no
		}

		effect_tooltip = {
			FROM = {
				puppet = ROOT
			}
			if = {
				limit = {
					is_in_faction = no
					FROM = { is_in_faction = yes }
				}
				FROM = { add_to_faction = ROOT }
			}
		}
		hidden_effect = {
			FROM = { country_event = { id = bftb_bulgaria_balkan_federation.10 hours = 6 random_hours = 6 } }
		}
	}

	option = { #Refuse
		name = bftb_bulgaria_balkan_federation.5.d

		ai_chance = {
			factor = 11
			modifier = {
				factor = 6
				FROM = { is_faction_leader = no }
			}
			modifier = {
				factor = 2
				NOT = { has_government = FROM }
			}
			modifier = {
				factor = 5
				has_opinion = {
					target = FROM
					value < 0
				}
			}
			modifier = {
				factor = 50
				has_opinion = {
					target = FROM
					value < -50
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio > 1
				}
			}
			modifier = {
				factor = 10
				strength_ratio = {
					tag = FROM
					ratio > 2
				}
			}
		}

		effect_tooltip = {
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = BUL_refused_unification
				}
			}
		}
		custom_effect_tooltip = bftb_bulgaria_balkan_federation.5.d_consequences_tt
		hidden_effect = {
			FROM = { country_event = { id = bftb_bulgaria_balkan_federation.11 hours = 6 random_hours = 6 } }
		}
	}
}

#Unification of the Balkans - Country Accepts - Event for BUL
country_event = {
	id = bftb_bulgaria_balkan_federation.6
	title = bftb_bulgaria_balkan_federation.6.t
	desc = bftb_bulgaria_balkan_federation.6.desc
	picture = GFX_report_event_bul_soviet_army_sofia 

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_balkan_federation.6.a

		BUL_join_wars_of_from = yes

		FROM = {
			every_unit_leader = {
				set_nationality = BUL
			}
		}
		annex_country = { target = FROM transfer_troops = yes }

		custom_effect_tooltip = germany.126.warning
	}
}

#Unification of the Balkans - Country Requests Industrial Aid before annexation - Event for BUL
country_event = {
	id = bftb_bulgaria_balkan_federation.7
	title = bftb_bulgaria_balkan_federation.7.t
	desc = bftb_bulgaria_balkan_federation.7.desc
	picture = GFX_report_event_generic_factory

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_balkan_federation.7.a

	}
}

#Unification of the Balkans - Country Requests Economic Aid before annexation - Event for BUL
country_event = {
	id = bftb_bulgaria_balkan_federation.8
	title = bftb_bulgaria_balkan_federation.8.t
	desc = bftb_bulgaria_balkan_federation.8.desc
	picture = GFX_report_event_hitler_handshake

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_balkan_federation.8.a

	}
}

#Unification of the Balkans - Country Requests Military Aid before annexation - Event for BUL
country_event = {
	id = bftb_bulgaria_balkan_federation.9
	title = bftb_bulgaria_balkan_federation.9.t
	desc = bftb_bulgaria_balkan_federation.9.desc
	picture = GFX_report_event_bul_ff_troops_yugoslavia

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_balkan_federation.9.a

	}
}

#Unification of the Balkans - Country requests limited freedom (aka puppet) - Event for BUL
country_event = {
	id = bftb_bulgaria_balkan_federation.10
	title = bftb_bulgaria_balkan_federation.10.t
	desc = bftb_bulgaria_balkan_federation.10.desc
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_balkan_federation.10.a

		BUL_join_wars_of_from = yes

		puppet = FROM
		BUL_remove_balkan_opinion_modifiers = yes
		set_autonomy = { target = FROM autonomy_state = autonomy_dominion }
		if = {
			limit = {
				FROM = { is_in_faction = no }
			}
			random_country = {
				limit = { 
					is_in_faction_with = BUL 
					is_faction_leader = yes
				}
				add_to_faction = FROM
			}
		}

		custom_effect_tooltip = germany.126.warning
	}
}

#Unification of the Balkans - Country Refuses - Event for BUL
country_event = {
	id = bftb_bulgaria_balkan_federation.11
	title = bftb_bulgaria_balkan_federation.11.t
	desc = bftb_bulgaria_balkan_federation.11.desc
	picture = GFX_report_event_gre_balkan_pact

	is_triggered_only = yes

	option = { #Do nothing
		name = bftb_bulgaria_balkan_federation.11.a

		ai_chance = {
			factor = 10
			modifier = {
				factor = 10
				FROM = { is_faction_leader = no }
			}
			modifier = {
				factor = 2
				is_ai = yes
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value < 0
				}
			}
			modifier = {
				factor = 10
				strength_ratio = {
					tag = FROM
					ratio < 1
				}
			}
		}

		add_opinion_modifier = {
			target = ROOT
			modifier = BUL_refused_unification
		}
	}

	option = { #Kick from faction
		name = bftb_bulgaria_balkan_federation.11.b

		trigger = {
			is_faction_leader = yes
		}

		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value < 0
				}
			}
			modifier = {
				factor = 10
				has_opinion = {
					target = FROM
					value < 50
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio > 0.7
				}
			}
		}

		add_opinion_modifier = {
			target = ROOT
			modifier = BUL_refused_unification
		}
		remove_from_faction = FROM
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = BUL_kicked_us_from_faction
			}
		}

		hidden_effect = { #ROOT & FROM are not happy with each other's actions
			add_ai_strategy = {
				type = alliance
				id = FROM			
				value = -100
			}

			add_ai_strategy = {
				type = befriend
				id = FROM			
				value = -100
			}
			FROM = {
				add_ai_strategy = {
					type = alliance
					id = ROOT			
					value = -100
				}

				add_ai_strategy = {
					type = befriend
					id = ROOT			
					value = -100
				}
			}
		}
	}

	option = { #Kick and Wargoal
		name = bftb_bulgaria_balkan_federation.11.c

		trigger = {
			is_faction_leader = yes
		}

		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value < 25
				}
			}
			modifier = {
				factor = 10
				has_opinion = {
					target = FROM
					value < 50
				}
			}
			modifier = {
				factor = 5
				strength_ratio = {
					tag = FROM
					ratio > 1.5
				}
			}
		}

		add_political_power = -120
		add_opinion_modifier = {
			target = ROOT
			modifier = BUL_refused_unification
		}
		remove_from_faction = FROM
		create_wargoal = {
			type = annex_everything
			target = FROM
		}
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = BUL_kicked_us_from_faction
			}
		}

		hidden_effect = { #ROOT & FROM are mad at each other
			add_ai_strategy = {
				type = alliance
				id = FROM			
				value = -200
			}

			add_ai_strategy = {
				type = befriend
				id = FROM			
				value = -200
			}
			FROM = {
				add_ai_strategy = {
					type = alliance
					id = ROOT			
					value = -200
				}

				add_ai_strategy = {
					type = befriend
					id = ROOT			
					value = -200
				}
			}
		}
	}
}

#Recover Italian Territories - Event for ITA
country_event = {
	id = bftb_bulgaria_balkan_federation.12
	title = bftb_bulgaria_balkan_federation.12.t
	desc = bftb_bulgaria_balkan_federation.12.desc
	picture = GFX_report_event_bul_boris_military

	is_triggered_only = yes

	option = { #Accept
		name = bftb_bulgaria_balkan_federation.12.a

		ai_chance = {
			factor = 10
			modifier = {
				factor = 10
				FROM = { is_faction_leader = no }
			}
			modifier = {
				factor = 100
				is_in_faction_with = FROM
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 90
				}
			}
			modifier = {
				factor = 10
				strength_ratio = {
					tag = FROM
					ratio < 1
				}
			}
			modifier = {
				factor = 2
				FROM = { has_completed_focus = BUL_cooperation_with_italy }
			}
			modifier = {
				factor = 0
				OR = {
					has_war_with = FROM
					any_allied_country = {
						has_war_with = FROM
					}
				}			
			}
		}

		every_controlled_state = { # Any Italian-controlled states in the Balkans get transferred
			limit = {
				BUL_is_balkan_state = yes
			}
			hidden_effect = {
				if = { # Prio BUL always, if possible
					limit = {
						is_core_of = BUL
						country_exists = BUL
					}
					BUL = {
						transfer_state = PREV
					}
				}
				else_if = { #Initial Balkan countries are prioritized before releasables 
					limit = {
						is_core_of = YUG
						country_exists = YUG
					}
					YUG = {
						transfer_state = PREV
					}
				}
				else_if = {
					limit = {
						is_core_of = GRE
						country_exists = GRE
					}
					GRE = {
						transfer_state = PREV
					}
				}
				else_if = {
					limit = {
						is_core_of = ROM
						country_exists = ROM
					}
					ROM = {
						transfer_state = PREV
					}
				}
				else_if = { # Check for releasables
					limit = {
						any_country = {
							BUL_is_balkan_nation = yes
							country_exists = yes
							PREV = { is_core_of = THIS }
						}
					}
					random_country = {
						limit = {
							BUL_is_balkan_nation = yes
							country_exists = yes
							PREV = { is_core_of = THIS }
						}
						transfer_state = PREV
					}
				}
				else = { # Fallback is BUL
					BUL = {
						transfer_state = PREV
					}
				}
				set_state_flag = BUL_italy_yields_state_flag
			}
			custom_effect_tooltip = bftb_bulgaria_balkan_federation.12.a_state_transfering_tt
		}
		if = {
			limit = {
				any_country = {
					BUL_is_balkan_nation = yes
					any_controlled_state = {
						has_state_flag = BUL_italy_yields_state_flag
					}
					NOT = { original_tag = BUL }
				}
			}
			every_country = {
				limit = {
					BUL_is_balkan_nation = yes
					any_controlled_state = {
						has_state_flag = BUL_italy_yields_state_flag
					}
					NOT = { original_tag = BUL }
				}
				country_event = bftb_bulgaria_balkan_federation.14
			}
		}
		FROM = { country_event = { id = bftb_bulgaria_balkan_federation.13 hours = 2 } }
	}

	option = { #Refuse
		name = bftb_bulgaria_balkan_federation.12.b

		ai_chance = {
			factor = 20
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value < 0
				}
			}
			modifier = {
				factor = 10
				has_opinion = {
					target = FROM
					value < 50
				}
			}
			modifier = {
				factor = 20
				strength_ratio = {
					tag = FROM
					ratio > 1
				}
			}
			modifier = {
				factor = 5
				has_war = no
			}
			modifier = {
				factor = 5
				is_faction_leader = yes
			}
		}

		FROM = { country_event = { id = bftb_bulgaria_balkan_federation.15 hours = 2 } }
		custom_effect_tooltip = bftb_bulgaria_balkan_federation.12.b_tt
		effect_tooltip = {
			every_controlled_state = { # Bulgaria gets a claim on any Italian-controlled states in the Balkans
				limit = {
					BUL_is_balkan_state = yes
				}
				add_claim_by = FROM
			}
			FROM = {
				create_wargoal = {
					type = annex_everything
					target = ROOT
				}
			}
		}
	}
}

#Recover Italian Territories - ITA Accepts - Event for BUL
country_event = {
	id = bftb_bulgaria_balkan_federation.13
	title = bftb_bulgaria_balkan_federation.13.t
	desc = bftb_bulgaria_balkan_federation.13.desc
	picture = GFX_report_event_bul_italian_equipment 

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_balkan_federation.13.a

		effect_tooltip = {
			if = {
				limit = {
					any_controlled_state = {
						has_state_flag = BUL_italy_yields_state_flag
					}
				}
				custom_effect_tooltip = BUL_italy_yields_states_to_root_tt
				every_controlled_state = {
					limit = {
						has_state_flag = BUL_italy_yields_state_flag
					}
				}
			}
			if = {
				limit = {
					any_state = {
						has_state_flag = BUL_italy_yields_state_flag
						NOT = { is_controlled_by = ROOT }
					}
				}
				custom_effect_tooltip = BUL_italy_yields_states_to_others_tt
				every_state = {
					limit = {
						has_state_flag = BUL_italy_yields_state_flag
						NOT = { is_controlled_by = ROOT }
					}
				}
			}
		}
		hidden_effect = {
			every_state = {
				limit = {
					has_state_flag = BUL_italy_yields_state_flag
				}
				clr_state_flag = BUL_italy_yields_state_flag
			}
		}
	}
}

#Recover Italian Territories - ITA transfers state - Event for other Balkan countries
country_event = {
	id = bftb_bulgaria_balkan_federation.14
	title = bftb_bulgaria_balkan_federation.14.t
	desc = bftb_bulgaria_balkan_federation.14.desc
	picture = GFX_report_event_bul_soviet_army_sofia

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_balkan_federation.14.a

		effect_tooltip = {
			if = {
				limit = {
					any_controlled_state = {
						has_state_flag = BUL_italy_yields_state_flag
					}
				}
				custom_effect_tooltip = BUL_italy_yields_states_to_root_tt
				every_controlled_state = {
					limit = {
						has_state_flag = BUL_italy_yields_state_flag
					}
				}
			}
			if = {
				limit = {
					any_state = {
						has_state_flag = BUL_italy_yields_state_flag
						NOT = { is_controlled_by = ROOT }
					}
				}
				custom_effect_tooltip = BUL_italy_yields_states_to_others_tt
				every_state = {
					limit = {
						has_state_flag = BUL_italy_yields_state_flag
						NOT = { is_controlled_by = ROOT }
					}
				}
			}
		}
		add_opinion_modifier = {
			target = BUL
			modifier = BUL_territorial_arbitration
		}
	}
}

#Recover Italian Territories - ITA refuses - Event for BUL
country_event = {
	id = bftb_bulgaria_balkan_federation.15
	title = bftb_bulgaria_balkan_federation.15.t
	desc = bftb_bulgaria_balkan_federation.15.desc
	picture = GFX_report_event_bul_ff_troops_panzer

	is_triggered_only = yes

	option = { # Wargoal
		name = bftb_bulgaria_balkan_federation.15.a

		ai_chance = {
			base = 10
			modifier = {
				factor = 100
				strength_ratio = {
					tag = FROM
					ratio > 2
				}
			}
			modifier = {
				factor = 2
				alliance_strength_ratio > 1.5
			}
		}

		FROM = {
			every_controlled_state = {
				limit = {
					BUL_is_balkan_state = yes
				}
				add_claim_by = ROOT
			}
		}
		create_wargoal = {
			type = annex_everything
			target = FROM
		}
	}

	option = { # Do Nothing
		name = bftb_bulgaria_balkan_federation.15.b

		ai_chance = {
			base = 10
		}
	}
}


########    ###    ######## ########     #######  ########    ######## ##     ## ########    ########     ###    ##       ##    ##    ###    ##    ##  ######  
##         ## ##      ##    ##          ##     ## ##             ##    ##     ## ##          ##     ##   ## ##   ##       ##   ##    ## ##   ###   ## ##    ## 
##        ##   ##     ##    ##          ##     ## ##             ##    ##     ## ##          ##     ##  ##   ##  ##       ##  ##    ##   ##  ####  ## ##       
######   ##     ##    ##    ######      ##     ## ######         ##    ######### ######      ########  ##     ## ##       #####    ##     ## ## ## ##  ######  
##       #########    ##    ##          ##     ## ##             ##    ##     ## ##          ##     ## ######### ##       ##  ##   ######### ##  ####       ## 
##       ##     ##    ##    ##          ##     ## ##             ##    ##     ## ##          ##     ## ##     ## ##       ##   ##  ##     ## ##   ### ##    ## 
##       ##     ##    ##    ########     #######  ##             ##    ##     ## ########    ########  ##     ## ######## ##    ## ##     ## ##    ##  ######  


#Ultimatum to join faction - Event for Balkan nation
country_event = {
	id = bftb_bulgaria_fate_of_the_balkans.1
	title = bftb_bulgaria_fate_of_the_balkans.1.t
	desc = bftb_bulgaria_fate_of_the_balkans.1.desc
	picture = GFX_report_event_bul_boris_military 

	is_triggered_only = yes

	option = { # Accept
		name = bftb_bulgaria_fate_of_the_balkans.1.a

		ai_chance = {
			base = 20
			modifier = {
				factor = 5
				has_country_flag = { flag = BUL_fate_of_the_balkans_government_influenced_flag value > 4 }
			}
			modifier = {
				factor = 4
				has_country_flag = { flag = BUL_fate_of_the_balkans_government_influenced_flag value > 3 }
			}
			modifier = {
				factor = 2
				has_country_flag = { flag = BUL_fate_of_the_balkans_government_influenced_flag value > 2 }
			}
			modifier = {
				factor = 2
				has_country_flag = { flag = BUL_fate_of_the_balkans_government_influenced_flag value > 1 }
			}
			modifier = {
				factor = 1.5
				has_country_flag = { flag = BUL_fate_of_the_balkans_government_influenced_flag value > 0 }
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 2
				is_neighbor_of = FROM
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio < 1
				}
			}
			modifier = {
				factor = 10
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
			}
			modifier = {
				factor = 0.5
				strength_ratio = {
					tag = FROM
					ratio > 1
				}
			}
			modifier = {
				factor = 0
				strength_ratio = {
					tag = FROM
					ratio > 2
				}
			}
		}

		FROM = {
			hidden_effect = {
				country_event = bftb_bulgaria_fate_of_the_balkans.2
			}
			effect_tooltip = {
				add_to_faction = ROOT
			}
		}
		hidden_effect = {
			random_other_country = {
				limit = {
					is_in_faction_with = ROOT
					is_faction_leader = yes
				}
				country_event = bftb_bulgaria_fate_of_the_balkans.10
			}
		}
		add_autonomy_score = {
			value = 300
			localization = BUL_transferred_bulgarian_state_autonomy_desc
		}
	}

	option = { # Refuse
		name = bftb_bulgaria_fate_of_the_balkans.1.b

		ai_chance = {
			base = 50
			modifier = {
				factor = 5
				has_government = communism
			}
			modifier = {
				factor = 2
				has_government = democratic
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value < 0
				}
			}
			modifier = {
				factor = 5
				has_opinion = {
					target = FROM
					value < 50
				}
			}
			modifier = {
				factor = 10
				is_in_faction = yes
			}
			modifier = {
				factor = 5
				is_major = yes
			}
		}

		hidden_effect = {
			FROM = { country_event = bftb_bulgaria_fate_of_the_balkans.3 }
		}
		effect_tooltip = {
			FROM = {
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ROOT
				}
			}
		}
	}
}

#Country accepts to join - Event for BUL
country_event = {
	id = bftb_bulgaria_fate_of_the_balkans.2
	title = bftb_bulgaria_fate_of_the_balkans.2.t
	desc = bftb_bulgaria_fate_of_the_balkans.2.desc
	picture = GFX_report_event_bul_boris_military

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_fate_of_the_balkans.2.a

		add_to_faction = FROM
		FROM = { BUL_remove_balkan_opinion_modifiers = yes }
	}
}

#Country refuses invitation - Event for BUL
country_event = {
	id = bftb_bulgaria_fate_of_the_balkans.3
	title = bftb_bulgaria_fate_of_the_balkans.3.t
	desc = bftb_bulgaria_fate_of_the_balkans.3.desc
	picture = GFX_report_event_finnish_letter

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_fate_of_the_balkans.3.a

		create_wargoal = {
			type = puppet_wargoal_focus
			target = FROM
		}
	}
}

#Bulgaria demands territory - Event for Bulgarian puppets
country_event = {
	id = bftb_bulgaria_fate_of_the_balkans.4
	title = bftb_bulgaria_fate_of_the_balkans.4.t
	desc = bftb_bulgaria_fate_of_the_balkans.4.desc
	picture = GFX_report_event_finnish_letter

	is_triggered_only = yes

	option = { #Accept
		name = bftb_bulgaria_fate_of_the_balkans.4.a

		add_political_power = 50
		effect_tooltip = {
			FROM = {
				transfer_state = FROM.FROM
				hidden_effect = {
					set_state_controller = FROM.FROM
				}
			}
		}
		hidden_effect = {
			FROM = { country_event = bftb_bulgaria_fate_of_the_balkans.5 }
		}
	}

	option = { #Refuse
		name = bftb_bulgaria_fate_of_the_balkans.4.b

		ai_chance = {
			factor = 0
		}

		add_stability = -0.1
		add_war_support = -0.05
		add_political_power = -100
		effect_tooltip = {
			FROM.FROM = {
				add_claim_by = FROM
			}
		}
		hidden_effect = {
			FROM = { country_event = bftb_bulgaria_fate_of_the_balkans.6 }
		}
	}
}

#Puppet transfers territory - Event for BUL
country_event = {
	id = bftb_bulgaria_fate_of_the_balkans.5
	title = bftb_bulgaria_fate_of_the_balkans.5.t
	desc = bftb_bulgaria_fate_of_the_balkans.5.desc
	picture = GFX_report_event_finnish_letter

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_fate_of_the_balkans.5.a

		transfer_state = FROM.FROM.FROM
		hidden_effect = {
			set_state_controller = FROM.FROM.FROM
		}
	}
}

#Puppet refuses to transfer territory - Event for BUL
country_event = {
	id = bftb_bulgaria_fate_of_the_balkans.6
	title = bftb_bulgaria_fate_of_the_balkans.6.t
	desc = bftb_bulgaria_fate_of_the_balkans.6.desc
	picture = GFX_report_event_finnish_letter

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_fate_of_the_balkans.6.a

		FROM.FROM.FROM = {
			add_claim_by = ROOT
		}
	}
}

#Bulgaria demands submission of an ally - Event for Bulgarian allies
country_event = {
	id = bftb_bulgaria_fate_of_the_balkans.7
	title = bftb_bulgaria_fate_of_the_balkans.7.t
	desc = bftb_bulgaria_fate_of_the_balkans.7.desc
	picture = GFX_report_event_finnish_letter

	is_triggered_only = yes

	option = { #Accept
		name = bftb_bulgaria_fate_of_the_balkans.7.a

		ai_chance = {
			base = 15
		}

		add_political_power = 150
		add_stability = 0.1
		effect_tooltip = {
			FROM = {
				puppet = ROOT
				remove_wargoal = {
					target = ROOT
					type = all
				}
			}
		}
		hidden_effect = {
			FROM = { country_event = bftb_bulgaria_fate_of_the_balkans.8 }
		}
	}

	option = { #Refuse
		name = bftb_bulgaria_fate_of_the_balkans.7.b

		ai_chance = {
			base = 10
			modifier = {
				factor = 0.5
				strength_ratio = {
					tag = FROM
					ratio < 1
				}
			}
			modifier = {
				factor = 0
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
			}
		}

		add_stability = -0.1
		add_political_power = -150
		hidden_effect = {
			FROM = { country_event = bftb_bulgaria_fate_of_the_balkans.9 }
		}
	}
}

#Ally submits to BUL - Event for BUL
country_event = {
	id = bftb_bulgaria_fate_of_the_balkans.8
	title = bftb_bulgaria_fate_of_the_balkans.8.t
	desc = bftb_bulgaria_fate_of_the_balkans.8.desc
	picture = GFX_report_event_finnish_letter

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_fate_of_the_balkans.8.a

		BUL_join_wars_of_from = yes

		puppet = FROM
		remove_wargoal = {
			target = FROM
			type = all
		}

		FROM = { BUL_remove_balkan_opinion_modifiers = yes }

		custom_effect_tooltip = germany.126.warning
	}
}

#Ally refuses to become a Bulgarian puppet - Event for BUL
country_event = {
	id = bftb_bulgaria_fate_of_the_balkans.9
	title = bftb_bulgaria_fate_of_the_balkans.9.t
	desc = bftb_bulgaria_fate_of_the_balkans.9.desc
	picture = GFX_report_event_finnish_letter

	is_triggered_only = yes

	option = {
		name = bftb_bulgaria_fate_of_the_balkans.9.a

		ai_chance = {
			base = 10
		}

		custom_effect_tooltip = bftb_bulgaria_fate_of_the_balkans.9.a_cooldown_tt
	}

	option = {
		name = bftb_bulgaria_fate_of_the_balkans.9.b

		ai_chance = {
			base = 0
		}

		remove_from_faction = FROM
	}
}

#Bulgaria has pressured an ally to join their faction - Event for faction leader whose ally has join BUL's faction
country_event = {
	id = bftb_bulgaria_fate_of_the_balkans.10
	title = bftb_bulgaria_fate_of_the_balkans.10.t
	desc = bftb_bulgaria_fate_of_the_balkans.10.desc
	picture = GFX_report_event_finnish_letter

	is_triggered_only = yes

	#immediate = {
	#	hidden_effect = { log = "FROM.FROM is [FROM.FROM.GetName]"}
	#}

	option = {#Wargoal
		name = bftb_bulgaria_fate_of_the_balkans.10.a

		ai_chance = {
			base = 1
			modifier = {
				factor = 20
				strength_ratio = {
					tag = BUL
					ratio > 2
				}
			}
			modifier = {
				factor = 5
				has_opinion = {
					target = FROM
					value < 50
				}
			}
			modifier = { #Support IMRO is not cool bro
				factor = 2
				BUL = { has_completed_focus = BUL_support_macedonian_organizations }
			}
			modifier = { #Your coop with IMRO is just too much
				factor = 2
				BUL = { has_idea = BUL_imro_05 }
			}
			modifier = {
				factor = 5
				AND = {
					tag = ENG
					BUL_has_some_sort_of_bogdan_filov = yes
				}
			}
		}

		create_wargoal = {
			type = puppet_wargoal_focus
			target = BUL
		}
	}

	option = {#Nothing
		name = bftb_bulgaria_fate_of_the_balkans.10.b

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio < 1
				}
			}
			modifier = { #We like that you condemn IMRO
				factor = 2
				BUL = { has_completed_focus = BUL_condemn_macedonian_organizations }
			}
			modifier = { #You have tried
				factor = 5
				BUL = { 
					NOT = {
						has_idea = BUL_imro_01
						has_idea = BUL_imro_04
						has_idea = BUL_imro_05
					}
				}
			}
		}
	}
}


########   #######  ##       #### ######## ####  ######     ###    ##          ##       ########    ###    ########  ######## ########   ######  
##     ## ##     ## ##        ##     ##     ##  ##    ##   ## ##   ##          ##       ##         ## ##   ##     ## ##       ##     ## ##    ## 
##     ## ##     ## ##        ##     ##     ##  ##        ##   ##  ##          ##       ##        ##   ##  ##     ## ##       ##     ## ##       
########  ##     ## ##        ##     ##     ##  ##       ##     ## ##          ##       ######   ##     ## ##     ## ######   ########   ######  
##        ##     ## ##        ##     ##     ##  ##       ######### ##          ##       ##       ######### ##     ## ##       ##   ##         ## 
##        ##     ## ##        ##     ##     ##  ##    ## ##     ## ##          ##       ##       ##     ## ##     ## ##       ##    ##  ##    ## 
##         #######  ######## ####    ##    ####  ######  ##     ## ########    ######## ######## ##     ## ########  ######## ##     ##  ######  


#The murder of Hristo Lukov
country_event = {
	id = bftb_bulgaria_political_leaders.1
	title = bftb_bulgaria_political_leaders.1.t
	desc = bftb_bulgaria_political_leaders.1.desc
	picture = GFX_report_event_generic_funeral

	trigger = {
		has_dlc = "Battle for the Bosporus"
		original_tag = BUL
		has_country_leader = { character = BUL_hristo_lukov ruling_only = no }
		date > 1943.02.10
	}

	fire_only_once = yes

	option = {#Get a new UBNL leader
		name = bftb_bulgaria_political_leaders.1.a

		trigger = {
			has_government = fascism
		}

		kill_ideology_leader = fascism
	}

	option = {#Get Aleksandar Tsankov as leader
		name = bftb_bulgaria_political_leaders.1.b

		trigger = {
			has_country_flag = BUL_nsm_integrated_flag
			has_government = fascism
		}

		kill_ideology_leader = fascism
		set_party_name = {
			ideology = fascism
			long_name = BUL_national_social_movement_party_long
			name = BUL_national_social_movement_party
		}
		add_country_leader_role = {
			character = BUL_aleksandar_tsankov
			country_leader = {
				expire = "1965.1.1"
				ideology = nazism
				traits = {
					the_bloody_professor
				}
			}
			promote_leader = yes
		}
	}

	option = {#Commie
		name = bftb_bulgaria_political_leaders.1.c

		trigger = {
			has_government = communism
		}

		kill_ideology_leader = fascism
	}

	option = {#Other ideologies
		name = bftb_bulgaria_political_leaders.1.d

		trigger = {
			OR = {
				has_government = democratic
				has_government = neutrality
			}
		}

		kill_ideology_leader = fascism
	}
}


 ######   ########  ######## ######## ##    ##    #### ##    ## ######## ##       ##     ## ######## ##    ##  ######  ######## 
##    ##  ##     ## ##       ##       ##   ##      ##  ###   ## ##       ##       ##     ## ##       ###   ## ##    ## ##       
##        ##     ## ##       ##       ##  ##       ##  ####  ## ##       ##       ##     ## ##       ####  ## ##       ##       
##   #### ########  ######   ######   #####        ##  ## ## ## ######   ##       ##     ## ######   ## ## ## ##       ######   
##    ##  ##   ##   ##       ##       ##  ##       ##  ##  #### ##       ##       ##     ## ##       ##  #### ##       ##       
##    ##  ##    ##  ##       ##       ##   ##      ##  ##   ### ##       ##       ##     ## ##       ##   ### ##    ## ##       
 ######   ##     ## ######## ######## ##    ##    #### ##    ## ##       ########  #######  ######## ##    ##  ######  ######## 


#Bulgaria asks GRE for a NA pact - Event for GRE
country_event = {
	id = bftb_bulgaria_greek_influence.1
	title = bftb_bulgaria_greek_influence.1.t
	desc = bftb_bulgaria_greek_influence.1.desc
	picture = GFX_report_event_bul_boris_with_muraviev

	is_triggered_only = yes

	option = { #Accept
		name = bftb_bulgaria_greek_influence.1.a

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				has_opinion = {
					target = BUL
					value > 50
				}
			}
			modifier = {
				factor = 2
				BUL = { has_completed_focus = BUL_condemn_macedonian_organizations }
			}
			modifier = { #You have tried
				factor = 5
				BUL = { 
					NOT = {
						has_idea = BUL_imro_01
						has_idea = BUL_imro_04
						has_idea = BUL_imro_05
					}
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = BUL
					ratio < 1
				}
			}
			modifier = {
				factor = 5
				strength_ratio = {
					tag = BUL
					ratio < 0.5
				}
			}
			modifier = {
				factor = 0
				has_opinion = {
					target = BUL
					value < -50
				}
			}
		}

		add_political_power = 75

		diplomatic_relation = {
			country = FROM
			relation = non_aggression_pact
			active = yes
		}
		add_opinion_modifier = { 
			target = FROM
			modifier = BUL_strengthened_relations_with_us
		}
		FROM = {
			add_opinion_modifier = { 
				target = ROOT
				modifier = BUL_strengthened_relations_with_us
			}
		}
		BUL_remove_balkan_opinion_modifiers = yes

		every_country = {
			limit = {
				BUL_country_can_influence_bulgaria = yes
				NOT = { is_in_faction_with = ROOT }
				NOT = { is_in_faction_with = FROM }
			}
			add_opinion_modifier = { 
				target = FROM
				modifier = BUL_approached_greece
			}
		}
		hidden_effect = {
			FROM = { country_event = bftb_bulgaria_greek_influence.2 }
			news_event = { id = bftb_news.15 hours = 8 random_hours = 4 }
		}
	}

	option = { #Refuse
		name = bftb_bulgaria_greek_influence.1.b

		ai_chance = {
			base = 5
			modifier = {
				factor = 2
				has_opinion = {
					target = BUL
					value < 0
				}
			}
			modifier = {
				factor = 5
				BUL = { has_completed_focus = BUL_support_macedonian_organizations }
			}
			modifier = { #Your coop with IMRO is just too much
				factor = 10
				BUL = { has_idea = BUL_imro_05 }
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = BUL
					ratio > 2
				}
			}
		}

		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = BUL_rejected_our_proposal
			}
		}
		hidden_effect = {
			FROM = { country_event = bftb_bulgaria_greek_influence.3 }
		}
	}
}

#GRE accepts NA with BUL - Event for BUL
country_event = {
	id = bftb_bulgaria_greek_influence.2
	title = bftb_bulgaria_greek_influence.2.t
	desc = bftb_bulgaria_greek_influence.2.desc
	picture = GFX_report_event_gre_cabinet_meeting

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgaria_greek_influence.2.a

		effect_tooltip = {
			diplomatic_relation = {
				country = FROM
				relation = non_aggression_pact
				active = yes
			}
			add_opinion_modifier = { 
				target = FROM
				modifier = BUL_strengthened_relations_with_us
			}
			FROM = {
				add_opinion_modifier = { 
					target = ROOT
					modifier = BUL_strengthened_relations_with_us
				}
			}
			every_country = {
				limit = {
					BUL_country_can_influence_bulgaria = yes
					NOT = { is_in_faction_with = ROOT }
					NOT = { is_in_faction_with = FROM }
				}
				add_opinion_modifier = { 
					target = ROOT
					modifier = BUL_approached_greece
				}
			}
		}
	}
}

#GRE declines NA with BUL - Event for BUL
country_event = {
	id = bftb_bulgaria_greek_influence.3
	title = bftb_bulgaria_greek_influence.3.t
	desc = bftb_bulgaria_greek_influence.3.desc
	picture = GFX_report_event_gre_balkan_pact

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgaria_greek_influence.3.a

		effect_tooltip = {
			add_opinion_modifier = {
				target = FROM
				modifier = BUL_rejected_our_proposal
			}
		}
	}
}


########  ########  #### ######## ####  ######  ##     ##    #### ##    ## ######## ##       ##     ## ######## ##    ##  ######  ######## 
##     ## ##     ##  ##     ##     ##  ##    ## ##     ##     ##  ###   ## ##       ##       ##     ## ##       ###   ## ##    ## ##       
##     ## ##     ##  ##     ##     ##  ##       ##     ##     ##  ####  ## ##       ##       ##     ## ##       ####  ## ##       ##       
########  ########   ##     ##     ##   ######  #########     ##  ## ## ## ######   ##       ##     ## ######   ## ## ## ##       ######   
##     ## ##   ##    ##     ##     ##        ## ##     ##     ##  ##  #### ##       ##       ##     ## ##       ##  #### ##       ##       
##     ## ##    ##   ##     ##     ##  ##    ## ##     ##     ##  ##   ### ##       ##       ##     ## ##       ##   ### ##    ## ##       
########  ##     ## ####    ##    ####  ######  ##     ##    #### ##    ## ##       ########  #######  ######## ##    ##  ######  ######## 


#Bulgaria asks ENG for a NA pact - Event for ENG
country_event = {
	id = bftb_bulgaria_british_influence.1
	title = bftb_bulgaria_british_influence.1.t
	desc = bftb_bulgaria_british_influence.1.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	option = { #Accept
		name = bftb_bulgaria_british_influence.1.a

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				has_opinion = {
					target = BUL
					value > 0
				}
			}
			modifier = {
				factor = 5
				has_opinion = {
					target = BUL
					value > 50
				}
			}
			modifier = {
				factor = 2
				BUL = { has_completed_focus = BUL_condemn_macedonian_organizations }
			}
			modifier = { #You have tried
				factor = 2
				BUL = { 
					NOT = {
						has_idea = BUL_imro_01
						has_idea = BUL_imro_04
						has_idea = BUL_imro_05
					}
				}
			}
			modifier = {
				factor = 0
				has_opinion = {
					target = BUL
					value < -50
				}
			}
		}

		add_political_power = 75
		diplomatic_relation = {
			country = FROM
			relation = non_aggression_pact
			active = yes
		}
		give_guarantee = FROM
		add_opinion_modifier = { 
			target = FROM
			modifier = BUL_strengthened_relations_with_us
		}
		FROM = {
			add_opinion_modifier = { 
				target = ROOT
				modifier = BUL_strengthened_relations_with_us
			}
		}
		every_country = {
			limit = {
				BUL_country_can_influence_bulgaria = yes
				NOT = { is_in_faction_with = ROOT }
				NOT = { is_in_faction_with = FROM }
			}
			add_opinion_modifier = { 
				target = FROM
				modifier = BUL_approached_the_uk
			}
		}
		hidden_effect = {
			FROM = { country_event = bftb_bulgaria_british_influence.2 }
			news_event = { id = bftb_news.16 hours = 8 random_hours = 4 }
		}
	}

	option = { #Only NA
		name = bftb_bulgaria_british_influence.1.b

		ai_chance = {
			base = 10
			modifier = {
				factor = 5
				has_opinion = {
					target = BUL
					value < 15
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = BUL
					value > 50
				}
			}
			modifier = {
				factor = 0
				has_opinion = {
					target = BUL
					value < -50
				}
			}
			modifier = {
				factor = 10
				BUL_has_some_sort_of_bogdan_filov = yes
			}
		}

		add_political_power = 25
		diplomatic_relation = {
			country = FROM
			relation = non_aggression_pact
			active = yes
		}
		add_opinion_modifier = { 
			target = FROM
			modifier = BUL_strengthened_relations_with_us
		}
		FROM = {
			add_opinion_modifier = { 
				target = ROOT
				modifier = BUL_strengthened_relations_with_us
			}
		}
		every_country = {
			limit = {
				BUL_country_can_influence_bulgaria = yes
				NOT = { is_in_faction_with = ROOT }
				NOT = { is_in_faction_with = FROM }
			}
			add_opinion_modifier = { 
				target = FROM
				modifier = BUL_approached_the_uk
			}
		}
		hidden_effect = {
			FROM = { country_event = bftb_bulgaria_british_influence.3 }
			news_event = { id = bftb_news.16 hours = 8 random_hours = 4 }
		}
	}

	option = { #Refuse
		name = bftb_bulgaria_british_influence.1.c

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				has_opinion = {
					target = BUL
					value < 0
				}
			}
			modifier = {
				factor = 2
				BUL = { has_completed_focus = BUL_support_macedonian_organizations }
			}
			modifier = { #Your coop with IMRO is just too much
				factor = 5
				BUL = { has_idea = BUL_imro_05 }
			}
			modifier = {
				factor = 5
				BUL_has_some_sort_of_bogdan_filov = yes
			}
		}

		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = BUL_rejected_our_proposal
			}
		}
		hidden_effect = {
			FROM = { country_event = bftb_bulgaria_british_influence.4 }
		}
	}
}

#ENG accepts Guaranteeing BUL (and NA) - Event for BUL
country_event = {
	id = bftb_bulgaria_british_influence.2
	title = bftb_bulgaria_british_influence.2.t
	desc = bftb_bulgaria_british_influence.2.desc
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgaria_british_influence.2.a

		effect_tooltip = {
			diplomatic_relation = {
				country = FROM
				relation = non_aggression_pact
				active = yes
			}
			FROM = { give_guarantee = ROOT }
			add_opinion_modifier = { 
				target = FROM
				modifier = BUL_strengthened_relations_with_us
			}
			FROM = {
				add_opinion_modifier = { 
					target = ROOT
					modifier = BUL_strengthened_relations_with_us
				}
			}
			every_country = {
				limit = {
					BUL_country_can_influence_bulgaria = yes
					NOT = { is_in_faction_with = ROOT }
					NOT = { is_in_faction_with = FROM }
				}
				add_opinion_modifier = { 
					target = ROOT
					modifier = BUL_approached_greece
				}
			}
		}
	}
}

#ENG accepts NA with BUL - Event for BUL
country_event = {
	id = bftb_bulgaria_british_influence.3
	title = bftb_bulgaria_british_influence.3.t
	desc = bftb_bulgaria_british_influence.3.desc
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgaria_british_influence.3.a

		effect_tooltip = {
			diplomatic_relation = {
				country = FROM
				relation = non_aggression_pact
				active = yes
			}
			add_opinion_modifier = { 
				target = FROM
				modifier = BUL_strengthened_relations_with_us
			}
			FROM = {
				add_opinion_modifier = { 
					target = ROOT
					modifier = BUL_strengthened_relations_with_us
				}
			}
			every_country = {
				limit = {
					BUL_country_can_influence_bulgaria = yes
					NOT = { is_in_faction_with = ROOT }
					NOT = { is_in_faction_with = FROM }
				}
				add_opinion_modifier = { 
					target = ROOT
					modifier = BUL_approached_greece
				}
			}
		}
	}
}

#ENG declines NA with BUL - Event for BUL
country_event = {
	id = bftb_bulgaria_british_influence.4
	title = bftb_bulgaria_british_influence.4.t
	desc = bftb_bulgaria_british_influence.4.desc
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgaria_british_influence.4.a

		effect_tooltip = {
			add_opinion_modifier = {
				target = FROM
				modifier = BUL_rejected_our_proposal
			}
		}
	}
}


########  ######## ##     ##  #######   ######  ########     ###    ######## ####  ######     ######## ##     ## ######## ##    ## ########  ######  
##     ## ##       ###   ### ##     ## ##    ## ##     ##   ## ##      ##     ##  ##    ##    ##       ##     ## ##       ###   ##    ##    ##    ## 
##     ## ##       #### #### ##     ## ##       ##     ##  ##   ##     ##     ##  ##          ##       ##     ## ##       ####  ##    ##    ##       
##     ## ######   ## ### ## ##     ## ##       ########  ##     ##    ##     ##  ##          ######   ##     ## ######   ## ## ##    ##     ######  
##     ## ##       ##     ## ##     ## ##       ##   ##   #########    ##     ##  ##          ##        ##   ##  ##       ##  ####    ##          ## 
##     ## ##       ##     ## ##     ## ##    ## ##    ##  ##     ##    ##     ##  ##    ##    ##         ## ##   ##       ##   ###    ##    ##    ## 
########  ######## ##     ##  #######   ######  ##     ## ##     ##    ##    ####  ######     ########    ###    ######## ##    ##    ##     ######  



#BUL Guarantees Country - Event for Balkan Nations
country_event = {
	id = bftb_bulgaria_democratic_international_policies.1
	title = bftb_bulgaria_democratic_international_policies.1.t
	desc = bftb_bulgaria_democratic_international_policies.1.desc
	picture = GFX_report_event_bul_military_parade_vidin

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgaria_democratic_international_policies.1.a

		FROM = { give_guarantee = ROOT }
	}
}

#Balkan Confederation - BUL has made an industrial investement in the country - Event for Balkan Nations
country_event = {
	id = bftb_bulgaria_democratic_international_policies.2
	title = bftb_bulgaria_democratic_international_policies.2.t
	desc = bftb_bulgaria_democratic_international_policies.2.desc
	picture = GFX_report_event_bul_officers_burgas

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgaria_democratic_international_policies.2.a

		add_popularity = {
			ideology = democratic
			popularity = 0.1
		}
		random_owned_controlled_state = {
			limit = {
				has_state_flag = BUL_industrial_investement_target
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
}

#Balkan Confederation - Bulgarian capitalists are lobbying the government - Event for Balkan Nations
country_event = {
	id = bftb_bulgaria_democratic_international_policies.3
	title = bftb_bulgaria_democratic_international_policies.3.t
	desc = bftb_bulgaria_democratic_international_policies.3.desc
	picture = GFX_report_event_bul_boris_with_muraviev

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgaria_democratic_international_policies.3.a

		add_popularity = {
			ideology = democratic
			popularity = 0.05
		}
		add_timed_idea = {
			idea = BUL_bulgarian_capital_injection
			days = 120
		}
	}
}

#Assert our Claims - Bulgaria asks to core controlled historical claims and bring back any Bulgarian initial state controlled by an ally - Event for ENG
country_event = {
	id = bftb_bulgaria_democratic_international_policies.4
	title = bftb_bulgaria_democratic_international_policies.4.t
	desc = bftb_bulgaria_democratic_international_policies.4.desc
	picture = GFX_report_event_bul_boris_with_muraviev

	is_triggered_only = yes

	option = { #Accept
		name = bftb_bulgaria_democratic_international_policies.4.a

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				BUL = { 
					any_war_score > 5
				}
			}
			modifier = {
				factor = 2
				BUL = { 
					any_war_score > 10
				}
			}
			modifier = {
				factor = 2
				BUL = { 
					any_war_score > 15
				}
			}
			modifier = {
				factor = 5
				BUL = { 
					any_war_score > 20
				}
			}
			modifier = {
				factor = 10
				BUL = { 
					any_war_score > 30
				}
			}
			modifier = {
				factor = 10
				BUL = { 
					any_war_score > 50
				}
			}
			modifier = {
				factor = 5
				BUL = { 
					casualties > 10000
				}
			}
			modifier = {
				factor = 10
				BUL = { 
					casualties > 100000
				}
			}
			modifier = { #We like that you condemn IMRO
				factor = 2
				BUL = { has_completed_focus = BUL_condemn_macedonian_organizations }
			}
			modifier = { #You have tried
				factor = 5
				BUL = { 
					NOT = {
						has_idea = BUL_imro_01
						has_idea = BUL_imro_04
						has_idea = BUL_imro_05
					}
				}
			}
		}

		effect_tooltip = {
			custom_effect_tooltip = bftb_bulgaria_democratic_international_policies.4_tt
			every_state = {
				limit = {
					has_state_flag = BUL_initial_bulgarian_state_flag
					NOT = { is_controlled_by = BUL }
					controller = {
						is_in_faction_with = BUL
						has_full_control_of_state = PREV
					}
				}
				controller = {
					add_opinion_modifier = {
						target = ENG
						modifier = BUL_territorial_arbitration_negative
					}
				}
			}
			BUL = {
				add_opinion_modifier = {
					target = ENG
					modifier = BUL_territorial_arbitration
				}
			}
		}
	}

	option = { #Refuse
		name = bftb_bulgaria_democratic_international_policies.4.b

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				BUL = { 
					any_war_score < 5
				}
			}
			modifier = {
				factor = 300
				BUL = { 
					any_war_score < 1
				}
			}
			modifier = {
				factor = 100
				BUL = { 
					casualties < 1000
				}
			}
			modifier = { #Support IMRO is not cool bro
				factor = 10
				BUL = { has_completed_focus = BUL_support_macedonian_organizations }
			}
			modifier = { #Your coop with IMRO is just too much
				factor = 10
				BUL = { has_idea = BUL_imro_05 }
			}
			modifier = {
				factor = 10
				BUL_has_some_sort_of_bogdan_filov = yes
			}
		}

		BUL = {
			add_opinion_modifier = {
				target = ROOT
				modifier = BUL_bulgarian_claims_not_recognized
			}
		}
	}
}

#Assert our Claims - ENG Accepts - Event for BUL
country_event = {
	id = bftb_bulgaria_democratic_international_policies.5
	title = bftb_bulgaria_democratic_international_policies.5.t
	desc = bftb_bulgaria_democratic_international_policies.5.desc
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgaria_democratic_international_policies.5.a

		custom_effect_tooltip = bftb_bulgaria_democratic_international_policies.4_tt
		every_state = {
			limit = {
				has_state_flag = BUL_initial_bulgarian_state_flag
				NOT = { is_controlled_by = BUL }
				controller = {
					is_in_faction_with = BUL
					has_full_control_of_state = PREV
				}
			}
			hidden_effect = {
				BUL = {
					transfer_state = PREV
					set_state_controller = PREV
				}
			}
		}
	}
}

#Assert our Claims - ENG Refuses - Event for BUL
country_event = {
	id = bftb_bulgaria_democratic_international_policies.6
	title = bftb_bulgaria_democratic_international_policies.6.t
	desc = bftb_bulgaria_democratic_international_policies.6.desc
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgaria_democratic_international_policies.6.a

		add_opinion_modifier = {
			target = ENG
			modifier = BUL_bulgarian_claims_not_recognized
		}
	}
}

#Assert our Claims - Transferred formerly Bulgarian states to BUL - Event for allies controlling any Bulgarian initial state
country_event = {
	id = bftb_bulgaria_democratic_international_policies.7
	title = bftb_bulgaria_democratic_international_policies.7.t
	desc = bftb_bulgaria_democratic_international_policies.7.desc
	picture = GFX_report_event_bul_troops_dobrudja

	is_triggered_only = yes

	option = { #Ok
		name = bftb_bulgaria_democratic_international_policies.7.a

		add_opinion_modifier = {
			target = ENG
			modifier = BUL_territorial_arbitration_negative
		}
	}
}

#fuck greece

add_namespace = bftb_news

#Bulgaria condemns the IMRO
news_event = {
	id = bftb_news.1
	title = bftb_news.1.t
	desc = bftb_news.1.desc
	picture = GFX_news_event_imro
	
	major = yes
	
	is_triggered_only = yes
	
	option = { #Nations that seek Balkan stability
		name = bftb_news.1.a
		trigger = {
			BUL_country_seeks_macedonian_stability = yes
			NOT = { tag = BUL }
		}
	}

	option = { #Bulgaria
		name = bftb_news.1.b
		trigger = {
			tag = BUL
		}
	}

	option = { #Fallback - Others
		name = bftb_news.1.c
		trigger = {
			NOT = {
				tag = BUL
			}
			BUL_country_seeks_macedonian_stability = no
		}
	}
}

#Bulgaria supports the IMRO
news_event = {
	id = bftb_news.2
	title = bftb_news.2.t
	desc = bftb_news.2.desc
	picture = GFX_news_event_imro
	
	major = yes
	
	is_triggered_only = yes
	
	option = { #Nations that seek Balkan stability
		name = bftb_news.2.a
		trigger = {
			BUL_country_seeks_macedonian_stability = yes
			NOT = { tag = BUL }
		}
	}

	option = { #Bulgaria
		name = bftb_news.2.b
		trigger = {
			tag = BUL
		}
	}

	option = { #Fallback - Others
		name = bftb_news.2.c
		trigger = {
			NOT = {
				tag = BUL
			}
			BUL_country_seeks_macedonian_stability = no
		}
	}
}

#The death of Tsar Boris
news_event = {
	id = bftb_news.3
	title = bftb_news.3.t
	desc = bftb_news.3.desc
	picture = GFX_news_event_tsar_boris
		
	is_triggered_only = yes
	
	option = {
		name = bftb_news.3.a 

	}
}

#The return of Ferdinand I
news_event = {
	id = bftb_news.4
	title = bftb_news.4.t
	desc = bftb_news.4.desc
	picture = GFX_news_event_tsar_ferdinand_of_bulgaria
	
	major = yes
	
	is_triggered_only = yes
	
	option = { #Bulgaria
		name = bftb_news.4.a
		trigger = {
			tag = BUL
		}
	}

	option = { #Nations that seek Balkan stability
		name = bftb_news.4.b
		trigger = {
			BUL_country_seeks_macedonian_stability = yes
			NOT = { tag = BUL }
		}
	}

	option = { #Fallback - Others
		name = bftb_news.4.c
		trigger = {
			NOT = {
				tag = BUL
			}
			BUL_country_seeks_macedonian_stability = no
		}
	}
}

#Bulgarian administration of the Balkans
news_event = {
	id = bftb_news.5
	title = bftb_news.5.t
	desc = bftb_news.5.desc
	picture = GFX_news_event_macedonia_bulgaria_united
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = bftb_news.5.a 
		trigger = {
			tag = BUL
		}
	}

	option = {
		name = bftb_news.5.b
		trigger = {
			NOT = { tag = BUL }
			OR = {
				any_state = {
					has_state_flag = BUL_bulgarian_reintegration_campaign_flag
					is_core_of = PREV
				}
				AND = {
					tag = YUG
					OR = {
						106 = { has_state_flag = BUL_bulgarian_reintegration_campaign_flag }
						323 = { has_state_flag = BUL_bulgarian_reintegration_campaign_flag }
					}
				}
				AND = {
					tag = ROM
					77 = { has_state_flag = BUL_bulgarian_reintegration_campaign_flag }
				}
				AND = {
					tag = GRE
					OR = {
						731 = { has_state_flag = BUL_bulgarian_reintegration_campaign_flag }
						184 = { has_state_flag = BUL_bulgarian_reintegration_campaign_flag }
					}
				}
			}
		}
	}

	option = {
		name = bftb_news.5.c
		trigger = {
			NOT = { tag = BUL }
			NOT = {
				any_state = {
					has_state_flag = BUL_bulgarian_reintegration_campaign_flag
					is_core_of = PREV
				}
			}
			NOT = {
				OR = {
					AND = {
						tag = YUG
						OR = {
							106 = { has_state_flag = BUL_bulgarian_reintegration_campaign_flag }
							323 = { has_state_flag = BUL_bulgarian_reintegration_campaign_flag }
						}
					}
					AND = {
						tag = ROM
						77 = { has_state_flag = BUL_bulgarian_reintegration_campaign_flag }
					}
					AND = {
						tag = GRE
						OR = {
							731 = { has_state_flag = BUL_bulgarian_reintegration_campaign_flag }
							184 = { has_state_flag = BUL_bulgarian_reintegration_campaign_flag }
						}
					}
				}	
			}
		}
	}
}

#Bulgarian Patriarchate Restored
news_event = {
	id = bftb_news.6
	title = bftb_news.6.t
	desc = bftb_news.6.desc
	picture = GFX_news_event_bul_orthodox_priests
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = bftb_news.6.a 
		trigger = {
			tag = BUL
		}
	}

	option = {
		name = bftb_news.6.b
		trigger = {
			NOT = { tag = BUL }
		}
	}
}

#Third Bulgarian Empire
news_event = {
	id = bftb_news.7
	title = bftb_news.7.t
	desc = bftb_news.7.desc
	picture = GFX_news_event_bulgarian_troops
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = bftb_news.7.a 
		trigger = {
			tag = BUL
		}
	}

	option = {
		name = bftb_news.7.b
		trigger = {
			NOT = { tag = BUL }
			OR = {
				has_war_with = BUL
				has_wargoal_against = BUL
				is_justifying_wargoal_against = BUL
				any_country = {
					is_in_faction_with = ROOT
					has_war_with = BUL
				}
			}
		}
	}

	option = {
		name = bftb_news.7.c
		trigger = {
			NOT = { tag = BUL }
			NOT = {	has_war_with = BUL }
			NOT = { has_wargoal_against = BUL }
			NOT = { is_justifying_wargoal_against = BUL }
			NOT = {
				any_country = {
					is_in_faction_with = ROOT
					has_war_with = BUL
				}
			}
		}
	}
}

#The Fatherland Front Takes Over Bulgaria
news_event = {
	id = bftb_news.8
	title = bftb_news.8.t
	desc = bftb_news.8.desc
	picture = GFX_news_event_bulgarian_partisans
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = bftb_news.8.a
		trigger = {
			has_government = communism
			NOT = { has_war_with = BUL }
		}
	}

	option = {
		name = bftb_news.8.b
		trigger = {
			OR = {
				NOT = { has_government = communism }
				has_war_with = BUL
			}
		}
	}
}

#Balkan Federation of Socialist Republics
news_event = {
	id = bftb_news.9
	title = bftb_news.9.t
	desc = bftb_news.9.desc
	picture = GFX_news_event_dimitrov_in_georgia
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = bftb_news.9.a
		trigger = {
			OR = {
				tag = BUL
				AND = {
					BUL_is_balkan_nation = yes
					has_government = communism
					OR = {
						is_in_faction = no
						is_in_faction_with = BUL
					}
				}
			}
		}
	}

	option = {
		name = bftb_news.9.b
		trigger = {
			NOT = { tag = BUL }
			has_government = communism
			OR = {
				BUL_is_balkan_nation = no
				AND = {
					BUL_is_balkan_nation = yes
					is_in_faction = yes
					NOT = { is_in_faction_with = BUL }
				}
			}
		}
	}

	option = {
		name = bftb_news.9.c
		trigger = {
			NOT = { tag = BUL }
			NOT = { has_government = communism }
		}
	}
}

#The Unification of the Balkans
news_event = {
	id = bftb_news.10
	title = bftb_news.10.t
	desc = bftb_news.10.desc
	picture = GFX_news_event_bulgarian_ff_troops
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = bftb_news.10.a
		trigger = {
			tag = BUL
		}
	}

	option = {
		name = bftb_news.10.b
		trigger = {
			NOT = { tag = BUL }
			is_in_faction_with = BUL
			BUL_is_balkan_nation = yes
		}
	}

	option = {
		name = bftb_news.10.c
		trigger = {
			NOT = { tag = BUL }
			OR = {
				BUL_is_balkan_nation = no
				NOT = { is_in_faction_with = BUL }
			}
			NOT = { has_war_with = BUL }
		}
	}

	option = {
		name = bftb_news.10.d
		trigger = {
			has_war_with = BUL
		}
	}
}

#Approach Germany
news_event = {
	id = bftb_news.11
	title = bftb_news.11.t
	desc = bftb_news.11.desc
	picture = GFX_news_event_tsar_boris_with_hitler
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = bftb_news.11.a
		trigger = {
			tag = BUL
		}
	}

	option = {
		name = bftb_news.11.b
		trigger = {
			tag = GER
		}

		add_political_power = 75
	}

	option = {
		name = bftb_news.11.c
		trigger = {
			is_in_faction_with = GER
			NOT = { tag = BUL }
			NOT = { tag = GER }
		}
	}

	option = {
		name = bftb_news.11.d
		trigger = {
			NOT = { is_in_faction_with = GER }
			NOT = { tag = BUL }
			NOT = { tag = GER }
		}
	}
}

#Approach Italy
news_event = {
	id = bftb_news.12
	title = bftb_news.12.t
	desc = bftb_news.12.desc
	picture = GFX_news_event_filov_with_mussolini
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = bftb_news.12.a
		trigger = {
			tag = BUL
		}

		effect_tooltip = {
			ITA = { add_to_tech_sharing_group = BUL_italian_research }
			BUL = { add_to_tech_sharing_group = BUL_italian_research }
		}
	}

	option = {
		name = bftb_news.12.b
		trigger = {
			tag = ITA
		}
	}

	option = {
		name = bftb_news.12.c
		trigger = {
			NOT = { tag = BUL }
			NOT = { tag = ITA }
			OR = {
				is_in_faction_with = ITA
				AND = {
					ITA = { is_in_faction = no }
					is_in_faction_with = GER
				}
			}
		}
	}

	option = {
		name = bftb_news.12.d
		trigger = {
			NOT = { tag = BUL }
			NOT = { tag = ITA }
			NOT = { is_in_faction_with = ITA }
			NOT = {
				AND = {
					ITA = { is_in_faction = no }
					is_in_faction_with = GER
				}
			}	
		}
	}
}

#Approach USSR
news_event = {
	id = bftb_news.13
	title = bftb_news.13.t
	desc = bftb_news.13.desc
	picture = GFX_news_event_dimitrov_and_stalin
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = bftb_news.13.a
		trigger = {
			tag = BUL
		}
	}

	option = {
		name = bftb_news.13.b
		trigger = {
			tag = SOV
		}
	}

	option = {
		name = bftb_news.13.c
		trigger = {
			is_in_faction_with = SOV
			NOT = { tag = BUL }
			NOT = { tag = SOV }
		}
	}

	option = {
		name = bftb_news.13.d
		trigger = {
			NOT = { is_in_faction_with = SOV }
			NOT = { tag = BUL }
			NOT = { tag = SOV }
		}
	}
}

#Approach Yugoslavia
news_event = {
	id = bftb_news.14
	title = bftb_news.14.t
	desc = bftb_news.14.desc
	picture = GFX_news_event_yugoslav_coup
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = bftb_news.14.a
		trigger = {
			NOT = { has_war_with = BUL }
		}
	}

	option = {
		name = bftb_news.14.b
		trigger = {
			has_war_with = BUL
		}
	}
}

#Approach Greece
news_event = {
	id = bftb_news.15
	title = bftb_news.15.t
	desc = bftb_news.15.desc
	picture = GFX_news_event_the_megali_idea_succeeds
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = bftb_news.14.a
		trigger = {
			NOT = { has_war_with = BUL }
		}
	}

	option = {
		name = bftb_news.14.b
		trigger = {
			has_war_with = BUL
		}
	}
}

#Approach UK
news_event = {
	id = bftb_news.16
	title = bftb_news.16.t
	desc = bftb_news.16.desc
	picture = GFX_news_event_eng_churchill_sign_treaty
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = bftb_news.16.a
		trigger = {
			tag = BUL
		}
	}

	option = {
		name = bftb_news.16.b
		trigger = {
			tag = ENG
		}
	}

	option = {
		name = bftb_news.16.c
		trigger = {
			is_in_faction_with = ENG
			NOT = { tag = BUL }
			NOT = { tag = ENG }
		}
	}

	option = {
		name = bftb_news.16.d
		trigger = {
			NOT = { is_in_faction_with = ENG }
			NOT = { tag = BUL }
			NOT = { tag = ENG }
		}
	}
}

add_namespace = britain 

# Tizard mission event for USA
country_event = {
	id = britain.1
	title = britain.1.t
	desc = britain.1.d
	picture = GFX_report_event_physics_lab_01
	
	is_triggered_only = yes
	
	option = {
		name = britain.1.a	#sounds good
		ai_chance = { factor = 90 }
		add_political_power = -10
		ENG = {
			country_event = { days = 1 id = britain.2 }
			add_opinion_modifier = {
				target = ROOT
				modifier = tizard_relations
			}
		}
		add_tech_bonus = {
			name = tizard_mission_focus
			uses = 1
			bonus = 1.0
			category = light_fighter
		}
		add_tech_bonus = {
			name = tizard_mission_focus
			bonus = 1.0
			uses = 2
			category = radar_tech
		}
	}
	
	option = {
		name = britain.1.b	#no way 
		ai_chance = { factor = 10 }
		#add_opinion_modifier = { target = ENG modifier = tizard_refused }
		ENG = {
			country_event = { days = 1 id = britain.3 }
		}
	}

	option = {
		name = britain.1.c	#tech_sharing
		trigger = { has_dlc = "Together for Victory"}
		ai_chance = { factor = 90 }
		add_political_power = -10
		ENG = {
			country_event = { days = 1 id = britain.21 }
			add_opinion_modifier = {
				target = ROOT
				modifier = tizard_relations
			}
		}
		add_to_tech_sharing_group = tizard_mission
	}
}

# USA helps
country_event = {
	id = britain.2
	title = britain.2.t
	desc = britain.2.d
	picture = GFX_report_event_physics_lab_02

	is_triggered_only = yes
	
	option = {
		name = britain.2.a
		add_tech_bonus = {
			name = tizard_mission_focus
			bonus = 1.0
			category = light_fighter
		}
		add_tech_bonus = {
			name = tizard_mission_focus
			bonus = 1.0
			uses = 2
			category = radar_tech
		}
		USA = {
			add_opinion_modifier = { target = ENG modifier = tizard_relations }
		}
	}
}

# USA says no
country_event = {
	id = britain.3
	title = britain.3.t
	desc = britain.3.d
	picture = GFX_report_event_physics_lab_01

	is_triggered_only = yes
	
	option = {
		name = britain.3.a
		add_opinion_modifier = { target = USA modifier = tizard_refused }
	}
}

# Burma road china
country_event = {
	id = britain.4
	title = britain.4.t
	desc = britain.4.d
	picture = GFX_report_event_burma_road

	is_triggered_only = yes
	
	option = {
		name = britain.4.a
	}
}

# Burma road yunnan
country_event = {
	id = britain.5
	title = britain.4.t
	desc = britain.4.d
	picture = GFX_report_event_burma_road

	is_triggered_only = yes
	
	option = {
		name = britain.4.a
	}
}

#Time for India to be free
country_event = {
	id = britain.6
	title = britain.6.t
	desc = britain.6.d
	picture = GFX_report_event_ghandi_women

	is_triggered_only = yes
	
	option = {
		name = britain.6.a
		end_puppet = RAJ
	}
	option = {
		name = britain.6.b
		RAJ = {
			add_stability = -0.3
			add_war_support = -0.2
		}
	}
}

#End trade with Germany event for SWE/NOR
country_event = {
	id = britain.7
	title = britain.7.t
	desc = britain.7.d
	picture = GFX_report_event_merchant_ship_01

	is_triggered_only = yes

	
	option = {
		name = britain.7.a
		ai_chance = { factor = 60 }
		GER = {
				add_opinion_modifier = { target = ROOT modifier = embargo } 
			}
	}
	option = {
		name = britain.7.b
		ai_chance = { factor = 40 }
		ENG = {
			country_event = britain.8
		}
	}
}

country_event = {
	id = britain.8
	title = britain.8.t
	desc = britain.8.d
	picture = GFX_report_event_merchant_ship_01

	is_triggered_only = yes
	
	option = {
		name = britain.8.a
		ai_chance = { factor = 70 }
		create_wargoal = {
				type = take_state
				target = FROM
				generator = owned_states
			}
		if = {
			limit = {
				USA = {
					NOT = {
						has_opinion_modifier = unprovoked_aggression
					}
				}
			}
			USA = {
				add_opinion_modifier = { target = ROOT modifier = unprovoked_aggression }
			}
		}
	}
	option = {
		name = britain.8.b
		ai_chance = { factor = 30 }
	}
}

# Chamberlain Passes Away
country_event = {
	id = britain.10
	title = britain.10.t
	desc = britain.10.d
	picture = GFX_report_event_chamberlain

	fire_only_once = yes

	trigger = {
		tag = ENG
		has_government = democratic
		date > 1940.9.11
		NOT = { has_country_flag = chamberlain_resigned }
		has_country_leader = {
			name = "Neville Chamberlain"
			ruling_only = yes
		}
	}	

	
	immediate = { set_country_flag = chamberlain_died }

	option = {
		name = britain.10.a
		kill_country_leader = yes
		create_country_leader = {
			name = "Winston Churchill"
			desc = "POLITICS_WINSTON_CHURCHILL_DESC"
			picture = "Portrait_Britain_Winston_Churchill.dds"
			expire = "1965.1.1"
			ideology = conservatism
			traits = {
				british_bulldog
			}
		}
	}
}

# React to British call
country_event = {
	id = britain.12
	title = britain.12.t
	desc = britain.12.d
	picture = GFX_report_event_molotov_ribentrop_handshake

	is_triggered_only = yes
	
	option = {
		name = britain.12.a
		add_war_support = 0.1 #glorious crusade to free Europe from commienazi menace
		ENG = { add_to_faction = ROOT }
		ROOT = {
			add_ai_strategy = {
				type = alliance
				id = "ENG"
				value = 200
			}
		}
	}
	
	option = {
		name = britain.12.b
		ai_chance = { factor = 0 }
	}
}

# France wants to join allies
country_event = {
	id = britain.13
	title = britain.13.t
	desc = britain.13.d
	picture = GFX_report_event_degaulle_churchill

	is_triggered_only = yes
	
	option = {
		name = britain.13.a
		add_to_faction = FROM
		FROM = {
			add_ai_strategy = {
				type = alliance
				id = "ENG"
				value = 200
			}
		}
		FROM = { country_event = { id = france.29} }
		hidden_effect = {
			news_event = { id = news.175 }
		}
	}
	
	option = {
		name = britain.13.b
		ai_chance = { factor = 0 }
		FROM = { 
			add_opinion_modifier = {
				target = ROOT
				modifier = FRA_go_with_britain_reject
			}
			country_event = { id = france.30 }
		}
		hidden_effect = {
			news_event = { id = news.176 }
		}
	}
}

# King dies
country_event = {
	id = britain.16
	title = britain.16.t
	desc = britain.16.d
	picture = GFX_report_event_europe_funeral


	is_triggered_only = yes ### HMM PERFORMANCE
	fire_only_once = yes


	immediate = {
		hidden_effect = {
			set_country_flag = ENG_king_died
			remove_ideas = george_v
			add_ideas = ENG_king_edward
		}		
	}
	
	option = {
		name = britain.16.a
		effect_tooltip = {
			remove_ideas = george_v		
			add_ideas = ENG_king_edward
		}
	}
}

#Britain receives warning of the Indian National Army
country_event = {
	id = britain.19
	title = britain.19.t
	desc = britain.19.d
	picture = GFX_report_event_indian_soldiers

	is_triggered_only = yes

	option = {
		name = britain.19.a
		effect_tooltip = {
			RAJ = {
				add_ideas = RAJ_azad_hind
			}
		}
		custom_effect_tooltip = ENG_RAJ_azad_hind_tooltip 
		hidden_effect = {
			country_event = { id = britain.20 days = 500  random_days = 100 }
		}
	}
}


#Free India Government Leads Revolt
country_event = {
	id = britain.20
	title = britain.20.t
	desc = britain.20.d
	picture = GFX_report_event_indian_soldiers

	is_triggered_only = yes

	trigger = {
		RAJ = {
			is_puppet_of = ENG
			fascism > 0.3
			has_civil_war = no
		}
	}

	option = {
		name = britain.20.a
		hidden_effect = {
			if = {
				limit = {
					RAJ = {
						has_idea = RAJ_azad_hind
					}
				}
				RAJ = {
					remove_ideas = RAJ_azad_hind
				}
			}
		}
		if = {
			limit = {
				NOT = {
					RAJ = {
						has_government = fascism
					}
				}
			}
			RAJ = {
				country_event = { id = britain.23 }
			}
		}
		
		if = {
			limit = {
				RAJ = {
					has_government = fascism
				}
			}
			end_puppet = RAJ
			if = {
				limit = {
					RAJ = {
						is_in_faction_with = ENG
					}
				}
				remove_from_faction = RAJ
			}
			create_wargoal = {
				type = puppet_wargoal_focus
				target = RAJ
			}
		}
	}

}

country_event = {
	id = britain.21
	title = britain.21.t
	desc = britain.21.d
	picture = GFX_report_event_physics_lab_02

	is_triggered_only = yes
	
	option = {
		name = britain.21.a
		add_to_tech_sharing_group = tizard_mission
		USA = {
			add_opinion_modifier = { target = ENG modifier = tizard_relations }
		}
	}
}

# Stanley Baldwin Resigns
country_event = {
    id = britain.22
    title = britain.22.t
    desc = britain.22.d
    picture = GFX_report_event_royal_parade
 
    fire_only_once = yes
    is_triggered_only = yes
 
    #trigger = {
    #    original_tag = ENG
    #    has_government = democratic
    #    has_idea = ENG_george_vi
    #    date > 1937.5.27
    #    has_start_date < 1936.01.02
    #    NOT = { has_country_flag = baldwin_resigned }
    #}

    option = {
        name = britain.22.a
        retire_country_leader = yes
        create_country_leader = {
        	name = "Neville Chamberlain"
        	desc = "POLITICS_NEVILLE_CHAMBERLAIN_DESC"
        	picture = "Portrait_Britain_Neville_Chamberlain.dds"
        	expire = "1965.1.1"
        	ideology = conservatism
        	traits = {
        		chamberlain_appeaser rearmer
        	}
        }
        set_country_flag = baldwin_resigned
      }
}

#RAJ gets to choose sides in Indian civil war
country_event = {
	id = britain.23
	title = britain.23.t
	desc = britain.23.d
	picture = GFX_report_event_indian_soldiers

	is_triggered_only = yes
	
	#side with government
	option = {
		ai_chance = {
			factor = 100
			modifier = {
				has_government = fascism
				factor = 0
			}
		}
		name = britain.23.a
		start_civil_war = {
				ideology = fascism
				size = 0.5
		}
	}
	#side with fascists
	option = {
		name = britain.23.b
		start_civil_war = {
				ruling_party = fascism
				ideology = neutrality
				size = 0.5
		}
		random_other_country = {
			limit = {
				original_tag = RAJ
				has_government = neutrality
				is_puppet_of = ENG
			}
			set_cosmetic_tag = RAJ_UK
		}
	}
}

# Shadow Scheme Factories
country_event = {
    id = britain.24
    title = britain.24.t
    desc = britain.24.d
    picture = GFX_report_event_generic_factory
 
    fire_only_once = yes
 
    trigger = {
        original_tag = ENG
        has_completed_focus = shadow_scheme_focus
        has_war = yes
    }


    option = {
        name = britain.24.a
        random_owned_controlled_state = {
			limit = {
				is_in_home_area = yes
				free_building_slots = {
					building = arms_factory
					size > 1
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
			set_state_flag = shadow_scheme_2AF
		}
		random_owned_controlled_state = {
			limit = {
				is_in_home_area = yes
				free_building_slots = {
					building = arms_factory
					size > 1
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
			set_state_flag = shadow_scheme_2AF
		}
    }
}
###########################
# Bulgarian Events
###########################

add_namespace = bulgaria

# Treaty of Craiova - Romania Accepts
country_event = {
	id = bulgaria.1
	title = bulgaria.1.t
	desc = bulgaria.1.d
	picture = GFX_report_event_hitler_handshake
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.1.a
		BUL = { 
			transfer_state = 77
			add_state_core = 77
		}
		if = {
			limit = {
				77 = { is_core_of = ROM }
			}
			ROM = {
				remove_state_core = 77
			}
		}
		hidden_effect = {
			news_event = { days = 1 id = news.21 }
		}
	}
}

# Treaty of Craiova - Romania Refuses
country_event = {
	id = bulgaria.2
	title = bulgaria.2.t
	desc = bulgaria.2.d
	picture = GFX_report_event_finnish_letter
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.2.a
		create_wargoal = {
			type = take_state_focus
			target = ROM
			generator = { 77 }
		}
		#generate wargoal for romania
	}
}

# Bulgaria (First Ljubljana Award) from german focus
country_event = {
	id = bulgaria.3
	title = bulgaria.3.t
	desc = bulgaria.3.d
	picture = GFX_report_event_vienna_award_negotiations
	
	is_triggered_only = yes
	
	option = {
		name = bulgaria.3.a
		if = {
			limit = {
				OR = {
					106 = { is_owned_by = YUG }
					106 = { is_owned_by = GER }
					323 = { is_owned_by = YUG }
					323 = { is_owned_by = GER }
				}
			}
			transfer_state = 106
			transfer_state = 323
		}
	}
}

###########################
# Capitulation Events
###########################

add_namespace = country_capitulated

# 	# FROM.FROM is winner
news_event = {
	id = country_capitulated.0
	title = country_capitulated.0.t
	#Good news
	desc = {
		text = country_capitulated.0.d_positive_collab_diff_ideology
		trigger = {
			NOT = { tag = ROOT }
			NOT = {
				OR = {
					AND = {
						ROOT = { has_government = fascism }
						FROM.FROM = { has_government = fascism }
					}
					AND = {
						ROOT = { has_government = democratic }
						FROM.FROM = { has_government = democratic }
					}
					AND = {
						ROOT = { has_government = communism }
						FROM.FROM = { has_government = communism }
					}
					AND = {
						ROOT = { has_government = neutrality }
						FROM.FROM = { has_government = neutrality }
					}
				}
			}
			FROM.FROM = {
				has_collaboration = {
					target = ROOT
					value > 0.6
				}
			}
		}
	}
	desc = {
		text = country_capitulated.0.d_positive_collab_invaded_same_ideology
		trigger = {
			OR = {
				AND = {
					ROOT = { has_government = fascism }
					FROM.FROM = { has_government = fascism }
				}
				AND = {
					ROOT = { has_government = communism }
					FROM.FROM = { has_government = communism }
				}
			}
			FROM.FROM = {
				has_collaboration = {
					target = ROOT
					value > 0.6
				}
			}
		}
	}
	desc = {
		text = country_capitulated.0.d_positive_both_no_faction
		trigger = {
			OR = {
				has_war_with = ROOT
				any_allied_country = { has_war_with = ROOT }
			}
			NOT = {
				FROM.FROM = {
					has_collaboration = {
						target = ROOT
						value > 0.6
					}
				}
			}
			ROOT = { is_in_faction = no }			
			FROM = { FROM = { NOT = { any_allied_country = { has_war_with = ROOT } } } }
		}
	}
	desc = {
		text = country_capitulated.0.d_positive_prev_no_faction
		trigger = {
			OR = {
				has_war_with = ROOT
				any_allied_country = { has_war_with = ROOT }
			}
			NOT = {
				FROM.FROM = {
					has_collaboration = {
						target = ROOT
						value > 0.6
					}
				}
			}
			ROOT = { is_in_faction = yes }
			FROM = { FROM = { NOT = { any_allied_country = { has_war_with = ROOT } } } }
		}
	}
	desc = {
		text = country_capitulated.0.d_positive_prev_faction
		trigger = {
			OR = {
				has_war_with = ROOT
				any_allied_country = { has_war_with = ROOT }
			}
			NOT = {
				FROM.FROM = {
					has_collaboration = {
						target = ROOT
						value > 0.6
					}
				}
			}
			ROOT = { is_in_faction = yes }
			FROM = { FROM = { any_allied_country = { has_war_with = ROOT } } }
		}
	}
	#Bad news
	desc = {
		text = country_capitulated.0.d_negative_collab_diff_ideology
		trigger = {
			tag = ROOT
			NOT = {
				OR = {
					AND = {
						ROOT = { has_government = fascism }
						FROM.FROM = { has_government = fascism }
					}
					AND = {
						ROOT = { has_government = democratic }
						FROM.FROM = { has_government = democratic }
					}
					AND = {
						ROOT = { has_government = communism }
						FROM.FROM = { has_government = communism }
					}
					AND = {
						ROOT = { has_government = neutrality }
						FROM.FROM = { has_government = neutrality }
					}
				}
			}
			FROM.FROM = {
				has_collaboration = {
					target = ROOT
					value > 0.6
				}
			}
		}
	}
	desc = {
		text = country_capitulated.0.d_negative_both_no_faction
		trigger = {
			OR = {
				has_war_together_with = ROOT
				is_in_faction_with = ROOT
				tag = ROOT
			}
			NOT = {
				FROM.FROM = {
					has_collaboration = {
						target = ROOT
						value > 0.6
					}
				}
			}
			ROOT = { is_in_faction = no }
			FROM = { FROM = { NOT = { any_allied_country = { has_war_with = ROOT } } } }
		}
	}
	desc = {
		text = country_capitulated.0.d_negative_prev_no_faction
		trigger = {
			OR = {
				is_in_faction_with = ROOT
				tag = ROOT
			}
			NOT = {
				FROM.FROM = {
					has_collaboration = {
						target = ROOT
						value > 0.6
					}
				}
			}
			ROOT = { is_in_faction = yes }
			FROM = { FROM = { NOT = { any_allied_country = { has_war_with = ROOT } } } }
		}
	}
	desc = {
		text = country_capitulated.0.d_negative_prev_faction
		trigger = {
			OR = {
				is_in_faction_with = ROOT
				tag = ROOT
			}
			NOT = {
				FROM.FROM = {
					has_collaboration = {
						target = ROOT
						value > 0.6
					}
				}
			}
			ROOT = { is_in_faction = yes }
			FROM = { FROM = { any_allied_country = { has_war_with = ROOT } } }
		}
	}
	#Neutral news
	desc = {
		text = country_capitulated.0.d_neutral_both_no_faction
		trigger = {
			NOT = { has_war_together_with = ROOT }
			NOT = { is_in_faction_with = ROOT }
			NOT = { has_war_with = ROOT }
			NOT = { any_allied_country = { has_war_with = ROOT } }
			ROOT = { is_in_faction = no }
			NOT = {
				FROM.FROM = {
					has_collaboration = {
						target = ROOT
						value > 0.6
					}
				}
			}
			FROM = { FROM = { NOT = { any_allied_country = { has_war_with = ROOT } } } }
		}
	}
	desc = {
		text = country_capitulated.0.d_neutral_prev_no_faction
		trigger = {
			NOT = { is_in_faction_with = ROOT }
			NOT = { has_war_with = ROOT }
			NOT = { any_allied_country = { has_war_with = ROOT } }
			ROOT = { is_in_faction = yes }
			NOT = {
				FROM.FROM = {
					has_collaboration = {
						target = ROOT
						value > 0.6
					}
				}
			}
			FROM = { FROM = { NOT = { any_allied_country = { has_war_with = ROOT } } } }
		}
	}
	desc = {
		text = country_capitulated.0.d_neutral_prev_faction
		trigger = {
			NOT = { is_in_faction_with = ROOT }
			NOT = { has_war_with = ROOT }	
			NOT = { any_allied_country = { has_war_with = ROOT } }
			ROOT = { is_in_faction = yes }
			NOT = {
				FROM.FROM = {
					has_collaboration = {
						target = ROOT
						value > 0.6
					}
				}
			}
			FROM = { FROM = { any_allied_country = { has_war_with = ROOT } } }
		}
	}

	picture = GFX_news_event_generic_sign_treaty2

	major = yes

	is_triggered_only = yes

	hidden = no

	fire_only_once = no

	option = {
		name = country_capitulated.0.a
		trigger = {
			OR = {
				any_allied_country = {
					has_war_with = ROOT
				}				
				has_war_with = ROOT
			}
		}
	}
	option = {
		name = country_capitulated.0.b
		trigger = {
			OR = {
				has_war_together_with = ROOT
				is_in_faction_with = ROOT
			}
		}
	}
	option = {
		name = country_capitulated.0.c
		trigger = {
			NOT = { has_war_together_with = ROOT }
			NOT = { is_in_faction_with = ROOT }
			NOT = { any_allied_country = { has_war_with = ROOT } }
			NOT = { has_war_with = ROOT }
			NOT = { tag = ROOT }
		}
	}
}

###########################
# Hungarian Events
###########################

add_namespace = DOD_hungary

#protect Czechoslovakia
country_event = {
	id = DOD_hungary.10 
	title = DOD_hungary.10.t
	desc = DOD_hungary.10.desc
	picture = GFX_report_event_czech_soldiers_01
	
	is_triggered_only = yes

	option = { #Agree to join the Empire
		name = DOD_hungary.10.a
		ai_chance = {
			factor = 20
			modifier = {
				threat > 20
				factor = 2
			}
			modifier = {
				is_in_faction = no
				factor = 2
			}
			modifier = {
				GER = {
					OR = {
						focus_progress = { focus = GER_demand_sudetenland progress > 0}
						focus_progress = { focus = GER_end_of_czechoslovakia progress > 0}
					}
				}
				factor = 10 #ohshitohshitohshit
			}
			modifier = {
				is_in_faction = yes
				factor = 0.5
			}
		}
		custom_effect_tooltip =  GAME_OVER_TT
		HUN = { country_event = { id = DOD_hungary.11 hours = 6 } }
		
	}
	option = { #A close association status
		name = DOD_hungary.10.b
		ai_chance = {
			factor = 50
			modifier = {
				HUN = {
					is_ai = yes
				}
				factor = 0
			}
		}
		HUN = { country_event = { id = DOD_hungary.12 hours = 6 } }
	}
	option = { #Refuse
		name = DOD_hungary.10.c
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction = yes
				factor = 2 #we're good thanks
			}
			modifier = {
				HUN = {
					is_ai = yes
				}
				factor = 0
			}
		}
		HUN = { country_event = { id = DOD_hungary.13 hours = 6 } }
		set_country_flag = HUN_AH_CZE_refused #needed for munich chain
	}

}

#Annex CZE
country_event = {
	id = DOD_hungary.11
	title = DOD_hungary.11.t
	desc = DOD_hungary.11.desc
	picture = GFX_report_event_polish_army
	
	is_triggered_only = yes

	option = {
		name = DOD_hungary.11.a
		CZE = {
			every_unit_leader = {
				set_nationality = HUN
			}
		}
		annex_country = { target = CZE transfer_troops = yes }
		HUN = { set_country_flag = CZE_annexed_peacefully } # Used to change division name lists for HUN
	}

}

#Puppet CZE
country_event = {
	id = DOD_hungary.12
	title = DOD_hungary.12.t
	desc = DOD_hungary.12.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {
		name = DOD_hungary.12.a
		hidden_effect = { puppet = CZE }
		set_autonomy = { target = CZE autonomy_state = autonomy_dominion }
		if = {
			limit = {
				is_in_faction = yes
			}
			random_country = {
				limit = { 
					is_in_faction_with = HUN 
					is_faction_leader = yes
				}
				add_to_faction = CZE
			}
		}
	}

}

#CZE refuses
country_event = {
	id = DOD_hungary.13
	title = DOD_hungary.13.t
	desc = DOD_hungary.13.desc
	picture = GFX_report_event_czech_soldiers_02
	
	is_triggered_only = yes

	option = { #say no
		name = DOD_hungary.13.a
			add_state_claim = 69
			add_state_claim = 9
			add_state_claim = 75
			add_state_claim = 70
			add_state_claim = 74
			add_state_claim = 71
			add_state_claim = 73
			add_state_claim = 72
			add_state_claim = 664
		
	}

}
#Rapprochement with Little Entente - Hungary asks for permission to rearm
country_event = {
	id = DOD_hungary.30
	title = DOD_hungary.30.t
	desc = DOD_hungary.30.desc
	picture = GFX_report_event_vienna_award_negotiations 
	
	is_triggered_only = yes

	option = { #agree
		name = DOD_hungary.30.a
		ai_chance = {
			factor = 75
			modifier = {
				threat > 20
				factor = 2 #can't leave them alone out there
			}
			modifier = {
				is_in_faction_with = HUN
				factor = 10 #by all means!
			}
			modifier = {
				has_war_with = HUN
				factor = 0 #lol
			}
		}

		#FRA block
		if = {
			limit = {
				tag = FRA
			}
			if = {
				limit = {
					country_exists = ROM
				}
				ROM = { country_event = DOD_hungary.30 }
				else = {
					if = {
						limit = {
							country_exists = YUG
						}
						YUG = { country_event = DOD_hungary.30 }
						else = {
							if = {
								limit = { 
									country_exists = CZE
								}
								CZE = { country_event = DOD_hungary.30 }
								else = {
									#No one left to object
									HUN = { country_event = DOD_hungary.31 }					
								}
							}
						}
					}
				}
			}
		}


		#ROM block
		if = {
			limit = {
				tag = ROM
			}
			if = {
				limit = {
					country_exists = YUG
				}
				YUG = { country_event = DOD_hungary.30 }
				else = {
					if = {
						limit = { 
							country_exists = CZE
						}
						CZE = { country_event = DOD_hungary.30 }
						else = {
							#No one left to object
							HUN = { country_event = DOD_hungary.31 }					
						}
					}
				}
			}
		}

		#YUG block
		if = {
			limit = {
				tag = YUG
			}
			if = {
				limit = {
					country_exists = CZE
				}
				CZE = { country_event = DOD_hungary.30 }
				else = {					
					#No one left to object
					HUN = { country_event = DOD_hungary.31 }					
				}
			}
		}

		#CZE
		if = {
			limit = {
				tag = CZE
			}
			HUN = { country_event = { id = DOD_hungary.31 days = 1 } }
		}
		
	}


	option = { #refuse
		name = DOD_hungary.30.b
		ai_chance = {
			factor = 25
			modifier = {
				AND = {
					has_war = yes
					NOT = { is_in_faction_with = HUN }
				}
				factor = 2 #let's not potentially get another front going
			}
		}
		HUN = { 
			country_event = { id = DOD_hungary.32 hours = 12 } 
			set_country_flag = HUN_rearmament_refused
		}
		set_country_flag = HUN_refused
	}

}

#everything is fine, Hungary permitted to rearm
country_event = {
	id = DOD_hungary.31
	title = DOD_hungary.31.t
	desc = DOD_hungary.31.desc
	picture = GFX_report_event_vienna_award_hungary
	
	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = HUN_rearmament_refused
		}
	}

	option = { #cool
		name = DOD_hungary.31.a
		swap_ideas = {
			remove_idea = HUN_treaty_of_triannon
			add_idea = Hun_treaty_of_triannon_2
		}
	}

}

#Rearmament denied - appeal to major democratic nations?
country_event = {
	id = DOD_hungary.32
	title = DOD_hungary.32.t
	desc = DOD_hungary.32.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	fire_only_once = yes

	option = { #do nothing, people get very angry and upset
		name = DOD_hungary.32.a
		ai_chance = {
			factor = 5
			modifier = {
				threat < 0.1
				factor = 2
			}
		}
		add_stability = -0.2
		add_war_support = -0.1
		add_popularity = { ideology = fascism popularity = 0.1 }
		add_popularity = { ideology = communism popularity = 0.1 }
	}

	option = { #approach Britain
		name = DOD_hungary.32.c
		trigger = {
			ENG = {
				NOT = { has_war_with = HUN }
				has_government = democratic
			}
		}
		ENG = { 
			country_event = { id = DOD_hungary.33 hours = 12 } 
		}
	}

}

#Hungary calls for support to allow rearmament
country_event = {
	id = DOD_hungary.33
	title = DOD_hungary.33.t
	desc = DOD_hungary.33.desc
	picture = GFX_report_event_generic_politician_speech
	
	is_triggered_only = yes

	option = { #allow
		name = DOD_hungary.33.a
		ai_chance = {
			factor = 75
			modifier = {
				is_in_faction_with = HUN
				factor = 10
			}
		}
		every_country = {
			limit = {
				exists = yes
				has_country_flag = HUN_refused #goes to the country that originally refused
			}
			country_event = { id = DOD_hungary.34 }
		}
	}


	option = { #deny
		name = DOD_hungary.33.b
		ai_chance = { 
			factor = 25
			modifier = {
				threat < 0.2
				factor = 2 #not yet
			}
		}
		
		HUN = { country_event = { id = DOD_hungary.35 hours = 12 } }
	}

}

#major nation supports Hungary
country_event = {
	id = DOD_hungary.34
	title = DOD_hungary.34.t
	desc = DOD_hungary.34.desc
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes

	option = { #fold
		ai_chance = {
			factor = 90
		}
		name = DOD_hungary.34.a
		HUN = { 
			country_event = { id = DOD_hungary.31 days = 3 } 
			clr_country_flag = HUN_rearmament_refused
		}
	}


	option = { #stand ground
		name = DOD_hungary.34.b
		ai_chance = {
			factor = 10
			modifier = {
				threat < 0.2
				factor = 2
			}
		}
		add_threat = 1
		HUN = { set_country_flag = HUN_rearmament_refused }
		
		reverse_add_opinion_modifier = { target = FROM modifier = HUN_stubborn_fools }

		add_relation_modifier = {
				target = FROM
				modifier = HUN_stubborn_fools
			}
		
		HUN = { country_event = { id = DOD_hungary.36 hours = 12 } }
	}

}

#major nation refuses to support Hungary
country_event = {
	id = DOD_hungary.35
	title = DOD_hungary.35.t
	desc = DOD_hungary.35.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = { #mean!
		name = DOD_hungary.35.a
		
	}

}
#Little Entente Nations refuse even though a major nation told them to knock it off
country_event = {
	id = DOD_hungary.36
	title = DOD_hungary.36.t
	desc = DOD_hungary.36.desc
	picture = GFX_report_event_french_british_officers
	
	is_triggered_only = yes

	option = { #mean!
		name = DOD_hungary.36.a
		
	}

}
#Renounce the treaty of trianon - event chain
#Hungary challenges Little Entente - Romania or France (if in little entente) asked if it wants to intervene
country_event = {
	id = DOD_hungary.40
	title = DOD_hungary.40.t
	desc = DOD_hungary.40.desc
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes

	option = { #challenge
		name = DOD_hungary.40.a
		ai_chance = {
			factor = 50
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 0.1
			}
		}
		add_stability = -0.05
		add_war_support = -0.1
		HUN = { country_event = { id = DOD_hungary.41 } } #option for HUN to back down
		
	}
	option = { #Fold
		name = DOD_hungary.40.b
		ai_chance = {
			factor = 50
		}
		HUN = { country_event = { id = DOD_hungary.42 } }
	}
}
#Romania/France stands up to Hungary - Back down?
country_event = {
	id = DOD_hungary.41
	title = DOD_hungary.41.t
	desc = DOD_hungary.41.desc
	picture = GFX_report_event_soldiers_in_france
	
	is_triggered_only = yes

	option = { #NO RETREAT NO SURRENDER
		name = DOD_hungary.41.a
		ai_chance = {
			factor = 25
			modifier = {
				factor = 2
				ic_ratio = { tag = FROM ratio > 1.0 }#we are stronger than them!
			}
			modifier = {
				factor = 2
				strength_ratio = { tag = FROM ratio > 1.0 }#we are stronger than them!
			}
		}
		FROM = { country_event = { id = DOD_hungary.43 } }
		
	}
	option = { #Fold
		name = DOD_hungary.41.b
		ai_chance = {
			factor = 75
		}
		FROM = { country_event = { id = DOD_hungary.44 } }
	}
}
#Romania/France fold
country_event = {
	id = DOD_hungary.42
	title = DOD_hungary.42.t
	desc = DOD_hungary.42.desc
	picture = GFX_report_event_vienna_award_hungary
	
	is_triggered_only = yes

	option = { #Excellent!
		name = DOD_hungary.42.a
		remove_ideas = HUN_treaty_of_triannon
		news_event = { id = news.298 days = 1 }
	}
	
}
#Hungary refuses to back down
country_event = {
	id = DOD_hungary.43
	title = DOD_hungary.43.t
	desc = DOD_hungary.43.desc
	picture = GFX_report_event_hungarian_soldiers
	
	is_triggered_only = yes

	option = { #war!
		name = DOD_hungary.43.a
		ai_chance = {
			factor = 66
			modifier = {
				threat > 0.5
				factor = 0.5 #don't have time for this
			}
			modifier = {
				has_war = yes
				factor = 0.5 #bigger fish to fry
			}
			modifier = {
				strength_ratio = { tag = HUN ratio < 1.0 }
				factor = 0.5
			}
		}
		create_wargoal = {
			type = puppet_wargoal_focus
			target = HUN
		}
		if = {
			limit = {
				NOT = {
					has_war_with = HUN
				}
			}
			add_stability = -0.15
		}
		if = {
			limit = {
				is_in_faction = no
			}
			set_rule = { can_create_factions = yes }
			create_faction = BALKAN_ENTENTE_FACTION
		}
		if = {
			limit = { 
				is_faction_leader = yes 
				NOT = { is_in_faction_with = CZE }
				CZE = { 
					is_puppet = no 
					is_in_faction = no
				}
			}
			CZE = { country_event = { id = DOD_hungary.45 } } #invite CZE
		}
		if = {
			limit = { 
				is_faction_leader = yes 
				NOT = { is_in_faction_with = YUG }
				YUG = { 
					is_puppet = no 
					is_in_faction = no
				}
			}
			YUG = { country_event = { id = DOD_hungary.45 } } #invite YUG
		}
	}
	option = { #on second thought...
		name = DOD_hungary.43.b
		ai_chance = {
			factor = 34
			
			modifier = {
				factor = 0
				has_war_with = HUN
			}
		}
		HUN = { country_event = { id = DOD_hungary.42 } }
	}
	
}
#Hungary folds
country_event = {
	id = DOD_hungary.44
	title = DOD_hungary.44.t
	desc = DOD_hungary.44.desc
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes

	option = { 
		name = DOD_hungary.44.a
		add_stability = 0.1
	}
	
}

#Intervention in Hungary - invite surrounding countries
country_event = {
	id = DOD_hungary.45
	title = DOD_hungary.45.t
	desc = DOD_hungary.45.desc
	picture = GFX_report_event_military_planning
	
	is_triggered_only = yes

	option = {#yes 
		name = DOD_hungary.45.a
		ai_chance = {
			factor = 70
		}
		FROM = { add_to_faction = PREV }
	}

	option = {#no 
		name = DOD_hungary.45.b
		ai_chance = {
			factor = 30
		}
		FROM = { country_event = { id = DOD_hungary.46 } }
	}
}


#Intervention in Hungary - negative reply
country_event = {
	id = DOD_hungary.46
	title = DOD_hungary.46.t
	desc = DOD_hungary.46.desc
	picture = GFX_report_event_sign_treaty2
	
	is_triggered_only = yes

	option = {
		name = DOD_hungary.46.a
		add_opinion_modifier = { target = FROM modifier = HUN_refused_alliance }
	}
}

#Hungary demands transylvania - agree?
country_event = {
	id = DOD_hungary.50
	title = DOD_hungary.50.t
	desc = DOD_hungary.50.desc
	picture = GFX_report_event_vienna_award_negotiations
	
	is_triggered_only = yes

	option = {#yes 
		name = DOD_hungary.50.a
		ai_chance = {
			factor = 10
			modifier = {
				ROM_is_on_historical_plan_trigger = yes
				factor = 0
			}
			modifier = {
				strength_ratio = { tag = HUN ratio < 0.8 }
				factor = 2
			}
		}
		HUN = { country_event = { id = DOD_hungary.51 } }
		add_stability = -0.25
		add_war_support = -0.1

	}

	option = {#no 
		name = DOD_hungary.50.b
		ai_chance = {
			factor = 90
		}
		HUN = { country_event = { id = DOD_hungary.52 } }
	}
}

#Romania hands over Transylvania
country_event = {
	id = DOD_hungary.51
	title = DOD_hungary.51.t
	desc = DOD_hungary.51.desc
	picture = GFX_report_event_vienna_award_hungary
	
	is_triggered_only = yes

	trigger = {
		NOT = {
			has_global_flag = Balkan_crisis_mediation_requested
		}
	}

	option = {# 
		name = DOD_hungary.51.a
		hidden_effect = {
			ROM = {
				set_country_flag = second_vienna_accepted_all #needed for event bulgaria.4
			}
		}
		HUN = {
			if = {
				limit = {
					FROM = {
						controls_state = 76
					}
				}
				transfer_state = 76
			}

			if = {
				limit = {
					FROM = {
						controls_state = 83
					}
				}
				transfer_state = 83
			}

			if = {
				limit = {
					FROM = {
						controls_state = 84
					}
				}
				transfer_state = 84
			}
			
			if = {
				limit = {
					FROM = {
						controls_state = 82
					}
				}
				transfer_state = 82
			}
		}
		add_threat = -1
		if = {
			limit = {
				has_idea = HUN_war_preparation
			}
			remove_ideas = HUN_war_preparation
		}
		hidden_effect = {
			news_event = { id = news.301 days = 1 }
		}
	}
}

#Romania refuses to hand over Transylvania
country_event = {
	id = DOD_hungary.52
	title = DOD_hungary.52.t
	desc = DOD_hungary.52.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {# Let it go
		name = DOD_hungary.52.a
		ai_chance = {
			factor = 20
			modifier = {
				strength_ratio = { tag = ROM ratio < 1 } #weaker than Romania
				factor = 2
			}
			modifier = {
				HUN_is_on_historical_plan_trigger = yes
				factor = 0
			}
		}
		add_stability = -0.2
		add_war_support = -0.1
		remove_state_claim = 76
		remove_state_claim = 83
		remove_state_claim = 84
		add_threat = -1
	}

	option = {# Prepare for war!
		name = DOD_hungary.52.b
		ai_chance = {
			factor = 80
			modifier = {
				strength_ratio = { tag = ROM ratio > 1.2 }
				factor = 3
			}
		}
		ROM = { country_event = { id = DOD_hungary.53 hours = 24} }
		add_ideas = HUN_war_preparation
		add_war_support = 0.1
		add_threat = 2
		hidden_effect = {
			news_event = { id = news.302 days = 1 }
		}
	}
}

#Romania told about Hungarian preparations
country_event = {
	id = DOD_hungary.53
	title = DOD_hungary.53.t
	desc = DOD_hungary.53.desc
	picture = GFX_report_event_hungarian_soldiers
	
	is_triggered_only = yes

	option = {# Back down
		name = DOD_hungary.53.a
		ai_chance = {
			factor = 35
			modifier = { 
				strength_ratio = { tag = HUN ratio < 0.8 }
				factor = 0.5
			}
			modifier = { 
				ROM_is_on_historical_plan_trigger = yes 
				factor = 0
			}
			modifier = {
				is_in_faction = yes
				factor = 0 #we got friends
			}
		}
		add_stability = -0.15
		HUN = {
			country_event = { id = DOD_hungary.51 }
		}
	}

	option = {# Prepare for war!
		name = DOD_hungary.53.b
		HUN = { country_event = { id = DOD_hungary.54 hours = 24 } }
		ai_chance = {
			factor = 35
			modifier = { 
				ROM_is_on_historical_plan_trigger = yes 
				factor = 0
			}
			modifier = { 
				is_in_faction = yes
				factor = 2
			}
		}
		add_ideas = ROM_war_preparation
		add_war_support = 0.1
		add_threat = 1
		if = {
			limit = { 
				GER = {
					NOT = {
						OR = {
							has_war_with = HUN
							has_war_with = ROM
						}
					}
				}
			}
			GER = { country_event = { id = DOD_hungary.60 } } #Germany given option to intervene
		}
		if = {
			limit = { 
				ITA = {
					NOT = {
						OR = {
							has_war_with = HUN
							has_war_with = ROM
						}
						is_in_faction_with = GER
					}
				}
			}
			ITA = { country_event = { id = DOD_hungary.60 } } #Italy given option to intervene, if not in faction with Germany
		}
		if = {
			limit = { 
				FRA = {
					has_war = no
					has_government = democratic
				}
			}
			FRA = { country_event = { id = DOD_hungary.60 } } #France given option to intervene, if they don't have bigger problems
		}
	}

	option = {# Ask for mediation
		name = DOD_hungary.53.c
		ai_chance = {
			factor = 35
		}
		HUN = { country_event = { id = DOD_hungary.55 hours = 24 } }
		
	}
}

#Hungary told that Romania is mobilizing
country_event = {
	id = DOD_hungary.54
	title = DOD_hungary.54.t
	desc = DOD_hungary.54.desc
	picture = GFX_report_event_romanian_soldiers
	
	is_triggered_only = yes

	option = {# Back down
		name = DOD_hungary.54.a
		ai_chance = {
			factor = 35
			modifier = {
				strength_ratio = { tag = ROM ratio < 0.5 } #weaker than Romania
				factor = 2
			}
			modifier = { 
				HUN_is_on_historical_plan_trigger = yes 
				factor = 0
			}
		}
		add_stability = -0.15
		remove_state_claim = 76
		remove_state_claim = 83
		remove_state_claim = 84
		add_threat = -1
		ROM = {	country_event = { id = DOD_hungary.57 } }
		remove_ideas = HUN_war_preparation
		
	}

	option = {# To war!
		name = DOD_hungary.54.b
		ai_chance = {
			factor = 35
			modifier = { 
				HUN_is_on_historical_plan_trigger = yes 
				factor = 0
			}
			modifier = { 
				strength_ratio = { tag = ROM ratio > 1.25 } #stronger than Romania
				factor = 2
			}
		}
		declare_war_on = {
				target = ROM
				type = take_state_focus
				generator = { 76 83 84 } 
			}

	}
	
	option = {# Ask for mediation
		name = DOD_hungary.54.c
		ai_chance = {
			factor = 35
		}
		HUN = { country_event = { id = DOD_hungary.55 } }
	}
}

#Hungary looks for friends to do mediation
country_event = {
	id = DOD_hungary.55
	title = DOD_hungary.55.t
	desc = DOD_hungary.55.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {# Germany
		name = DOD_hungary.55.a
		trigger = {
			GER = {
				NOT = {
					OR = {
						has_war_with = HUN
						has_war_with = ROM
						is_in_faction_with = ROM
						has_country_flag = HUN_mediation_refused
					}
				}
			}
		}
		GER = { 
			country_event = { id = DOD_hungary.58 } 
			set_country_flag = HUN_mediation
		}

	}

	option = {# Britain
		name = DOD_hungary.55.b
		trigger = {
			ENG = {
				NOT = {
					OR = {
						has_war_with = HUN
						has_war_with = ROM
						is_in_faction_with = ROM
						has_country_flag = HUN_mediation_refused
					}
				}
			}
		}
		ENG = { 
			country_event = { id = DOD_hungary.58 } 
			set_country_flag = HUN_mediation
		}
	}
	
	option = {# France
		name = DOD_hungary.55.d
		trigger = {
			FRA = {
				NOT = {
					OR = {
						has_war_with = HUN
						has_war_with = ROM
						is_in_faction_with = ROM
						has_country_flag = HUN_mediation_refused
					}
				}
			}
		}
		FRA = { 
			country_event = { id = DOD_hungary.58 } 
			set_country_flag = HUN_mediation
		}
	}

	option = {# Italy
		name = DOD_hungary.55.e
		trigger = {
			ITA = {
				NOT = {
					OR = {
						has_war_with = HUN
						has_war_with = ROM
						is_in_faction_with = ROM
						has_country_flag = HUN_mediation_refused
					}
				}
			}
		}
		ITA = { 
			country_event = { id = DOD_hungary.58 } 
			set_country_flag = HUN_mediation
		}
	}

	option = { # Nobody is eligible
		name = DOD_hungary.55.f
		trigger = {
			AND = {
				GER = {
					OR = {
						has_war_with = HUN
						has_war_with = ROM
						is_in_faction_with = ROM
						has_country_flag = HUN_mediation_refused
					}
				}
				ENG = {
					OR = {
						has_war_with = HUN
						has_war_with = ROM
						is_in_faction_with = ROM
						has_country_flag = HUN_mediation_refused
					}
				}
				FRA = {
					OR = {
						has_war_with = HUN
						has_war_with = ROM
						is_in_faction_with = ROM
						has_country_flag = HUN_mediation_refused
					}
				}
				ITA = {
					OR = {
						has_war_with = HUN
						has_war_with = ROM
						is_in_faction_with = ROM
						has_country_flag = HUN_mediation_refused
					}
				}
			}
		}
		HUN = {
			country_event = { id = DOD_hungary.63 }
		}
	}

}

#Romania looks for friends to do mediation
country_event = {
	id = DOD_hungary.56
	title = DOD_hungary.55.t
	desc = DOD_hungary.55.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {# Germany
		name = DOD_hungary.55.a
		trigger = {
			GER = {
				NOT = {
					OR = {
						has_war_with = HUN
						has_war_with = ROM
						is_in_faction_with = HUN
						has_country_flag = ROM_mediation_refused
					}
				}
			}
		}
		GER = { 
			country_event = { id = DOD_hungary.59 } 
			set_country_flag = ROM_mediation
		}
		
		
	}

	option = {# Britain
		name = DOD_hungary.55.b
		trigger = {
			ENG = {
				NOT = {
					OR = {
						has_war_with = HUN
						has_war_with = ROM
						is_in_faction_with = HUN
						has_country_flag = ROM_mediation_refused
					}
				}
			}
		}
		ENG = { 
			country_event = { id = DOD_hungary.59 } 
			set_country_flag = ROM_mediation
		}
		
		

	}
	
	option = {# France
		name = DOD_hungary.55.d
		trigger = {
			FRA = {
				NOT = {
					OR = {
						has_war_with = HUN
						has_war_with = ROM
						is_in_faction_with = HUN
						has_country_flag = ROM_mediation_refused
					}
				}
			}
		}
		FRA = { 
			country_event = { id = DOD_hungary.59 } 
			set_country_flag = ROM_mediation
		}
	}

	option = {# Soviet Union
		name = DOD_hungary.55.c
		trigger = {
			SOV = {
				NOT = {
					OR = {
						has_war_with = HUN
						has_war_with = ROM
						is_in_faction_with = HUN
						has_country_flag = ROM_mediation_refused
					}
				}
			}
			has_government = communism
		}
		SOV = { 
			country_event = { id = DOD_hungary.59 } 
			set_country_flag = ROM_mediation
		}
	}
	option = {# Italy
		name = DOD_hungary.55.e
		trigger = {
			ITA = {
				NOT = {
					OR = {
						has_war_with = HUN
						has_war_with = ROM
						is_in_faction_with = HUN
						has_country_flag = ROM_mediation_refused
					}
				}
			}
		}
		ITA = { 
			country_event = { id = DOD_hungary.59 } 
			set_country_flag = ROM_mediation
		}
	}

	option = { # Nobody is eligible
		name = DOD_hungary.55.f
		trigger = {
			AND = {
				GER = {
					OR = {
						has_war_with = HUN
						has_war_with = ROM
						is_in_faction_with = HUN
						has_country_flag = ROM_mediation_refused
					}
				}
				ENG = {
					OR = {
						has_war_with = HUN
						has_war_with = ROM
						is_in_faction_with = HUN
						has_country_flag = ROM_mediation_refused
					}
				}
				FRA = {
					OR = {
						has_war_with = HUN
						has_war_with = ROM
						is_in_faction_with = HUN
						has_country_flag = ROM_mediation_refused
					}
				}
				AND = {
					SOV = {
						OR = {
							has_war_with = HUN
							has_war_with = ROM
							is_in_faction_with = HUN
							has_country_flag = ROM_mediation_refused
						}
					}
					has_government = communism
				}
			}
		}
		ROM = {
			country_event = { id = DOD_hungary.64 }
		}
	}
}

#Hungary backs down - Romania triumphant
country_event = {
	id = DOD_hungary.57
	title = DOD_hungary.57.t
	desc = DOD_hungary.57.desc
	picture = GFX_report_event_lithuania_army
	
	is_triggered_only = yes

	trigger = {
		NOT = {
			has_global_flag = Balkan_crisis_mediation_requested
		}
	}

	option = {# well done us
		name = DOD_hungary.57.a
		add_stability = 0.05
		remove_ideas = ROM_war_preparation
	
	}
}
#Hungary seeks Mediation
country_event = {
	id = DOD_hungary.58
	title = DOD_hungary.58.t
	desc = DOD_hungary.58.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	immediate = { clr_global_flag = Balkan_crisis_mediation_requested }

	option = {# agree
		name = DOD_hungary.58.a
		ai_chance = {
			factor = 70
			modifier = {
				is_in_faction_with = HUN
				factor = 100
			}
		}
		HUN = { add_opinion_modifier = { target = PREV modifier = backed_our_cause } }
		save_event_target_as = HUN_mediator
		ROM = { country_event = { id = DOD_hungary.56 hours = 24 } }
	}
	option = {# refuse
		name = DOD_hungary.58.b
		ai_chance = {
			factor = 30
		}
		HUN = { add_opinion_modifier = { target = PREV modifier = betrayed_our_cause } }
		if = {
			limit = {
			 	has_global_flag = HUN_rebuffed
			}
			HUN = { country_event = { id = DOD_hungary.63 } }
		}
		if = {
			limit = {
				NOT = {
					has_global_flag = HUN_rebuffed
				}
			}
			HUN = { country_event = { id = DOD_hungary.55 } }
			set_global_flag = HUN_rebuffed
		}
		clr_country_flag = HUN_mediation
		set_country_flag = HUN_mediation_refused
	}
}

#Romania seeks Mediation
country_event = {
	id = DOD_hungary.59
	title = DOD_hungary.59.t
	desc = DOD_hungary.59.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	immediate = { clr_global_flag = Balkan_crisis_mediation_requested }

	option = {# agree
		name = DOD_hungary.59.a
		ai_chance = {
			factor = 70
		}
		ROM = { add_opinion_modifier = { target = PREV modifier = backed_our_cause } }
		save_event_target_as = ROM_mediator
		if = {
			limit = {
				has_country_flag = HUN_mediation
			}
			country_event = { id = DOD_hungary.68 } #sole party
		}
		if = {
			limit = {
				NOT = { has_country_flag = HUN_mediation } 
			}
			event_target:HUN_mediator = { country_event = { id = DOD_hungary.71 } } #
		}
	}
	option = {# refuse
		name = DOD_hungary.59.b
		ai_chance = {
			factor = 30
		}
		ROM = { add_opinion_modifier = { target = PREV modifier = betrayed_our_cause } }
		if = {
			limit = {
			 	has_global_flag = ROM_rebuffed
			}
			ROM = { country_event = { id = DOD_hungary.64 } }
		}
		if = {
			limit = {
				NOT = {
					has_global_flag = ROM_rebuffed
				}
			}
			ROM = { country_event = { id = DOD_hungary.56 } }
			set_global_flag = ROM_rebuffed
		}
		clr_country_flag = ROM_mediation
		set_country_flag = ROM_mediation_refused	
	}
}
#Balkan Crisis - Intervention
country_event = {
	id = DOD_hungary.60
	title = DOD_hungary.60.t
	desc = DOD_hungary.60.desc
	picture = GFX_report_event_military_planning
	
	is_triggered_only = yes

	option = {# back Hungary
		name = DOD_hungary.60.a
		ai_chance = {
			factor = 35
			modifier = {
				is_in_faction_with = HUN
				factor = 100
			}
			modifier = {
				is_in_faction_with = ROM
				factor = 0
			}
		}
		add_threat = 1
		give_guarantee = HUN
		ROM = { country_event = { id = DOD_hungary.61 } }
	}

	option = {# back Romania
		name = DOD_hungary.60.b
		ai_chance = {
			factor = 35
			modifier = {
				is_in_faction_with = HUN
				factor = 0
			}
			modifier = {
				is_in_faction_with = ROM
				factor = 100
			}
			modifier = {
				tag = GER
				factor = 0
			}
		}
		add_threat = 1
		give_guarantee = ROM
		HUN = { country_event = { id = DOD_hungary.62 } }
	}

	option = {# let them work it out
		name = DOD_hungary.60.c
		ai_chance = {
			factor = 35
		}
		
	}
}

#Balkan Crisis - Romania told a major nation backs Hungary
country_event = {
	id = DOD_hungary.61
	title = DOD_hungary.61.t
	desc = DOD_hungary.61.desc
	picture = GFX_report_event_soldiers_marching
	
	is_triggered_only = yes

	option = {# fold
		name = DOD_hungary.61.a
		trigger = {
			NOT  = { has_global_flag = Balkan_crisis_mediation_requested }
			NOT = { has_global_flag = Balkan_crisis_HUN_folded }
		}
		ai_chance = {
			factor = 35
			modifier = {
				is_in_faction = yes
				factor = 0.25
			}
		}
		if = {
			limit = {
				OR = {
					NOT = { has_global_flag = Balkan_crisis_mediation_requested }
					NOT = { has_global_flag = Balkan_crisis_ROM_folded }
					NOT = { has_global_flag = Balkan_crisis_HUN_folded }
				}
			}
			HUN = { country_event = { id = DOD_hungary.51 } }
			remove_ideas = ROM_war_preparation
			set_global_flag = Balkan_crisis_ROM_folded
		}

	}

	option = {# Ignore
		name = DOD_hungary.61.b
		ai_chance = {
			factor = 35
		}
	}

	option = {# ask for mediation
		name = DOD_hungary.61.c
		trigger = {
			NOT = {
				has_global_flag = Balkan_crisis_mediation_requested
			}
		}
		ai_chance = {
			factor = 35
		}
		if = {
			limit = {
				NOT = { has_global_flag = Balkan_crisis_mediation_requested }
				NOT = { has_global_flag = Balkan_crisis_ROM_folded }
				NOT = { has_global_flag = Balkan_crisis_HUN_folded }
				#idea is that the events can fire at the same time, but selecting the mediation option only fires the next event once
			}
			HUN = { country_event = { id = DOD_hungary.55 hours = 24 } }
		}
		set_global_flag = Balkan_crisis_mediation_requested
	}
}

#Balkan Crisis - Hungary told a major nation backs Romania
country_event = {
	id = DOD_hungary.62
	title = DOD_hungary.62.t
	desc = DOD_hungary.62.desc
	picture = GFX_report_event_soldiers_marching
	
	is_triggered_only = yes


	option = {# fold
		name = DOD_hungary.62.a
		trigger = {
			NOT  = { has_global_flag = Balkan_crisis_mediation_requested }
			NOT = { has_global_flag = Balkan_crisis_ROM_folded }
		}
		ai_chance = {
			factor = 35
			modifier = {
				is_in_faction = yes
				factor = 0.25
			}
		}
		if = {
			limit = {
				NOT = { has_global_flag = Balkan_crisis_ROM_folded }
				NOT = { has_global_flag = Balkan_crisis_HUN_folded }
				NOT = { has_global_flag = Balkan_crisis_mediation_requested }
			}
		ROM = {country_event = { id = DOD_hungary.57 } }
		remove_ideas = HUN_war_preparation
		}
	}

	option = {# Ignore
		name = DOD_hungary.62.b
		ai_chance = {
			factor = 35
		}
	}

	option = {# ask for mediation
		name = DOD_hungary.62.c
		trigger = {
			NOT  = { has_global_flag = Balkan_crisis_mediation_requested }
			NOT = { has_global_flag = Balkan_crisis_ROM_folded }
			NOT = { has_global_flag = Balkan_crisis_HUN_folded }
		}
		ai_chance = {
			factor = 35
		}
		if = {
			limit = {
				NOT = { has_global_flag = Balkan_crisis_mediation_requested }
				NOT = { has_global_flag = Balkan_crisis_ROM_folded }
				NOT = { has_global_flag = Balkan_crisis_HUN_folded }
			}
			country_event = { id = DOD_hungary.55 }
		}
		set_global_flag = Balkan_crisis_mediation_requested
	}
}

#Transylvania Mediation - Hungary rebuffed twice or Mediation sided with Romania
country_event = {
	id = DOD_hungary.63
	title = DOD_hungary.63.t
	desc = {
		text = DOD_hungary.63.desc_HUN_refused #Hungary found no supporter
		trigger = {
			NOT = { 
				OR = {
			 		has_global_flag = HUN_mediation_HUN_nothing
			 		has_country_flag = HUN_mediation_against
			 	}
			 } 
		}
	}
	desc = {
		text = DOD_hungary.63.desc_HUN_nothing #Mediation went against Hungary
		trigger = {
				OR = {
			 		has_global_flag = HUN_mediation_HUN_nothing 
			 		has_country_flag = HUN_mediation_against
			 	}
		}
	}
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes

	option = {# fold
		name = DOD_hungary.63.a
		ai_chance = {
			factor = 70 #we tried
		}
		ROM = {country_event = { id = DOD_hungary.57 } }
		remove_ideas = HUN_war_preparation
	}

	option = {# To war, anyway!
		name = DOD_hungary.63.b
		ai_chance = {
			factor = 30
			modifier = {
				strength_ratio = { tag = ROM ratio > 2.0 }# massively stronger than Romania, quick victorious war etc.
				factor = 3
			}
			modifier = {
				is_in_faction = yes
				factor = 3
			}
		}
		declare_war_on = {
				target = ROM
				type = take_state_focus
				generator = { 76 83 84 } 
			}
		event_target:ROM_mediator = {
			country_event = { id = DOD_hungary.65 }
		}
	}

}

#Transylvania Mediation - Romania rebuffed twice or mediation sided with Hungary
country_event = {
	id = DOD_hungary.64
	title = DOD_hungary.64.t
	desc = {
		text = DOD_hungary.64.desc_ROM_refused #Romania found no supporter
		trigger = {
			NOT = { 
				OR = {
			 		has_global_flag = HUN_mediation_HUN_all
			 		has_country_flag = ROM_mediation_against
			 	}
			 } 
		}
	}
	desc = {
		text = DOD_hungary.64.desc_ROM_nothing #Mediation went against Romania
		trigger = {
				OR = {
			 		has_global_flag = HUN_mediation_HUN_all
			 		has_country_flag = ROM_mediation_against
			 	}
		}
	}
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes

	option = {# fold
		name = DOD_hungary.64.a
		ai_chance = {
			factor = 80
		}
		HUN = {country_event = { id = DOD_hungary.51 } }
		remove_ideas = ROM_war_preparation
	}

	option = {# Ignore
		name = DOD_hungary.64.b
		ai_chance = {
			factor = 20
		}
		event_target:HUN_mediator = {
			country_event = { id = DOD_hungary.66 }
		}
	}

}

#Transylvania Mediation - Hungary has no backing but still goes to war
country_event = {
	id = DOD_hungary.65
	title = DOD_hungary.65.t
	desc = DOD_hungary.65.desc
	picture = GFX_report_event_hungarian_soldiers
	
	is_triggered_only = yes

	option = {# fold
		name = DOD_hungary.65.a
		ai_chance = {
			factor = 35
			modifier = {
				has_war = yes
				factor = 2
			}
		}
		ROM = { add_opinion_modifier = { target = PREV modifier = betrayed_our_cause } }
	}

	option = {# Defend Romania
		name = DOD_hungary.65.b
		ai_chance = {
			factor = 70
		}
		give_guarantee = ROM #should make them want to join war
		if = {
			limit = {
				is_faction_leader = yes
				ROM = {
					is_in_faction = no
				}
			}
			add_to_faction = ROM
		}
		add_ai_strategy = { 
    		type = alliance
     		id = "ROM"			
 			value = 200
    	}
	}

}

#Transylvania Mediation - Romania has no backing but still refuses to fold
country_event = {
	id = DOD_hungary.66
	title = DOD_hungary.66.t
	desc = DOD_hungary.66.desc
	picture = GFX_report_event_romanian_soldiers
	
	is_triggered_only = yes

	option = {# fold
		name = DOD_hungary.66.a
		ai_chance = {
			factor = 35
			modifier = {
				has_war = yes
				factor = 2
			}
		}
		HUN = { add_opinion_modifier = { target = PREV modifier = betrayed_our_cause } }
		add_war_support = -0.05
		HUN = { country_event = { id = DOD_hungary.67 } }
	}

	option = {# Support Hungary
		name = DOD_hungary.66.b
		ai_chance = {
			factor = 70 
		}
		give_guarantee = HUN #should make them want to join war
		HUN = { country_event = { id = DOD_hungary.67 hours = 12} }
		set_country_flag = HUN_war_support
		add_war_support = 0.05
		add_ai_strategy = { 
    		type = support
     		id = "HUN"			
 			value = 200
    	}
	}

}

#Transylvania Mediation - negotiations have broken down, war breaks out
country_event = {
	id = DOD_hungary.67
	title = DOD_hungary.67.t
	desc = DOD_hungary.67.desc
	picture = GFX_report_event_generic_battle
	
	is_triggered_only = yes

	option = {# then war it is
		name = DOD_hungary.67.a
		if = {
			limit = {
				FROM = {
					has_country_flag = HUN_war_support
				}
			}
			FROM = {
				declare_war_on = {
					target = ROM
					type = puppet_wargoal_focus
				}
			}
		}
		declare_war_on = {
				target = ROM
				type = take_state_focus
				generator = { 76 83 84 } 
			}
	}

}
#Transylvania Mediation - both sides have agreed on a mediator, who gets to decide
country_event = {
	id = DOD_hungary.68
	title = DOD_hungary.68.t 
	desc = DOD_hungary.68.desc
	picture = GFX_report_event_vienna_award_negotiations
	
	is_triggered_only = yes

	option = {# all for Hungary
		name = DOD_hungary.68.a
		ai_chance = {
			factor = 25
		}
		ROM = { 
			set_country_flag = ROM_mediation_against
			country_event = { id = DOD_hungary.64 days = 1} 
		}
	}
	option = {# compromise
		name = DOD_hungary.68.b
		ai_chance = {
			factor = 50
		}
		ROM = { country_event = { id = DOD_hungary.69 days = 1} }
	}
	option = {# all for Romania
		name = DOD_hungary.68.c
		ai_chance = {
			factor = 25
		}
		HUN = { 
			set_country_flag = HUN_mediation_against
			country_event = { id = DOD_hungary.63 days = 1 } 
		}
		
	}

}
#Transylvania Mediation Compromise solution (northern transylvania to Hungary) - Romanian reaction
country_event = {
	id = DOD_hungary.69
	title = DOD_hungary.69.t
	desc = DOD_hungary.69.desc
	picture = GFX_report_event_vienna_award_negotiations
	
	is_triggered_only = yes

	option = {# accept
		name = DOD_hungary.69.a
		ai_chance = {
			factor = 80
		}
		HUN = { country_event = { id = DOD_hungary.70 } }
		remove_ideas = ROM_war_preparation
		set_country_flag = second_vienna_accepted_north #for event bulgaria.4
	}
	
	option = {# refuse
		name = DOD_hungary.69.b
		ai_chance = {
			factor = 20
		}
		add_stability = -0.05
		event_target:HUN_mediator = {
			country_event = { id = DOD_hungary.66 }
		}
		
	}
}

#Transylvania Mediation Compromise solution (northern transylvania to Hungary) - Romania accepts
country_event = {
	id = DOD_hungary.70
	title = DOD_hungary.70.t
	desc = DOD_hungary.70.desc
	picture = GFX_report_event_generic_peaceful_annexation
	
	is_triggered_only = yes

	option = {# accept
		name = DOD_hungary.70.a
		add_stability = 0.05
		HUN = { transfer_state = 76 }
		remove_ideas = HUN_war_preparation
	}
}

#Transylvania Mediation - Hungarian Mediator gets to make first offer
country_event = {
	id = DOD_hungary.71
	title = DOD_hungary.71.t
	desc = DOD_hungary.71.desc
	picture = GFX_report_event_vienna_award_negotiations
	
	is_triggered_only = yes

	option = {# all for Hungary
		name = DOD_hungary.71.a
		ai_chance = {
			factor = 25
			modifier = {
				is_in_faction_with = HUN
				factor = 20
			}
		}
		set_global_flag = HUN_mediation_HUN_all
		event_target:ROM_mediator = { country_event = { id = DOD_hungary.72 hours = 24 } }
	}
	option = {# compromise
		name = DOD_hungary.71.b
		ai_chance = {
			factor = 50
			modifier = {
				is_in_faction_with = ROM
				factor = 2
			}
			modifier = {
				threat > 0.25
				factor = 2
			}
		}
		set_global_flag = HUN_mediation_compromise
		event_target:ROM_mediator = { country_event = { id = DOD_hungary.72 hours = 24 } }
	}
	option = {# all for Romania
		name = DOD_hungary.71.c
		ai_chance = {
			factor = 25
			modifier = {
				is_in_faction_with = ROM
				factor = 20
			}
		}
		set_global_flag = HUN_mediation_HUN_nothing
		event_target:ROM_mediator = { country_event = { id = DOD_hungary.72 hours = 24 } }
		
	}

}

#Transylvania Mediation - Romanian Mediator gets to respond
country_event = {
	id = DOD_hungary.72
	title = DOD_hungary.72.t
	desc = {
		text = DOD_hungary.72.desc_HUN_all
		trigger = { has_global_flag = HUN_mediation_HUN_all }
	}
	desc = {
		text = DOD_hungary.72.desc_compromise
		trigger = { has_global_flag = HUN_mediation_compromise }
	}
	desc = {
		text = DOD_hungary.72.desc_HUN_nothing
		trigger = { has_global_flag = HUN_mediation_HUN_nothing }
	}
	picture = GFX_report_event_vienna_award_negotiations
	
	is_triggered_only = yes

	option = {# agree
		name = DOD_hungary.72.a
		ai_chance = {
			factor = 60
			modifier = {
				OR = {
					tag = FRA
					tag = ENG
				}
				event_target:HUN_mediator = {
					tag = GER
				}
				factor = 10
			}
			modifier = {
				has_global_flag = HUN_mediation_HUN_nothing
				factor = 100
			}
		}
		if = {
			limit = { has_global_flag = HUN_mediation_HUN_all }
			ROM = { country_event = { id = DOD_hungary.64 } }
		}
		if = {
			limit = { has_global_flag = HUN_mediation_compromise }
			ROM = { country_event = { id = DOD_hungary.69 } }
		}
		if = {
			limit = { has_global_flag = HUN_mediation_HUN_nothing }
			HUN = { country_event = { id = DOD_hungary.63 } }
		}
	}
	option = {# counteroffer
		name = DOD_hungary.72.b
		ai_chance = {
			factor = 10
			modifier = {
				tag = GER
				event_target:HUN_mediator = {
					tag = FRA
				}
				NOT = { has_global_flag = HUN_mediation_HUN_nothing }
				factor = 100
			}
		}
		country_event = { id = DOD_hungary.73 hours = 24 } 
	}

}

#Transylvania Mediation - Romanian mediator makes counter offer
country_event = {
	id = DOD_hungary.73
	title = DOD_hungary.73.t
	desc = DOD_hungary.73.desc
	picture = GFX_report_event_vienna_award_negotiations
	
	is_triggered_only = yes

	option = {# all for Hungary
		name = DOD_hungary.73.a
		ai_chance = {
			factor = 5
			modifier = {
				threat > 0.7
				factor = 10
			}
		}
		trigger = {
			NOT = { has_global_flag = HUN_mediation_HUN_all }
		}
		set_global_flag = HUN_mediation_HUN_all
		if = {
			limit = {
				has_global_flag = HUN_mediation_compromise
			}
			clr_global_flag = HUN_mediation_compromise
		}
		if = {
			limit = {
				has_global_flag = HUN_mediation_HUN_nothing
			}
			clr_global_flag = HUN_mediation_HUN_nothing
		}
		event_target:HUN_mediator = { country_event = { id = DOD_hungary.74 hours = 24 } }

	}
	option = {# compromise
		name = DOD_hungary.73.b
		ai_chance = {
			factor = 50
			modifier = {
				tag = FRA
				factor = 2
			}
			modifier = {
				tag = GER
				factor = 2
			}
		}
		set_global_flag = HUN_mediation_compromise
		if = {
			limit = {
				has_global_flag = HUN_mediation_HUN_all
			}
			clr_global_flag = HUN_mediation_HUN_all
		}
		if = {
			limit = {
				has_global_flag = HUN_mediation_HUN_nothing
			}
			clr_global_flag = HUN_mediation_HUN_nothing
		}
		event_target:HUN_mediator = { country_event = { id = DOD_hungary.74 hours = 24 } }
	}
	option = {# all for Romania
		name = DOD_hungary.73.c
		ai_chance = {
			factor = 45
		}
		set_global_flag = HUN_mediation_HUN_nothing
		if = {
			limit = {
				has_global_flag = HUN_mediation_compromise
			}
			clr_global_flag = HUN_mediation_compromise
		}
		if = {
			limit = {
				has_global_flag = HUN_mediation_HUN_all
			}
			clr_global_flag = HUN_mediation_HUN_all
		}
		event_target:HUN_mediator = { country_event = { id = DOD_hungary.74 hours = 24 } }
		
	}

}

#Transylvania Mediation - Hungarian Mediator gets to respond to Romanian counter-offer
country_event = {
	id = DOD_hungary.74
	title = DOD_hungary.74.t
	desc = {
		text = DOD_hungary.74.desc_HUN_all
		trigger = { has_global_flag = HUN_mediation_HUN_all }
	}
	desc = {
		text = DOD_hungary.74.desc_compromise
		trigger = { has_global_flag = HUN_mediation_compromise }
	}
	desc = {
		text = DOD_hungary.74.desc_HUN_nothing
		trigger = { has_global_flag = HUN_mediation_HUN_nothing }
	} 
	picture = GFX_report_event_vienna_award_negotiations
	
	is_triggered_only = yes

	option = {# agree
		name = DOD_hungary.74.a
		ai_chance = {
			factor = 90
			modifier = {
				OR = {
					tag = FRA
					tag = ENG
				}
				event_target:HUN_mediator = {
					tag = GER
				}
				factor = 10
			}
		}
		if = {
			limit = { has_global_flag = HUN_mediation_HUN_all }
			ROM = { country_event = { id = DOD_hungary.64 } }
		}
		if = {
			limit = { has_global_flag = HUN_mediation_compromise }
			ROM = { country_event = { id = DOD_hungary.69 } }
		}
		if = {
			limit = { has_global_flag = HUN_mediation_HUN_nothing }
			HUN = { country_event = { id = DOD_hungary.63 } }
		}
	}
	option = {# refuse and walk out of negotiations
		name = DOD_hungary.74.b
		ai_chance = {
			factor = 10
			modifier = {
				has_global_flag = HUN_mediation_HUN_nothing
				factor = 5
			}
			modifier = {
				has_global_flag = HUN_mediation_HUN_all
				factor = 0 #would be dumb as all hell
			}
		}
		HUN = { country_event = { id = DOD_hungary.75 } }
	}

}

#Transylvania Mediation - Negotiations have broken down, Hungary told
country_event = {
	id = DOD_hungary.75
	title = DOD_hungary.67.t
	desc = DOD_hungary.67.desc 
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {# fold
		name = DOD_hungary.75.a
		ai_chance = {
			factor = 20
		}
		ROM = { country_event = { id = DOD_hungary.57 } }
		remove_ideas = HUN_war_preparation
	}

	option = {# To war, anyway!
		name = DOD_hungary.67.a
		ai_chance = {
			factor = 80
		}
		event_target:ROM_mediator = {
			country_event = { id = DOD_hungary.65 }
		}
		event_target:HUN_mediator = {
			country_event = { id = DOD_hungary.66 }
		}
	}

}

#Demand Southern Slovakia event chain - initial event for CZE or SLO, depending on time frame
country_event = {
	id = DOD_hungary.80
	title = DOD_hungary.80.t
	desc = DOD_hungary.80.desc 
	picture = GFX_report_event_generic_rally2
	
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			news_event = { id = news.303 }
		}
	}
	option = {# fold
		name = DOD_hungary.80.a
		ai_chance = {
			factor = 75
		}
		HUN = { country_event = DOD_hungary.81 } 
		hidden_effect = {
			news_event = { id = news.304 days = 1 }
		}
		
	}

	option = {# Appeal to your allies
		name = DOD_hungary.80.b
		ai_chance = {
			factor = 25
		}
		trigger = {
			tag = CZE
			owns_state = 69
			owns_state = 74
			is_puppet = no
			is_in_faction = yes
		}
		random_other_country = {
			limit = { 
				is_in_faction_with = CZE
				is_faction_leader = yes
			 }
			country_event = DOD_hungary.82
		}
	}

	option = {# Appeal to Germany
		name = DOD_hungary.80.c
	}
}

#Demand Southern Slovakia event chain - CZE/SLO folds
country_event = {
	id = DOD_hungary.81
	title = DOD_hungary.81.t
	desc = DOD_hungary.81.desc 
	picture = GFX_report_event_german_polish_border
	
	is_triggered_only = yes

	option = {# great
		name = DOD_hungary.81.a
		transfer_state = 664
		
	}
}

#Demand Southern Slovakia event chain - CZE appeals to allies
country_event = {
	id = DOD_hungary.82
	title = DOD_hungary.82.t
	desc = DOD_hungary.82.desc 
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {# support them
		name = DOD_hungary.82.a
		ai_chance = {
			factor = 75
			modifier = {
				has_war = yes
				factor = 0.5
			}
		}
		HUN = { country_event = DOD_hungary.85 }
	}

	option = {# leave them to hang
		name = DOD_hungary.82.b
		ai_chance = {
			factor = 25
		}
		CZE = { 
			country_event = DOD_hungary.86 
		}
		if = {
			limit = {
				is_faction_leader = yes
			}
			remove_from_faction = CZE 
		}
	}
}

#Demand Southern Slovakia event chain - SLO appeals to Germany
country_event = {
	id = DOD_hungary.83
	title = DOD_hungary.83.t
	desc = DOD_hungary.83.desc 
	picture = GFX_report_event_german_inspect_troops
	
	is_triggered_only = yes

	option = {# tell Hungary to go ahead
		name = DOD_hungary.83.a
		ai_chance = {
			factor = 75
			modifier = {
				is_in_faction_with = HUN
				factor = 10
			}
			modifier = {
				NOT = { is_in_faction_with = HUN }
				factor = 0.1
			}
		}
		HUN = { country_event = DOD_hungary.81 }
	}

	option = {# tell Hungary to back off
		name = DOD_hungary.83.b
		ai_chance = {
			factor = 25
		}
		HUN = { country_event = DOD_hungary.85 }
	}
}

#Demand Southern Slovakia event chain - CZE/SLO flatly refuses
country_event = {
	id = DOD_hungary.84
	title = DOD_hungary.84.t
	desc = DOD_hungary.84.desc 
	picture = GFX_report_event_hungary_refused
	
	is_triggered_only = yes

	option = {# fold
		name = DOD_hungary.84.a
		ai_chance = {
			factor = 10
			modifier = {
				strength_ratio = { tag = CZE ratio < 1 }
				factor = 2
			}
			modifier = {
				strength_ratio = { tag = CZE ratio < 0.5 }
				factor = 10
			}
		}
		add_stability = -0.05
		
	}
	option = {# war!
		name = DOD_hungary.84.b
		ai_chance = {
			factor = 90
		}
		add_war_support = 0.05
		if = {
			limit = { 
				CZE = {
					owns_state = 664
				}
			}

			create_wargoal = {
				type = take_state_focus
				target = CZE
				generator = { 664 }
			}
		}
		hidden_effect = {
			news_event = { id = news.305 days = 1 }
		}
	}
}

#Demand Southern Slovakia event chain - major nation tells Hungary to back off
country_event = {
	id = DOD_hungary.85
	title = DOD_hungary.85.t
	desc = DOD_hungary.85.desc 
	picture = GFX_report_event_soldiers_marching
	
	is_triggered_only = yes

	option = {# fold
		name = DOD_hungary.85.a
		ai_chance = {
			factor = 70
		}
	}
	option = {# war!
		name = DOD_hungary.85.b
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction = yes
				factor = 3
			}
		}
		if = {
			limit = { 
				CZE = {
					owns_state = 664
				}
			}

			create_wargoal = {
				type = take_state_focus
				target = CZE
				generator = { 664 }
			}
		}
	}
}

#Demand Southern Slovakia event chain - CZE left to hang
country_event = {
	id = DOD_hungary.86
	title = DOD_hungary.86.t
	desc = DOD_hungary.86.desc 
	picture = GFX_report_event_hitler_croatia_handshake
	
	is_triggered_only = yes

	option = {# fold
		name = DOD_hungary.86.a
		ai_chance = {
			factor = 90
		}
		HUN = { country_event = DOD_hungary.81 }
		add_opinion_modifier = { target = FROM modifier = western_betrayal }
	}
	option = {# refuse
		name = DOD_hungary.86.b
		ai_chance = {
			factor = 10
			modifier = {
				strength_ratio = { tag = HUN ratio > 1 }
				factor = 15
			}
		}
		HUN = { country_event = DOD_hungary.84 }
		add_opinion_modifier = { target = FROM modifier = western_betrayal }
	}
}

#Demand Vojvodina event chain - intial event for Yugoslavia
country_event = {
	id = DOD_hungary.90
	title = DOD_hungary.90.t
	desc = DOD_hungary.90.desc 
	picture = GFX_report_event_hungary_parliament
	
	is_triggered_only = yes

	option = {# fold
		name = DOD_hungary.90.a
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction = no
				HUN = { is_in_faction = yes }
				factor = 2
			}
			modifier = {
				strength_ratio = { tag = HUN ratio < 1 }
				factor = 2
			}
		}
		HUN = { country_event = DOD_hungary.91 }
		news_event = { id = news.307 days = 1 }
	}
	option = {# refuse
		name = DOD_hungary.90.b
		ai_chance = {
			factor = 70
			modifier = {
				has_stability < 0.5
				factor = 0.5
			}
		}
		HUN = { country_event = DOD_hungary.92 }
		
	}
}

#Demand Vojvodina event chain - Yugoslavia folds
country_event = {
	id = DOD_hungary.91
	title = DOD_hungary.91.t
	desc = DOD_hungary.91.desc 
	picture = GFX_report_event_generic_peaceful_annexation
	
	is_triggered_only = yes

	option = {# great
		name = DOD_hungary.91.a
	  	transfer_state = 45
	  	45 = { add_core_of = HUN }
	}
}

#Demand Vojvodina event chain - Yugoslavia refuses
country_event = {
	id = DOD_hungary.92
	title = DOD_hungary.92.t
	desc = DOD_hungary.92.desc 
	picture = GFX_report_event_hungary_refused
	
	is_triggered_only = yes

	option = {# back down
		name = DOD_hungary.92.a
		ai_chance = {
			factor = 10
			modifier = {
				has_war = yes
				factor = 2
			}
		}
		add_stability = -0.05

	}
	option = {# ask Germany for help
		name = DOD_hungary.92.b
		ai_chance = {
			factor = 10
			modifier = {
				is_in_faction_with = GER
				factor = 5
			}
			modifier = {
				NOT = {
					is_in_faction_with = ITA
				}
				factor = 5
			}
		}
		trigger = {
			GER = {
				NOT = { has_war_with = ROOT }
				exists = yes
				is_puppet = no
				has_capitulated = no
				has_completed_focus = GER_anschluss
			}
			#Can't ask just one if in faction with both
			NOT = {
				AND = {
					is_in_faction_with = GER
					is_in_faction_with = ITA
				}
			}
		}
		GER = { country_event = DOD_hungary.93 }
		
	}
	option = {# ask Italy for help
		trigger = {
			ITA = {
				NOT = { has_war_with = ROOT }
				exists = yes 
				is_puppet = no
				has_capitulated = no
			}
			#Can't ask just one if in faction with both
			NOT = {
				AND = {
					is_in_faction_with = GER
					is_in_faction_with = ITA
				}
			}
		}
		name = DOD_hungary.92.c
		ai_chance = {
			factor = 10
			modifier = {
				is_in_faction_with = ITA
				factor = 5
			}
			modifier = {
				NOT = {
					is_in_faction_with = GER
				}
				factor = 5
			}
		}
		ITA = { country_event = DOD_hungary.93 }
		
	}
	option = {# ask both for help
		name = DOD_hungary.92.d
		ai_chance = {
			factor = 170
		}
		trigger = {
			AND = {
				is_in_faction_with = GER
				is_in_faction_with = ITA
			}
		}
		set_country_flag = HUN_YUG_both
		GER = { country_event = DOD_hungary.93 }	
	}
	option = {# Go alone
		name = DOD_hungary.92.e
		ai_chance = {
			factor = 0
			modifier = {
				add = 10
				AND = {
					NOT = { is_in_faction_with = GER }
					NOT = { is_in_faction_with = ITA }
				}
			}
		}
		if = {
			limit = {
				NOT = { has_wargoal_against = YUG }
			}
			45 = { owner = { save_event_target_as = vojvodina_owner_target } }
			create_wargoal = {
				type = take_state_focus
				target = event_target:vojvodina_owner_target
				generator = { 45 }
			}
		}
		hidden_effect = {
			news_event = { id = news.308 days = 1 }
		}
	}
}

#Demand Vojvodina event chain - Germany/Italy asked for support
country_event = {
	id = DOD_hungary.93
	title = DOD_hungary.93.t
	desc = DOD_hungary.93.desc 
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes

	option = {# yes
		name = DOD_hungary.93.a
		ai_chance = {
			factor = 90
			modifier = {
				NOT = { has_government = fascism }
				factor = 0.25
			}
		}
		
		if = {
			limit = {
				tag = GER
			}
			add_state_claim = 102#Slovenia
			if = {
				limit = {
					HUN = {
						has_country_flag = HUN_YUG_both
					}
				}
				ITA = { country_event = DOD_hungary.93 }
			}
			if = {
				limit = {
					HUN = {
						NOT = { has_country_flag = HUN_YUG_both }
					}
				}
				HUN = { country_event = DOD_hungary.94 }
			}
		}
		if = {
			limit = {
				tag = ITA
			}
			add_state_claim = 103#Dalmatia
			HUN = { country_event = { id = DOD_hungary.94 hours = 6 } }
		}

	}
	option = {# no
		name = DOD_hungary.93.b
		ai_chance = {
			factor = 10
			modifier = {
				has_government = democratic
				factor = 10
			}
		}
		if = {
			limit = {
				tag = GER
			}
			
			if = {
				limit = {
					HUN = {
						has_country_flag = HUN_YUG_both
					}
				}
				ITA = { country_event = DOD_hungary.93 }
			}
			if = {
				limit = {
					HUN = {
						NOT = { has_country_flag = HUN_YUG_both }
					}
				}
				HUN = { country_event = DOD_hungary.95 }
			}
		}
		if = {
			limit = {
				tag = ITA
				HUN = {
					NOT = { has_country_flag = HUN_YUG_both }
				}	
			}
			HUN = { country_event = DOD_hungary.95 }
		}
		if = {
			limit = {
				tag = ITA
				102 = {
					is_claimed_by = GER
				}
			}
			HUN = {
				country_event = DOD_hungary.94
			}
		}
		
	}
}

#Demand Vojvodina event chain - Germany/Italy support
country_event = {
	id = DOD_hungary.94
	title = DOD_hungary.94.t
	desc = DOD_hungary.94.desc 
	picture = GFX_report_event_generic_sign_treaty3
	
	is_triggered_only = yes

	fire_only_once = yes

	option = {# Ultimatum to Yugoslavia
		name = DOD_hungary.94.a
		ai_chance = {
			factor = 75
		}
		if = {
			limit = {
				102 = { is_claimed_by = GER }
				NOT = { 103 = { is_claimed_by = ITA } } #only GER agreed
			}
			add_threat = 1
			
		}
		if = {	
			limit = {
				103 = { is_claimed_by = ITA }
				NOT = { 102 = { is_claimed_by = GER } } #only ITA agreed
			}
			add_threat = 1
		}

		if = {	
			limit = {
				103 = { is_claimed_by = ITA }
				102 = { is_claimed_by = GER } #both agreed
			}
			add_threat = 3
		}
		YUG = { country_event = { id = DOD_hungary.96 hours = 24 } }
	}
	option = {# strike
		name = DOD_hungary.94.b
		ai_chance = {
			factor = 25
			modifier = {
				has_war = no
				factor = 3 #nothing better to do
			}
		}
		if = {
			limit = { 102 = { is_claimed_by = GER } }
			GER = { 
				create_wargoal = {
					type = take_state_focus
					target = YUG
					generator = { 102 }
				}
			}
		}
		if = {
			limit = { 103 = { is_claimed_by = ITA } }
			ITA = { 
				create_wargoal = {
					type = take_state_focus
					target = YUG
					generator = { 103 }
				}
			}
		}
		if = {
			limit = {
			 NOT = { has_wargoal_against = YUG }
			}
			create_wargoal = {
				type = take_state_focus
				target = YUG
				generator = { 45 }
			}
		}
		news_event = { id = news.308 days = 1 }		
	}
}

#Demand Vojvodina event chain - Germany/Italy refuses support
country_event = {
	id = DOD_hungary.95
	title = DOD_hungary.95.t
	desc = DOD_hungary.95.desc 
	picture = GFX_report_event_german_speech
	
	is_triggered_only = yes

	option = {# pity
		name = DOD_hungary.95.a
		ai_chance = {
			factor = 10
		}
	}
	option = {# war
		name = DOD_hungary.95.b
		ai_chance = {
			factor = 90
		}
		country_event = DOD_hungary.94
	}
}

#Demand Vojvodina event chain - ultimatum
country_event = {
	id = DOD_hungary.96
	title = DOD_hungary.96.t
	desc = {
		text = DOD_hungary.96.desc_HUN_GER
		trigger = { 
			102 = { is_claimed_by = GER } 
			103 = { NOT = { is_claimed_by = ITA } }
		}
	}
	desc = {
		text = DOD_hungary.96.desc_HUN_ITA
		trigger = { 
			102 = { NOT = { is_claimed_by = GER } }
			103 = { is_claimed_by = ITA } 
		}
	}
	desc = {
		text = DOD_hungary.96.desc_HUN_both
		trigger = { 
			102 = { is_claimed_by = GER } 
			103 = { is_claimed_by = ITA } 
		}
	} 
	picture = GFX_report_event_hitler_parade
	
	is_triggered_only = yes

	option = {# fold
		name = DOD_hungary.96.a
		ai_chance = {
			factor = 75
		}
		if = {
			limit = {
				102 = { is_claimed_by = GER }
			}
			GER = { transfer_state = 102 }
		}
		if = {	
			limit = {
				103 = { is_claimed_by = ITA }
			}
			ITA = { transfer_state = 103 }
		}
		HUN = { transfer_state = 45 }
		45 = { add_core_of = HUN }
	}
	option = {# defiance
		name = DOD_hungary.96.b
		ai_chance = {
			factor = 25
			modifier = {
				is_in_faction = yes
				factor = 4
			}
		}
		HUN = { country_event = DOD_hungary.97 }
		if = {	
			limit = {
				103 = { is_claimed_by = ITA }
			}
			ITA = { country_event = DOD_hungary.97 }
		}
		if = {	
			limit = {
				102 = { is_claimed_by = GER }
			}
			GER = { country_event = DOD_hungary.97 }
		}
		
	}
}

#Demand Vojvodina event chain - Yugoslavia being stubborn
country_event = {
	id = DOD_hungary.97
	title = DOD_hungary.97.t
	desc = DOD_hungary.97.desc 
	picture = GFX_report_event_polish_army
	
	is_triggered_only = yes

	option = {# war
		name = DOD_hungary.97.a
		if = {
			limit = { 
				tag = GER
				102 = { is_claimed_by = GER } }
			GER = { 
				create_wargoal = {
					type = take_state_focus
					target = YUG
					generator = { 102 }
				}
			}
		}
		if = {
			limit = { 
				tag = ITA
				103 = { is_claimed_by = ITA } 
			}
			ITA = { 
				create_wargoal = {
					type = take_state_focus
					target = YUG
					generator = { 103 }
				}
			}
		}
		if = {
			limit = {
				tag = HUN
			}	
			HUN = {
				create_wargoal = {
					type = take_state_focus
					target = YUG
					generator = { 45 }
				}
				45 = { add_core_of = HUN }
			}
		}
		hidden_effect = {
			news_event = { id = news.308 days = 1 }
		}
	}
}

#Demand Overlordship over Slovakia - CZE holds Slovakia
country_event = {
	id = DOD_hungary.100
	title = DOD_hungary.100.t
	desc = DOD_hungary.100.desc 
	picture = GFX_report_event_hungary_parliament
	
	is_triggered_only = yes

	option = {# hand over Slovakia
		name = DOD_hungary.100.a
		ai_chance = {
			factor = 30
			modifier = {
				strength_ratio = { tag = HUN ratio < 1 }
				factor = 2
			}
		}
		FROM = { country_event = { id = DOD_hungary.101 hours = 3 } }
		hidden_effect = {
			news_event = { id = news.310 days = 1 }
		}
	}

	option = {# refuse
		name = DOD_hungary.100.b
		ai_chance = {
			factor = 70
			modifier = {
				has_war = yes
				factor = 0.5
			}
			modifier = {
				is_in_faction = yes
				factor = 5
			}
		}
		HUN = { country_event = { id = DOD_hungary.102 hours = 4 } }
	}
}

#Demand Overlordship over Slovakia - CZE agrees, Hungary gets options on whether to annex or puppet
country_event = {
	id = DOD_hungary.101
	title = DOD_hungary.101.t
	desc = DOD_hungary.101.desc 
	picture = GFX_report_event_military_planning
	
	is_triggered_only = yes

	option = {# annex
		name = DOD_hungary.101.a
		ai_chance = {
			factor = 70
		}
		HUN = {
			transfer_state = 70
			transfer_state = 71
			transfer_state = 72
			transfer_state = 73
		}
		if = { #In case Demand Southern Slovakia Bypasses, this will transfer it.  
			limit = {
				FROM = { owns_state = 664 }
			}
			HUN = { transfer_state = 664 }
		}
		if = {
			limit = {
				country_exists = CZE
			}
			CZE = {
				set_cosmetic_tag = CZE_ONLY
			}
		}
	}

	option = {# puppet
		name = DOD_hungary.101.b
		ai_chance = {
			factor = 30
		}
	}
}

#Demand Overlordship over Slovakia - CZE refuses to hand over Slovakia
country_event = {
	id = DOD_hungary.102
	title = DOD_hungary.102.t
	desc = DOD_hungary.102.desc 
	picture = GFX_report_event_czech_soldiers_01
	
	is_triggered_only = yes

	option = {# let it go
		name = DOD_hungary.102.a
		ai_chance = {
			factor = 10
			modifier = {
				is_in_faction = no
				CZE = {
					is_in_faction = yes
				}
				factor = 10
			}
		}
	}

	option = {# ask Germany to participate in the split
		name = DOD_hungary.102.b
		trigger = {
			GER = { exists = yes }
		}
		ai_chance = {
			factor = 90
			modifier = {
				is_in_faction_with = GER
				factor = 10
			}
		}
		GER = { country_event = DOD_hungary.103 }
	}
}

#Demand Overlordship over Slovakia - GER asked to split CZE with Hungary
country_event = {
	id = DOD_hungary.103
	title = DOD_hungary.103.t
	desc = DOD_hungary.103.desc 
	picture = GFX_report_event_hitler_croatia_handshake
	
	is_triggered_only = yes

	option = {# yes
		name = DOD_hungary.103.a
		ai_chance = {
			factor = 75
			modifier = {
				has_government = democratic
				factor = 0
			}
		}
		set_global_flag = GER_HUN_CZE_split
		HUN = { 
			country_event = DOD_hungary.104 
			add_opinion_modifier = { target = GER modifier = HUN_split_CZE }
			add_ai_strategy = {
					type = alliance
					id = "GER"
					value = 200
				}
		}

	}

	option = {# refuse
		name = DOD_hungary.103.b
		ai_chance = {
			factor = 25
		}
		HUN = { country_event = DOD_hungary.105 }
	}
}

#Demand Overlordship over Slovakia - GER agrees to split CZE with Hungary
country_event = {
	id = DOD_hungary.104
	title = DOD_hungary.104.t
	desc = DOD_hungary.104.desc 
	picture = GFX_report_event_generic_sign_treaty3
	
	is_triggered_only = yes

	option = {# great
		name = DOD_hungary.104.a
	}	
}
#Demand Overlordship over Slovakia - GER refuses to split CZE with Hungary
country_event = {
	id = DOD_hungary.105
	title = DOD_hungary.105.t
	desc = DOD_hungary.105.desc 
	picture = GFX_report_event_german_inspect_troops
	
	is_triggered_only = yes

	option = {# let it go
		name = DOD_hungary.105.a
		ai_chance = {
			factor = 10
		}
	}

	option = {# war goal
		name = DOD_hungary.105.b
		ai_chance = {
			factor = 90
		}
		create_wargoal = {
				type = take_state_focus
				target = CZE
				generator = { 70 71 72 73 }
			}
		hidden_effect = {
			news_event = { id = news.311 days = 1 }
		}
	}
}
#Demand Overlordship over Slovakia - GER betrays promise
country_event = {
	id = DOD_hungary.106
	title = DOD_hungary.106.t
	desc = DOD_hungary.106.desc 
	picture = GFX_report_event_german_troops
	
	is_triggered_only = yes

	option = {# fume
		name = DOD_hungary.106.a
		ai_chance = {
			factor = 5
		}
		remove_opinion_modifier = { target = GER modifier = HUN_split_CZE }
		add_opinion_modifier = { target = GER modifier = HUN_split_CZE_betrayed }
	}

	option = {# take what is ours
		name = DOD_hungary.106.b
		ai_chance = {
			factor = 95
		}
		remove_opinion_modifier = { target = GER modifier = HUN_split_CZE }
		add_opinion_modifier = { target = GER modifier = HUN_split_CZE_betrayed }
		create_wargoal = {
				type = take_state_focus
				target = CZE
				generator = { 70 71 72 73 }
		}
		hidden_effect = {
			news_event = { id = news.311 days = 1 }
		}
	}	
}

#Demand Overlordship over Slovakia - Slovakia independent
country_event = {
	id = DOD_hungary.107
	title = DOD_hungary.107.t
	desc = {
		text = DOD_hungary.107.desc_SLO_independent
	}
	picture = GFX_report_event_lithuania_army
	
	is_triggered_only = yes

	option = {# agree to being a puppet
		name = DOD_hungary.107.a
		ai_chance = {
			factor = 50
		}
		HUN = { country_event = DOD_hungary.108 }
		hidden_effect = {
			news_event = { id = news.310 days = 1 }
		}
	}

	option = {# refuse
		name = DOD_hungary.107.b
		ai_chance = {
			factor = 50
			modifier = {
				is_in_faction = yes
				HUN = { is_in_faction = no }
				factor = 5
			}
		}
		HUN = { country_event = DOD_hungary.109 }
		
	}	
}

#Demand Overlordship over Slovakia - Slovakia agrees to become a puppet
country_event = {
	id = DOD_hungary.108
	title = DOD_hungary.108.t
	desc = DOD_hungary.108.desc 
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {# good
		name = DOD_hungary.108.a
	}

	
}

#Demand Overlordship over Slovakia - Slovakia refuses to become a puppet
country_event = {
	id = DOD_hungary.109
	title = DOD_hungary.109.t
	desc = DOD_hungary.109.desc 
	picture = GFX_report_event_military_planning
	
	is_triggered_only = yes

	option = {# war!
		name = DOD_hungary.109.a
	}

	
}

#Intervene in CZE - Initial offer to SOV to issue joint offer
country_event = {
	id = DOD_hungary.120
	title = DOD_hungary.120.t
	desc = DOD_hungary.120.desc 
	picture = GFX_report_event_stalin_meeting
	
	is_triggered_only = yes

	option = {# okay
		name = DOD_hungary.120.a
		ai_chance = {
			factor = 80
			modifier = {
				CZE = {
					has_government = communism
				}
				factor = 4
			}
		}
		CZE = {
			country_event = DOD_hungary.121
		}
		
	}
	option = {# rather not
		name = DOD_hungary.120.b
		ai_chance = {
			factor = 20
		}
		HUN = { country_event = DOD_hungary.123 }
	}
}

#Intervene in CZE - CZE gets an offer from SOV - guarantee in retrun for SSLO to HUN
country_event = {
	id = DOD_hungary.121
	title = DOD_hungary.121.t
	desc = DOD_hungary.121.desc 
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {# okay
		name = DOD_hungary.121.a
		ai_chance = {
			factor = 75
			modifier = {
				is_in_faction = yes
				factor = 0.25
			}
		}
		if = {
			limit = { 
				664 = { is_owned_by = CZE }
			}
			HUN = {
				country_event = DOD_hungary.81
			}
		}
		
		SOV = { give_guarantee = CZE } 
		if = {
			limit = {
				NOT = {
					has_government = communism
				}
			}
			add_popularity = { ideology = communism popularity = 0.1 }
		}
	}
	option = {# rather not
		name = DOD_hungary.121.b
		ai_chance = {
			factor = 25
		}
		SOV = { country_event = DOD_hungary.122 }
		HUN = { country_event = DOD_hungary.126 }
	}
}

#Intervene in CZE - CZE turns down offer from SOV
country_event = {
	id = DOD_hungary.122
	title = DOD_hungary.122.t
	desc = DOD_hungary.122.desc 
	picture = GFX_report_event_czech_soldiers_02
	
	is_triggered_only = yes

	option = {# okay
		name = DOD_hungary.122.a
		ai_chance = {
			factor = 30
		}
	}
	option = {# approach Germany to strike a deal
		name = DOD_hungary.122.b
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = GER
				factor = 3
			}
		}
		trigger = {
			NOT = { has_war_with = GER }
		}
		GER = { country_event = DOD_hungary.124 }
	}
}

#Intervene in CZE - SOV refuses to support Hungary
country_event = {
	id = DOD_hungary.123
	title = DOD_hungary.123.t
	desc = DOD_hungary.123.desc 
	picture = GFX_report_event_stalin_02
	
	is_triggered_only = yes

	option = {# okay
		name = DOD_hungary.123.a
		ai_chance = {
			factor = 20
		}
	}
	option = {# approach Germany to strike a deal on our own
		name = DOD_hungary.123.b
		ai_chance = {
			factor = 80
			modifier = {
				GER = { has_government = communism }
				factor = 2
			}
		}
		GER = { country_event = DOD_hungary.125 }
		SOV = { add_opinion_modifier = { target = HUN modifier = HUN_renegade } }
	}
}

#Intervene in CZE - SOV asks GER to split CZE
country_event = {
	id = DOD_hungary.124
	title = DOD_hungary.124.t
	desc = DOD_hungary.124.desc 
	picture = GFX_report_event_molotov_ribentrop_handshake
	
	is_triggered_only = yes

	option = {# offer them Slovakia as a puppet
		name = DOD_hungary.124.a
		ai_chance = {
			factor = 50
		}
		SOV = { country_event = DOD_hungary.127 }
	}
	option = {# no deals
		name = DOD_hungary.124.b
		ai_chance = {
			factor = 50
			modifier = {
				has_completed_focus = GER_mol_rib_pact
				factor = 0
			}
			modifier = {
				is_in_faction_with = SOV
				factor = 0
			}
		}
		SOV = { country_event = DOD_hungary.128 }
	}
}

#Intervene in CZE - GER approached by Hungary
country_event = {
	id = DOD_hungary.125
	title = DOD_hungary.124.t
	desc = DOD_hungary.124.desc 
	picture = GFX_report_event_hitler_handshake
	
	is_triggered_only = yes

	option = {# offer them Slovakia as a puppet
		name = DOD_hungary.124.a
		ai_chance = {
			factor = 50
		}
		HUN = { country_event = DOD_hungary.127 }
	}
	option = {# no deals
		name = DOD_hungary.124.b
		ai_chance = {
			factor = 50
			modifier = {
				has_government = communism
				factor = 0
			}
		}
		HUN = { country_event = DOD_hungary.128 }
	}
}

#Intervene in CZE - CZE refuses initial offer, Hungary told that SOV might make another deal
country_event = {
	id = DOD_hungary.126
	title = DOD_hungary.126.t
	desc = DOD_hungary.126.desc 
	picture = GFX_report_event_stlin_meeting
	
	is_triggered_only = yes

	option = {# okay
		name = DOD_hungary.126.a
	}
}

#Intervene in CZE - GER offers Slovakia - response
country_event = {
	id = DOD_hungary.127
	title = DOD_hungary.127.t
	desc = DOD_hungary.127.desc 
	picture = GFX_report_event_molotov_ribbentrop_stalin_pact
	
	is_triggered_only = yes

	option = {# agree
		name = DOD_hungary.127.a
		ai_chance = {
			factor = 90
		}
		CZE = { country_event = DOD_hungary.129 }
	}
	option = {# no deals
		name = DOD_hungary.127.b
		ai_chance = {
			factor = 0 #makes pretty much no sense
		}
		GER = { country_event = DOD_hungary.130 }
		add_state_claim = 70
		add_state_claim = 71
		add_state_claim = 72
		add_state_claim = 73
		add_state_claim = 9
		add_state_claim = 69
		add_state_claim = 75
		add_state_claim = 74
	}
}

#Intervene in CZE - GER refuses
country_event = {
	id = DOD_hungary.128
	title = DOD_hungary.128.t
	desc = DOD_hungary.128.desc 
	picture = GFX_report_event_german_speech
	
	is_triggered_only = yes

	option = {# okay
		name = DOD_hungary.128.a
		ai_chance = {
			factor = 10
		}
	}
	option = {# we shall consider force
		name = DOD_hungary.128.b
		ai_chance = { factor = 90 }
		add_state_claim = 70
		add_state_claim = 71
		add_state_claim = 72
		add_state_claim = 73
	}
}

#Intervene in CZE - CZE gets an ultimatum
country_event = {
	id = DOD_hungary.129
	title = DOD_hungary.129.t
	desc = DOD_hungary.129.desc 
	picture = GFX_report_event_soviet_german_soldier_handshake
	
	is_triggered_only = yes

	option = {# okay
		name = DOD_hungary.129.a
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction = no
				factor = 3
			}
			modifier = {
				NOT = {
					owns_state = 69 #Sudetenland
				}
				factor = 10 #indefensible
			}
		}
		custom_effect_tooltip = GAME_OVER_TT
		GER = { 
			transfer_state = 9
			transfer_state = 69
			transfer_state = 75
			transfer_state = 74
		}
		HUN = {
			transfer_state = 664
		}
		if = {
			limit = {
				FROM = {
					tag = HUN
				}
			}
			HUN = { country_event = DOD_hungary.101 }
		}
		if = {
			limit = {
				FROM = {
					NOT = {
						tag = HUN
					}
				}
			}
			FROM = {
				transfer_state = 70
				transfer_state = 71
				transfer_state = 72
				transfer_state = 73
			}
		}
	}
	option = {# refuse
		name = DOD_hungary.129.b
		ai_chance = {
			factor = 70
			modifier = {
				is_puppet_of = GER
				factor = 0
			}
			modifier = {
				is_subject_of = SOV
				factor = 0
			}
		}
		GER = {
			create_wargoal = {
				type = take_state_focus
				target = CZE
				generator = { 9 69 75 74 }
			}
		}
		HUN = { 
			create_wargoal = {
				type = take_state_focus
				target = CZE
				generator = { 664 }
			}
		}
		FROM = {
			create_wargoal = {
				type = take_state_focus
				target = CZE
				generator = { 70 71 72 73 }
			}
			
		}
	}
}

#Intervene in CZE - GER offers Slovakia - not accepted
country_event = {
	id = DOD_hungary.130
	title = DOD_hungary.130.t
	desc = DOD_hungary.130.desc 
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {# alright then
		name = DOD_hungary.130.a
	}
}

#Bled Agreement - Hungary asks for rearmament - France or Romania asked first
country_event = {
	id = DOD_hungary.140
	title = DOD_hungary.140.t
	desc = DOD_hungary.140.desc 
	picture = GFX_report_event_hungary_parliament
	
	is_triggered_only = yes

	option = {# allow
		name = DOD_hungary.140.a
		ai_chance = {
			factor = 75
			modifier = {
				threat < 0.5
				factor = 2 #what's the worst that could happen
			}
			modifier = {
				has_war = yes
				factor = 0.25
			}
			modifier = {
				HUN = {
					has_government = democratic
				}
				factor = 3
			}
		}
		if = { 
			limit = { tag = FRA }
			set_global_flag = HUN_FRA_engaged
			ROM = { country_event = { id = DOD_hungary.141 days = 4 } }
			YUG = { country_event = { id = DOD_hungary.141 days = 4 } }
			if = {
				limit = {
					CZE = {
						is_subject = no
					}
				}
				CZE = { country_event = { id = DOD_hungary.141 days = 4 } }
			}
		}
		if = { 
			limit = { tag = ROM }
			YUG = { country_event = { id = DOD_hungary.141 days = 4 } }
			if = {
				limit = {
					CZE = {
						is_subject = no
					}
				}
				CZE = { country_event = { id = DOD_hungary.141 days = 4 } }
			}
		}
		HUN = {
			country_event = { id = DOD_hungary.142 days = 3 }
		}
	}
}

#Bled Agreement - ROM/FRA has agreed, minors get to issue a response
country_event = {
	id = DOD_hungary.141
	title = DOD_hungary.141.t
	desc = DOD_hungary.141.desc 
	picture = GFX_report_event_journalists_speech
	
	is_triggered_only = yes

	option = {# intervene
		name = DOD_hungary.141.a
		trigger = {
			HUN = {
				OR = {
					has_government = fascism
					has_added_tension_amount > 0.05 #hungary has been bad
				}
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
		create_wargoal = {
			type = puppet_wargoal_focus
			target = HUN
		}
		add_political_power = -200
		add_stability = -0.15
		add_war_support = -0.1
		add_threat = 5
	}
	option = {# issue a protest
		name = DOD_hungary.141.b
		ai_chance = {
			factor = 45
		}
		add_opinion_modifier = { target = HUN modifier = protest_action }
		HUN = { country_event = DOD_hungary.143 }
	}

	option = {# accept it
		name = DOD_hungary.141.c
		ai_chance = {
			factor = 45
		}
	}
}

#Bled Agreement - HUN permitted to rearm
country_event = {
	id = DOD_hungary.142
	title = DOD_hungary.142.t
	desc = DOD_hungary.142.desc 
	picture = GFX_report_event_generic_military_parade
	
	is_triggered_only = yes

	option = {# 
		name = DOD_hungary.142.a
		if = {
			limit = { has_idea = HUN_treaty_of_triannon }
			swap_ideas = {
				remove_idea = HUN_treaty_of_triannon
				add_idea = HUN_treaty_of_triannon_3
			}
		}
		if = {
			limit = { has_idea = HUN_treaty_of_triannon_2 }
			swap_ideas = {
				remove_idea = HUN_treaty_of_triannon_2
				add_idea = HUN_treaty_of_triannon_3
			}
		}
	}
	
}

#Bled Agreement - Neighbours issue a protest
country_event = {
	id = DOD_hungary.143
	title = DOD_hungary.143.t
	desc = DOD_hungary.143.desc 
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {# good for them
		name = DOD_hungary.143.a
	}
	
}

#Bled Agreement - Hungary denied rearmament
country_event = {
	id = DOD_hungary.144
	title = DOD_hungary.144.t
	desc = DOD_hungary.144.desc 
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {# accept
		name = DOD_hungary.144.a
		ai_chance = {
			factor = 10
		}
		add_stability = -0.1
	}

	option = {# appeal
		name = DOD_hungary.144.b
		ai_chance = {
			factor = 90
		}
		HUN = { country_event = DOD_hungary.145 }
	}

}

#Bled Agreement - Hungary appeals
country_event = {
	id = DOD_hungary.145
	title = DOD_hungary.145.t
	desc = DOD_hungary.145.desc 
	picture = GFX_report_event_hungary_refused
	
	is_triggered_only = yes

	option = {# appeal to Germany
		name = DOD_hungary.145.a
		ai_chance = {
			factor = 35
			modifier = {
				is_in_faction_with = GER
				factor = 10
			}
		}
		trigger = {
			NOT = {
				has_war_with = GER
			}
			NOT = { has_government = communism }
		}
		GER = { country_event = DOD_hungary.146 }
	}

	option = {# appeal to France
		name = DOD_hungary.145.b
		ai_chance = {
			factor = 35
			modifier = {
				is_in_faction_with = FRA
				factor = 10
			}
		}
		trigger = {
		 	NOT = { 
		 		has_global_flag = HUN_FRA_engaged 
		 		has_war_with = FRA
		 	}
		}
		FRA = { country_event = DOD_hungary.146 }
	}
	option = {# appeal to Soviet Union
		name = DOD_hungary.145.c
		trigger = {
			has_government = communism
			SOV = { has_government = communism }
		}
		ai_chance = {
			factor = 35
			modifier = {
				is_in_faction_with = SOV
				factor = 10
			}
		}

		SOV = { country_event = DOD_hungary.146 }
	}
	option = {# appeal to Italy
		name = DOD_hungary.145.d
		ai_chance = {
			factor = 35
			modifier = {
				is_in_faction_with = ITA
				factor = 10
			}
		}
		trigger = {
			ITA = {
				NOT = { is_in_faction_with = GER }
			}
			NOT = {
				has_war_with = ITA
			}
		}
		ITA = { country_event = DOD_hungary.146 }
	}
}

#Bled Agreement - Hungary appeals to a major
country_event = {
	id = DOD_hungary.146
	title = DOD_hungary.146.t
	desc = DOD_hungary.146.desc 
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes

	option = {# put pressure on the minors
		name = DOD_hungary.146.a
		ai_chance = {
			factor = 70
			modifier = {
				is_in_faction_with = HUN
				factor = 10
			}
		}
		if = { limit = { has_global_flag = HUN_FRA_engaged} 
			FRA = { country_event = { id = DOD_hungary.147 days = 1} }
		}
		if = { limit = { NOT = { has_global_flag = HUN_FRA_engaged } }
			ROM = { country_event = { id = DOD_hungary.147 days = 1} }
		}

		add_threat = 1
	}

	option = {# Hungary has to fend for themselves
		name = DOD_hungary.146.b
		ai_chance = {
			factor = 30
		}
		HUN = { country_event = { id = DOD_hungary.148 days = 2 } }
	}

}

#Bled Agreement - Someone applies pressure to minors to let Hungary rearm
country_event = {
	id = DOD_hungary.147
	title = DOD_hungary.147.t
	desc = DOD_hungary.147.desc 
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {# yield
		name = DOD_hungary.147.a
		ai_chance = {
			factor = 80
		}
		HUN = { country_event = DOD_hungary.142 }
		HUN = { add_opinion_modifier = { target = FROM modifier = offered_support } }
		if = { 
			limit = { tag = FRA }
			set_global_flag = HUN_FRA_engaged
			ROM = { country_event = DOD_hungary.141 }
			YUG = { country_event = DOD_hungary.141 }
			CZE = { country_event = DOD_hungary.141 }
		}
		if = { 
			limit = { tag = ROM }
			YUG = { country_event = DOD_hungary.141 }
			CZE = { country_event = DOD_hungary.141 }
		}
	}

	option = {# be firm
		name = DOD_hungary.147.b
		ai_chance = {
			factor = 20
		}
		HUN = { country_event = DOD_hungary.148 }
		FROM = { add_opinion_modifier = { target = PREV modifier = HUN_stubborn_fools } }
		HUN = { add_opinion_modifier = { target = FROM modifier = offered_support } }
	}

}

#Bled Agreement - Hungary denied rearmament
country_event = {
	id = DOD_hungary.148
	title = DOD_hungary.148.t
	desc = DOD_hungary.148.desc 
	picture = GFX_report_event_hungary_refused
	
	is_triggered_only = yes

	option = {# yield
		name = DOD_hungary.148.a
		ai_chance = {
			factor = 20
			modifier = {
				has_government = fascism
				factor = 0
			}
		}
	}

	option = {# rearm anyway
		name = DOD_hungary.148.b
		ai_chance = {
			factor = 80
		}
		add_threat = 5
		remove_ideas = HUN_treaty_of_triannon
	}

}

#fighter competition - initial choice for Hungary
country_event = {
	id = DOD_hungary.150
	title = DOD_hungary.150.t
	desc = DOD_hungary.150.desc 
	picture = GFX_report_event_fighters 
	
	is_triggered_only = yes

	option = {# light fighter
		name = DOD_hungary.150.a
		trigger = {
			OR = {
				GER = {
					is_available_fighter_HUN = yes
				}
				FRA = {
					is_available_fighter_HUN = yes
				}
				ITA = {
					is_available_fighter_HUN = yes
				}
				ENG = {
					is_available_fighter_HUN = yes
				}
				USA = {
					is_available_fighter_HUN = yes
				}
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				has_tech = fighter1
				add = -10
			}
			modifier = {
				has_tech = fighter2
				add = -10
			}
			modifier = {
				has_tech = fighter3
				factor = 0
			}
		}
		country_event = DOD_hungary.151 
		
	}

	option = {# heavy fighter
		name = DOD_hungary.150.b
		trigger = {
			OR = {
				GER = {
					is_available_heavy_fighter_HUN = yes
				}
				FRA = {
					is_available_heavy_fighter_HUN = yes
				}
				ITA = {
					is_available_heavy_fighter_HUN = yes
				}
				ENG = {
					is_available_heavy_fighter_HUN = yes
				}
				USA = {
					is_available_heavy_fighter_HUN = yes
				}
			}
		}
		country_event = DOD_hungary.152
		ai_chance = {
			factor = 50
			modifier = {
				has_tech = heavy_fighter1
				add = -10
			}
			modifier = {
				has_tech = heavy_fighter2
				add = -10
			}
			modifier = {
				has_tech = heavy_fighter3
				factor = 0
			}
		}
	}
}

#Fighter competition - Hungary is looking for a light fighter
country_event = {
	id = DOD_hungary.151
	title = DOD_hungary.151.t
	desc = {
		text = DOD_hungary.151.desc_light_fighter
		trigger = {
			NOT = { 
				has_country_flag = GER_fighter_refused
				has_country_flag = ENG_fighter_refused
				has_country_flag = USA_fighter_refused
				has_country_flag = FRA_fighter_refused
				has_country_flag = ITA_fighter_refused
			} 
		}
	}
	desc = {
		text = DOD_hungary.151.desc_light_fighter_refused
		trigger = {
			OR = {
		 		has_country_flag = GER_fighter_refused
				has_country_flag = ENG_fighter_refused
				has_country_flag = USA_fighter_refused
				has_country_flag = FRA_fighter_refused
				has_country_flag = ITA_fighter_refused
		 	}
		}
	}
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	option = {# Select German Plane
		name = DOD_hungary.151.a
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = GER
				factor = 10
			}
			modifier = {
				GER = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				GER = {
					has_tech = fighter1
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = fighter2
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					GER = { has_tech = fighter1}
					HUN = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					GER = { has_tech = fighter2}
					HUN = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					GER = { has_tech = fighter3}
					HUN = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = GER }
			NOT = { has_country_flag = GER_fighter_refused }
		}
		GER = { country_event = DOD_hungary.153 }	
	}

	option = {# select italian plane
		name = DOD_hungary.151.b
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ITA
				factor = 10
			}
			modifier = {
				ITA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ITA = {
					has_tech = fighter1
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = fighter2
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ITA = { has_tech = fighter1}
					HUN = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					ITA = { has_tech = fighter2}
					HUN = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					ITA = { has_tech = fighter3}
					HUN = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = ITA }
			NOT = { has_country_flag = ITA_fighter_refused }
		}
		ITA = { country_event = DOD_hungary.153 }	
	}

	option = {# select french plane
		name = DOD_hungary.151.c
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = FRA
				factor = 10
			}
			modifier = {
				FRA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				FRA = {
					has_tech = fighter1
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = fighter2
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					FRA = { has_tech = fighter1}
					HUN = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					FRA = { has_tech = fighter2}
					HUN = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					FRA = { has_tech = fighter3}
					HUN = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = FRA }
			NOT = { has_country_flag = FRA_fighter_refused }
			
		}
		FRA = { country_event = DOD_hungary.153 }	
	}
	option = {# select british plane
		name = DOD_hungary.151.d
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ENG
				factor = 10
			}
			modifier = {
				ENG = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ENG = {
					has_tech = fighter1
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = fighter2
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ENG = { has_tech = fighter1}
					HUN = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					ENG = { has_tech = fighter2}
					HUN = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					ENG = { has_tech = fighter3}
					HUN = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = ENG }
			NOT = { has_country_flag = ENG_fighter_refused }
		}
		ENG = { country_event = DOD_hungary.153 }	
	}
	option = {# select american plane
		name = DOD_hungary.151.e
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = USA
				factor = 10
			}
			modifier = {
				USA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				USA = {
					has_tech = fighter1
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = fighter2
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					USA = { has_tech = fighter1}
					HUN = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					USA = { has_tech = fighter2}
					HUN = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					USA = { has_tech = fighter3}
					HUN = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = USA }
			NOT = { has_country_flag = USA_fighter_refused }
			NOT = { #to prevent overflow issues
				AND = {
					GER = {
						is_available_fighter_HUN = yes
					}
					FRA = {
						is_available_fighter_HUN = yes
					}
					ITA = {
						is_available_fighter_HUN = yes
					}
					ENG = {
						is_available_fighter_HUN = yes
					}
				}
			}
		}
		USA = { country_event = DOD_hungary.153 }	
	}
	option = {# failsafe
		name = DOD_hungary.151.f	
		trigger = {
			OR = {
				has_country_flag = GER_fighter_refused
				has_country_flag = ITA_fighter_refused
				has_country_flag = ENG_fighter_refused
				has_country_flag = FRA_fighter_refused
				has_country_flag = USA_fighter_refused
			}
		}
		air_experience = 50
	}

}

#Fighter competition - Hungary is looking for a heavy fighter
country_event = {
	id = DOD_hungary.152
	title = DOD_hungary.152.t
	desc = {
		text = DOD_hungary.152.desc_heavy_fighter
		trigger = {
			NOT = { 
				has_country_flag = GER_heavy_fighter_refused
				has_country_flag = ENG_heavy_fighter_refused
				has_country_flag = USA_heavy_fighter_refused
				has_country_flag = FRA_heavy_fighter_refused
				has_country_flag = ITA_heavy_fighter_refused
			} 
		}
	}
	desc = {
		text = DOD_hungary.152.desc_heavy_fighter_refused
		trigger = {
			OR = {
		 		has_country_flag = GER_heavy_fighter_refused
				has_country_flag = ENG_heavy_fighter_refused
				has_country_flag = USA_heavy_fighter_refused
				has_country_flag = FRA_heavy_fighter_refused
				has_country_flag = ITA_heavy_fighter_refused
		 	}
		}
	}
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	option = {# Select German Plane
		name = DOD_hungary.151.a
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = GER
				factor = 10
			}
			modifier = {
				GER = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				GER = {
					has_tech = heavy_fighter1
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = heavy_fighter2
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = heavy_fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					GER = { has_tech = heavy_fighter1}
					HUN = { NOT = { has_tech = heavy_fighter1 } }
				}
				AND = {
					GER = { has_tech = heavy_fighter2}
					HUN = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					GER = { has_tech = heavy_fighter3}
					HUN = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = GER }
			NOT = { has_country_flag = GER_heavy_fighter_refused }
		}
		GER = { country_event = DOD_hungary.154 }	
	}

	option = {# select italian plane
		name = DOD_hungary.151.b
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ITA
				factor = 10
			}
			modifier = {
				ITA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ITA = {
					has_tech = heavy_fighter1
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = heavy_fighter2
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = heavy_fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ITA = { has_tech = heavy_fighter1}
					HUN = { NOT = { has_tech = heavy_fighter1 } }
				}
				AND = {
					ITA = { has_tech = heavy_fighter2}
					HUN = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					ITA = { has_tech = heavy_fighter3}
					HUN = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = ITA }
			NOT = { has_country_flag = ITA_heavy_fighter_refused }
		}
		ITA = { country_event = DOD_hungary.154 }	
	}

	option = {# select french plane
		name = DOD_hungary.151.c
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = FRA
				factor = 10
			}
			modifier = {
				FRA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				FRA = {
					has_tech = heavy_fighter1
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = heavy_fighter2
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = heavy_fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					FRA = { has_tech = heavy_fighter1}
					HUN = { NOT = { has_tech = heavy_fighter1 } }
				}
				AND = {
					FRA = { has_tech = heavy_fighter2}
					HUN = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					FRA = { has_tech = heavy_fighter3}
					HUN = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = FRA }
			NOT = { has_country_flag = FRA_heavy_fighter_refused }
			
		}
		FRA = { country_event = DOD_hungary.154 }	
	}
	option = {# select british plane
		name = DOD_hungary.151.d
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ENG
				factor = 10
			}
			modifier = {
				ENG = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ENG = {
					has_tech = heavy_fighter1
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = heavy_fighter2
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = heavy_fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ENG = { has_tech = heavy_fighter1}
					HUN = { NOT = { has_tech = heavy_fighter1 } }
				}
				AND = {
					ENG = { has_tech = heavy_fighter2}
					HUN = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					ENG = { has_tech = heavy_fighter3}
					HUN = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = ENG }
			NOT = { has_country_flag = ENG_heavy_fighter_refused }
		}
		ENG = { country_event = DOD_hungary.154 }	
	}
	option = {# select american plane
		name = DOD_hungary.151.e
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = USA
				factor = 10
			}
			modifier = {
				USA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				USA = {
					has_tech = heavy_fighter1
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = heavy_fighter2
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = heavy_fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					USA = { has_tech = heavy_fighter1}
					HUN = { NOT = { has_tech = heavy_fighter1 } }
				}
				AND = {
					USA = { has_tech = heavy_fighter2}
					HUN = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					USA = { has_tech = heavy_fighter3}
					HUN = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = USA }
			NOT = { has_country_flag = USA_heavy_fighter_refused }
			NOT = { #to prevent overflow issues
				AND = {
					GER = {
						is_available_heavy_fighter_HUN = yes
					}
					FRA = {
						is_available_heavy_fighter_HUN = yes
					}
					ITA = {
						is_available_heavy_fighter_HUN = yes
					}
					ENG = {
						is_available_heavy_fighter_HUN = yes
					}
				}
			}
		}
		USA = { country_event = DOD_hungary.154 }	
	}
	option = {# failsafe
		name = DOD_hungary.151.f	
		trigger = {
			OR = {
				has_country_flag = GER_heavy_fighter_refused
				has_country_flag = ITA_heavy_fighter_refused
				has_country_flag = ENG_heavy_fighter_refused
				has_country_flag = FRA_heavy_fighter_refused
				has_country_flag = USA_heavy_fighter_refused
			}
		}
		air_experience = 50
	}

}

#fighter competition - light fighter competition winner gets a choice whether to permit license production
country_event = {
	id = DOD_hungary.153
	title = DOD_hungary.153.t
	desc = DOD_hungary.153.desc 
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	option = {# certainly
		name = DOD_hungary.153.a
		ai_chance = {
			factor = 90
			modifier = {
				has_war = yes
				factor = 0.5
			}
		}
		HUN = { country_event = DOD_hungary.155 }
		air_experience = 20
		if = {
			limit = {
				has_tech = fighter1
				NOT = { has_tech = fighter2 }
			}
			create_production_license = {
				target = HUN 
				equipment = {
					type = fighter_equipment_1
					
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = fighter2
				NOT = { has_tech = fighter3 }
			}
			create_production_license = {
				target = HUN 
				equipment = {
					type = fighter_equipment_2
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = fighter3
			}
			create_production_license = {
				target = HUN 
				equipment = {
					type = fighter_equipment_3
				}
				cost_factor = 0
			}
		}
	}

	option = {# no
		name = DOD_hungary.153.b
		ai_chance = {
			factor = 10
			modifier = {
				is_in_faction_with = HUN
				factor = 0
			}
		}
		if = {
			limit = { tag = GER }
			HUN = { set_country_flag = GER_fighter_refused }
		}
		if = {
			limit = { tag = ITA }
			HUN = { set_country_flag = ITA_fighter_refused }
		}
		if = {
			limit = { tag = FRA }
			HUN = { set_country_flag = FRA_fighter_refused }
		}
		if = {
			limit = { tag = ENG }
			HUN = { set_country_flag = ENG_fighter_refused }
		}
		if = {
			limit = { tag = USA }
			HUN = { set_country_flag = USA_fighter_refused }
		}
		HUN = { country_event = DOD_hungary.151 }
		reverse_add_opinion_modifier = { target = HUN modifier = refused_help }
	}
}

#fighter competition - heavy fighter competition winner gets a choice whether to permit license production
country_event = {
	id = DOD_hungary.154
	title = DOD_hungary.153.t
	desc = DOD_hungary.154.desc 
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	option = {# certainly
		name = DOD_hungary.153.a
		ai_chance = {
			factor = 90
			modifier = {
				has_war = yes
				factor = 0.5
			}
		}
		air_experience = 20
		HUN = { country_event = DOD_hungary.155 }
		if = {
			limit = {
				has_tech = heavy_fighter1
				NOT = { has_tech = heavy_fighter2 }
			}
			create_production_license = {
				target = HUN 
				equipment = {
					type = heavy_fighter_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = heavy_fighter2
				NOT = { has_tech = heavy_fighter3 }
			}
			create_production_license = {
				target = HUN 
				equipment = {
					type = heavy_fighter_equipment_2	
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = heavy_fighter3
			}
			create_production_license = {
				target = HUN 
				equipment = {
					type = heavy_fighter_equipment_3
				}
				cost_factor = 0
			}
		}
		
	}

	option = {# no
		name = DOD_hungary.153.b
		ai_chance = {
			factor = 10
			modifier = {
				is_in_faction_with = HUN
				factor = 0
			}
		}
		if = {
			limit = { tag = GER }
			HUN = { set_country_flag = GER_heavy_fighter_refused }
		}
		if = {
			limit = { tag = ITA }
			HUN = { set_country_flag = ITA_heavy_fighter_refused }
		}
		if = {
			limit = { tag = FRA }
			HUN = { set_country_flag = FRA_heavy_fighter_refused }
		}
		if = {
			limit = { tag = ENG }
			HUN = { set_country_flag = ENG_heavy_fighter_refused }
		}
		if = {
			limit = { tag = USA }
			HUN = { set_country_flag = USA_heavy_fighter_refused }
		}
		HUN = { country_event = DOD_hungary.152 }
		reverse_add_opinion_modifier = { target = HUN modifier = refused_help }
	}
}

#fighter competition - license production approved
country_event = {
	id = DOD_hungary.155
	title = DOD_hungary.155.t
	desc = DOD_hungary.155.desc 
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	option = {# neat
		name = DOD_hungary.155.a
		
	}
}


#bomber competition - initial choice for Hungary
country_event = {
	id = DOD_hungary.160
	title = DOD_hungary.160.t
	desc = DOD_hungary.160.desc 
	picture = GFX_report_event_generic_bombers
	
	is_triggered_only = yes

	option = {# CAS
		name = DOD_hungary.160.a
		trigger = {
			OR = {
				GER = {
					is_available_cas_HUN = yes
				}
				FRA = {
					is_available_cas_HUN = yes
				}
				ITA = {
					is_available_cas_HUN = yes
				}
				ENG = {
					is_available_cas_HUN = yes
				}
				USA = {
					is_available_cas_HUN = yes
				}
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				has_tech = CAS1
				add = -10
			}
			modifier = {
				has_tech = CAS2
				add = -10
			}
			modifier = {
				has_tech = CAS3
				factor = 0
			}
		}
		country_event = DOD_hungary.161 	
	}

	option = {# TAC
		name = DOD_hungary.160.b
		trigger = {
			OR = {
				GER = {
					is_available_tac_HUN = yes
				}
				FRA = {
					is_available_tac_HUN = yes
				}
				ITA = {
					is_available_tac_HUN = yes
				}
				ENG = {
					is_available_tac_HUN = yes
				}
				USA = {
					is_available_tac_HUN = yes
				}
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				has_tech = tactical_bomber1
				add = -10
			}
			modifier = {
				has_tech = tactical_bomber2
				add = -10
			}
			modifier = {
				has_tech = tactical_bomber3
				factor = 0
			}
		}
		country_event = DOD_hungary.162
	}
}

#Bomber competition - Hungary is looking for a CAS
country_event = {
	id = DOD_hungary.161
	title = DOD_hungary.161.t
	desc = {
		text = DOD_hungary.161.desc_cas
		trigger = {
			NOT = { 
				has_country_flag = GER_CAS_refused
				has_country_flag = ENG_CAS_refused
				has_country_flag = USA_CAS_refused
				has_country_flag = FRA_CAS_refused
				has_country_flag = ITA_CAS_refused
			} 
		}
	}
	desc = {
		text = DOD_hungary.161.desc_cas_refused
		trigger = {
			OR = {
		 		has_country_flag = GER_CAS_refused
				has_country_flag = ENG_CAS_refused
				has_country_flag = USA_CAS_refused
				has_country_flag = FRA_CAS_refused
				has_country_flag = ITA_CAS_refused
		 	}
		}
	}
	picture = GFX_report_event_generic_bombers
	
	is_triggered_only = yes

	option = {# Select German Plane
		name = DOD_hungary.151.a
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = GER
				factor = 10
			}
			modifier = {
				GER = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				GER = {
					has_tech = CAS1
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = CAS2
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = CAS3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					GER = { has_tech = CAS1}
					HUN = { NOT = { has_tech = CAS1 } }
				}
				AND = {
					GER = { has_tech = CAS2}
					HUN = { NOT = { has_tech = CAS2 } }
				}
				AND = {
					GER = { has_tech = CAS3}
					HUN = { NOT = { has_tech = CAS3 } }
				}
			}
			NOT = { has_war_with = GER }
			NOT = { has_country_flag = GER_CAS_refused }
		}
		GER = { country_event = DOD_hungary.163 }	
	}

	option = {# select italian plane
		name = DOD_hungary.151.b
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ITA
				factor = 10
			}
			modifier = {
				ITA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ITA = {
					has_tech = CAS1
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = CAS2
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = CAS3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ITA = { has_tech = CAS1}
					HUN = { NOT = { has_tech = CAS1 } }
				}
				AND = {
					ITA = { has_tech = CAS2}
					HUN = { NOT = { has_tech = CAS2 } }
				}
				AND = {
					ITA = { has_tech = CAS3}
					HUN = { NOT = { has_tech = CAS3 } }
				}
			}
			NOT = { has_war_with = ITA }
			NOT = { has_country_flag = ITA_CAS_refused }
		}
		ITA = { country_event = DOD_hungary.163 }	
	}

	option = {# select french plane
		name = DOD_hungary.151.c
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = FRA
				factor = 10
			}
			modifier = {
				FRA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				FRA = {
					has_tech = CAS1
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = CAS2
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = CAS3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					FRA = { has_tech = CAS1}
					HUN = { NOT = { has_tech = CAS1 } }
				}
				AND = {
					FRA = { has_tech = CAS2}
					HUN = { NOT = { has_tech = CAS2 } }
				}
				AND = {
					FRA = { has_tech = CAS3}
					HUN = { NOT = { has_tech = CAS3 } }
				}
			}
			NOT = { has_war_with = FRA }
			NOT = { has_country_flag = FRA_CAS_refused }
		}
		FRA = { country_event = DOD_hungary.163 }	
	}
	option = {# select british plane
		name = DOD_hungary.151.d
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ENG
				factor = 10
			}
			modifier = {
				ENG = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ENG = {
					has_tech = CAS1
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = CAS2
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = CAS3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ENG = { has_tech = CAS1}
					HUN = { NOT = { has_tech = CAS1 } }
				}
				AND = {
					ENG = { has_tech = CAS2}
					HUN = { NOT = { has_tech = CAS2 } }
				}
				AND = {
					ENG = { has_tech = CAS3}
					HUN = { NOT = { has_tech = CAS3 } }
				}
			}
			NOT = { has_war_with = ENG }
			NOT = { has_country_flag = ENG_CAS_refused }
		}
		ENG = { country_event = DOD_hungary.163 }	
	}
	option = {# select american plane
		name = DOD_hungary.151.e
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = USA
				factor = 10
			}
			modifier = {
				USA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				USA = {
					has_tech = CAS1
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = CAS2
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = CAS3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					USA = { has_tech = CAS1}
					HUN = { NOT = { has_tech = CAS1 } }
				}
				AND = {
					USA = { has_tech = CAS2}
					HUN = { NOT = { has_tech = CAS2 } }
				}
				AND = {
					USA = { has_tech = CAS3}
					HUN = { NOT = { has_tech = CAS3 } }
				}
			}
			NOT = { has_war_with = USA }
			NOT = { has_country_flag = USA_CAS_refused }
			NOT = { #to prevent overflow issues
				AND = {
					GER = {
						is_available_cas_HUN = yes
					}
					FRA = {
						is_available_cas_HUN = yes
					}
					ITA = {
						is_available_cas_HUN = yes
					}
					ENG = {
						is_available_cas_HUN = yes
					}
				}
			}
		}
		USA = { country_event = DOD_hungary.163 }	
	}
	option = {# failsafe
		name = DOD_hungary.151.f	
		trigger = {
			OR = {
				has_country_flag = GER_CAS_refused
				has_country_flag = ITA_CAS_refused
				has_country_flag = ENG_CAS_refused
				has_country_flag = FRA_CAS_refused
				has_country_flag = USA_CAS_refused
			}
		}
		air_experience = 50
	}

}
#bomber competition - Hungary is looking for a tacbomber
country_event = {
	id = DOD_hungary.162
	title = DOD_hungary.162.t
	desc = {
		text = DOD_hungary.162.desc_tac
		trigger = {
			NOT = { 
				has_country_flag = GER_tactical_bomber_refused
				has_country_flag = ENG_tactical_bomber_refused
				has_country_flag = USA_tactical_bomber_refused
				has_country_flag = FRA_tactical_bomber_refused
				has_country_flag = ITA_tactical_bomber_refused
			} 
		}
	}
	desc = {
		text = DOD_hungary.162.desc_tac_refused
		trigger = {
			OR = {
		 		has_country_flag = GER_tactical_bomber_refused
				has_country_flag = ENG_tactical_bomber_refused
				has_country_flag = USA_tactical_bomber_refused
				has_country_flag = FRA_tactical_bomber_refused
				has_country_flag = ITA_tactical_bomber_refused
		 	}
		}
	}
	picture = GFX_report_event_generic_bombers
	
	is_triggered_only = yes

	option = {# Select German Plane
		name = DOD_hungary.151.a
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = GER
				factor = 10
			}
			modifier = {
				GER = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				GER = {
					has_tech = tactical_bomber1
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = tactical_bomber2
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = tactical_bomber3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					GER = { has_tech = tactical_bomber1}
					HUN = { NOT = { has_tech = tactical_bomber1 } }
				}
				AND = {
					GER = { has_tech = tactical_bomber2}
					HUN = { NOT = { has_tech = tactical_bomber2 } }
				}
				AND = {
					GER = { has_tech = tactical_bomber3}
					HUN = { NOT = { has_tech = tactical_bomber3 } }
				}
			}
			NOT = { has_war_with = GER }
			NOT = { has_country_flag = GER_tactical_bomber_refused }
		}
		GER = { country_event = DOD_hungary.164 }	
	}

	option = {# select italian plane
		name = DOD_hungary.151.b
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ITA
				factor = 10
			}
			modifier = {
				ITA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ITA = {
					has_tech = tactical_bomber1
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = tactical_bomber2
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = tactical_bomber3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ITA = { has_tech = tactical_bomber1}
					HUN = { NOT = { has_tech = tactical_bomber1 } }
				}
				AND = {
					ITA = { has_tech = tactical_bomber2}
					HUN = { NOT = { has_tech = tactical_bomber2 } }
				}
				AND = {
					ITA = { has_tech = tactical_bomber3}
					HUN = { NOT = { has_tech = tactical_bomber3 } }
				}
			}
			NOT = { has_war_with = ITA }
			NOT = { has_country_flag = ITA_tactical_bomber_refused }
		}
		ITA = { country_event = DOD_hungary.164 }	
	}

	option = {# select french plane
		name = DOD_hungary.151.c
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = FRA
				factor = 10
			}
			modifier = {
				FRA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				FRA = {
					has_tech = tactical_bomber1
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = tactical_bomber2
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = tactical_bomber3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					FRA = { has_tech = tactical_bomber1}
					HUN = { NOT = { has_tech = tactical_bomber1 } }
				}
				AND = {
					FRA = { has_tech = tactical_bomber2}
					HUN = { NOT = { has_tech = tactical_bomber2 } }
				}
				AND = {
					FRA = { has_tech = tactical_bomber3}
					HUN = { NOT = { has_tech = tactical_bomber3 } }
				}
			}
			NOT = { has_war_with = FRA }
			NOT = { has_country_flag = FRA_tactical_bomber_refused }
		}
		FRA = { country_event = DOD_hungary.164 }	
	}
	option = {# select british plane
		name = DOD_hungary.151.d
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ENG
				factor = 10
			}
			modifier = {
				ENG = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ENG = {
					has_tech = tactical_bomber1
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = tactical_bomber2
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = tactical_bomber3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ENG = { has_tech = tactical_bomber1}
					HUN = { NOT = { has_tech = tactical_bomber1 } }
				}
				AND = {
					ENG = { has_tech = tactical_bomber2}
					HUN = { NOT = { has_tech = tactical_bomber2 } }
				}
				AND = {
					ENG = { has_tech = tactical_bomber3}
					HUN = { NOT = { has_tech = tactical_bomber3 } }
				}
			}
			NOT = { has_war_with = ENG }
			NOT = { has_country_flag = ENG_tactical_bomber_refused }
		}
		ENG = { country_event = DOD_hungary.164 }	
	}
	option = {# select american plane
		name = DOD_hungary.151.e
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = USA
				factor = 10
			}
			modifier = {
				USA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				USA = {
					has_tech = tactical_bomber1
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = tactical_bomber2
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = tactical_bomber3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					USA = { has_tech = tactical_bomber1}
					HUN = { NOT = { has_tech = tactical_bomber1 } }
				}
				AND = {
					USA = { has_tech = tactical_bomber2}
					HUN = { NOT = { has_tech = tactical_bomber2 } }
				}
				AND = {
					USA = { has_tech = tactical_bomber3}
					HUN = { NOT = { has_tech = tactical_bomber3 } }
				}
			}
			NOT = { has_war_with = USA }
			NOT = { has_country_flag = USA_tactical_bomber_refused }
			NOT = { #to prevent overflow issues
				AND = {
					GER = {
						is_available_tac_HUN = yes
					}
					FRA = {
						is_available_tac_HUN = yes
					}
					ITA = {
						is_available_tac_HUN = yes
					}
					ENG = {
						is_available_tac_HUN = yes
					}
				}
			}
		}
		USA = { country_event = DOD_hungary.164 }	
	}
	option = {# failsafe
		name = DOD_hungary.151.f	
		trigger = {
			OR = {
				has_country_flag = GER_tactical_bomber_refused
				has_country_flag = ITA_tactical_bomber_refused
				has_country_flag = ENG_tactical_bomber_refused
				has_country_flag = FRA_tactical_bomber_refused
				has_country_flag = USA_tactical_bomber_refused
			}
		}
		air_experience = 50
	}

}

#bomber competition - CAS competition winner gets a choice whether to permit license production
country_event = {
	id = DOD_hungary.163
	title = DOD_hungary.163.t
	desc = DOD_hungary.163.desc 
	picture = GFX_report_event_generic_bombers
	
	is_triggered_only = yes

	option = {# certainly
		name = DOD_hungary.153.a
		ai_chance = {
			factor = 90
			modifier = {
				has_war = yes
				factor = 0.5
			}
		}
		air_experience = 20
		HUN = { country_event = DOD_hungary.165 }
		if = {
			limit = {
				has_tech = CAS1
				NOT = { has_tech = CAS2 }
			}
			create_production_license = {
				target = HUN 
				equipment = {
					type = CAS_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = CAS2
				NOT = { has_tech = CAS3 }
			}
			create_production_license = {
				target = HUN 
				equipment = {
					type = CAS_equipment_2	
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = CAS3
			}
			create_production_license = {
				target = HUN 
				equipment = {
					type = CAS_equipment_3
				}
				cost_factor = 0
			}
		}
	}

	option = {# no
		name = DOD_hungary.153.b
		ai_chance = {
			factor = 10
			modifier = {
				is_in_faction_with = HUN
				factor = 0
			}
		}
		if = {
			limit = { tag = GER }
			HUN = { set_country_flag = GER_CAS_refused }
		}
		if = {
			limit = { tag = ITA }
			HUN = { set_country_flag = ITA_CAS_refused }
		}
		if = {
			limit = { tag = FRA }
			HUN = { set_country_flag = FRA_CAS_refused }
		}
		if = {
			limit = { tag = ENG }
			HUN = { set_country_flag = ENG_CAS_refused }
		}
		if = {
			limit = { tag = USA }
			HUN = { set_country_flag = USA_CAS_refused }
		}
		HUN = { country_event = DOD_hungary.161 }
		reverse_add_opinion_modifier = { target = HUN modifier = refused_help }
	}
}

#bomber competition - tac bomber competition winner gets a choice whether to permit license production
country_event = {
	id = DOD_hungary.164
	title = DOD_hungary.164.t
	desc = DOD_hungary.164.desc 
	picture = GFX_report_event_generic_bombers
	
	is_triggered_only = yes

	option = {# certainly
		name = DOD_hungary.153.a
		ai_chance = {
			factor = 90
			modifier = {
				has_war = yes
				factor = 0.5
			}
		}
		HUN = { country_event = DOD_hungary.165 }
		air_experience = 20
		if = {
			limit = {
				has_tech = tactical_bomber1
				NOT = { has_tech = tactical_bomber2 }
			}
			create_production_license = {
				target = HUN 
				equipment = {
					type = tac_bomber_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tactical_bomber2
				NOT = { has_tech = tactical_bomber3 }
			}
			create_production_license = {
				target = HUN 
				equipment = {
					type = tac_bomber_equipment_2	
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tactical_bomber3
			}
			create_production_license = {
				target = HUN 
				equipment = {
					type = tac_bomber_equipment_3
				}
				cost_factor = 0
			}
		}
	}

	option = {# no
		name = DOD_hungary.153.b
		ai_chance = {
			factor = 10
			modifier = {
				is_in_faction_with = HUN
				factor = 0
			}
		}
		if = {
			limit = { tag = GER }
			HUN = { set_country_flag = GER_tactical_bomber_refused }
		}
		if = {
			limit = { tag = ITA }
			HUN = { set_country_flag = ITA_tactical_bomber_refused }
		}
		if = {
			limit = { tag = FRA }
			HUN = { set_country_flag = FRA_tactical_bomber_refused }
		}
		if = {
			limit = { tag = ENG }
			HUN = { set_country_flag = ENG_tactical_bomber_refused }
		}
		if = {
			limit = { tag = USA }
			HUN = { set_country_flag = USA_tactical_bomber_refused }
		}
		HUN = { country_event = DOD_hungary.162 }
		reverse_add_opinion_modifier = { target = HUN modifier = refused_help }
	}
}

#bomber competition - license production approved
country_event = {
	id = DOD_hungary.165
	title = DOD_hungary.165.t
	desc = DOD_hungary.165.desc 
	picture = GFX_report_event_generic_bombers
	
	is_triggered_only = yes

	option = {# neat
		name = DOD_hungary.165.a
		
	}
}

add_namespace = dod_news


# deliver the Sudetenland
news_event = {
	id = dod_news.4
	title = dod_news.4.t
	desc = dod_news.4.d
	picture = GFX_news_event_generic_read_write
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = dod_news.4.a
		trigger = {
			TAG = CZE
		}
	}
	option = {
		name = dod_news.4.b
		trigger = {
			TAG = GER
		}
	}
	option = {
		name = dod_news.4.c
		trigger = {
			is_in_faction_with = GER
			NOT = {
				TAG = GER
			}
			NOT = { TAG = CZE }
		}
	}
	option = {
		name = dod_news.4.e
		trigger = {
			NOT = { 
				TAG = CZE
				TAG = GER
				is_in_faction_with = GER
			}
		}
	}
}


###########################
# Romanian Events
###########################

add_namespace = DOD_romania

#Jakob: 80-90
#Gabriel: 100-110

# Romania wants to strengthen the Romanian-polish Alliance - event for Poland
country_event = {
	id = DOD_romania.1
	title = DOD_romania.1.t
	desc = DOD_romania.1.desc
	picture = GFX_report_event_romania_poland_visit
	
	is_triggered_only = yes
	
	option = { #sure
		name = DOD_romania.1.a
		ai_chance = {
			factor = 70
			modifier = {
				threat > 0.2
				factor = 2
			}
			modifier = {
				threat > 0.4
				factor = 2
			}
		}
		ROM = { country_event = DOD_romania.2 }
		give_guarantee = ROM
	}

	option = { #no
		name = DOD_romania.1.b
		ai_chance = {
			factor = 30
		}
		ROM = { country_event = DOD_romania.3 }	
	}

}
#Romania wants to strengthen the Romanian-polish alliance - Poland agrees
country_event = {
	id = DOD_romania.2 
	title = DOD_romania.2.t
	desc = DOD_romania.2.desc
	picture = GFX_report_event_romania_poland_visit
	
	is_triggered_only = yes

	option = { #cool
		name = DOD_romania.2.a
		give_guarantee = POL
		hidden_effect = {
			news_event = { id = news.316 days = 1 }
		}
	}

}

#Romania wants to strengthen the Romanian-polish alliance - Poland refuses
country_event = {
	id = DOD_romania.3 
	title = DOD_romania.3.t
	desc = DOD_romania.3.desc
	picture = GFX_report_event_poland_rejects
	
	is_triggered_only = yes

	option = { #cool
		name = DOD_romania.3.a
		add_opinion_modifier = { target = FROM modifier = refused_alliance }
	}

}

# Romania creates the Cordon Sanitaire - event for POL/CZE to join
country_event = {
	id = DOD_romania.10
	title = DOD_romania.10.t
	desc = DOD_romania.10.desc
	picture = GFX_report_event_generic_conference
	
	is_triggered_only = yes
	
	option = { #sure
		name = DOD_romania.10.a
		ai_chance = {
			factor = 70
			modifier = {
				threat > 0.3
				add = 30
			}
		}
		ROM = { country_event = DOD_romania.11 }
		add_ai_strategy = {
					type = alliance
					id = "ROM"
					value = 200
				}
	}

	option = { #no
		name = DOD_romania.10.b
		ai_chance = {
			factor = 30
			modifier = {
				threat > 0.5
				factor = 0
			}
		}
		ROM = { country_event = DOD_romania.12 }	
	}

}
#Cordon Sanitaire - country agrees
country_event = {
	id = DOD_romania.11 
	title = DOD_romania.11.t
	desc = DOD_romania.11.desc
	picture = GFX_report_event_generic_sign_treaty3
	
	is_triggered_only = yes

	option = { #cool
		name = DOD_romania.11.a
		add_to_faction = FROM
	}

}

#Cordon sanitaire - country refuses
country_event = {
	id = DOD_romania.12 
	title = DOD_romania.12.t
	desc = DOD_romania.12.desc
	picture = GFX_report_event_poland_rejects
	
	is_triggered_only = yes

	option = { #cool
		name = DOD_romania.12.a
		add_opinion_modifier = { target = FROM modifier = refused_alliance }
	}

}

# Romania demands western guarantee
country_event = {
	id = DOD_romania.20
	title = DOD_romania.20.t
	desc = DOD_romania.20.desc
	picture = GFX_report_event_generic_rally
	
	is_triggered_only = yes
	
	option = { #sure
		name = DOD_romania.20.a
		ai_chance = {
			factor = 80
			modifier = {
				threat > 0.25
				factor = 2
			}
		}
		give_guarantee = ROM
		ROM = { country_event = DOD_romania.21 }
	}

	option = { #no
		name = DOD_romania.20.b
		ai_chance = {
			factor = 20
			modifier = {
				ROM = {
					has_added_tension_amount > 0.01
				}
				factor = 1.5 #Romania was naughty
			}
		}
		ROM = { country_event = DOD_romania.22 }	
	}

}
#western guarantee - country agrees
country_event = {
	id = DOD_romania.21 
	title = DOD_romania.21.t
	desc = DOD_romania.21.desc
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes

	option = { #cool
		name = DOD_romania.21.a
	}

}

#western guarantee - country refuses
country_event = {
	id = DOD_romania.22 
	title = DOD_romania.22.t
	desc = DOD_romania.22.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = { #cool
		name = DOD_romania.22.a
		add_opinion_modifier = { target = FROM modifier = refused_alliance }
	}

}

# Romania wants to make a deal with SOV - event for SOV
country_event = {
	id = DOD_romania.30
	title = DOD_romania.30.t
	desc = {
		text = DOD_romania.30.desc
		trigger = {
			SOV = { has_government = communism }
		}
	}
	desc = {
		text = DOD_romania.30.desc_alt
		trigger = {
			NOT = { SOV = { has_government = communism } }
		}
	}
	picture = GFX_report_event_aid_pact
	
	is_triggered_only = yes
	
	option = { #sure
		name = DOD_romania.30.a
		give_guarantee = ROM
		ai_chance = {
			factor = 70
			modifier = {
				ROM = { has_government = communism }
				factor = 3
			}
		}
		ROM = { country_event = DOD_romania.31 }
	}

	option = { #no
		name = DOD_romania.30.b
		ai_chance = {
			factor = 0
		}
		ROM = { country_event = DOD_romania.32 }	
	}

}
#SOV agrees, gets military access in return
country_event = {
	id = DOD_romania.31 
	title = DOD_romania.31.t
	desc = DOD_romania.31.desc
	picture = GFX_report_event_soviet_soldiers
	
	is_triggered_only = yes

	option = { #cool
		name = DOD_romania.31.a
		give_military_access = SOV
	}

}

#SOV refuses
country_event = {
	id = DOD_romania.32 
	title = DOD_romania.32.t
	desc = DOD_romania.32.desc
	picture = GFX_report_event_stalin_meeting
	
	is_triggered_only = yes

	option = { #cool
		name = DOD_romania.32.a
		add_opinion_modifier = { target = FROM modifier = refused_alliance }
	}

}

# Romania puppets Bulgaria - event for Bulgaria to accept
country_event = {
	id = DOD_romania.40
	title = DOD_romania.40.t
	desc = DOD_romania.40.desc
	picture = GFX_report_event_romanian_soldiers
	
	is_triggered_only = yes
	
	option = { #sure
		name = DOD_romania.40.a
		ai_chance = {
			factor = 30
			modifier = {
				strength_ratio = { tag = ROM ratio < 0.8 }
				factor = 2
			}
			modifier = {
				strength_ratio = { tag = ROM ratio < 0.5 }
				factor = 10
			}
			modifier = {
				is_in_faction = yes
				factor = 0.5
			}
		}
		ROM = { country_event = DOD_romania.41 }
	}

	option = { #no
		name = DOD_romania.40.b
		ai_chance = {
			factor = 70
			modifier = {
				is_in_faction = no
				factor = 0.5
			}
		}
		ROM = { country_event = DOD_romania.42 }	
	}

}
#Bulgaria agrees
country_event = {
	id = DOD_romania.41 
	title = DOD_romania.41.t
	desc = DOD_romania.41.desc
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes

	option = { #cool
		name = DOD_romania.41.a
		puppet = BUL
		hidden_effect = {
			news_event = { id = news.318 days = 1 }
		}
	}

}

#BUL refuses
country_event = {
	id = DOD_romania.42 
	title = DOD_romania.42.t
	desc = DOD_romania.42.desc
	picture = GFX_report_event_bulgarian_soldiers
	
	is_triggered_only = yes

	option = { #cool
		name = DOD_romania.42.a
		ai_chance = {
			factor = 10
			modifier = {
				strength_ratio = { tag = BUL ratio < 1 }
				factor = 10
			}
			modifier = {
				BUL = {
					is_in_faction = yes
				}
				factor = 10
			}
		}
		
	}

	option = { #war
		name = DOD_romania.42.b
		ai_chance = {
			factor = 90
		}
		create_wargoal = {
			type = puppet_wargoal_focus
			target = BUL
		}
		news_event = { id = news.319 days = 1 }
	}

}

# Romania aligns Hungary - initial event
country_event = {
	id = DOD_romania.50
	title = DOD_romania.50.t
	desc = DOD_romania.50.desc
	picture = GFX_report_event_journalists_speech
	
	is_triggered_only = yes
	
	option = { #become their puppet
		name = DOD_romania.50.a
		ai_chance = {
			factor = 25
		}
		ROM = { country_event = DOD_romania.51 }
	}

	option = { #change government to Romanian type, enter alliance
		name = DOD_romania.50.b
		ai_chance = {
			factor = 25
		}
		ROM = { country_event = DOD_romania.52 }	
	}

	option = { #no deals
		name = DOD_romania.50.c
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				ROM = {
					is_in_faction = no
				}
			}
			modifier = {
				factor = 10
				is_in_faction = yes
			}
		}
		ROM = { country_event = DOD_romania.53 }	
	}

}
#hungary agrees to become puppet
country_event = {
	id = DOD_romania.51 
	title = DOD_romania.51.t
	desc = DOD_romania.51.desc
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes

	option = { #cool
		name = DOD_romania.51.a
		puppet = HUN
		set_country_flag = ROM_HUN_aligned
	}

}

#HUN offers to align somewhat
country_event = {
	id = DOD_romania.52 
	title = DOD_romania.52.t
	desc = DOD_romania.52.desc
	picture = GFX_report_event_hungary_parliament
	
	is_triggered_only = yes

	option = { #cool
		name = DOD_romania.52.a
		ai_chance = {
			factor = 80
		}
		if = {
			limit = { is_faction_leader = yes }
			add_to_faction = HUN
		}
		if = {
			limit = {
				is_in_faction = no
			}
			set_rule = { can_create_factions = yes }
			create_faction = ROM_BALKAN_FACTION
			add_to_faction = HUN
		}
		set_country_flag = ROM_HUN_aligned
	}

	option = { #war
		name = DOD_romania.52.b
		ai_chance = {
			factor = 20
		}
		create_wargoal = {
			type = puppet_wargoal_focus
			target = HUN
		}
		set_country_flag = HUN_ROM_puppet_war
	}

}

#HUN refuses
country_event = {
	id = DOD_romania.53 
	title = DOD_romania.53.t
	desc = DOD_romania.53.desc
	picture = GFX_report_event_hungarian_soldiers
	
	is_triggered_only = yes

	option = { #cool
		name = DOD_romania.53.a
		ai_chance = {
			factor = 10
			modifier = {
				strength_ratio = { tag = HUN ratio < 0.5 }
				factor = 7
			}
		}
	}

	option = { #war
		name = DOD_romania.53.b
		ai_chance = {
			factor = 90
			modifier = {
				has_war = yes
				factor = 0
			}
		}
		create_wargoal = {
			type = puppet_wargoal_focus
			target = HUN
		}
	}

}

# King Carol II's lifestyle events
#Hidden dispatch event
country_event = {
	id = DOD_romania.80
	
	is_triggered_only = yes

	hidden = yes

	immediate = {
		random_list = {
			20 = { country_event = { id = DOD_romania.81 days = 160 random_days = 30 } } #villa
			20 = { country_event = { id = DOD_romania.82 days = 160 random_days = 30 } } #book
			20 = { country_event = { id = DOD_romania.83 days = 160 random_days = 30 } } #party
			20 = { country_event = { id = DOD_romania.86 days = 160 random_days = 30 } } #êmbezzlement
			20 = {
				if = {
					limit = {
						FRA = { has_war = no }
					}
					country_event = { id = DOD_romania.84 days = 160 random_days = 30 }
					else = {
						country_event = { id = DOD_romania.80 }
					}
				}
			}
			20 = {
				if = {
					limit = {
						FRA = { NOT = { has_war_with = ITA } }
					}
					country_event = { id = DOD_romania.85 days = 160 random_days = 30 }
					else = {
						country_event = { id = DOD_romania.80 }
					}
				}
			}
		}
	}
}

# King Carol II's lifestyle events - Mistress buys villa
country_event = {
	id = DOD_romania.81
	title = DOD_romania.81.t
	desc = DOD_romania.81.desc
	picture = GFX_report_event_ROM_mistress
	
	is_triggered_only = yes

	trigger = {
		has_idea = ROM_king_carol_ii_hedonist
	}

	immediate = {
		set_country_flag = DOD_romania.81_fired
	}

	option = { #Pay for it
		name = DOD_romania.81.a
		ai_chance = {
			base = 1
			modifier = {
				add = 5
				has_war = no
				amount_taken_ideas = {
					amount < 3
					slots = { political_advisor }
				}
			}
			modifier = {
				add = 5
				has_war = no
				amount_taken_ideas = {
					amount < 2
					slots = { political_advisor }
				}
			}
			modifier = {
				add = 5
				has_war = no
				amount_taken_ideas = {
					amount < 1
					slots = { political_advisor }
				}
			}			
			modifier = {
				add = 5
				amount_taken_ideas = {
					amount < 1
					slots = { army_chief }
				}
			}

		}
		add_timed_idea = { idea = ROM_king_carol_ii_consumer_penalty days = 90 }
		hidden_effect = {
			country_event = { id = DOD_romania.80 }
		}
	}
	option = { #Negotiate a deal
		name = DOD_romania.81.b
		ai_chance = {
			base = 4
			modifier = {
				add = -2
				date < 1937.01.02
				has_war = no
			}
			modifier = {
				add = 20
				OR = {
					has_war = yes
					any_other_country = {
						OR = {
							is_justifying_wargoal_against = ROOT
							has_wargoal_against = ROOT
						}
					}
				}
			}
			modifier = {
				add = 20
				date > 1937.01.02
			}
		}
		add_political_power = -90
		add_timed_idea = { idea = ROM_king_carol_ii_paid_with_pp days = 90 }
		hidden_effect = {
			country_event = { id = DOD_romania.80 }
		}
	}

}
# King Carol's Lifestyle - King bans critical book
country_event = {
	id = DOD_romania.82
	title = DOD_romania.82.t
	desc = DOD_romania.82.desc
	picture = GFX_report_event_ROM_mistress
	
	is_triggered_only = yes

	trigger = {
		has_idea = ROM_king_carol_ii_hedonist
	}

	immediate = {
		set_country_flag = DOD_romania.82_fired
	}

	option = { #keep author imprisoned
		name = DOD_romania.82.a
		ai_chance = {
			base = 1
		}
		add_stability = -0.05
		add_popularity = { ideology = fascism popularity = 0.05 } #because she is Jewish
		add_popularity = { ideology = democratic popularity = 0.05 } #because Freedom of the Press
		hidden_effect = {
			country_event = { id = DOD_romania.80 }
		}
	}
	option = { #Release him
		name = DOD_romania.82.b
		ai_chance = {
			base = 3
		}
		add_political_power = -90
		hidden_effect = {
			country_event = { id = DOD_romania.80 }
		}
	}
}

# King Carol II's lifestyle events - King throws big party
country_event = {
	id = DOD_romania.83
	title = DOD_romania.83.t
	desc = DOD_romania.83.desc
	picture = GFX_report_event_carol_party
	
	is_triggered_only = yes
	trigger = {
		has_idea = ROM_king_carol_ii_hedonist
	}

	immediate = {
		set_country_flag = DOD_romania.83_fired
	}

	option = { #Pay for it
		name = DOD_romania.83.a
		ai_chance = {
			base = 1
			modifier = {
				add = 5
				has_war = no
				amount_taken_ideas = {
					amount < 3
					slots = { political_advisor }
				}
			}
			modifier = {
				add = 5
				has_war = no
				amount_taken_ideas = {
					amount < 2
					slots = { political_advisor }
				}
			}
			modifier = {
				add = 5
				has_war = no
				amount_taken_ideas = {
					amount < 1
					slots = { political_advisor }
				}
			}			
			modifier = {
				add = 5
				amount_taken_ideas = {
					amount < 1
					slots = { army_chief }
				}
			}

		}
		add_timed_idea = { idea = ROM_king_carol_ii_consumer_penalty days = 90 }
		hidden_effect = {
			country_event = { id = DOD_romania.80 }
		}
	}
	option = { #Negotiate a deal
		name = DOD_romania.83.b
		ai_chance = {
			base = 4
			modifier = {
				add = -2
				date < 1937.01.02
				has_war = no
			}
			modifier = {
				add = 20
				OR = {
					has_war = yes
					any_other_country = {
						OR = {
							is_justifying_wargoal_against = ROOT
							has_wargoal_against = ROOT
						}
					}
				}
			}
			modifier = {
				add = 20
				date > 1937.01.02
			}
		}
		add_political_power = -90
		add_timed_idea = { idea = ROM_king_carol_ii_paid_with_pp days = 90 }
		hidden_effect = {
			country_event = { id = DOD_romania.80 }
		}
	}
}

# King Carol II's lifestyle events - Mistress on shopping spree in France
country_event = {
	id = DOD_romania.84
	title = DOD_romania.84.t
	desc = DOD_romania.84.desc
	picture = GFX_report_event_ROM_mistress
	
	is_triggered_only = yes

	trigger = {
		has_idea = ROM_king_carol_ii_hedonist
	}

	immediate = {
		set_country_flag = DOD_romania.84_fired
	}

	option = { #Pay for it
		name = DOD_romania.84.a
		ai_chance = {
			base = 1
			modifier = {
				add = 5
				has_war = no
				amount_taken_ideas = {
					amount < 3
					slots = { political_advisor }
				}
			}
			modifier = {
				add = 5
				has_war = no
				amount_taken_ideas = {
					amount < 2
					slots = { political_advisor }
				}
			}
			modifier = {
				add = 5
				has_war = no
				amount_taken_ideas = {
					amount < 1
					slots = { political_advisor }
				}
			}			
			modifier = {
				add = 5
				amount_taken_ideas = {
					amount < 1
					slots = { army_chief }
				}
			}

		}
		add_timed_idea = { idea = ROM_king_carol_ii_consumer_penalty days = 90 }
		hidden_effect = {
			country_event = { id = DOD_romania.80 }
		}
	}
	option = { #Negotiate a deal
		name = DOD_romania.84.b
		ai_chance = {
			base = 4
			modifier = {
				add = -2
				date < 1937.01.02
				has_war = no
			}
			modifier = {
				add = 20
				OR = {
					has_war = yes
					any_other_country = {
						OR = {
							is_justifying_wargoal_against = ROOT
							has_wargoal_against = ROOT
						}
					}
				}
			}
			modifier = {
				add = 20
				date > 1937.01.02
			}
		}
		add_political_power = -90
		add_timed_idea = { idea = ROM_king_carol_ii_paid_with_pp days = 90 }
		hidden_effect = {
			country_event = { id = DOD_romania.80 }
		}
	}
}

# King Carol II's lifestyle events - King takes expensive holiday (somewhere in southern France)
country_event = {
	id = DOD_romania.85
	title = DOD_romania.85.t
	desc = DOD_romania.85.desc
	picture = GFX_report_event_carol_party
	
	is_triggered_only = yes

	trigger = {
		has_idea = ROM_king_carol_ii_hedonist
	}

	immediate = {
		set_country_flag = DOD_romania.85_fired
	}

	option = { #Pay for it
		name = DOD_romania.85.a
		ai_chance = {
			base = 1
			modifier = {
				add = 5
				has_war = no
				amount_taken_ideas = {
					amount < 3
					slots = { political_advisor }
				}
			}
			modifier = {
				add = 5
				has_war = no
				amount_taken_ideas = {
					amount < 2
					slots = { political_advisor }
				}
			}
			modifier = {
				add = 5
				has_war = no
				amount_taken_ideas = {
					amount < 1
					slots = { political_advisor }
				}
			}			
			modifier = {
				add = 5
				amount_taken_ideas = {
					amount < 1
					slots = { army_chief }
				}
			}

		}
		add_timed_idea = { idea = ROM_king_carol_ii_consumer_penalty days = 90 }
		hidden_effect = {
			country_event = { id = DOD_romania.80 }
		}
	}
	option = { #Negotiate a deal
		name = DOD_romania.85.b
		ai_chance = {
			base = 4
			modifier = {
				add = -2
				date < 1937.01.02
				has_war = no
			}
			modifier = {
				add = 20
				OR = {
					has_war = yes
					any_other_country = {
						OR = {
							is_justifying_wargoal_against = ROOT
							has_wargoal_against = ROOT
						}
					}
				}
			}
			modifier = {
				add = 20
				date > 1937.01.02
			}
		}
		add_political_power = -90
		add_timed_idea = { idea = ROM_king_carol_ii_paid_with_pp days = 90 }
		hidden_effect = {
			country_event = { id = DOD_romania.80 }
		}
	}

}

# King Carol II's lifestyle events - King aids embezzlement in the army
country_event = {
	id = DOD_romania.86
	title = DOD_romania.86.t
	desc = DOD_romania.86.desc
	picture = GFX_report_event_iww_demonstration
	
	is_triggered_only = yes

	trigger = {
		has_idea = ROM_king_carol_ii_hedonist
	}

	immediate = {
		set_country_flag = DOD_romania.86_fired
	}

	option = { #Pay for it
		name = DOD_romania.86.a
		ai_chance = {
			base = 1
			modifier = {
				add = 5
				has_war = no
				amount_taken_ideas = {
					amount < 3
					slots = { political_advisor }
				}
			}
			modifier = {
				add = 5
				has_war = no
				amount_taken_ideas = {
					amount < 2
					slots = { political_advisor }
				}
			}
			modifier = {
				add = 5
				has_war = no
				amount_taken_ideas = {
					amount < 1
					slots = { political_advisor }
				}
			}			
			modifier = {
				add = 5
				amount_taken_ideas = {
					amount < 1
					slots = { army_chief }
				}
			}

		}
		add_timed_idea = { idea = ROM_king_carol_ii_factory_penalty days = 120 }
		hidden_effect = {
			country_event = { id = DOD_romania.80 }
		}
	}
	option = { #Negotiate a deal
		name = DOD_romania.86.b
		ai_chance = {
			base = 4
			modifier = {
				add = -2
				date < 1937.01.02
				has_war = no
			}
			modifier = {
				add = 20
				OR = {
					has_war = yes
					any_other_country = {
						OR = {
							is_justifying_wargoal_against = ROOT
							has_wargoal_against = ROOT
						}
					}
				}
			}
			modifier = {
				add = 20
				date > 1937.01.02
			}
		}
		add_political_power = -90
		add_timed_idea = { idea = ROM_king_carol_ii_factory_paid_with_pp days = 90 }
		hidden_effect = {
			country_event = { id = DOD_romania.80 }
		}
	}

}

#Split CZE - GER approached by Romania
country_event = {
	id = DOD_romania.110
	title = DOD_romania.110.t
	desc = DOD_romania.110.desc 
	picture = GFX_report_event_hitler_handshake
	
	is_triggered_only = yes

	option = {# agree
		name = DOD_romania.110.a
		ai_chance = {
			factor = 90
			modifier = {
				is_in_faction_with = CZE
				factor = 0
			}
		}
		ROM = { country_event = DOD_romania.111 }
	}
	option = {# no deals
		name = DOD_romania.110.b
		ai_chance = {
			factor = 10
		}
		ROM = { country_event = DOD_romania.113 }
	}
}

#Split CZE - Germany agrees
country_event = {
	id = DOD_romania.111
	title = DOD_romania.111.t
	desc = DOD_romania.111.desc 
	picture = GFX_report_event_generic_sign_treaty3
	
	is_triggered_only = yes

	option = {# agree
		name = DOD_romania.111.a
		CZE = { country_event = DOD_romania.114 }
	}
}

#Intervene in CZE - GER refuses
country_event = {
	id = DOD_romania.113
	title = DOD_romania.113.t
	desc = DOD_romania.113.desc 
	picture = GFX_report_event_german_politician_speech
	
	is_triggered_only = yes

	option = {# okay
		name = DOD_romania.113.a
		ai_chance = {
			factor = 10
		}
	}
	option = {# we shall consider force
		name = DOD_romania.113.b
		ai_chance = {
			factor = 90
		}
		add_state_claim = 70
		add_state_claim = 71
		add_state_claim = 72
		add_state_claim = 73
	}
}

#Intervene in CZE - CZE gets an ultimatum
country_event = {
	id = DOD_romania.114
	title = DOD_romania.114.t
	desc = DOD_romania.114.desc 
	picture = GFX_report_event_german_troops
	
	is_triggered_only = yes

	option = {# okay 
		name = DOD_romania.114.a
		ai_chance = {
			factor = 80
			modifier = {
				is_in_faction = yes
				factor = 0
			}
			modifier = {
				GER = {
					is_in_faction_with = ROM
					is_in_faction_with = HUN
				}
				factor = 2
			}
		}
		custom_effect_tooltip = GAME_OVER_TT
		GER = {
			transfer_state = 9
			transfer_state = 69
			transfer_state = 75
			transfer_state = 74
		}
		if = {
			limit = {
				country_exists = HUN
			}
			HUN = {
				transfer_state = 664 #might as well throw them a bone
			}
		}
	}
	option = {# refuse
		name = DOD_romania.114.b
		ai_chance = {
			factor = 20
			modifier = {
				owns_state = 69
				factor = 2
			}
			modifier = {
				strength_ratio = { tag = GER ratio > 0.75 }
				factor = 2
			}
			modifier = {
				GER = { has_war = yes }
				factor = 5
			}
		}
		GER = {
			create_wargoal = {
				type = take_state_focus
				target = CZE
				generator = { 9 69 75 74 }
			}
			country_event = DOD_romania.115
		}
		HUN = { 
			create_wargoal = {
				type = take_state_focus
				target = CZE
				generator = { 664 }
			}
			country_event = DOD_romania.115
		}
		FROM = {
			create_wargoal = {
				type = take_state_focus
				target = CZE
				generator = { 70 71 72 73 }
			}
			country_event = DOD_romania.115
		}
	}
}

#Intervene in CZE - CZE defiant
country_event = {
	id = DOD_romania.115
	title = DOD_romania.115.t
	desc = DOD_romania.115.desc 
	picture = GFX_report_event_czech_soldier_01
	
	is_triggered_only = yes

	option = {# okay
		name = DOD_romania.115.a
	}
}

#Invite Foreign Motor Companies
country_event = {
	id = DOD_romania.120
	title = DOD_romania.120.t
	desc = DOD_romania.120.desc 
	picture = GFX_report_event_generic_truck
	
	is_triggered_only = yes

	option = {# Britain
		name = DOD_romania.120.a
		ai_chance = {
			factor = 35
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
		set_country_flag = ENG_mot_chosen
		add_relation_modifier = {
				target = ENG
				modifier = ROM_foreign_motor_company
			}
	}
	option = {# Germany
		name = DOD_romania.120.b
		ai_chance = {
			factor = 35
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
		set_country_flag = GER_mot_chosen
		add_relation_modifier = {
				target = GER
				modifier = ROM_foreign_motor_company
			}
	}
	option = {# USA
		name = DOD_romania.120.c
		ai_chance = {
			factor = 35
		}
		set_country_flag = USA_mot_chosen
		add_relation_modifier = {
				target = USA
				modifier = ROM_foreign_motor_company
			}
	}
}

#fighter competition - initial choice for Hungary
country_event = {
	id = DOD_romania.150
	title = DOD_hungary.150.t
	desc = DOD_hungary.150.desc 
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	option = {# light fighter
		name = DOD_hungary.150.a
		trigger = {
			OR = {
				GER = {
					is_available_fighter_HUN = yes
				}
				FRA = {
					is_available_fighter_HUN = yes
				}
				ITA = {
					is_available_fighter_HUN = yes
				}
				ENG = {
					is_available_fighter_HUN = yes
				}
				USA = {
					is_available_fighter_HUN = yes
				}
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				has_tech = fighter1
				add = -10
			}
			modifier = {
				has_tech = fighter2
				add = -10
			}
			modifier = {
				has_tech = fighter3
				factor = 0
			}
		}
		country_event = DOD_romania.151 
		
	}

	option = {# heavy fighter
		name = DOD_hungary.150.b
		trigger = {
			OR = {
				GER = {
					is_available_heavy_fighter_HUN = yes
				}
				FRA = {
					is_available_heavy_fighter_HUN = yes
				}
				ITA = {
					is_available_heavy_fighter_HUN = yes
				}
				ENG = {
					is_available_heavy_fighter_HUN = yes
				}
				USA = {
					is_available_heavy_fighter_HUN = yes
				}
			}
		}
		country_event = DOD_romania.152
		ai_chance = {
			factor = 50
			modifier = {
				has_tech = heavy_fighter1
				add = -10
			}
			modifier = {
				has_tech = heavy_fighter2
				add = -10
			}
			modifier = {
				has_tech = heavy_fighter3
				factor = 0
			}
		}
	}
}

#Fighter competition - Hungary is looking for a light fighter
country_event = {
	id = DOD_romania.151
	title = DOD_hungary.151.t
	desc = {
		text = DOD_hungary.151.desc_light_fighter
		trigger = {
			NOT = { 
				has_country_flag = GER_fighter_refused
				has_country_flag = ENG_fighter_refused
				has_country_flag = USA_fighter_refused
				has_country_flag = FRA_fighter_refused
				has_country_flag = ITA_fighter_refused
			} 
		}
	}
	desc = {
		text = DOD_hungary.151.desc_light_fighter_refused
		trigger = {
			OR = {
		 		has_country_flag = GER_fighter_refused
				has_country_flag = ENG_fighter_refused
				has_country_flag = USA_fighter_refused
				has_country_flag = FRA_fighter_refused
				has_country_flag = ITA_fighter_refused
		 	}
		}
	}
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	option = {# Select German Plane
		name = DOD_hungary.151.a
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = GER
				factor = 10
			}
			modifier = {
				GER = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				GER = {
					has_tech = fighter1
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = fighter2
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					GER = { has_tech = fighter1}
					ROM = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					GER = { has_tech = fighter2}
					ROM = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					GER = { has_tech = fighter3}
					ROM = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = GER }
			NOT = { has_country_flag = GER_fighter_refused }
		}
		GER = { country_event = DOD_romania.153 }	
	}

	option = {# select italian plane
		name = DOD_hungary.151.b
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ITA
				factor = 10
			}
			modifier = {
				ITA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ITA = {
					has_tech = fighter1
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = fighter2
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ITA = { has_tech = fighter1}
					ROM = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					ITA = { has_tech = fighter2}
					ROM = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					ITA = { has_tech = fighter3}
					ROM = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = ITA }
			NOT = { has_country_flag = ITA_fighter_refused }
		}
		ITA = { country_event = DOD_romania.153 }	
	}

	option = {# select french plane
		name = DOD_hungary.151.c
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = FRA
				factor = 10
			}
			modifier = {
				FRA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				FRA = {
					has_tech = fighter1
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = fighter2
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					FRA = { has_tech = fighter1}
					ROM = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					FRA = { has_tech = fighter2}
					ROM = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					FRA = { has_tech = fighter3}
					ROM = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = FRA }
			NOT = { has_country_flag = FRA_fighter_refused }
			
		}
		FRA = { country_event = DOD_romania.153 }	
	}
	option = {# select british plane
		name = DOD_hungary.151.d
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ENG
				factor = 10
			}
			modifier = {
				ENG = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ENG = {
					has_tech = fighter1
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = fighter2
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ENG = { has_tech = fighter1}
					ROM = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					ENG = { has_tech = fighter2}
					ROM = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					ENG = { has_tech = fighter3}
					ROM = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = ENG }
			NOT = { has_country_flag = ENG_fighter_refused }
		}
		ENG = { country_event = DOD_romania.153 }	
	}
	option = {# select american plane
		name = DOD_hungary.151.e
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = USA
				factor = 10
			}
			modifier = {
				USA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				USA = {
					has_tech = fighter1
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = fighter2
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					USA = { has_tech = fighter1}
					ROM = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					USA = { has_tech = fighter2}
					ROM = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					USA = { has_tech = fighter3}
					ROM = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = USA }
			NOT = { has_country_flag = USA_fighter_refused }
			NOT = { #to prevent overflow issues
				AND = {
					GER = {
						is_available_fighter_ROM = yes
					}
					FRA = {
						is_available_fighter_ROM = yes
					}
					ITA = {
						is_available_fighter_ROM = yes
					}
					ENG = {
						is_available_fighter_ROM = yes
					}
				}
			}
		}
		USA = { country_event = DOD_romania.153 }	
	}
	option = {# failsafe
		name = DOD_hungary.151.f	
		trigger = {
			OR = {
				has_country_flag = GER_fighter_refused
				has_country_flag = ITA_fighter_refused
				has_country_flag = ENG_fighter_refused
				has_country_flag = FRA_fighter_refused
				has_country_flag = USA_fighter_refused
			}
		}
		air_experience = 50
	}

}

#Fighter competition - Hungary is looking for a heavy fighter
country_event = {
	id = DOD_romania.152
	title = DOD_hungary.152.t
	desc = {
		text = DOD_hungary.152.desc_heavy_fighter
		trigger = {
			NOT = { 
				has_country_flag = GER_heavy_fighter_refused
				has_country_flag = ENG_heavy_fighter_refused
				has_country_flag = USA_heavy_fighter_refused
				has_country_flag = FRA_heavy_fighter_refused
				has_country_flag = ITA_heavy_fighter_refused
			} 
		}
	}
	desc = {
		text = DOD_hungary.152.desc_heavy_fighter_refused
		trigger = {
			OR = {
		 		has_country_flag = GER_heavy_fighter_refused
				has_country_flag = ENG_heavy_fighter_refused
				has_country_flag = USA_heavy_fighter_refused
				has_country_flag = FRA_heavy_fighter_refused
				has_country_flag = ITA_heavy_fighter_refused
		 	}
		}
	}
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	option = {# Select German Plane
		name = DOD_hungary.151.a
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = GER
				factor = 10
			}
			modifier = {
				GER = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				GER = {
					has_tech = heavy_fighter1
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = heavy_fighter2
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = heavy_fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					GER = { has_tech = heavy_fighter1}
					ROM = { NOT = { has_tech = heavy_fighter1 } }
				}
				AND = {
					GER = { has_tech = heavy_fighter2}
					ROM = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					GER = { has_tech = heavy_fighter3}
					ROM = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = GER }
			NOT = { has_country_flag = GER_heavy_fighter_refused }
		}
		GER = { country_event = DOD_romania.154 }	
	}

	option = {# select italian plane
		name = DOD_hungary.151.b
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ITA
				factor = 10
			}
			modifier = {
				ITA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ITA = {
					has_tech = heavy_fighter1
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = heavy_fighter2
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = heavy_fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ITA = { has_tech = heavy_fighter1}
					ROM = { NOT = { has_tech = heavy_fighter1 } }
				}
				AND = {
					ITA = { has_tech = heavy_fighter2}
					ROM = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					ITA = { has_tech = heavy_fighter3}
					ROM = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = ITA }
			NOT = { has_country_flag = ITA_heavy_fighter_refused }
		}
		ITA = { country_event = DOD_romania.154 }	
	}

	option = {# select french plane
		name = DOD_hungary.151.c
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = FRA
				factor = 10
			}
			modifier = {
				FRA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				FRA = {
					has_tech = heavy_fighter1
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = heavy_fighter2
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = heavy_fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					FRA = { has_tech = heavy_fighter1}
					ROM = { NOT = { has_tech = heavy_fighter1 } }
				}
				AND = {
					FRA = { has_tech = heavy_fighter2}
					ROM = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					FRA = { has_tech = heavy_fighter3}
					ROM = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = FRA }
			NOT = { has_country_flag = FRA_heavy_fighter_refused }
			
		}
		FRA = { country_event = DOD_romania.154 }	
	}
	option = {# select british plane
		name = DOD_hungary.151.d
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ENG
				factor = 10
			}
			modifier = {
				ENG = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ENG = {
					has_tech = heavy_fighter1
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = heavy_fighter2
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = heavy_fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ENG = { has_tech = heavy_fighter1}
					ROM = { NOT = { has_tech = heavy_fighter1 } }
				}
				AND = {
					ENG = { has_tech = heavy_fighter2}
					ROM = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					ENG = { has_tech = heavy_fighter3}
					ROM = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = ENG }
			NOT = { has_country_flag = ENG_heavy_fighter_refused }
		}
		ENG = { country_event = DOD_romania.154 }	
	}
	option = {# select american plane
		name = DOD_hungary.151.e
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = USA
				factor = 10
			}
			modifier = {
				USA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				USA = {
					has_tech = heavy_fighter1
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = heavy_fighter2
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = heavy_fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					USA = { has_tech = heavy_fighter1}
					ROM = { NOT = { has_tech = heavy_fighter1 } }
				}
				AND = {
					USA = { has_tech = heavy_fighter2}
					ROM = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					USA = { has_tech = heavy_fighter3}
					ROM = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = USA }
			NOT = { has_country_flag = USA_heavy_fighter_refused }
			NOT = { #to prevent overflow issues
				AND = {
					GER = {
						is_available_heavy_fighter_ROM = yes
					}
					FRA = {
						is_available_heavy_fighter_ROM = yes
					}
					ITA = {
						is_available_heavy_fighter_ROM = yes
					}
					ENG = {
						is_available_heavy_fighter_ROM = yes
					}
				}
			}
		}
		USA = { country_event = DOD_romania.154 }	
	}
	option = {# failsafe
		name = DOD_hungary.151.f	
		trigger = {
			OR = {
				has_country_flag = GER_heavy_fighter_refused
				has_country_flag = ITA_heavy_fighter_refused
				has_country_flag = ENG_heavy_fighter_refused
				has_country_flag = FRA_heavy_fighter_refused
				has_country_flag = USA_heavy_fighter_refused
			}
		}
		air_experience = 50
	}

}

#fighter competition - light fighter competition winner gets a choice whether to permit license production
country_event = {
	id = DOD_romania.153
	title = DOD_hungary.153.t
	desc = DOD_hungary.153.desc 
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	option = {# certainly
		name = DOD_hungary.153.a
		ai_chance = {
			factor = 90
			modifier = {
				has_war = yes
				factor = 0.5
			}
		}
		ROM = { country_event = DOD_romania.155 }
		air_experience = 20
		if = {
			limit = {
				has_tech = fighter1
				NOT = { has_tech = fighter2 }
			}
			create_production_license = {
				target = ROM 
				equipment = {
					type = fighter_equipment_1
					
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = fighter2
				NOT = { has_tech = fighter3 }
			}
			create_production_license = {
				target = ROM 
				equipment = {
					type = fighter_equipment_2
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = fighter3
			}
			create_production_license = {
				target = ROM 
				equipment = {
					type = fighter_equipment_3
				}
				cost_factor = 0
			}
		}
	}

	option = {# no
		name = DOD_hungary.153.b
		ai_chance = {
			factor = 10
			modifier = {
				is_in_faction_with = ROM
				factor = 0
			}
		}
		if = {
			limit = { tag = GER }
			ROM = { set_country_flag = GER_fighter_refused }
		}
		if = {
			limit = { tag = ITA }
			ROM = { set_country_flag = ITA_fighter_refused }
		}
		if = {
			limit = { tag = FRA }
			ROM = { set_country_flag = FRA_fighter_refused }
		}
		if = {
			limit = { tag = ENG }
			ROM = { set_country_flag = ENG_fighter_refused }
		}
		if = {
			limit = { tag = USA }
			ROM = { set_country_flag = USA_fighter_refused }
		}
		ROM = { country_event = DOD_romania.151 }
		reverse_add_opinion_modifier = { target = ROM modifier = refused_help }
	}
}

#fighter competition - heavy fighter competition winner gets a choice whether to permit license production
country_event = {
	id = DOD_romania.154
	title = DOD_hungary.153.t
	desc = DOD_hungary.154.desc 
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	option = {# certainly
		name = DOD_hungary.153.a
		ai_chance = {
			factor = 90
			modifier = {
				has_war = yes
				factor = 0.5
			}
		}
		ROM = { country_event = DOD_romania.155 }
		air_experience = 20
		if = {
			limit = {
				has_tech = heavy_fighter1
				NOT = { has_tech = heavy_fighter2 }
			}
			create_production_license = {
				target = ROM 
				equipment = {
					type = heavy_fighter_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = heavy_fighter2
				NOT = { has_tech = heavy_fighter3 }
			}
			create_production_license = {
				target = ROM 
				equipment = {
					type = heavy_fighter_equipment_2	
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = heavy_fighter3
			}
			create_production_license = {
				target = ROM 
				equipment = {
					type = heavy_fighter_equipment_3
				}
				cost_factor = 0
			}
		}
		
	}

	option = {# no
		name = DOD_hungary.153.b
		ai_chance = {
			factor = 10
			modifier = {
				is_in_faction_with = ROM
				factor = 0
			}
		}
		if = {
			limit = { tag = GER }
			ROM = { set_country_flag = GER_heavy_fighter_refused }
		}
		if = {
			limit = { tag = ITA }
			ROM = { set_country_flag = ITA_heavy_fighter_refused }
		}
		if = {
			limit = { tag = FRA }
			ROM = { set_country_flag = FRA_heavy_fighter_refused }
		}
		if = {
			limit = { tag = ENG }
			ROM = { set_country_flag = ENG_heavy_fighter_refused }
		}
		if = {
			limit = { tag = USA }
			ROM = { set_country_flag = USA_heavy_fighter_refused }
		}
		ROM = { country_event = DOD_romania.152 }
		reverse_add_opinion_modifier = { target = ROM modifier = refused_help }
	}
}

#fighter competition - license production approved
country_event = {
	id = DOD_romania.155
	title = DOD_hungary.155.t
	desc = DOD_hungary.155.desc 
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	option = {# neat
		name = DOD_hungary.155.a
		
	}
}

#rename city
country_event = {
	id = DOD_romania.999
	title = DOD_romania.999.t
	desc = DOD_romania.999.desc
	picture = GFX_report_event_german_reichstag_gathering

	fire_only_once = yes

	trigger = {
		tag = ROM
		ROM = {
			has_country_leader = { id = 550 } #Carol II
			owns_state = 217
			owns_state = 195
		}
	}

	option = { #a great idea!
		name = DOD_romania.a
		ai_chance = {
			base = 100
		}
		set_province_name = { id = 3529 name = "Magdagrad" }
		set_province_name = { id = 3151 name = "Zizigrad" }
		set_global_flag = ROM_king_is_silly
	}

	option = { #rather not
		name = DOD_romania.b
		ai_chance = {
			base = 0
		}
		add_timed_idea = { idea = ROM_king_carol_ii_consumer_penalty days = 90 }
	}

}

#Britain recieves Romania's request to change sides
country_event = {
	id = DOD_romania.16
	title = DOD_romania.16.t
	desc = DOD_romania.16.desc
	picture = GFX_report_event_german_reichstag_gathering

	is_triggered_only = yes

	immediate = {
		FROM = { set_country_flag = ROM_switched_sides }
		FROM = {
			every_other_country = {
				limit = {
					is_in_faction_with = PREV
					has_capitulated = no
				}
				set_country_flag = ROM_former_ally_still_standing #required for achievement
			}
		}
	}

	option = { #End hostilities with Romania
		name = DOD_romania.16.a
		ai_chance = {
			base = 100
		}
		hidden_effect = {
			#ensure Germany doesn't get randomly encircled
			every_state = {
				limit = {
					controller = { tag = FROM }
					owner = {
						has_war_with = event_target:romania_former_ally_target
						NOT = { has_war_with = event_target:romania_new_ally_target }
					}
				}
				event_target:romania_former_ally_target = {
					set_state_controller = PREV
				}
			}
			FROM = {
				# move our armies to back home
				teleport_armies = {
					to_state_array = owned_controlled_states
				}
			}
		}
		white_peace = FROM
		FROM = {
			leave_faction = yes
		}
		hidden_effect = {
			event_target:romania_former_ally_target = {
				country_event = { id = DOD_romania.161 days = 1 }
			}
			FROM = { #essentially so the Soviets peace out with Romania, preventing England from being dragged into a war with the Soviets.
				every_enemy_country = {
					limit = {
						NOT = { has_war_with = event_target:romania_new_ally_target }
						has_war_with = event_target:romania_former_ally_target
						is_faction_leader = yes
					}
					save_global_event_target_as = romania_third_party_target
					if = { #creates a collab gov out of every Moldovan state they occupy
						limit = {
							any_controlled_state = {
								owner = { tag = FROM }
							}
						}
						event_target:released_nation_target = {
							PREV = {
								puppet = PREV
								if = {
									limit = {
										has_dlc = "La Resistance"
									}
									PREV = { set_variable = { collaboration_formed_by = PREV } }
									set_autonomy = { target = PREV autonomy_state = autonomy_collaboration_government }
								}
								else = {
									set_autonomy = { target = PREV autonomy_state = autonomy_integrated_puppet }
								}
							}
						}
					}
					if = { #creates a collab gov out of every Romanian state they occupy
						limit = {
							any_controlled_state = {
								owner = { tag = FROM }
							}
						}
						create_dynamic_country = {
							original_tag = FROM
							
							save_event_target_as = released_nation_target
							PREV = {
								puppet = PREV
								if = {
									limit = {
										has_dlc = "La Resistance"
									}
									PREV = { set_variable = { collaboration_formed_by = PREV } }
									set_autonomy = { target = PREV autonomy_state = autonomy_collaboration_government }
								}
								else = {
									set_autonomy = { target = PREV autonomy_state = autonomy_integrated_puppet }
								}
							}
						}
					}
					white_peace = FROM
				}
			}
		}
	}
}

#change sides
country_event = {
	id = DOD_romania.161
	title = DOD_romania.161.t
	desc = DOD_romania.161.desc
	picture = GFX_report_event_german_reichstag_gathering

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			FROM.FROM = {
				leave_faction = yes
				country_event = { id = DOD_romania.162 }
			}
		}
	}

	option = { #time to abandon ship
		name = DOD_romania.161.a
		ai_chance = {
			base = 100
		}
	}
}

#change sides
country_event = {
	id = DOD_romania.162
	title = DOD_romania.162.t
	desc = DOD_romania.162.desc
	picture = GFX_report_event_german_reichstag_gathering

	is_triggered_only = yes

	immediate = {
		
	}

	option = { #time to abandon ship
		name = DOD_romania.162.a
		ai_chance = {
			base = 100
		}
		event_target:romania_new_ally_target = { 
			add_to_faction = ROOT
			ROOT = {
				add_to_war = {
					targeted_alliance = PREV
					enemy = FROM
					hostility_reason = asked_to_join
				}
			}
		}
	}
}

country_event = { #if Codreanu is still in power, kill him and replace with Goga, then change name of party
	id = DOD_romania.163
	title = DOD_romania.163.t
	desc = DOD_romania.163.desc
	picture = GFX_report_event_generic_funeral
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = DOD_romania.163.a
		add_stability = -0.05
		add_popularity = {
			ideology = fascism
			popularity = 0.05
		}
		kill_ideology_leader = fascism
		promote_character = ROM_octavian_goga
		set_party_name = { 
		    ideology = fascism
		    long_name = ROM_fascism_party2_long
		    name = ROM_fascism_party2
		}
	}
}
###########################
# Yugoslavian Events
###########################

add_namespace = DOD_yugoslavia

#Yugoslavia wants to buy planes - event for GER,FRA,ENG,ITA
country_event = {
	id = DOD_yugoslavia.20
	title = DOD_yugoslavia.20.t
	desc = DOD_yugoslavia.20.desc
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes
	
	option = { # send some fighters
		name = DOD_yugoslavia.20.a
		ai_chance = {
			factor = 70
		}	
		trigger = {
			has_equipment = { fighter_equipment > 50 }
		}
		send_equipment = {
			target = YUG
			type = fighter_equipment
			amount = 50
		}
		add_timed_idea = { idea = YUG_air_payment days = 180 }
		YUG = {
			country_event = DOD_yugoslavia.21
		}
	}	
	option = { # send some bombers
		name = DOD_yugoslavia.20.b
		ai_chance = {
			factor = 70
		}
		trigger = {
			has_equipment = { tac_bomber_equipment > 25 }
		}
		send_equipment = {
			target = YUG
			type = tac_bomber_equipment
			amount = 25
		}	
		add_timed_idea = { idea = YUG_air_payment days = 180 }
		YUG = {
			country_event = DOD_yugoslavia.22
		}
	}

	option = { # divert some fighters from production
		name = DOD_yugoslavia.20.d
		ai_chance = {
			factor = 70
		}	
		trigger = {
			NOT = { has_equipment = { fighter_equipment > 50 } }
		}
		add_timed_idea = { idea = YUG_air_payment days = 180 }
		add_timed_idea = { idea = YUG_fighter_production_diverted days = 120 }
		YUG = {
			country_event = DOD_yugoslavia.23
		}
	}

	option = { # divert some bombers from production
		name = DOD_yugoslavia.20.e
		ai_chance = {
			factor = 70
		}
		trigger = {
			NOT = { has_equipment = { tac_bomber_equipment > 25 } }
		}
		add_timed_idea = { idea = YUG_air_payment days = 180 }
		add_timed_idea = { idea = YUG_bomber_production_diverted days = 120 }
		YUG = {
			country_event = DOD_yugoslavia.24
		}
	}
	option = { # no
		name = DOD_yugoslavia.20.c
		ai_chance = {
			factor = 30
		}	
	}		
}
#Yugoslavia wants to buy planes - Major nation sells some fighters
country_event = {
	id = DOD_yugoslavia.21
	title = DOD_yugoslavia.21.t
	desc = DOD_yugoslavia.21.desc   
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes
	
	option = { # cool
		name = DOD_yugoslavia.21.a
		ai_chance = {
			factor = 30
		}
		add_opinion_modifier = { target = FROM modifier = YUG_sold_planes}	
	}	
		
	
}

#Yugoslavia wants to buy planes - Major nation sells some bombers
country_event = {
	id = DOD_yugoslavia.22
	title = DOD_yugoslavia.22.t
	desc = DOD_yugoslavia.22.desc
	picture = GFX_report_event_generic_bombers
	
	is_triggered_only = yes
	
	option = { # cool
		name = DOD_yugoslavia.21.a
		ai_chance = {
			factor = 30
		}
		add_opinion_modifier = { target = FROM modifier = YUG_sold_planes}	
	}	
		
	
}
#Yugoslavia wants to buy planes - Major nation sells some fighters
country_event = {
	id = DOD_yugoslavia.23
	title = DOD_yugoslavia.21.t
	desc = DOD_yugoslavia.21.desc   
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes
	
	option = { # cool
		name = DOD_yugoslavia.21.a
		ai_chance = {
			factor = 30
		}
		if = {
			limit = {
				FROM = {
					tag = GER
				}
			}
			if = {
				limit = { 
					GER = { 
						has_tech = early_fighter
						NOT = { has_tech = fighter1 }
					} 
				}
				add_equipment_to_stockpile = { type = fighter_equipment_0 amount = 50 producer = GER } 
			}
			if = {
				limit = { 
					GER = { 
						has_tech = fighter1 
						NOT = { has_tech = fighter2 }
					} 
				}
				add_equipment_to_stockpile = { type = fighter_equipment_1 amount = 50 producer = GER } 
			}
			if = {
				limit = { 
					GER = { 
						has_tech = fighter2 
						NOT = { has_tech = fighter3 }
					} 
				}
				add_equipment_to_stockpile = { type = fighter_equipment_2 amount = 50 producer = GER } 
			}
			if = {
				limit = { 
					GER = { 
						has_tech = fighter3 
					} 
				}
				add_equipment_to_stockpile = { type = fighter_equipment_3 amount = 50 producer = GER } 
			}
		} 
		if = {
			limit = {
				FROM = {
					tag = ITA
				}
			}
			if = {
				limit = { 
					ITA= { 
						has_tech = early_fighter
						NOT = { has_tech = fighter1 }
					} 
				}
				add_equipment_to_stockpile = { type = fighter_equipment_0 amount = 50 producer = ITA } 
			}
			if = {
				limit = { 
					ITA = { 
						has_tech = fighter1 
						NOT = { has_tech = fighter2 }
					} 
				}
				add_equipment_to_stockpile = { type = fighter_equipment_1 amount = 50 producer = ITA } 
			}
			if = {
				limit = { 
					ITA = { 
						has_tech = fighter2 
						NOT = { has_tech = fighter3 }
					} 
				}
				add_equipment_to_stockpile = { type = fighter_equipment_2 amount = 50 producer = ITA } 
			}
			if = {
				limit = { 
					ITA = { 
						has_tech = fighter3 
					} 
				}
				add_equipment_to_stockpile = { type = fighter_equipment_3 amount = 50 producer = ITA } 
			}
		}

		if = {
			limit = {
				FROM = {
					tag = FRA
				}
			}
			if = {
				limit = { 
					FRA = { 
						has_tech = early_fighter
						NOT = { has_tech = fighter1 }
					} 
				}
				add_equipment_to_stockpile = { type = fighter_equipment_0 amount = 50 producer = FRA } 
			}
			if = {
				limit = { 
					FRA = { 
						has_tech = fighter1 
						NOT = { has_tech = fighter2 }
					} 
				}
				add_equipment_to_stockpile = { type = fighter_equipment_1 amount = 50 producer = FRA } 
			}
			if = {
				limit = { 
					FRA = { 
						has_tech = fighter2 
						NOT = { has_tech = fighter3 }
					} 
				}
				add_equipment_to_stockpile = { type = fighter_equipment_2 amount = 50 producer = FRA } 
			}
			if = {
				limit = { 
					FRA = { 
						has_tech = fighter3 
					} 
				}
				add_equipment_to_stockpile = { type = fighter_equipment_3 amount = 50 producer = FRA } 
			}
		}

		if = {
			limit = {
				FROM = {
					tag = ENG
				}
			}
			if = {
				limit = { 
					ENG = { 
						has_tech = early_fighter
						NOT = { has_tech = fighter1 }
					} 
				}
				add_equipment_to_stockpile = { type = fighter_equipment_0 amount = 50 producer = ENG } 
			}
			if = {
				limit = { 
					ENG = { 
						has_tech = fighter1 
						NOT = { has_tech = fighter2 }
					} 
				}
				add_equipment_to_stockpile = { type = fighter_equipment_1 amount = 50 producer = ENG } 
			}
			if = {
				limit = { 
					ENG = { 
						has_tech = fighter2 
						NOT = { has_tech = fighter3 }
					} 
				}
				add_equipment_to_stockpile = { type = fighter_equipment_2 amount = 50 producer = ENG } 
			}
			if = {
				limit = { 
					ENG = { 
						has_tech = fighter3 
					} 
				}
				add_equipment_to_stockpile = { type = fighter_equipment_3 amount = 50 producer = ENG } 
			}
		}
		add_opinion_modifier = { target = FROM modifier = YUG_sold_planes}	
	}	
		
	
}

#Yugoslavia wants to buy planes - Major nation sells some bombers
country_event = {
	id = DOD_yugoslavia.24
	title = DOD_yugoslavia.22.t
	desc = DOD_yugoslavia.22.desc
	picture = GFX_report_event_generic_bombers
	
	is_triggered_only = yes
	
	option = { # cool
		name = DOD_yugoslavia.21.a
		ai_chance = {
			factor = 30
		}
		if = {
			limit = {
				FROM = {
					tag = GER
				}
			}
			if = {
				limit = { 
					GER = { 
						has_tech = early_bomber 
						NOT = { has_tech = tactical_bomber1 }
					} 
				}
				add_equipment_to_stockpile = { type = tac_bomber_equipment_0 amount = 25 producer = GER } 
			}
			if = {
				limit = { 
					GER = { 
						has_tech = tactical_bomber1 
						NOT = { has_tech = tactical_bomber2 }
					} 
				}
				add_equipment_to_stockpile = { type = tac_bomber_equipment_1 amount = 25 producer = GER } 
			}
			if = {
				limit = { 
					GER = { 
						has_tech = tactical_bomber2 
						NOT = { has_tech = tactical_bomber3 }
					} 
				}
				add_equipment_to_stockpile = { type = tac_bomber_equipment_2 amount = 25 producer = GER } 
			}
			if = {
				limit = { 
					GER = { 
						has_tech = tactical_bomber3 
					} 
				}
				add_equipment_to_stockpile = { type = tac_bomber_equipment_3 amount = 25 producer = GER } 
			}
		}
		if = {
			limit = {
				FROM = {
					tag = ITA
				}
			}
			if = {
				limit = { 
					ITA = { 
						has_tech = early_bomber 
						NOT = { has_tech = tactical_bomber1 }
					} 
				}
				add_equipment_to_stockpile = { type = tac_bomber_equipment_0 amount = 25 producer = ITA } 
			}
			if = {
				limit = { 
					ITA = { 
						has_tech = tactical_bomber1 
						NOT = { has_tech = tactical_bomber2 }
					} 
				}
				add_equipment_to_stockpile = { type = tac_bomber_equipment_1 amount = 25 producer = ITA } 
			}
			if = {
				limit = { 
					ITA = { 
						has_tech = tactical_bomber2 
						NOT = { has_tech = tactical_bomber3 }
					} 
				}
				add_equipment_to_stockpile = { type = tac_bomber_equipment_2 amount = 25 producer = ITA } 
			}
			if = {
				limit = { 
					ITA = { 
						has_tech = tactical_bomber3 
					} 
				}
				add_equipment_to_stockpile = { type = tac_bomber_equipment_3 amount = 25 producer = ITA } 
			}
		}

		if = {
			limit = {
				FROM = {
					tag = FRA
				}
			}
			if = {
				limit = { 
					FRA = { 
						has_tech = early_bomber 
						NOT = { has_tech = tactical_bomber1 }
					} 
				}
				add_equipment_to_stockpile = { type = tac_bomber_equipment_0 amount = 25 producer = FRA } 
			}
			if = {
				limit = { 
					FRA = { 
						has_tech = tactical_bomber1 
						NOT = { has_tech = tactical_bomber2 }
					} 
				}
				add_equipment_to_stockpile = { type = tac_bomber_equipment_1 amount = 25 producer = FRA } 
			}
			if = {
				limit = { 
					FRA = { 
						has_tech = tactical_bomber2 
						NOT = { has_tech = tactical_bomber3 }
					} 
				}
				add_equipment_to_stockpile = { type = tac_bomber_equipment_2 amount = 25 producer = FRA } 
			}
			if = {
				limit = { 
					FRA = { 
						has_tech = tactical_bomber3 
					} 
				}
				add_equipment_to_stockpile = { type = tac_bomber_equipment_3 amount = 25 producer = FRA } 
			}
		}

		if = {
			limit = {
				FROM = {
					tag = ENG
				}
			}
			if = {
				limit = { 
					ENG = { 
						has_tech = early_bomber 
						NOT = { has_tech = tactical_bomber1 }
					} 
				}
				add_equipment_to_stockpile = { type = tac_bomber_equipment_0 amount = 25 producer = ENG } 
			}
			if = {
				limit = { 
					ENG = { 
						has_tech = tactical_bomber1 
						NOT = { has_tech = tactical_bomber2 }
					} 
				}
				add_equipment_to_stockpile = { type = tac_bomber_equipment_1 amount = 25 producer = ENG } 
			}
			if = {
				limit = { 
					ENG = { 
						has_tech = tactical_bomber2 
						NOT = { has_tech = tactical_bomber3 }
					} 
				}
				add_equipment_to_stockpile = { type = tac_bomber_equipment_2 amount = 25 producer = ENG } 
			}
			if = {
				limit = { 
					ENG = { 
						has_tech = tactical_bomber3 
					} 
				}
				add_equipment_to_stockpile = { type = tac_bomber_equipment_3 amount = 25 producer = ENG } 
			}
		}
		add_opinion_modifier = { target = FROM modifier = YUG_sold_planes}	
	}	
		
	
}
#Yugoslavia pressured by Germany - Anschluss
country_event = {
	id = DOD_yugoslavia.30
	title = DOD_yugoslavia.30.t
	desc = DOD_yugoslavia.30.desc
	picture = GFX_report_event_german_speech
	
	is_triggered_only = yes
	
	option = { # put the squeeze on them
		name = DOD_yugoslavia.30.a
		ai_chance = {
			factor = 70
		}
		YUG = { 
			country_event = DOD_yugoslavia.31 
			set_country_flag = YUG_GER_pressure_1 #for ai_weights in focus tree
		}
		
	}	
	option = { # not interested
		name = DOD_yugoslavia.30.b
		ai_chance = {
			factor = 30
		}
		
	}
		
	
}

#Yugoslavia pressured by Germany - First event
country_event = {
	id = DOD_yugoslavia.31
	title = DOD_yugoslavia.31.t
	desc = DOD_yugoslavia.31.desc
	picture = GFX_report_event_german_speech
	
	is_triggered_only = yes
		
	option = { # not that bad yet
		name = DOD_yugoslavia.31.a
		ai_chance = {
			factor = 30
		}
		
	}
		
	
}

#Yugoslavia pressured by Germany - Fate of CZE
country_event = {
	id = DOD_yugoslavia.32
	title = DOD_yugoslavia.30.t
	desc = DOD_yugoslavia.32.desc
	picture = GFX_report_event_german_troops
	
	is_triggered_only = yes
	
	option = { # put the squeeze on them
		name = DOD_yugoslavia.32.a
		ai_chance = {
			factor = 80
		}
		YUG = { 
			country_event = DOD_yugoslavia.33 
			set_country_flag = YUG_GER_pressure_2 #for ai_weights
		}
		
	}	
	option = { # not interested
		name = DOD_yugoslavia.32.b
		ai_chance = {
			factor = 20
		}
		
	}
		
	
}

#Yugoslavia pressured by Germany - Second event
country_event = {
	id = DOD_yugoslavia.33
	title = DOD_yugoslavia.31.t
	desc = DOD_yugoslavia.33.desc
	picture = GFX_report_event_german_troops
	
	is_triggered_only = yes
		
	option = { # not that bad
		name = DOD_yugoslavia.33.a
		
	}
}

#Yugoslavia pressured by Germany - Last Warning - after Fall of France
country_event = {
	id = DOD_yugoslavia.34
	title = DOD_yugoslavia.30.t
	desc = DOD_yugoslavia.34.desc
	picture = GFX_report_event_german_troops_paris
	
	fire_only_once = yes
	trigger = {
		tag = GER
		NOT = {
			has_war_with = YUG
		}
		YUG = {
			is_in_faction = no
		}
		FRA = {
			OR = {
				has_capitulated = yes
				is_subject_of = GER
			}
		}
	}
	
	option = { # put the squeeze on them
		name = DOD_yugoslavia.34.a
		ai_chance = {
			factor = 90
		}
		YUG = { country_event = DOD_yugoslavia.35 }
		
	}	
	option = { # not interested
		name = DOD_yugoslavia.34.b
		ai_chance = {
			factor = 10
		}
		
	}
		
	
}

#Yugoslavia pressured by Germany - third event
country_event = {
	id = DOD_yugoslavia.35
	title = DOD_yugoslavia.31.t
	desc = DOD_yugoslavia.35.desc
	picture = GFX_report_event_german_troops_paris
	
	is_triggered_only = yes
		
	option = { # not that bad
		name = DOD_yugoslavia.35.a
		ai_chance = {
			factor = 30
		}
		
	}
		
	
}



#Yugoslavia pressured by Britain - Balkan Strategy
country_event = {
	id = DOD_yugoslavia.40
	title = DOD_yugoslavia.30.t
	desc = DOD_yugoslavia.40.desc
	picture = GFX_report_event_chamberlain_announce
	
	is_triggered_only = yes
	
	option = { # put the squeeze on them
		name = DOD_yugoslavia.40.a
		ai_chance = {
			factor = 70
		}
		YUG = { country_event = DOD_yugoslavia.41 }
		
	}	
	option = { # not interested
		name = DOD_yugoslavia.40.b
		ai_chance = {
			factor = 30
		}
		
	}
		
	
}

#Yugoslavia pressured by Britain - First event
country_event = {
	id = DOD_yugoslavia.41
	title = DOD_yugoslavia.41.t
	desc = DOD_yugoslavia.41.desc
	picture = GFX_report_event_french_british_officers
	
	is_triggered_only = yes
		
	option = { # not that bad yet
		name = DOD_yugoslavia.41.a
		ai_chance = {
			factor = 30
		}
		
	}	
}

#Yugoslavia pressured by Britain - Munich
country_event = {
	id = DOD_yugoslavia.42
	title = DOD_yugoslavia.30.t
	desc = DOD_yugoslavia.42.desc
	picture = GFX_report_event_french_british_officers
	
	is_triggered_only = yes
	
	option = { # put the squeeze on them
		name = DOD_yugoslavia.42.a
		ai_chance = {
			factor = 70
		}
		YUG = { country_event = DOD_yugoslavia.43 }
		
	}	
	option = { # not interested
		name = DOD_yugoslavia.42.b
		ai_chance = {
			factor = 30
		}
		
	}
		
	
}

#Yugoslavia pressured by Britain - Second event
country_event = {
	id = DOD_yugoslavia.43
	title = DOD_yugoslavia.41.t
	desc = DOD_yugoslavia.43.desc
	picture = GFX_report_event_canadian_soldiers
	
	is_triggered_only = yes
		
	option = { # not that bad yet
		name = DOD_yugoslavia.43.a
		ai_chance = {
			factor = 30
		}
		
	}	
}

#Yugoslavia pressured by Britain - late 1940, last warning
country_event = {
	id = DOD_yugoslavia.44
	title = DOD_yugoslavia.30.t
	desc = DOD_yugoslavia.44.desc
	picture = GFX_report_event_french_british_officers
	
	fire_only_once = yes
	
	trigger = {
		tag = ENG
		has_government = democratic
		has_war_with = GER
		NOT = { has_war_with = YUG }
		NOT = { is_in_faction_with = YUG }
		YUG = { is_in_faction = no }
		YUG = { NOT = { has_war_with = GER } }
		YUG = { exists = yes }
		is_historical_focus_on = no
	}
	
	option = { # put the squeeze on them
		name = DOD_yugoslavia.44.a
		ai_chance = {
			factor = 90
		}
		YUG = { country_event = DOD_yugoslavia.45 }
		hidden_effect = { country_event = { id = DOD_yugoslavia.46 days = 180 random = 672 } }
		
	}	
	option = { # not interested
		name = DOD_yugoslavia.44.b
		ai_chance = {
			factor = 10
		}	
	}
}

#Yugoslavia pressured by Britain - Third event
country_event = {
	id = DOD_yugoslavia.45
	title = DOD_yugoslavia.41.t
	desc = DOD_yugoslavia.45.desc
	picture = GFX_report_event_british_inspect_troops
	
	is_triggered_only = yes
		
	option = { # not that bad yet
		name = DOD_yugoslavia.45.a
		ai_chance = {
			factor = 30
		}
		
	}	
}

#Yugoslavia pressured by Britain - war
country_event = {
	id = DOD_yugoslavia.46
	title = DOD_yugoslavia.30.t
	desc = DOD_yugoslavia.46.desc
	picture = GFX_report_event_ast_army
	
	is_triggered_only = yes
	fire_only_once = yes 
	trigger = {
		tag = ENG
		has_government = democratic
		YUG = { is_in_faction = no }
		YUG = { exists = yes }
		has_war_with = GER
	}
	
	option = { # put the squeeze on them
		name = DOD_yugoslavia.46.a
		ai_chance = {
			factor = 90
		}
		declare_war_on = {
			target = YUG
			type = puppet_wargoal_focus
		}
		
	}	
	option = { # not interested
		name = DOD_yugoslavia.46.b
		ai_chance = {
			factor = 10
		}	
	}
}



#fighter competition - initial choice for Yugoslavia
country_event = {
	id = DOD_yugoslavia.150
	title = DOD_hungary.150.t
	desc = DOD_hungary.150.desc 
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	option = {# light fighter
		name = DOD_hungary.150.a
		trigger = {
			OR = {
				GER = {
					is_available_fighter_YUG = yes
				}
				FRA = {
					is_available_fighter_YUG = yes
				}
				ITA = {
					is_available_fighter_YUG = yes
				}
				ENG = {
					is_available_fighter_YUG = yes
				}
				USA = {
					is_available_fighter_YUG = yes
				}
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				has_tech = fighter1
				add = -10
			}
			modifier = {
				has_tech = fighter2
				add = -10
			}
			modifier = {
				has_tech = fighter3
				factor = 0
			}
		}
		country_event = DOD_yugoslavia.151 
		
	}

	option = {# heavy fighter
		name = DOD_hungary.150.b
		trigger = {
			OR = {
				GER = {
					is_available_heavy_fighter_YUG = yes
				}
				FRA = {
					is_available_heavy_fighter_YUG = yes
				}
				ITA = {
					is_available_heavy_fighter_YUG = yes
				}
				ENG = {
					is_available_heavy_fighter_YUG = yes
				}
				USA = {
					is_available_heavy_fighter_YUG = yes
				}
			}
		}
		country_event = DOD_yugoslavia.152
		ai_chance = {
			factor = 50
			modifier = {
				has_tech = heavy_fighter1
				add = -10
			}
			modifier = {
				has_tech = heavy_fighter2
				add = -10
			}
			modifier = {
				has_tech = heavy_fighter3
				factor = 0
			}
		}
	}
}

#Fighter competition - Yugoslavia is looking for a light fighter
country_event = {
	id = DOD_yugoslavia.151
	title = DOD_hungary.151.t
	desc = {
		text = DOD_hungary.151.desc_light_fighter
		trigger = {
			NOT = { 
				has_country_flag = GER_fighter_refused
				has_country_flag = ENG_fighter_refused
				has_country_flag = USA_fighter_refused
				has_country_flag = FRA_fighter_refused
				has_country_flag = ITA_fighter_refused
			} 
		}
	}
	desc = {
		text = DOD_hungary.151.desc_light_fighter_refused
		trigger = {
			OR = {
		 		has_country_flag = GER_fighter_refused
				has_country_flag = ENG_fighter_refused
				has_country_flag = USA_fighter_refused
				has_country_flag = FRA_fighter_refused
				has_country_flag = ITA_fighter_refused
		 	}
		}
	}
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	option = {# Select German Plane
		name = DOD_hungary.151.a
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = GER
				factor = 10
			}
			modifier = {
				GER = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				GER = {
					has_tech = fighter1
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = fighter2
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					GER = { has_tech = fighter1}
					YUG = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					GER = { has_tech = fighter2}
					YUG = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					GER = { has_tech = fighter3}
					YUG = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = GER }
			NOT = { has_country_flag = GER_fighter_refused }
		}
		GER = { country_event = DOD_yugoslavia.153 }	
	}

	option = {# select italian plane
		name = DOD_hungary.151.b
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ITA
				factor = 10
			}
			modifier = {
				ITA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ITA = {
					has_tech = fighter1
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = fighter2
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ITA = { has_tech = fighter1}
					YUG = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					ITA = { has_tech = fighter2}
					YUG = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					ITA = { has_tech = fighter3}
					YUG = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = ITA }
			NOT = { has_country_flag = ITA_fighter_refused }
		}
		ITA = { country_event = DOD_yugoslavia.153 }	
	}

	option = {# select french plane
		name = DOD_hungary.151.c
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = FRA
				factor = 10
			}
			modifier = {
				FRA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				FRA = {
					has_tech = fighter1
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = fighter2
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					FRA = { has_tech = fighter1}
					YUG = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					FRA = { has_tech = fighter2}
					YUG = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					FRA = { has_tech = fighter3}
					YUG = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = FRA }
			NOT = { has_country_flag = FRA_fighter_refused }
			
		}
		FRA = { country_event = DOD_yugoslavia.153 }	
	}
	option = {# select british plane
		name = DOD_hungary.151.d
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ENG
				factor = 10
			}
			modifier = {
				ENG = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ENG = {
					has_tech = fighter1
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = fighter2
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ENG = { has_tech = fighter1}
					YUG = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					ENG = { has_tech = fighter2}
					YUG = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					ENG = { has_tech = fighter3}
					YUG = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = ENG }
			NOT = { has_country_flag = ENG_fighter_refused }
		}
		ENG = { country_event = DOD_yugoslavia.153 }	
	}
	option = {# select american plane
		name = DOD_hungary.151.e
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = USA
				factor = 10
			}
			modifier = {
				USA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				USA = {
					has_tech = fighter1
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = fighter2
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					USA = { has_tech = fighter1}
					YUG = { NOT = { has_tech = fighter1 } }
				}
				AND = {
					USA = { has_tech = fighter2}
					YUG = { NOT = { has_tech = fighter2 } }
				}
				AND = {
					USA = { has_tech = fighter3}
					YUG = { NOT = { has_tech = fighter3 } }
				}
			}
			NOT = { has_war_with = USA }
			NOT = { has_country_flag = USA_fighter_refused }
			NOT = { #to prevent overflow issues
				AND = {
					GER = {
						is_available_fighter_YUG = yes
					}
					FRA = {
						is_available_fighter_YUG = yes
					}
					ITA = {
						is_available_fighter_YUG = yes
					}
					ENG = {
						is_available_fighter_YUG = yes
					}
				}
			}
		}
		USA = { country_event = DOD_yugoslavia.153 }	
	}
	option = {# failsafe
		name = DOD_hungary.151.f	
		trigger = {
			OR = {
				has_country_flag = GER_fighter_refused
				has_country_flag = ITA_fighter_refused
				has_country_flag = ENG_fighter_refused
				has_country_flag = FRA_fighter_refused
				has_country_flag = USA_fighter_refused
			}
		}
		air_experience = 50
	}

}

#Fighter competition - Yugoslavia is looking for a heavy fighter
country_event = {
	id = DOD_yugoslavia.152
	title = DOD_hungary.152.t
	desc = {
		text = DOD_hungary.152.desc_heavy_fighter
		trigger = {
			NOT = { 
				has_country_flag = GER_heavy_fighter_refused
				has_country_flag = ENG_heavy_fighter_refused
				has_country_flag = USA_heavy_fighter_refused
				has_country_flag = FRA_heavy_fighter_refused
				has_country_flag = ITA_heavy_fighter_refused
			} 
		}
	}
	desc = {
		text = DOD_hungary.152.desc_heavy_fighter_refused
		trigger = {
			OR = {
		 		has_country_flag = GER_heavy_fighter_refused
				has_country_flag = ENG_heavy_fighter_refused
				has_country_flag = USA_heavy_fighter_refused
				has_country_flag = FRA_heavy_fighter_refused
				has_country_flag = ITA_heavy_fighter_refused
		 	}
		}
	}
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	option = {# Select German Plane
		name = DOD_hungary.151.a
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = GER
				factor = 10
			}
			modifier = {
				GER = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				GER = {
					has_tech = heavy_fighter1
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = heavy_fighter2
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = heavy_fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					GER = { has_tech = heavy_fighter1}
					YUG = { NOT = { has_tech = heavy_fighter1 } }
				}
				AND = {
					GER = { has_tech = heavy_fighter2}
					YUG = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					GER = { has_tech = heavy_fighter3}
					YUG = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = GER }
			NOT = { has_country_flag = GER_heavy_fighter_refused }
		}
		GER = { country_event = DOD_yugoslavia.154 }	
	}

	option = {# select italian plane
		name = DOD_hungary.151.b
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ITA
				factor = 10
			}
			modifier = {
				ITA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ITA = {
					has_tech = heavy_fighter1
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = heavy_fighter2
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = heavy_fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ITA = { has_tech = heavy_fighter1}
					YUG = { NOT = { has_tech = heavy_fighter1 } }
				}
				AND = {
					ITA = { has_tech = heavy_fighter2}
					YUG = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					ITA = { has_tech = heavy_fighter3}
					YUG = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = ITA }
			NOT = { has_country_flag = ITA_heavy_fighter_refused }
		}
		ITA = { country_event = DOD_yugoslavia.154 }	
	}

	option = {# select french plane
		name = DOD_hungary.151.c
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = FRA
				factor = 10
			}
			modifier = {
				FRA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				FRA = {
					has_tech = heavy_fighter1
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = heavy_fighter2
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = heavy_fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					FRA = { has_tech = heavy_fighter1}
					YUG = { NOT = { has_tech = heavy_fighter1 } }
				}
				AND = {
					FRA = { has_tech = heavy_fighter2}
					YUG = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					FRA = { has_tech = heavy_fighter3}
					YUG = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = FRA }
			NOT = { has_country_flag = FRA_heavy_fighter_refused }
			
		}
		FRA = { country_event = DOD_yugoslavia.154 }	
	}
	option = {# select british plane
		name = DOD_hungary.151.d
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ENG
				factor = 10
			}
			modifier = {
				ENG = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ENG = {
					has_tech = heavy_fighter1
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = heavy_fighter2
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = heavy_fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ENG = { has_tech = heavy_fighter1}
					YUG = { NOT = { has_tech = heavy_fighter1 } }
				}
				AND = {
					ENG = { has_tech = heavy_fighter2}
					YUG = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					ENG = { has_tech = heavy_fighter3}
					YUG = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = ENG }
			NOT = { has_country_flag = ENG_heavy_fighter_refused }
		}
		ENG = { country_event = DOD_yugoslavia.154 }	
	}
	option = {# select american plane
		name = DOD_hungary.151.e
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = USA
				factor = 10
			}
			modifier = {
				USA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				USA = {
					has_tech = heavy_fighter1
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = heavy_fighter2
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = heavy_fighter3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					USA = { has_tech = heavy_fighter1}
					YUG = { NOT = { has_tech = heavy_fighter1 } }
				}
				AND = {
					USA = { has_tech = heavy_fighter2}
					YUG = { NOT = { has_tech = heavy_fighter2 } }
				}
				AND = {
					USA = { has_tech = heavy_fighter3}
					YUG = { NOT = { has_tech = heavy_fighter3 } }
				}
			}
			NOT = { has_war_with = USA }
			NOT = { has_country_flag = USA_heavy_fighter_refused }
			NOT = { #to prevent overflow issues
				AND = {
					GER = {
						is_available_heavy_fighter_YUG = yes
					}
					FRA = {
						is_available_heavy_fighter_YUG = yes
					}
					ITA = {
						is_available_heavy_fighter_YUG = yes
					}
					ENG = {
						is_available_heavy_fighter_YUG = yes
					}
				}
			}
		}
		USA = { country_event = DOD_yugoslavia.154 }	
	}
	option = {# failsafe
		name = DOD_hungary.151.f	
		trigger = {
			OR = {
				has_country_flag = GER_heavy_fighter_refused
				has_country_flag = ITA_heavy_fighter_refused
				has_country_flag = ENG_heavy_fighter_refused
				has_country_flag = FRA_heavy_fighter_refused
				has_country_flag = USA_heavy_fighter_refused
			}
		}
		air_experience = 50
	}

}

#fighter competition - light fighter competition winner gets a choice whether to permit license production
country_event = {
	id = DOD_yugoslavia.153
	title = DOD_hungary.153.t
	desc = DOD_hungary.153.desc 
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	option = {# certainly
		name = DOD_hungary.153.a
		ai_chance = {
			factor = 90
			modifier = {
				has_war = yes
				factor = 0.5
			}
		}
		YUG = { country_event = DOD_yugoslavia.155 }
		air_experience = 20
		if = {
			limit = {
				has_tech = fighter1
				NOT = { has_tech = fighter2 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = fighter_equipment_1
					
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = fighter2
				NOT = { has_tech = fighter3 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = fighter_equipment_2
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = fighter3
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = fighter_equipment_3
				}
				cost_factor = 0
			}
		}
	}

	option = {# no
		name = DOD_hungary.153.b
		ai_chance = {
			factor = 10
			modifier = {
				is_in_faction_with = YUG
				factor = 0
			}
		}
		if = {
			limit = { tag = GER }
			YUG = { set_country_flag = GER_fighter_refused }
		}
		if = {
			limit = { tag = ITA }
			YUG = { set_country_flag = ITA_fighter_refused }
		}
		if = {
			limit = { tag = FRA }
			YUG = { set_country_flag = FRA_fighter_refused }
		}
		if = {
			limit = { tag = ENG }
			YUG = { set_country_flag = ENG_fighter_refused }
		}
		if = {
			limit = { tag = USA }
			YUG = { set_country_flag = USA_fighter_refused }
		}
		YUG = { country_event = DOD_yugoslavia.151 }
		reverse_add_opinion_modifier = { target = YUG modifier = refused_help }
	}
}

#fighter competition - heavy fighter competition winner gets a choice whether to permit license production
country_event = {
	id = DOD_yugoslavia.154
	title = DOD_hungary.153.t
	desc = DOD_hungary.154.desc 
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	option = {# certainly
		name = DOD_hungary.153.a
		ai_chance = {
			factor = 90
			modifier = {
				has_war = yes
				factor = 0.5
			}
		}
		YUG = { country_event = DOD_yugoslavia.155 }
		air_experience = 20
		if = {
			limit = {
				has_tech = heavy_fighter1
				NOT = { has_tech = heavy_fighter2 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = heavy_fighter_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = heavy_fighter2
				NOT = { has_tech = heavy_fighter3 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = heavy_fighter_equipment_2	
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = heavy_fighter3
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = heavy_fighter_equipment_3
				}
				cost_factor = 0
			}
		}
		
	}

	option = {# no
		name = DOD_hungary.153.b
		ai_chance = {
			factor = 10
			modifier = {
				is_in_faction_with = YUG
				factor = 0
			}
		}
		if = {
			limit = { tag = GER }
			YUG = { set_country_flag = GER_heavy_fighter_refused }
		}
		if = {
			limit = { tag = ITA }
			YUG = { set_country_flag = ITA_heavy_fighter_refused }
		}
		if = {
			limit = { tag = FRA }
			YUG = { set_country_flag = FRA_heavy_fighter_refused }
		}
		if = {
			limit = { tag = ENG }
			YUG = { set_country_flag = ENG_heavy_fighter_refused }
		}
		if = {
			limit = { tag = USA }
			YUG = { set_country_flag = USA_heavy_fighter_refused }
		}
		YUG = { country_event = DOD_yugoslavia.152 }
		reverse_add_opinion_modifier = { target = YUG modifier = refused_help }
	}
}

#fighter competition - license production approved
country_event = {
	id = DOD_yugoslavia.155
	title = DOD_hungary.155.t
	desc = DOD_hungary.155.desc 
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	option = {# neat
		name = DOD_hungary.155.a
		
	}
}


#bomber competition - initial choice for Yugoslavia
country_event = {
	id = DOD_yugoslavia.160
	title = DOD_hungary.160.t
	desc = DOD_hungary.160.desc 
	picture = GFX_report_event_generic_bombers
	
	is_triggered_only = yes

	option = {# CAS
		name = DOD_hungary.160.a
		trigger = {
			OR = {
				GER = {
					is_available_cas_YUG = yes
				}
				FRA = {
					is_available_cas_YUG = yes
				}
				ITA = {
					is_available_cas_YUG = yes
				}
				ENG = {
					is_available_cas_YUG = yes
				}
				USA = {
					is_available_cas_YUG = yes
				}
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				has_tech = CAS1
				add = -10
			}
			modifier = {
				has_tech = CAS2
				add = -10
			}
			modifier = {
				has_tech = CAS3
				factor = 0
			}
		}
		country_event = DOD_yugoslavia.161 	
	}

	option = {# TAC
		name = DOD_hungary.160.b
		trigger = {
			OR = {
				GER = {
					is_available_tac_YUG = yes
				}
				FRA = {
					is_available_tac_YUG = yes
				}
				ITA = {
					is_available_tac_YUG = yes
				}
				ENG = {
					is_available_tac_YUG = yes
				}
				USA = {
					is_available_tac_YUG = yes
				}
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				has_tech = tactical_bomber1
				add = -10
			}
			modifier = {
				has_tech = tactical_bomber2
				add = -10
			}
			modifier = {
				has_tech = tactical_bomber3
				factor = 0
			}
		}
		country_event = DOD_yugoslavia.162
	}
}

#Bomber competition - Yugoslavia is looking for a CAS
country_event = {
	id = DOD_yugoslavia.161
	title = DOD_hungary.161.t
	desc = {
		text = DOD_hungary.161.desc_cas
		trigger = {
			NOT = { 
				has_country_flag = GER_CAS_refused
				has_country_flag = ENG_CAS_refused
				has_country_flag = USA_CAS_refused
				has_country_flag = FRA_CAS_refused
				has_country_flag = ITA_CAS_refused
			} 
		}
	}
	desc = {
		text = DOD_hungary.161.desc_cas_refused
		trigger = {
			OR = {
		 		has_country_flag = GER_CAS_refused
				has_country_flag = ENG_CAS_refused
				has_country_flag = USA_CAS_refused
				has_country_flag = FRA_CAS_refused
				has_country_flag = ITA_CAS_refused
		 	}
		}
	}
	picture = GFX_report_event_generic_bombers
	
	is_triggered_only = yes

	option = {# Select German Plane
		name = DOD_hungary.151.a
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = GER
				factor = 10
			}
			modifier = {
				GER = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				GER = {
					has_tech = CAS1
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = CAS2
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = CAS3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					GER = { has_tech = CAS1}
					YUG = { NOT = { has_tech = CAS1 } }
				}
				AND = {
					GER = { has_tech = CAS2}
					YUG = { NOT = { has_tech = CAS2 } }
				}
				AND = {
					GER = { has_tech = CAS3}
					YUG = { NOT = { has_tech = CAS3 } }
				}
			}
			NOT = { has_war_with = GER }
			NOT = { has_country_flag = GER_CAS_refused }
		}
		GER = { country_event = DOD_yugoslavia.163 }	
	}

	option = {# select italian plane
		name = DOD_hungary.151.b
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ITA
				factor = 10
			}
			modifier = {
				ITA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ITA = {
					has_tech = CAS1
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = CAS2
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = CAS3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ITA = { has_tech = CAS1}
					YUG = { NOT = { has_tech = CAS1 } }
				}
				AND = {
					ITA = { has_tech = CAS2}
					YUG = { NOT = { has_tech = CAS2 } }
				}
				AND = {
					ITA = { has_tech = CAS3}
					YUG = { NOT = { has_tech = CAS3 } }
				}
			}
			NOT = { has_war_with = ITA }
			NOT = { has_country_flag = ITA_CAS_refused }
		}
		ITA = { country_event = DOD_yugoslavia.163 }	
	}

	option = {# select french plane
		name = DOD_hungary.151.c
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = FRA
				factor = 10
			}
			modifier = {
				FRA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				FRA = {
					has_tech = CAS1
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = CAS2
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = CAS3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					FRA = { has_tech = CAS1}
					YUG = { NOT = { has_tech = CAS1 } }
				}
				AND = {
					FRA = { has_tech = CAS2}
					YUG = { NOT = { has_tech = CAS2 } }
				}
				AND = {
					FRA = { has_tech = CAS3}
					YUG = { NOT = { has_tech = CAS3 } }
				}
			}
			NOT = { has_war_with = FRA }
			NOT = { has_country_flag = FRA_CAS_refused }
		}
		FRA = { country_event = DOD_yugoslavia.163 }	
	}
	option = {# select british plane
		name = DOD_hungary.151.d
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ENG
				factor = 10
			}
			modifier = {
				ENG = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ENG = {
					has_tech = CAS1
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = CAS2
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = CAS3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ENG = { has_tech = CAS1}
					YUG = { NOT = { has_tech = CAS1 } }
				}
				AND = {
					ENG = { has_tech = CAS2}
					YUG = { NOT = { has_tech = CAS2 } }
				}
				AND = {
					ENG = { has_tech = CAS3}
					YUG = { NOT = { has_tech = CAS3 } }
				}
			}
			NOT = { has_war_with = ENG }
			NOT = { has_country_flag = ENG_CAS_refused }
		}
		ENG = { country_event = DOD_yugoslavia.163 }	
	}
	option = {# select american plane
		name = DOD_hungary.151.e
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = USA
				factor = 10
			}
			modifier = {
				USA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				USA = {
					has_tech = CAS1
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = CAS2
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = CAS3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					USA = { has_tech = CAS1}
					YUG = { NOT = { has_tech = CAS1 } }
				}
				AND = {
					USA = { has_tech = CAS2}
					YUG = { NOT = { has_tech = CAS2 } }
				}
				AND = {
					USA = { has_tech = CAS3}
					YUG = { NOT = { has_tech = CAS3 } }
				}
			}
			NOT = { has_war_with = USA }
			NOT = { has_country_flag = USA_CAS_refused }
			NOT = { #to prevent overflow issues
				AND = {
					GER = {
						is_available_cas_YUG = yes
					}
					FRA = {
						is_available_cas_YUG = yes
					}
					ITA = {
						is_available_cas_YUG = yes
					}
					ENG = {
						is_available_cas_YUG = yes
					}
				}
			}
		}
		USA = { country_event = DOD_yugoslavia.163 }	
	}
	option = {# failsafe
		name = DOD_hungary.151.f	
		trigger = {
			OR = {
				has_country_flag = GER_fighter_refused
				has_country_flag = ITA_fighter_refused
				has_country_flag = ENG_fighter_refused
				has_country_flag = FRA_fighter_refused
				has_country_flag = USA_fighter_refused
			}
		}
		air_experience = 50
	}

}
#Fighter competition - Yugoslavia is looking for a tacbomber
country_event = {
	id = DOD_yugoslavia.162
	title = DOD_hungary.162.t
	desc = {
		text = DOD_hungary.162.desc_tac
		trigger = {
			NOT = { 
				has_country_flag = GER_tactical_bomber_refused
				has_country_flag = ENG_tactical_bomber_refused
				has_country_flag = USA_tactical_bomber_refused
				has_country_flag = FRA_tactical_bomber_refused
				has_country_flag = ITA_tactical_bomber_refused
			} 
		}
	}
	desc = {
		text = DOD_hungary.162.desc_tac_refused
		trigger = {
			OR = {
		 		has_country_flag = GER_tactical_bomber_refused
				has_country_flag = ENG_tactical_bomber_refused
				has_country_flag = USA_tactical_bomber_refused
				has_country_flag = FRA_tactical_bomber_refused
				has_country_flag = ITA_tactical_bomber_refused
		 	}
		}
	}
	picture = GFX_report_event_generic_bombers
	
	is_triggered_only = yes

	option = {# Select German Plane
		name = DOD_hungary.151.a
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = GER
				factor = 10
			}
			modifier = {
				GER = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				GER = {
					has_tech = tactical_bomber1
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = tactical_bomber2
				}
				add = 10
			}
			modifier = {
				GER = {
					has_tech = tactical_bomber3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					GER = { has_tech = tactical_bomber1}
					YUG = { NOT = { has_tech = tactical_bomber1 } }
				}
				AND = {
					GER = { has_tech = tactical_bomber2}
					YUG = { NOT = { has_tech = tactical_bomber2 } }
				}
				AND = {
					GER = { has_tech = tactical_bomber3}
					YUG = { NOT = { has_tech = tactical_bomber3 } }
				}
			}
			NOT = { has_war_with = GER }
			NOT = { has_country_flag = GER_tactical_bomber_refused }
		}
		GER = { country_event = DOD_yugoslavia.164 }	
	}

	option = {# select italian plane
		name = DOD_hungary.151.b
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ITA
				factor = 10
			}
			modifier = {
				ITA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ITA = {
					has_tech = tactical_bomber1
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = tactical_bomber2
				}
				add = 10
			}
			modifier = {
				ITA = {
					has_tech = tactical_bomber3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ITA = { has_tech = tactical_bomber1}
					YUG = { NOT = { has_tech = tactical_bomber1 } }
				}
				AND = {
					ITA = { has_tech = tactical_bomber2}
					YUG = { NOT = { has_tech = tactical_bomber2 } }
				}
				AND = {
					ITA = { has_tech = tactical_bomber3}
					YUG = { NOT = { has_tech = tactical_bomber3 } }
				}
			}
			NOT = { has_war_with = ITA }
			NOT = { has_country_flag = ITA_tactical_bomber_refused }
		}
		ITA = { country_event = DOD_yugoslavia.164 }	
	}

	option = {# select french plane
		name = DOD_hungary.151.c
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = FRA
				factor = 10
			}
			modifier = {
				FRA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				FRA = {
					has_tech = tactical_bomber1
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = tactical_bomber2
				}
				add = 10
			}
			modifier = {
				FRA = {
					has_tech = tactical_bomber3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					FRA = { has_tech = tactical_bomber1}
					YUG = { NOT = { has_tech = tactical_bomber1 } }
				}
				AND = {
					FRA = { has_tech = tactical_bomber2}
					YUG = { NOT = { has_tech = tactical_bomber2 } }
				}
				AND = {
					FRA = { has_tech = tactical_bomber3}
					YUG = { NOT = { has_tech = tactical_bomber3 } }
				}
			}
			NOT = { has_war_with = FRA }
			NOT = { has_country_flag = FRA_tactical_bomber_refused }
		}
		FRA = { country_event = DOD_yugoslavia.164 }	
	}
	option = {# select british plane
		name = DOD_hungary.151.d
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = ENG
				factor = 10
			}
			modifier = {
				ENG = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				ENG = {
					has_tech = tactical_bomber1
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = tactical_bomber2
				}
				add = 10
			}
			modifier = {
				ENG = {
					has_tech = tactical_bomber3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					ENG = { has_tech = tactical_bomber1}
					YUG = { NOT = { has_tech = tactical_bomber1 } }
				}
				AND = {
					ENG = { has_tech = tactical_bomber2}
					YUG = { NOT = { has_tech = tactical_bomber2 } }
				}
				AND = {
					ENG = { has_tech = tactical_bomber3}
					YUG = { NOT = { has_tech = tactical_bomber3 } }
				}
			}
			NOT = { has_war_with = ENG }
			NOT = { has_country_flag = ENG_tactical_bomber_refused }
		}
		ENG = { country_event = DOD_yugoslavia.164 }	
	}
	option = {# select american plane
		name = DOD_hungary.151.e
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction_with = USA
				factor = 10
			}
			modifier = {
				USA = { has_government = ROOT }
				factor = 2
			}
			modifier = {
				USA = {
					has_tech = tactical_bomber1
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = tactical_bomber2
				}
				add = 10
			}
			modifier = {
				USA = {
					has_tech = tactical_bomber3
				}
				add = 10
			}
		}
		trigger = {
			OR = {
				AND = {
					USA = { has_tech = tactical_bomber1}
					YUG = { NOT = { has_tech = tactical_bomber1 } }
				}
				AND = {
					USA = { has_tech = tactical_bomber2}
					YUG = { NOT = { has_tech = tactical_bomber2 } }
				}
				AND = {
					USA = { has_tech = tactical_bomber3}
					YUG = { NOT = { has_tech = tactical_bomber3 } }
				}
			}
			NOT = { has_war_with = USA }
			NOT = { has_country_flag = USA_tactical_bomber_refused }
			NOT = { #to prevent overflow issues
				AND = {
					GER = {
						is_available_tac_YUG = yes
					}
					FRA = {
						is_available_tac_YUG = yes
					}
					ITA = {
						is_available_tac_YUG = yes
					}
					ENG = {
						is_available_tac_YUG = yes
					}
				}
			}
		}
		USA = { country_event = DOD_yugoslavia.164 }	
	}
	option = {# failsafe
		name = DOD_hungary.151.f	
		trigger = {
			OR = {
				has_country_flag = GER_fighter_refused
				has_country_flag = ITA_fighter_refused
				has_country_flag = ENG_fighter_refused
				has_country_flag = FRA_fighter_refused
				has_country_flag = USA_fighter_refused
			}
		}
		air_experience = 50
	}

}

#bomber competition - CAS competition winner gets a choice whether to permit license production
country_event = {
	id = DOD_yugoslavia.163
	title = DOD_hungary.163.t
	desc = DOD_hungary.163.desc 
	picture = GFX_report_event_generic_bombers
	
	is_triggered_only = yes

	option = {# certainly
		name = DOD_hungary.153.a
		ai_chance = {
			factor = 90
			modifier = {
				has_war = yes
				factor = 0.5
			}
		}
		YUG = { country_event = DOD_yugoslavia.165 }
		air_experience = 20
		if = {
			limit = {
				has_tech = CAS1
				NOT = { has_tech = CAS2 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = CAS_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = CAS2
				NOT = { has_tech = CAS3 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = CAS_equipment_2	
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = CAS3
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = CAS_equipment_3
				}
				cost_factor = 0
			}
		}
	}

	option = {# no
		name = DOD_hungary.153.b
		ai_chance = {
			factor = 10
			modifier = {
				is_in_faction_with = YUG
				factor = 0
			}
		}
		if = {
			limit = { tag = GER }
			YUG = { set_country_flag = GER_CAS_refused }
		}
		if = {
			limit = { tag = ITA }
			YUG = { set_country_flag = ITA_CAS_refused }
		}
		if = {
			limit = { tag = FRA }
			YUG = { set_country_flag = FRA_CAS_refused }
		}
		if = {
			limit = { tag = ENG }
			YUG = { set_country_flag = ENG_CAS_refused }
		}
		if = {
			limit = { tag = USA }
			YUG = { set_country_flag = USA_CAS_refused }
		}
		YUG = { country_event = DOD_yugoslavia.161 }
		reverse_add_opinion_modifier = { target = YUG modifier = refused_help }
	}
}

#bomber competition - tac bomber competition winner gets a choice whether to permit license production
country_event = {
	id = DOD_yugoslavia.164
	title = DOD_hungary.164.t
	desc = DOD_hungary.164.desc 
	picture = GFX_report_event_generic_bombers
	
	is_triggered_only = yes

	option = {# certainly
		name = DOD_hungary.153.a
		ai_chance = {
			factor = 90
			modifier = {
				has_war = yes
				factor = 0.5
			}
		}
		YUG = { country_event = DOD_yugoslavia.165 }
		air_experience = 20
		if = {
			limit = {
				has_tech = tactical_bomber1
				NOT = { has_tech = tactical_bomber2 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = tac_bomber_equipment_1
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tactical_bomber2
				NOT = { has_tech = tactical_bomber3 }
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = tac_bomber_equipment_2	
				}
				cost_factor = 0
			}
		}
		if = {
			limit = {
				has_tech = tactical_bomber3
			}
			create_production_license = {
				target = YUG 
				equipment = {
					type = tac_bomber_equipment_3
				}
				cost_factor = 0
			}
		}
	}

	option = {# no
		name = DOD_hungary.153.b
		ai_chance = {
			factor = 10
			modifier = {
				is_in_faction_with = YUG
				factor = 0
			}
		}
		if = {
			limit = { tag = GER }
			YUG = { set_country_flag = GER_tactical_bomber_refused }
		}
		if = {
			limit = { tag = ITA }
			YUG = { set_country_flag = ITA_tactical_bomber_refused }
		}
		if = {
			limit = { tag = FRA }
			YUG = { set_country_flag = FRA_tactical_bomber_refused }
		}
		if = {
			limit = { tag = ENG }
			YUG = { set_country_flag = ENG_tactical_bomber_refused }
		}
		if = {
			limit = { tag = USA }
			YUG = { set_country_flag = USA_tactical_bomber_refused }
		}
		YUG = { country_event = DOD_yugoslavia.162 }
		reverse_add_opinion_modifier = { target = YUG modifier = refused_help }
	}
}

#bomber competition - license production approved
country_event = {
	id = DOD_yugoslavia.165
	title = DOD_hungary.165.t
	desc = DOD_hungary.165.desc 
	picture = GFX_report_event_generic_bombers
	
	is_triggered_only = yes

	option = {# neat
		name = DOD_hungary.165.a
		
	}
}

#The Royal Wedding
country_event = {
	id = DOD_yugoslavia.50
	title = DOD_yugoslavia.50.t
	desc = DOD_yugoslavia.50.desc
	picture = GFX_report_event_generic_rally
	
	is_triggered_only = yes

	fire_only_once = yes

	option = { #Historical (allies)
		name = DOD_yugoslavia.50.a
		hidden_effect = {
			save_global_event_target_as = yugoslavia_wedding_partner
		}
	}
	option = { #Italy
		name = DOD_yugoslavia.50.b
		trigger = {
			any_other_country = {
				original_tag = ITA
				NOT = { has_war_with = ROOT }
				NOT = { has_government = communism }
			}
		}
		random_country = {
			limit = {
				original_tag = ITA
				NOT = { has_government = communism }
			}
			country_event = {
				id = DOD_yugoslavia.501
				days = 10
			}
			hidden_effect = { save_global_event_target_as = yugoslavia_wedding_partner }
		}
	}
	option = { #Spanish Princess
		name = DOD_yugoslavia.50.e
		trigger = {
			any_other_country = {
				original_tag = SPR
				NOT = { has_war_with = ROOT }
				has_completed_focus = SPA_settle_the_succession_question
			}
		}
		random_country = {
			limit = {
				original_tag = SPR
				has_completed_focus = SPA_settle_the_succession_question
			}
			country_event = {
				id = DOD_yugoslavia.501
				days = 10
			}
			hidden_effect = { save_global_event_target_as = yugoslavia_wedding_partner }
		}
	}
}

#Wedding partner can accept or decline
country_event = {
	id = DOD_yugoslavia.501
	title = DOD_yugoslavia.501.t
	desc = DOD_yugoslavia.501.desc
	picture = GFX_report_event_election_vote
	
	is_triggered_only = yes

	fire_only_once = yes

	option = { #Yes
		name = DOD_yugoslavia.501.a
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				has_guaranteed = YUG
			}
			modifier = {
				factor = 2
				has_non_aggression_pact_with = YUG
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = YUG
					value = 25
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = YUG
					value = 100
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = YUG
					value = 150
				}
			}
			modifier = {
				factor = 2
				has_government = neutrality
			}
		}
		FROM = {
			country_event = {
				id = DOD_yugoslavia.502
				days = 10
			}
			effect_tooltip = {
				add_opinion_modifier = { 
					target = ROOT
					modifier = YUG_royal_ties
				}
			}
		}
	}
	option = { #No
		name = DOD_yugoslavia.501.b
		ai_chance = {
			factor = 10
			modifier = {
				factor = 5
				has_wargoal_against = YUG
			}
			modifier = {
				factor = 5
				is_justifying_wargoal_against = YUG
			}
			modifier = {
				factor = 2
				has_government = fascism
			}
		}
		YUG = {
			country_event = {
				id = DOD_yugoslavia.503
				days = 10
			}
			hidden_effect = { save_global_event_target_as = yugoslavia_wedding_partner }
		}
	}
}

#Yugoslavia is informed of their choice
country_event = {
	id = DOD_yugoslavia.502
	title = DOD_yugoslavia.502.t
	desc = DOD_yugoslavia.502.desc
	picture = GFX_report_event_election_vote
	
	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = DOD_yugoslavia.502.a
		add_opinion_modifier = { 
			target = FROM
			modifier = YUG_royal_ties
		}
		reverse_add_opinion_modifier = { 
			target = FROM
			modifier = YUG_royal_ties
		}
		if = {
			limit = {
				has_war = yes
			}
			add_stability = -0.1
		}
		else = {
			add_stability = 0.1
		}
	}
}

#Yugoslavia is informed of their rejection
country_event = {
	id = DOD_yugoslavia.503
	title = DOD_yugoslavia.503.t
	desc = DOD_yugoslavia.503.desc
	picture = GFX_report_event_election_vote
	
	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = DOD_yugoslavia.503.a
		add_opinion_modifier = { 
			target = FROM
			modifier = small_decrease
		}
	}
}

#Signing the Tripartite Pact
country_event = {
	id = DOD_yugoslavia.70
	title = DOD_yugoslavia.70.t
	desc = DOD_yugoslavia.70.desc
	picture = GFX_report_event_election_vote
	
	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = DOD_yugoslavia.70.a
		ai_chance = {
			factor = 10
		}
		add_opinion_modifier = { target = YUG modifier = tripartite_pact_opinion }
		reverse_add_opinion_modifier = { target = YUG modifier = tripartite_pact_opinion }
		if = {
			limit = { 
				ENG = {
					is_faction_leader = yes
					has_government = democratic
					NOT = { has_country_flag = has_already_decided_yugo_coup_flag }
				}
			}
			ENG = { country_event = { id = DOD_yugoslavia.702 days = 20 } }
		}
		else = {
			get_best_alliance_match_democratic_effect = yes
			var:best_leader = {
				country_event = { id = DOD_yugoslavia.702 days = 20 }
			}
		}
	}

	option = {
		name = DOD_yugoslavia.70.b
		ai_chance = {
			factor = 1
		}
	}
}
#England can demand Paul to step down
country_event = {
	id = DOD_yugoslavia.702
	title = DOD_yugoslavia.702.t
	desc = DOD_yugoslavia.702.desc
	picture = GFX_report_event_election_vote
	
	is_triggered_only = yes

	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			set_country_flag = has_already_decided_yugo_coup_flag
		}
	}

	option = {
		name = DOD_yugoslavia.702.a
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0.5
				has_opinion = {
					target = YUG
					value = 25
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = YUG
					value = 100
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = YUG
					value = 150
				}
			}
		}
		YUG = { country_event = { id = DOD_yugoslavia.701 days = 10 } }
	}
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				has_guaranteed = YUG
			}
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				FROM = { is_ai = yes }
			}
		}
		name = DOD_yugoslavia.702.b
	}
}

#Italy recieves Yugo's request to control Zara
country_event = {
	id = DOD_yugoslavia.80
	title = DOD_yugoslavia.80.t
	desc = DOD_yugoslavia.80.desc
	picture = GFX_report_event_election_vote
	
	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = DOD_yugoslavia.80.a
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 65
				}
			}
			
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 35
				}
			}
			
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 5
				}
			}
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value < 35
				}
			}
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value < 65
				}
			}
			
			modifier = {
				factor = 10
				has_war = yes
				FROM = {
					has_war = no
				}
			}
			
			modifier = {
				factor = 0.05
				has_war = no
				FROM = {
					has_war = yes
				}
			}
		}
		FROM = { transfer_state = 163 }
		
		if = {
			limit = {
				is_faction_leader = yes
			}
			add_to_faction = YUG
		}
		else = {
			random_country = {
				limit = {
					is_in_faction_with = ITA
					is_faction_leader = yes
				}
				add_to_faction = YUG
			}
		}
		FROM = { country_event = { id = DOD_yugoslavia.802 } }
	}
	
	option = {
		name = DOD_yugoslavia.80.b
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 65
				}
			}
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 35
				}
			}
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 5
				}
			}
			
			modifier = {
				factor = 2.0
				has_opinion = {
					target = FROM
					value < 35
				}
			}
			
			modifier = {
				factor = 2.0
				has_opinion = {
					target = FROM
					value < 65
				}
			}
			
			modifier = {
				factor = 0.1
				has_war = yes
				FROM = {
					has_war = no
				}
			}
			
			modifier = {
				factor = 0.5
				FROM = {
					is_in_faction = yes
				}
			}
			
			modifier = {
				factor = 0.1
				FROM = {
					is_major = yes
				}
			}
			
			modifier = {
				factor = 0
				is_major = no
			}
		}
		FROM = { country_event = { id = DOD_yugoslavia.801 } }
	}
}

#Yugo informed of rejection
country_event = {
	id = DOD_yugoslavia.801
	title = DOD_yugoslavia.801.t
	desc = DOD_yugoslavia.801.desc
	picture = GFX_report_event_election_vote
	
	is_triggered_only = yes

	fire_only_once = yes
	
	option = {
		name = DOD_yugoslavia.801.a #I'mma join anyway
		ITA = { transfer_state = 103 }
		if = {
			limit = {
				GER = {
					exists = yes
					has_capitulated = no
					has_government = fascism
					is_faction_leader = yes
				}
			}
			GER = { country_event = generic.2 }
		}
		else = {
			get_best_alliance_match_fascism_effect = yes
			var:best_leader = {
				country_event = generic.2
			}
		}
	}
	
	option = {
		name = DOD_yugoslavia.801.b
	}
}

#Yugo informed of acceptance
country_event = {
	id = DOD_yugoslavia.802
	title = DOD_yugoslavia.802.t
	desc = DOD_yugoslavia.802.desc
	picture = GFX_report_event_election_vote
	
	is_triggered_only = yes

	fire_only_once = yes
	
	option = {
		name = DOD_yugoslavia.802.a #Epic
		effect_tooltip = {
			transfer_state = 163
			if = {
				limit = {
					FROM = { is_faction_leader = yes }
				}
				FROM = { add_to_faction = YUG }
			}
			else = {
				random_country = {
					limit = {
						is_in_faction_with = FROM
						is_faction_leader = yes
					}
					add_to_faction = YUG
				}
			}
		}
	}
}

#Hidden event adding Yugoslavia's puppets to wars involving Yugo.
country_event = {
	id = DOD_yugoslavia.9
	
	is_triggered_only = yes

	hidden = yes
	
	option = {
		name = DOD_yugoslavia.9.a
		add_to_war = {
			targeted_alliance = YUG
			enemy = GER
			hostility_reason = asked_to_join
		}
	}
}
###########################
# Ethiopian Events
###########################

add_namespace = ETH_events

# Ethiopia asks Italy for peace
country_event = {
	id = ETH_events.1
	title = ETH_events.1.t
	desc = ETH_events.1.d
	picture = GFX_report_event_african_soldiers
	
	is_triggered_only = yes
	
	option = {
		name = ETH_events.1.a
		ai_chance = {
			base = 10
		}
		FROM = {
			transfer_state = 550
			transfer_state = 559
			white_peace = ITA
		}
		unlock_national_focus = ITA_victoryinETH
		add_popularity = {
			ideology = fascism
			popularity = -0.25
		}
		add_stability = -0.1
		hidden_effect = {
			news_event = {
				id = news.337
				days = 1
			}
		}
	}
	
	option = {
		name = ETH_events.1.b
		ai_chance = {
			base = 0
		}
		FROM = {
			country_event = { id = ETH_events.101 days = 1 }
		}
	}
}

# Italy says no
country_event = {
	id = ETH_events.101
	title = ETH_events.101.t
	desc = ETH_events.101.d
	picture = GFX_report_event_african_soldiers
	
	is_triggered_only = yes
	
	option = {
		name = ETH_events.101.a
		ai_chance = {
			base = 10
		}
	}
}


###########################
# Finland Events
###########################

add_namespace = finland

# Soviet Ultimatum
country_event = {
	id = finland.1
	title = finland.1.t
	desc = finland.1.d
	picture = GFX_report_event_soviet_tanks_snow
	
	is_triggered_only = yes
	
	option = { # Refuse
		name = finland.1.b
		ai_chance = {
			base = 75
			modifier = {
				factor = 0
				is_in_faction_with = FROM
			}
		}
		FROM = {
			country_event = { days = 5 id = soviet.13 }
			effect_tooltip = {
				create_wargoal = {
					type = take_state
					target = FIN
					generator = { 146 }
				}
			}
		}
	}
}

country_event = {
	id = finland.4
	title = finland.4.t
	desc = finland.4.d
	picture = GFX_report_event_finnish_soldiers_snow
	
	is_triggered_only = yes

	option = {
		name = finland.4.a
	}
}

#Surrender when Soviet has taken too much land
country_event = {
	id = finland.7
	title = finland.7.t
	desc = finland.7.d
	picture = GFX_report_event_soviet_tanks_snow
	
	trigger = {
		tag = FIN
		has_war_with = SOV
		surrender_progress > 0.25
		has_civil_war = no
		is_in_faction = no
	}

	fire_only_once = yes

	#Surrender and offer territory
	option = {
		name = finland.7.a
		ai_chance = {
			base = 8
		}
		SOV = {
			country_event = { id = finland.8 }
		}
		custom_effect_tooltip = finland.7.a_tt
		effect_tooltip = {
			SOV = { 
				white_peace = {
					tag = FIN 
					message = FIN_agree_peace 
				} 
			}
			transfer_state = 146
			transfer_state = 147
			if = {
				limit = {
					722 = {
						is_claimed_by = SOV
					}
				}
				SOV = { remove_state_claim = 722 }
			}
		}
	}

	#Never give up!
	option = {
		name = finland.7.b
		ai_chance = {
			base = 2
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

#Soviet response to Finish surrender
country_event = {
	id = finland.8
	title = finland.8.t
	desc = finland.8.d
	picture = GFX_report_event_finnish_soldiers_snow
	
	is_triggered_only = yes

	#Accept surrender
	option = {
		name = finland.8.a
		ai_chance = {
			base = 9
		}
		white_peace = FIN
		transfer_state = 146
		transfer_state = 147
		if = {
			limit = {
				722 = {
					is_claimed_by = SOV
				}
			}
			remove_state_claim = 722
		}
		FIN = {
			add_ai_strategy = {
				type = antagonize
				id = "SOV"			
				value = 200
			}
		}
		if = {
			limit = {
				GER = {
					is_subject = no
					not = { is_in_faction_with = SOV}
				}
			}
			FIN = {
				add_ai_strategy = {
					type = befriend
					id = "GER"			
					value = 200
				}
			}
			GER = {
				add_ai_strategy = {
					type = befriend #Previously "alliance" -> Don't want Finland in the Axis for now
					id = "FIN"			
					value = 200
				}
			}
		}
		add_political_power = 75 #Good Propaganda to win "fast"
		SOV_paranoia_medium_decrease_effect = yes #Stalin likes this has been dealt with in a timely fashion
	}

	#Take it all
	option = {
		name = finland.8.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}			
		}
		FIN = { country_event = { id = finland.9 } }
	}
}

#Soviet says no!
country_event = {
	id = finland.9
	title = finland.9.t
	desc = finland.9.d
	picture = GFX_report_event_finnish_soldiers_snow
	
	is_triggered_only = yes

	option = {
		name = finland.9.a
	}
}

# WINTER WAR STARTS! -> (NSB Barbarossa free patch)
country_event = {
	id = finland.10
	title = finland.10.t
	desc = finland.10.d
	picture = GFX_report_event_finnish_soldiers_snow
	
	is_triggered_only = yes

	option = {
		name = finland.10.a

		add_ideas = winter_war_ns
	}
}
###########################
# French Events
###########################

add_namespace = france

# Japan demands Indochina
country_event = {
	id = france.1
	title = france.1.t
	desc = france.1.d
	picture = GFX_report_event_japan_army_mountainside
	
	is_triggered_only = yes
	
	option = { # Accept demands
		name = france.1.a
		ai_chance = {
			factor = 25 
			modifier = {
				factor = 50
				has_war = yes
				any_enemy_country = {
					strength_ratio = { 
						tag = ROOT 
						ratio < 0.4
					}
				}
			}
			modifier = {
				factor = 75
				16 = { NOT = { is_controlled_by = FRA } } #Paris	
			}
		} 
		JAP = {
			country_event = { days = 5 id = japan.6 }
		}
	}
	option = { # Refuse
		name = france.1.b
		ai_chance = { 
			factor = 25 
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
		JAP = {
			country_event = { days = 5 id = japan.7 }
		}
	}
}

# Maginot Line Extension
country_event = {
	id = france.2
	title = france.2.t
	desc = france.2.d
	picture = GFX_report_event_bunker_01
	
	is_triggered_only = yes
	
	option = {
		name = france.2.a
		18 = {
			add_building_construction = {
				type = bunker
				province = 5291
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 3560
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 9472
				level = 2
				instant_build = yes
			}
		}
		29 = {
			add_building_construction = {
				type = bunker
				province = 11606
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 11483
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 575
				level = 2
				instant_build = yes
			}
		}
		697 = {
			add_building_construction = {
				type = bunker
				province = 3447
				level = 2
				instant_build = yes
			}
		}
	}
}

# Alpine Line Extension
country_event = {
	id = france.3
	title = france.3.t
	desc = france.3.d
	picture = GFX_report_event_bunker_01

	is_triggered_only = yes
	
	option = {
		name = france.3.a
		735 = {
			add_building_construction = {
				type = bunker
				province = 764
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 9909
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 3959
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 6975
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 3764
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 9745
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 510
				level = 2
				instant_build = yes
			}
		}
	}
}

### The Fall of France

# The Battle is Lost
country_event = {
	id = france.10
	title = france.10.t
	desc = france.10.d
	picture = GFX_report_event_german_parade_paris
	
	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = { # Become Free French
		name = france.10.b
		ai_chance = {
			factor = 85
		}
		set_global_flag = fall_of_france
		save_global_event_target_as = free_france
	}
}

#Capital captured by non french faction
country_event = {
	id = france.16
	title = france.16.t
	desc = france.16.d
	picture = GFX_report_event_french_resistance_02

	fire_only_once = yes

	trigger = {
		original_tag = FRA
		16 = { controller = { NOT = { original_tag = FRA } } }
		has_capitulated = yes
		#16 = { is_owned_by = FRA }
	}
	
	option = {
		name = france.16.a
		remove_ideas = FRA_victors_of_wwi
		remove_ideas = FRA_disjointed_government
		remove_ideas = FRA_protected_by_the_maginot_line
	}
}

# Invitation to French Faction
country_event = {
	id = france.17
	title = france.17.t
	desc = france.17.d
	picture = GFX_report_event_worried_french
	
	is_triggered_only = yes
	
	option = {
		name = france.17.a
		ai_chance = { factor = 90 }
		FRA = {
			country_event = france.18
			add_to_faction = ROOT
		}
		add_ai_strategy = {
			type = alliance
			id = "FRA"
			value = 200
		}
	}

	option = {
		name = france.17.b
		ai_chance = { factor = 10 }
		FRA = { country_event = france.19 }
	}
}

# [Country] Accepts
country_event = {
	id = france.18
	title = france.18.t
	desc = france.18.d
	picture = GFX_report_event_soldiers_in_france
	
	is_triggered_only = yes
	
	option = {
		name = france.18.a
		effect_tooltip = {
			add_to_faction = FROM
		}
	}
}

# [Country] Refuses
country_event = {
	id = france.19
	title = france.19.t
	desc = france.19.d
	picture = GFX_report_event_finnish_letter
	
	is_triggered_only = yes
	
	option = {
		name = france.19.a
	}
}

# De Gaulle becomes leader
country_event = {
	id = france.20
	title = france.20.t
	desc = france.20.d
	picture = GFX_report_event_degaulle_churchill
	
	is_triggered_only = yes
	
	option = {
		custom_effect_tooltip = france.20.a_tt
		set_country_flag = france_de_gaulle
		hidden_effect =  {
			add_country_leader_role = {
				character = FRA_charles_de_gaulle
				country_leader = {
					expire = "1965.1.1"
					ideology = conservatism
					traits = {
					}	
				}
				promote_leader = yes				
			}		
		}
		name = france.20.a
	}
}

# French strikes
country_event = {
	id = france.21
	title = france.21.t
	desc = france.21.d
	picture = GFX_report_event_worker_protests
	
	trigger = {
		NOT = { has_government = communism }
		NOT = { has_idea = FRA_matignon_agreements }
		has_completed_focus = FRA_form_the_popular_front
		NOT = { has_country_flag = FRA_popular_front_cooldown }
		tag = FRA
		date > 1936.4.1
		date < 1938.1.1
	}

	fire_only_once = yes
	
	option = {
		ai_chance = {
			base = 15
		}
		name = france.21.a
		add_timed_idea = {
			idea = FRA_factory_strikes
			days = 360
		}
	}
}

# French strikes
country_event = {
	id = france.22
	title = france.21.t
	desc = france.21.d
	picture = GFX_report_event_worker_protests
	
	is_triggered_only = yes

	option = {
		ai_chance = {
			base = 15
		}
		name = france.21.a
		add_timed_idea = {
			idea = FRA_factory_strikes
			days = 60
		}
		hidden_effect = {
			country_event = { id = france.23 days = 60 }
		}
	}

	option = {
		ai_chance = {
			base = 85
		}
		name = france.21.b
		add_political_power = -50
	}
}

# Strikes are over
country_event = {
	id = france.23
	title = france.23.t
	desc = france.23.d
	picture = GFX_report_event_airplane_factory

	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = france.23.a
	}
}

# Vichy France: Germany is handing over some of our land
country_event = {
	id = france.27
	title = france.27.t
	desc = { 
		text = france.27.d_1_state 
		trigger = {
			OR = {
				NOT = { has_global_flag = ITA_claims_on_france_735 }
				has_global_flag = ITA_claims_on_france_1
			}
			OR = {
				has_global_flag = ITA_claims_on_france_735
				NOT = { has_global_flag = ITA_claims_on_france_1 }
			}
		} 
	}
	desc = { 
		text = france.27.d_both
		trigger = { 
			has_global_flag = ITA_claims_on_france_735 
			has_global_flag = ITA_claims_on_france_1
		} 
	}
	picture = GFX_report_event_worried_french

	is_triggered_only	= yes

	option = {
		name = france.27.a
		
		effect_tooltip = {
			if = {
				limit = { has_global_flag = ITA_claims_on_france_735 }
				ITA = { transfer_state = 735 }
			}
			if = {
				limit = { has_global_flag = ITA_claims_on_france_1 }
				ITA = { transfer_state = 1 }
			}
		}

		if = {
			limit = {
				has_global_flag = ITA_claims_on_france_735
				has_global_flag = ITA_claims_on_france_1
				OR = {
					owns_state = 554
					owns_state = 677
					owns_state = 680
				}

			}
			random_other_country = {
				limit = {
					original_tag = FRA
					has_government = democratic
				}
				if = {
					limit = { ROOT = { owns_state = 554 } }
					transfer_state = 554
				}
				if = {
					limit = { ROOT = { owns_state = 677 } }
					transfer_state = 677
				}
				if = {
					limit = { ROOT = { owns_state = 680 } }
					transfer_state = 680
				}
				country_event = france.28
			}
		}
	}

}

# France - Syria defects to us
country_event = {
	id = france.28
	title = france.28.t
	desc = france.28.d
	picture = GFX_report_event_worried_french

	is_triggered_only	= yes

	option = {
		name = france.28.a
	}

}

# France - Britain accepts Ally request
country_event = {
	id = france.29
	title = france.29.t
	desc = france.29.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		name = france.29.a
	}
}

# France - Britain denies Ally request
country_event = {
	id = france.30
	title = france.30.t
	desc = france.30.d
	picture = GFX_report_event_chamberlain

	is_triggered_only	= yes

	option = {
		name = france.30.a
	}
}

# Édouard Daladier Resigns
country_event = {
	id = france.31
	title = france.31.t
	desc = france.31.d
	picture = GFX_report_event_german_parade_paris

	fire_only_once = yes

	trigger = {
		original_tag = FRA
		has_government = democratic
		has_global_flag = fall_of_france
		NOT = { has_country_flag = france_de_gaulle }
	} 


	option = {
		name = france.31.a
		retire_country_leader = yes
		add_country_leader_role = {
			character = FRA_paul_reynaud
			country_leader = {
				expire = "1965.1.1"
				ideology = liberalism
				traits = {
				}
			}
			promote_leader = yes
		}
		set_country_flag = daladier_resigned
	}
}

# Britain is at peace after annexing France in the Franco-British Union
# AI will tend to release France if historic mode is on or they are democratic

country_event = {
	id = france.33
	title = france.33.title
	desc = france.33.desc
	
	picture = GFX_report_event_generic_peaceful_annexation
	
	fire_only_once = yes
	
	trigger = {
		tag = ENG
		has_war = no
		is_subject = no
		has_global_flag = flag_franco_british_union
		any_owned_state = {
			is_core_of = FRA
		}
	}
	

	option = { # Release
		name = france.33.a
		
		if = {
			limit = {
				has_cosmetic_tag = FRA_UK
			}
			drop_cosmetic_tag = yes
		}
		
		if = {
			limit = {
				NOT = { country_exists = FRA }
			}
			if = {
				limit = {
					has_government = democratic
				}
				FRA = {
					set_politics = {
						ruling_party = democratic
						elections_allowed = yes
					}
					set_popularities = {
						democratic = 60
						fascism = 20
						communism = 20
					}
				}
			}
			if = {
				limit = {
					has_government = fascism
				}
				FRA = {
					set_politics = {
						ruling_party = fascism
						elections_allowed = no
					}
					set_popularities = {
						democratic = 20
						fascism = 60
						communism = 20
					}
				}
			}
			if = {
				limit = {
					has_government = communism
				}
				FRA = {
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
					set_popularities = {
						democratic = 20
						fascism = 20
						communism = 60
					}
				}
			}
			if = {
				limit = {
					has_government = neutrality
				}
				FRA = {
					set_politics = {
						ruling_party = neutrality
						elections_allowed = no
					}
					set_popularities = {
						democratic = 15
						neutrality = 55
						fascism = 15
						communism = 15
					}
				}
			}
			release = FRA
			
			set_autonomy = { target = FRA autonomy_state = autonomy_free }
		}
		
		every_state = {
			limit = {
				is_core_of = ENG
				is_core_of = FRA
			}
			remove_core_of = ENG
		}
		
		hidden_effect = { # This looks odd in the tooltip
			every_other_country = {
				limit = {
					is_subject_of = ENG
				}
				every_owned_state = {
					limit = {
						is_core_of = FRA
					}
					FRA = {
						transfer_state = PREV
					}
				}
			}
		}
		
		if = {
			limit = {
				is_faction_leader = yes
				FRA = {
					is_subject = no
					is_in_faction = no
				}
			}
			add_to_faction = FRA
		}
		
		every_unit_leader = {
			limit = {
				has_unit_leader_flag = {
					flag = flag_former_french_general
				}
			}
			set_nationality = FRA
		}
		
		hidden_effect =  {
			news_event = { id = france.34 days = 1 }
		}
		
		ai_chance = {
			factor = 60
			
			modifier = {
				factor = 2
				has_government = democratic
			}
		}
	}
	
	option = { # Don't release
		name = france.33.b
		
		add_war_support = -0.1
		add_stability = -0.2
		
		every_state = {
			limit = {
				is_core_of = ENG
				is_core_of = FRA
			}
			remove_core_of = ENG
		}
		
		every_unit_leader = {
			limit = {
				has_unit_leader_flag = {
					flag = flag_former_french_general
				}
			}
			set_nationality = FRA
		}
		
		ai_chance = {
			factor = 40
			
			modifier = {
				factor = 0.5
				has_stability < 0.5
			}
			modifier = {
				factor = 0.5
				has_war_support < 0.5
			}
			modifier = {
				factor = 2
				has_government = fascism
			}
			modifier = {
				factor = 0.5
				is_historical_focus_on = yes
			}
		}
	}
}

# News event for the release of France

news_event = {
	id = france.34
	title = france.34.title
	desc = france.34.desc
	
	picture = GFX_news_event_degaulle_churchill
	
	is_triggered_only = yes
	
	option = {
		name = france.34.a
		trigger = {
			OR = {
				tag = ENG
				tag = FRA
				is_in_faction_with = ENG
				is_subject_of = ENG
			}
		}
	}
	
	option = {
		name = france.34.b
		trigger = {
			NOT = {
				OR = {
					tag = ENG
					tag = FRA
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
		}
	}
}

add_namespace = generic

# President dies
country_event = {
	id = generic.1
	title = generic.1.t
	desc = { 
		text = generic.1.d_neutral_good
		trigger = {
			has_government = FROM
		}
	}
	desc = {
		text = generic.1.d_bad
		trigger = {
			NOT = { has_government = FROM }
		}
	}
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	option = {
		name = generic.1.a
		trigger = {
			has_government = FROM
		}
	}
	option = {
		name = generic.1.b
		trigger = {
			NOT = { has_government = FROM }
		}
	}
}

# Generic request to join major Alliance
country_event = {
	id = generic.2
	title = generic.2.t
	desc = { # FROM and ROOT are Democratic
		text = generic.2.d.a
		trigger = {
			AND = {
				FROM = {
					has_government = democratic
				}
				has_government = democratic
			}
		}
	}
	desc = { # FROM and ROOT are Fascist
		text = generic.2.d.b
		trigger = {
			AND = {
				FROM = {
					has_government = fascism
				}
				has_government = fascism
			}
		}
	}
	desc = { # FROM and ROOT are Communist
		text = generic.2.d.c
		trigger = {
			AND = {
				FROM = {
					has_government = communism
				}
				has_government = communism
			}
		}
	}
	desc = { # FROM and ROOT are different ideologies
		text = generic.2.d.e
		trigger = {
			NOT = {
				AND = {
					FROM = {
						has_government = democratic
					}
					has_government = democratic
				}
				AND = {
					FROM = {
						has_government = fascism
					}
					has_government = fascism
				}
				AND = {
					FROM = {
						has_government = communism
					}
					has_government = communism
				}
			}
		}
	}
	picture = GFX_report_event_generic_read_write

	immediate = {
		hidden_effect = {
			save_event_target_as = alliance_inviter
			FROM = {
				save_event_target_as = alliance_applicant
			}
		}
	}

	is_triggered_only = yes
	
	option = { #Agree / Both Democratic
		name = generic.2.a
		trigger = {
			AND = {
				FROM = {
					has_government = democratic
				}
				has_government = democratic
			}
		}
		ai_chance = {
			base = 100
		}
		add_to_faction = FROM
		FROM = { country_event = { id = generic.3 hours = 6 } }
		hidden_effect = {
			set_country_flag = alliance_inviter@ROOT
			FROM = { set_country_flag = alliance_applicant@ROOT }
			news_event = { id = news.289 hours = 12 }
		}
	}
	option = { #Agree / Both Fascist
		name = generic.2.b
		trigger = {
			AND = {
				FROM = {
					has_government = fascism
				}
				has_government = fascism
			}
		}
		ai_chance = {
			base = 100
		}
		add_to_faction = FROM
		FROM = { country_event = { id = generic.3 hours = 6 } }
		hidden_effect = {
			set_country_flag = alliance_inviter@ROOT
			FROM = { set_country_flag = alliance_applicant@ROOT }
			news_event = { id = news.289 hours = 12 }
		}
	}
	option = { #Agree / Both Communist
		name = generic.2.c
		trigger = {
			AND = {
				FROM = {
					has_government = communism
				}
				has_government = communism
			}
		}
		ai_chance = {
			base = 100
		}
		add_to_faction = FROM
		FROM = { country_event = { id = generic.3 hours = 6 } }
		hidden_effect = {
			set_country_flag = alliance_inviter@ROOT
			FROM = { set_country_flag = alliance_applicant@ROOT }
			news_event = { id = news.289 hours = 12 }
		}
	}
	option = { #Agree / Both different
		name = generic.2.e
		trigger = {
			NOT = {
				AND = {
					FROM = {
						has_government = democratic
					}
					has_government = democratic
				}
				AND = {
					FROM = {
						has_government = fascism
					}
					has_government = fascism
				}
				AND = {
					FROM = {
						has_government = communism
					}
					has_government = communism
				}
			}
		}
		ai_chance = {
			base = 100
			
			modifier = {
				factor = 0.5
				has_war = no
				FROM = {
					has_war = yes
				}
			}
			
			modifier = {
				factor = 0.5
				NOT = {
					has_government = neutrality
				}
			}
			
			modifier = {
				factor = 0.75
				FROM = {
					is_major = no
				}
			}
		}
		add_to_faction = FROM
		FROM = { country_event = { id = generic.3 hours = 6 } }
		hidden_effect = {
			set_country_flag = alliance_inviter@ROOT
			FROM = { set_country_flag = alliance_applicant@ROOT }
			news_event = { id = news.289 hours = 12 }
		}
		FROM = {
			add_ai_strategy = {
				type = alliance
				id = ROOT
				value = 200
			}
		}
	}
	
	option = { #Reject
		name = generic.2.f
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 65
				}
			}
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 35
				}
			}
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 5
				}
			}
			
			modifier = {
				factor = 2.0
				has_opinion = {
					target = FROM
					value < 35
				}
			}
			
			modifier = {
				factor = 2.0
				has_opinion = {
					target = FROM
					value < 65
				}
			}
			
			modifier = {
				factor = 0.1
				has_war = yes
				FROM = {
					has_war = no
				}
			}
			
			modifier = {
				factor = 0.1
				FROM = {
					is_major = yes
				}
			}

			modifier = {
				factor = 10
				FROM = {
					OR = {
						is_subject = yes
						is_in_faction = yes
					}
				}
			}
		}
		FROM = { 
			country_event = { id = generic.4 hours = 6 }
		}
	}
}

# Generic accepted request to join major Alliance
country_event = {
	id = generic.3
	title = generic.3.t
	desc = generic.3.d

	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes
	
	option = {
		name = generic.3.a
		trigger = {
			AND = {
				FROM = {
					has_government = democratic
				}
				has_government = democratic
			}
		}
	}
	option = {
		name = generic.3.b
		trigger = {
			AND = {
				FROM = {
					has_government = fascism
				}
				has_government = fascism
			}
		}


	}
	option = {
		name = generic.3.c
		trigger = {
			AND = {
				FROM = {
					has_government = communism
				}
				has_government = communism
			}
		}
	}
	option = {
		name = generic.3.e
		trigger = {
			NOT = {
				AND = {
					FROM = {
						has_government = democratic
					}
					has_government = democratic
				}
				AND = {
					FROM = {
						has_government = fascism
					}
					has_government = fascism
				}
				AND = {
					FROM = {
						has_government = communism
					}
					has_government = communism
				}
			}
		}
	}
}

# Generic rejected request to join major Alliance
country_event = {
	id = generic.4
	title = generic.4.t
	desc = generic.4.d
	
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes
	
	option = {
		name = generic.4.a
		trigger = {
			AND = {
				FROM = {
					has_government = democratic
				}
				has_government = democratic
			}
		}
	}
	option = {
		name = generic.4.b
		trigger = {
			AND = {
				FROM = {
					has_government = fascism
				}
				has_government = fascism
			}
		}
	}
	option = {
		name = generic.4.c
		trigger = {
			AND = {
				FROM = {
					has_government = communism
				}
				has_government = communism
			}
		}
	}
	option = {
		name = generic.4.e
		trigger = {
			NOT = {
				AND = {
					FROM = {
						has_government = democratic
					}
					has_government = democratic
				}
				AND = {
					FROM = {
						has_government = fascism
					}
					has_government = fascism
				}
				AND = {
					FROM = {
						has_government = communism
					}
					has_government = communism
				}
			}
		}
	}
}

#####################################################################
#####################################################################

# Generic invitaton to join major Alliance
country_event = {
	id = generic.5
	title = generic.5.t
	desc = { # FROM and ROOT are Democratic
		text = generic.5.d.a
		trigger = {
			AND = {
				FROM = {
					has_government = democratic
				}
				has_government = democratic
			}
		}
	}
	desc = { # FROM and ROOT are Fascist
		text = generic.5.d.b
		trigger = {
			AND = {
				FROM = {
					has_government = fascism
				}
				has_government = fascism
			}
		}
	}
	desc = { # FROM and ROOT are Communist
		text = generic.5.d.c
		trigger = {
			AND = {
				FROM = {
					has_government = communism
				}
				has_government = communism
			}
		}
	}
	desc = { # FROM and ROOT are different ideologies
		text = generic.5.d.e
		trigger = {
			NOT = {
				AND = {
					FROM = {
						has_government = democratic
					}
					has_government = democratic
				}
				AND = {
					FROM = {
						has_government = fascism
					}
					has_government = fascism
				}
				AND = {
					FROM = {
						has_government = communism
					}
					has_government = communism
				}
			}
		}
	}
	picture = GFX_report_event_generic_read_write

	immediate = {
		hidden_effect = {
			save_event_target_as = alliance_applicant
			FROM = {
				save_event_target_as = alliance_inviter
			}
		}
	}

	is_triggered_only = yes
	
	option = { #Agree / Both Democratic
		name = generic.5.a
		trigger = {
			is_in_faction = no
			AND = {
				FROM = {
					has_government = democratic
				}
				has_government = democratic
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				original_tag = FRA
				is_in_faction_with = POL
			}
		}
		FROM = {
			faction_leader = {
				add_to_faction = ROOT
			}
			country_event = { id = generic.6 hours = 6 } 
		}
		add_ai_strategy = {
			type = alliance
			id = FROM
			value = 200
		}
		hidden_effect = {
			set_country_flag = alliance_applicant@ROOT
			FROM = { set_country_flag = alliance_inviter@ROOT }
			news_event = { id = news.289 hours = 12 }
		}
	}
	option = { #Agree / Both Fascist
		name = generic.5.b
		trigger = {
			is_in_faction = no
			AND = {
				FROM = {
					has_government = fascism
				}
				has_government = fascism
			}
		}
		ai_chance = {
			base = 100
		}
		FROM = { 
			add_to_faction = ROOT
			country_event = { id = generic.6 hours = 6 } 
		}
		add_ai_strategy = {
			type = alliance
			id = FROM
			value = 200
		}
		hidden_effect = {
			set_country_flag = alliance_applicant@ROOT
			FROM = { set_country_flag = alliance_inviter@ROOT }
			news_event = { id = news.289 hours = 12 }
		}
	}
	option = { #Agree / Both Communist
		name = generic.5.c
		trigger = {
			is_in_faction = no
			AND = {
				FROM = {
					has_government = communism
				}
				has_government = communism
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				original_tag = FRA
				is_in_faction_with = POL
			}
		}
		FROM = { 
			add_to_faction = ROOT
			country_event = { id = generic.6 hours = 6 }
		}
		add_ai_strategy = {
			type = alliance
			id = FROM
			value = 200
		}
		hidden_effect = {
			set_country_flag = alliance_applicant@ROOT
			FROM = { set_country_flag = alliance_inviter@ROOT }
			news_event = { id = news.289 hours = 12 }
		}
	}
	option = { #Agree / Both different
		name = generic.5.e
		trigger = {
			is_in_faction = no
			NOT = {
				AND = {
					FROM = {
						has_government = democratic
					}
					has_government = democratic
				}
				AND = {
					FROM = {
						has_government = fascism
					}
					has_government = fascism
				}
				AND = {
					FROM = {
						has_government = communism
					}
					has_government = communism
				}
			}
		}
		ai_chance = {
			base = 100
			
			modifier = {
				factor = 0.5
				has_war = no
				FROM = {
					has_war = yes
				}
			}
			
			modifier = {
				factor = 0.5
				NOT = {
					has_government = neutrality
				}
			}
			
			modifier = {
				factor = 0.75
				FROM = {
					is_major = no
				}
			}
			
			modifier = {
				factor = 0
				original_tag = FRA
				is_in_faction_with = POL
			}
		}
		FROM = { 
			faction_leader = {
				add_to_faction = ROOT
			}
			
			country_event = { id = generic.6 hours = 6 }
		}
		add_ai_strategy = {
			type = alliance
			id = FROM
			value = 200
		}
		hidden_effect = {
			set_country_flag = alliance_applicant@ROOT
			FROM = { set_country_flag = alliance_inviter@ROOT }
			news_event = { id = news.289 hours = 12 }
		}
	}
	
	option = { #Reject
		name = generic.2.f
		trigger = {
			is_in_faction = no
		}
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 0
				FROM = {
					original_tag = YUG
					has_government = communism
				}
				has_government = communism
			}
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 65
				}
			}
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 35
				}
			}
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 5
				}
			}
			
			modifier = {
				factor = 2.0
				has_opinion = {
					target = FROM
					value < 35
				}
			}
			
			modifier = {
				factor = 2.0
				has_opinion = {
					target = FROM
					value < 65
				}
			}
			
			modifier = {
				factor = 0.1
				has_war = yes
				FROM = {
					has_war = no
				}
			}
			
			modifier = {
				factor = 0.1
				FROM = {
					is_major = yes
				}
			}
		}
		FROM = { 
			country_event = { id = generic.7 hours = 6 }
		}
	}

	option = { #Reject if in faction
		name = generic.2.g
		trigger = {
			is_in_faction = yes
		}
		FROM = { 
			country_event = { id = generic.7 hours = 6 }
		}
	}
}

# Generic accepted invitation to join major Alliance
country_event = {
	id = generic.6
	title = generic.6.t
	desc = generic.6.d

	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes
	
	option = {
		name = generic.3.a
		trigger = {
			AND = {
				FROM = {
					has_government = democratic
				}
				has_government = democratic
			}
		}
	}
	option = {
		name = generic.3.b
		trigger = {
			AND = {
				FROM = {
					has_government = fascism
				}
				has_government = fascism
			}
		}


	}
	option = {
		name = generic.3.c
		trigger = {
			AND = {
				FROM = {
					has_government = communism
				}
				has_government = communism
			}
		}
	}
	option = {
		name = generic.3.e
		trigger = {
			NOT = {
				AND = {
					FROM = {
						has_government = democratic
					}
					has_government = democratic
				}
				AND = {
					FROM = {
						has_government = fascism
					}
					has_government = fascism
				}
				AND = {
					FROM = {
						has_government = communism
					}
					has_government = communism
				}
			}
		}
	}
}

# Generic rejected invitation to join major Alliance
country_event = {
	id = generic.7
	title = generic.7.t
	desc = generic.7.d
	
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes
	
	option = {
		name = generic.7.a
		trigger = {
			AND = {
				FROM = {
					has_government = democratic
				}
				has_government = democratic
			}
		}
	}
	option = {
		name = generic.4.b
		trigger = {
			AND = {
				FROM = {
					has_government = fascism
				}
				has_government = fascism
			}
		}
	}
	option = {
		name = generic.4.c
		trigger = {
			AND = {
				FROM = {
					has_government = communism
				}
				has_government = communism
			}
		}
	}
	option = {
		name = generic.4.e
		trigger = {
			NOT = {
				AND = {
					FROM = {
						has_government = democratic
					}
					has_government = democratic
				}
				AND = {
					FROM = {
						has_government = fascism
					}
					has_government = fascism
				}
				AND = {
					FROM = {
						has_government = communism
					}
					has_government = communism
				}
			}
		}
	}

}

# Race for the Bomb success event
country_event = {
	id = generic.8
	title = generic.8.t
	desc = generic.8.d
	
	picture = GFX_report_event_physics_lab_01 #todo picture of Little Boy

	is_triggered_only = yes
	
	option = {
		name = generic.8.a
		clr_country_flag = racing_for_the_bomb
		remove_ideas = race_for_the_bomb
		add_war_support = 0.1
		every_other_country = {
			limit = {
				has_country_flag = racing_for_the_bomb
				NOT = { is_in_faction_with = ROOT }
			}
			country_event = { id = generic.9 }
		}
		every_other_country = {
			limit = {
				has_country_flag = racing_for_the_bomb
				is_in_faction_with = ROOT
			}
			country_event = { id = generic.10 }
		}
	}	
}

# Race for the Bomb failure event
country_event = {
	id = generic.9
	title = generic.9.t
	desc = generic.9.d
	
	picture = GFX_report_event_physics_lab_01

	is_triggered_only = yes
	
	option = {
		name = generic.9.a
		clr_country_flag = racing_for_the_bomb
		remove_ideas = race_for_the_bomb
		add_timed_idea = { idea = race_for_the_bomb_outclassed days = 360 }
		add_stability = -0.1
	}	
}

# Race for the Bomb faction member success event
country_event = {
	id = generic.10
	title = generic.10.t
	desc = generic.10.d
	
	picture = GFX_report_event_physics_lab_01

	is_triggered_only = yes
	
	option = {
		name = generic.10.a
		clr_country_flag = racing_for_the_bomb
		remove_ideas = race_for_the_bomb
		add_war_support = 0.05
	}	
}

# Ideology civil war won
country_event = {
	id = generic.11
	title = generic.11.t
	desc = generic.11.d
	
	picture = GFX_report_event_generic_ruins

	is_triggered_only = yes
	
	option = {
		name = generic.11.a
		clr_country_flag = ideology_civil_war
	}	
}

# Enemy attempting to destroy Suez
country_event = {
	id = generic.12
	title = generic.12.t
	desc = generic.12.d
	
	picture = GFX_report_event_merchant_ship_01

	is_triggered_only = yes
	
	option = {
		name = generic.12.a
		custom_effect_tooltip = canals_tt
	}	
}

# Enemy attempting to destroy Panama
country_event = {
	id = generic.13
	title = generic.13.t
	desc = generic.13.d
	
	picture = GFX_report_event_merchant_ship_01

	is_triggered_only = yes
	
	option = {
		name = generic.12.a
		custom_effect_tooltip = canals_tt
	}	
}

# Object to Attaches
country_event = {
	id = generic.14
	title = generic.14.t
	desc = generic.14.d
	
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes
	
	# Agree - recall attache
	option = {
		name = generic.14.a
		ai_chance = {
			base = 80
			modifier = {
				factor = 1.5
				has_opinion = { target = FROM value > 50 }
			}
			modifier = {
				factor = 1.5
				has_opinion = { target = FROM value > 75 }
			}
		}
		random_other_country = {
			limit = {
				has_war_with = FROM
				has_attache_from = ROOT
			}
			ROOT = { recall_attache = PREV }
		}
		FROM = {
			country_event = { id = generic.15 days = 1 }
		}
		clr_country_flag = object_attache_going_on
	}	

	# Reject demands
	option = {
		name = generic.14.b
		ai_chance = {
			base = 20
			modifier = {
				factor = 2
				has_opinion = { target = FROM value < 0 }
			}
			modifier = {
				factor = 3
				has_opinion = { target = FROM value < -20 }
			}
			modifier = {
				factor = 3
				has_opinion = { target = FROM value < -50 }
			}
		}
		custom_effect_tooltip = attache_political_power_tt
		if = {
			limit = {
				NOT = { strength_ratio = { tag = FROM ratio < 3 } }
			}
			if = {
				limit = {
					has_opinion = { target = FROM value > -25 }
					NOT = { has_opinion = { target = FROM value > 0 } }
				}
				add_political_power = -5
			}
			if = {
				limit = {
					has_opinion = { target = FROM value > 0 }
					NOT = { has_opinion = { target = FROM value > 50 } }
	
				}
				add_political_power = -10
			}
			if = {
				limit = { has_opinion = { target = FROM value > 50 } }
				add_political_power = -15
			}
		}
		if = {
			limit = {
				strength_ratio = { tag = FROM ratio < 3 }
				NOT = { strength_ratio = { tag = FROM ratio < 2.5 } }
			}
			if = {
				limit = {
					has_opinion = { target = FROM value > -25 }
					NOT = { has_opinion = { target = FROM value > 0 } }
				}
				add_political_power = -10
			}
			if = {
				limit = {
					has_opinion = { target = FROM value > 0 }
					NOT = { has_opinion = { target = FROM value > 50 } }
	
				}
				add_political_power = -20
			}
			if = {
				limit = { has_opinion = { target = FROM value > 50 } }
				add_political_power = -30
			}
		}
		if = {
			limit = {
				strength_ratio = { tag = FROM ratio < 2.5 }
				NOT = { strength_ratio = { tag = FROM ratio < 2 } }
			}
			if = {
				limit = {
					has_opinion = { target = FROM value > -25 }
					NOT = { has_opinion = { target = FROM value > 0 } }
				}
				add_political_power = -15
			}
			if = {
				limit = {
					has_opinion = { target = FROM value > 0 }
					NOT = { has_opinion = { target = FROM value > 50 } }
	
				}
				add_political_power = -30
			}
			if = {
				limit = { has_opinion = { target = FROM value > 50 } }
				add_political_power = -45
			}
		}
		if = {
			limit = {
				strength_ratio = { tag = FROM ratio < 2 }
				NOT = { strength_ratio = { tag = FROM ratio < 1.5 } }
			}
			if = {
				limit = {
					has_opinion = { target = FROM value > -25 }
					NOT = { has_opinion = { target = FROM value > 0 } }
				}
				add_political_power = -20
			}
			if = {
				limit = {
					has_opinion = { target = FROM value > 0 }
					NOT = { has_opinion = { target = FROM value > 50 } }
	
				}
				add_political_power = -40
			}
			if = {
				limit = { has_opinion = { target = FROM value > 50 } }
				add_political_power = -60
			}
		}
		if = {
			limit = {
				strength_ratio = { tag = FROM ratio < 1.5 }
			}
			if = {
				limit = {
					has_opinion = { target = FROM value > -25 }
					NOT = { has_opinion = { target = FROM value > 0 } }
				}
				add_political_power = -25
			}
			if = {
				limit = {
					has_opinion = { target = FROM value > 0 }
					NOT = { has_opinion = { target = FROM value > 50 } }
	
				}
				add_political_power = -50
			}
			if = {
				limit = { has_opinion = { target = FROM value > 50 } }
				add_political_power = -75
			}
		}
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = rejected_demands }
			country_event = { id = generic.16 days = 1 }
		}
		hidden_effect = {
			set_country_flag = { flag = rejected_withdrawing_attache value = 1 days = 90 }
			set_country_flag = { flag = rejected_withdrawing_attache@FROM value = 1 days = 365 }
			clr_country_flag = object_attache_going_on
		}
		if = {
			limit = {
				FROM = { has_government = fascism }
				NOT = { has_government = fascism }
				fascism > 0.1
				NOT = { fascism > 0.2 }
				strength_ratio = { tag = FROM ratio < 1.2 }
			}
			custom_effect_tooltip = attache_fascism_tt
			add_stability = -0.025
		}
		if = {
			limit = {
				FROM = { has_government = fascism }
				NOT = { has_government = fascism }
				fascism > 0.2
				NOT = { fascism > 0.3 }
				strength_ratio = { tag = FROM ratio < 1.2 }
			}
			custom_effect_tooltip = attache_fascism_tt
			add_stability = -0.05
		}
		if = {
			limit = {
				FROM = { has_government = fascism }
				NOT = { has_government = fascism }
				fascism > 0.3
				NOT = { fascism > 0.4 }
				strength_ratio = { tag = FROM ratio < 1.2 }
			}
			custom_effect_tooltip = attache_fascism_tt
			add_stability = -0.075
		}
		if = {
			limit = {
				FROM = { has_government = fascism }
				NOT = { has_government = fascism }
				fascism > 0.4
				strength_ratio = { tag = FROM ratio < 1.2 }
			}
			custom_effect_tooltip = attache_fascism_tt
			add_stability = -0.1
		}
		if = {
			limit = {
				FROM = { has_government = communism }
				communism > 0.1
				NOT = { communism > 0.2 }
				strength_ratio = { tag = FROM ratio < 1.2 }
			}
			custom_effect_tooltip = attache_communism_tt
			add_stability = -0.025
		}
		if = {
			limit = {
				FROM = { has_government = communism }
				NOT = { has_government = communism }
				communism > 0.2
				NOT = { communism > 0.3 }
				strength_ratio = { tag = FROM ratio < 1.2 }
			}
			custom_effect_tooltip = attache_communism_tt
			add_stability = -0.05
		}
		if = {
			limit = {
				FROM = { has_government = communism }
				NOT = { has_government = communism }
				communism > 0.3
				NOT = { communism > 0.4 }
				strength_ratio = { tag = FROM ratio < 1.2 }
			}
			custom_effect_tooltip = attache_communism_tt
			add_stability = -0.075
		}
		if = {
			limit = {
				FROM = { has_government = communism }
				NOT = { has_government = communism }
				communism > 0.4
				strength_ratio = { tag = FROM ratio < 1.2 }
			}
			custom_effect_tooltip = attache_communism_tt
			add_stability = -0.1
		}
		if = {
			limit = {
				FROM = { has_government = democratic }
				NOT = { has_government = democratic }
				democratic > 0.1
				NOT = { democratic > 0.2 }
				strength_ratio = { tag = FROM ratio < 1.2 }
			}
			custom_effect_tooltip = attache_democratic_tt
			add_stability = -0.025
		}
		if = {
			limit = {
				FROM = { has_government = democratic }
				NOT = { has_government = democratic }
				democratic > 0.2
				NOT = { democratic > 0.3 }
				strength_ratio = { tag = FROM ratio < 1.2 }
			}
			custom_effect_tooltip = attache_democratic_tt
			add_stability = -0.05
		}
		if = {
			limit = {
				FROM = { has_government = democratic }
				NOT = { has_government = democratic }
				democratic > 0.3
				NOT = { democratic > 0.4 }
				strength_ratio = { tag = FROM ratio < 1.2 }
			}
			custom_effect_tooltip = attache_democratic_tt
			add_stability = -0.075
		}
		if = {
			limit = {
				FROM = { has_government = democratic }
				NOT = { has_government = democratic }
				democratic > 0.4
				strength_ratio = { tag = FROM ratio < 1.2 }
			}
			custom_effect_tooltip = attache_democratic_tt
			add_stability = -0.1
		}
	}	
}

# Notification event that TAG withdrew attache
country_event = {
	id = generic.15
	title = generic.15.t
	desc = generic.15.d
	
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	option = {
		name = excellent
	}	
}

# Notification event that TAG refused to withdraw attache
country_event = {
	id = generic.16
	title = generic.16.t
	desc = generic.16.d
	
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	option = {
		name = generic.16.a
		effect_tooltip = {
			add_opinion_modifier = { target = FROM modifier = rejected_demands }
		}
	}	
}

# Notification event that FROM has sent industrial support
country_event = {
	id = generic.19
	title = generic.19.t
	desc = generic.19.d
	
	picture = GFX_report_event_generic_factory

	is_triggered_only = yes

	option = {
		name = excellent
		effect_tooltip = {
			add_offsite_building = { type = arms_factory level = 2 }
		}
	}	
}

#Become a puppet
country_event = {
	id = generic.20
	title = generic.20.t
	desc = {
		text = generic.20.d_friends
		trigger = {
			has_opinion = {
				target = FROM
				value = 150
			}
		}
	}
	desc = {
		text = generic.20.d_enemies
		trigger = {
			NOT = { 
				has_opinion = {
					target = FROM
					value = 150
				}
			}
		}
	}
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {
		name = generic.20.a
		trigger = {
			NOT = { 
				has_opinion = {
					target = FROM
					value = 150
				}
			}
		}
		ai_chance = {
			factor = 20
			modifier = {
				threat > 20
				factor = 2
			}
			modifier = {
				is_in_faction = no
				factor = 2
			}
			modifier = {
				is_in_faction_with = FROM
				factor = 2
			}
			modifier = {
				is_in_faction = yes
				NOT = { is_in_faction_with = FROM }
				factor = 0.5
			}
		}
		effect_tooltip = { 
			FROM = { puppet = ROOT }
			if = {
				limit = {
					FROM = { is_in_faction = yes }
				}
				random_country = {
					limit = { 
						is_in_faction_with = FROM 
						is_faction_leader = yes
					}
					add_to_faction = ROOT
				}
			}
		}
		hidden_effect = {
			FROM = { country_event = { id = generic.21 hours = 6 } }
		}
	}

	option = {
		name = generic.20.b
		trigger = {
			has_opinion = {
				target = FROM
				value = 150
			}
		}
		ai_chance = {
			factor = 25
			modifier = {
				threat > 20
				factor = 2
			}
			modifier = {
				is_in_faction = no
				factor = 2
			}
			modifier = {
				is_in_faction_with = FROM
				factor = 2
			}
			modifier = {
				is_in_faction = yes
				NOT = { is_in_faction_with = FROM }
				factor = 0.5
			}
		}
		effect_tooltip = { 
			FROM = { puppet = ROOT }
			if = {
				limit = {
					FROM = { is_in_faction = yes }
				}
				random_country = {
					limit = { 
						is_in_faction_with = FROM 
						is_faction_leader = yes
					}
					add_to_faction = ROOT
				}
			}
		}
		hidden_effect = {
			FROM = { country_event = { id = generic.21 hours = 6 } }
		}
	}

	option = {
		name = generic.20.c
		ai_chance = {
			factor = 30
			modifier = {
				is_in_faction = yes
				NOT = { is_in_faction_with = FROM }
				factor = 2
			}
			modifier = {
				threat < 20
				factor = 2
			}
		}
		effect_tooltip = { 
			FROM = { 
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ROOT
				}
			}
		}
		hidden_effect = {
			FROM = { country_event = { id = generic.22 hours = 6 } }
		}
	}

}

#Became puppet
country_event = {
	id = generic.21
	title = generic.21.t
	desc = generic.21.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {
		name = generic.21.a
		ai_chance = {
			factor = 1
		}
		ROOT = { puppet = FROM }
		if = {
			limit = {
				ROOT = { is_in_faction = yes }
			}
			random_country = {
				limit = { 
					is_in_faction_with = ROOT 
					is_faction_leader = yes
				}
				add_to_faction = FROM
			}
		}
	}

}

#Denied puppet
country_event = {
	id = generic.22
	title = generic.22.t
	desc = generic.22.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {
		name = generic.22.a
		ai_chance = {
			factor = 1
		}
		ROOT = { 
			create_wargoal = {
				type = puppet_wargoal_focus
				target = FROM
			}
		}
	}

}

# generic event for demanding territory
country_event = {
	id = generic.23
	title = generic.23.t
	desc = generic.23.d
	
	picture = GFX_report_event_czech_soldiers_01

	is_triggered_only = yes

	option = {
		name = generic.23.a
		ai_chance = {
			factor = 90
			modifier = { # If they stand a chance they will fight
				factor = 0
				strength_ratio = {
					tag = FROM
					ratio > 0.75
				}
				NOT = {
					any_neighbor_country = {
						NOT = { tag = FROM }
						is_in_faction_with = FROM
					}
				}
			}
			modifier = {
				factor = 0 #if you lead a faction, fight
				is_faction_leader = yes
			}
			modifier = {
				factor = 0.5 #if you are in a faction, maybe fight
				is_faction_leader = no
				is_in_faction = yes
			}
			modifier = { # Increase it again if other bordering nations are in the enemy faction
				any_neighbor_country = {
					NOT = { tag = FROM }
					is_in_faction_with = FROM
				}
				factor = 2.0
			}
		}
		effect_tooltip = {
			FROM = { transfer_state = event_target:demanded_prov_target }
			if = {
				limit = {
					event_target:demanded_prov_target = { has_state_flag = give_core_to_state_flag }
				}
			event_target:demanded_prov_target = { add_core_of = FROM }
			}
		}
		hidden_effect = {
			FROM = { country_event = generic.24 }
		}
	}

	option = {
		name = generic.23.b
		ai_chance = { 
			factor = 10 
			modifier = {
				factor = 0.5
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
			}
		}
		custom_effect_tooltip = maybe_war_tt
		hidden_effect = {
			FROM = { country_event = generic.25 }
		}
	}
}

# accepted demands
country_event = {
	id = generic.24
	title = generic.24.t
	desc = generic.24.d
	
	picture = GFX_report_event_czech_soldiers_01

	is_triggered_only = yes

	option = {
		name = excellent
		THIS = { transfer_state = event_target:demanded_prov_target }
		if = {
			limit = {
				event_target:demanded_prov_target = { has_state_flag = give_core_to_state_flag }
			}
			event_target:demanded_prov_target = { 
				add_core_of = THIS
				clr_state_flag = give_core_to_state_flag
			}
		}
		hidden_effect = { clear_global_event_target = demanded_prov_target }
	}
}

# accepted demands
country_event = {
	id = generic.25
	title = generic.25.t
	desc = generic.25.d
	
	picture = GFX_report_event_czech_soldiers_01

	is_triggered_only = yes

	option = {
		name = generic.25.a
		ai_chance = {
			factor = 90
		}
		create_wargoal = {
			type = annex_everything 
			target = FROM
		}
		hidden_effect = { clear_global_event_target = demanded_prov_target }
	}
}
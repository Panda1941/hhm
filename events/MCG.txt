add_namespace = MCG

## Commie Civil War
country_event = {
	id = MCG.1
	title = MCG.1.t
	desc = MCG.1.d
	picture = GFX_report_event_ger_civil_war

	is_triggered_only = yes
	
	#civil war starts
	option = {
		name = MCG.1.a
		hidden_effect = {
			set_capital = { state = 58 }
			start_civil_war = {
				ruling_party = communism
				ideology = fascism
				size = 0.5
				capital = 64
				states = { 64 65 66 67 68 63 62 60 5 763 54 53 52 50}
			}
			load_oob = "GER_German_Civil_War_Commie"
			random_other_country = {
				limit = {
					original_tag = GER
					has_government = fascism
				}
				set_stability = 0.9
				set_war_support = 0.8
				load_oob = "GER_German_Civil_War_fascist"
			}
			hidden_effect = { news_event = { id = wtt_news.1 hours = 6 } }
			
			add_popularity = {
				ideology = communism
				popularity = 0.45
			}
			set_stability = 0.9
			set_war_support = 0.8
		}
		custom_effect_tooltip = GER_fascism_civil_war_tt
		add_stability = -0.25
		hidden_effect = { 
			remove_country_leader_trait = exiled
			add_country_leader_trait = headstrong


		}
		random_other_country = {
			limit = {
				original_tag = GER
				has_government = fascism
			}
			set_cosmetic_tag = GER_civil_war
			hidden_effect = { activate_mission = GER_mefo_bills_mission }
		}
		hidden_effect = {
			random_other_country = {
				limit = {
					original_tag = GER
					has_government = fascism
				}
				save_event_target_as = fascist_germany_civil_war
				every_unit_leader = {
					set_nationality = GER
				}
			}
			GER = {
				every_unit_leader = {
					limit = {
						OR = {
							has_id = 10
							has_id = 15
							has_id = 20
							has_id = 24
						}
					}
					set_nationality = event_target:fascist_germany_civil_war
				}
			}
			if = {
				limit = {
					is_ai = yes
				}
				add_political_power = 150
				add_equipment_to_stockpile = {
				    type = infantry_equipment
				    amount = 10000
				    producer = GER
				}
				add_equipment_to_stockpile = {
				    type = support_equipment
				    amount = 250
				    producer = GER
				}
				add_equipment_to_stockpile = {
				    type = artillery_equipment
				    amount = 500
				    producer = GER
				}
			}
		}
	}
}

add_namespace = commiegermany

#Invite to faction
country_event = {
	id = commiegermany.1
	title = commiegermany.1.t
	desc = commiegermany.1.desc
	picture = GFX_report_event_gre_balkan_pact

	is_triggered_only = yes
	
	option = {
		name = commiegermany.1.a #accept
		trigger = { is_subject = no } 
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				ROOT = { has_government = communism }
			}
		}
		GER = { add_to_faction = ROOT }
		if = {
			limit = {
				num_subjects > 0
			}
			every_other_country = {
				limit = { is_subject_of = ROOT }
				GER = { add_to_faction = PREV }
			}
		}
		hidden_effect = {
			GER = { country_event = { id = commiegermany.2 hours = 6 } } 
		}
	}

	option = {
		name = commiegermany.1.b #reject
		ai_chance = {
			factor = 99
		}
		custom_effect_tooltip = commiegermany.1.wargoal
		hidden_effect = {
			GER = { country_event = { id = commiegermany.3 hours = 8 } } 
		}
	}
}

#ACCEPTED FACTION INVITE
country_event = {
	id = commiegermany.2
	title = commiegermany.2.t
	desc = commiegermany.2.desc
	picture = GFX_report_event_gre_balkan_pact

	is_triggered_only = yes
	
	option = {
		name = commiegermany.2.a #poggies
		effect_tooltip = { 
			GER = { add_to_faction = FROM }
		}
	}
}

#DECLINED FACTION INVITE
country_event = {
	id = commiegermany.3
	title = commiegermany.3.t
	desc = commiegermany.3.desc
	picture = GFX_report_event_gre_balkan_pact

	is_triggered_only = yes
	
	option = {
		name = commiegermany.3.a #virg
		create_wargoal = {
			    type = topple_government
			    target = FROM
		}
	}
}
